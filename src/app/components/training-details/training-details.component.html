<section class="mx-lg-5 px-lg-3 my-lg-3">
  <ng-container *ngIf="trainingDetails$ | async as trainingDetails">
    <mat-card>
      <mat-card-title class="text-end m-3 mb-0">
        <div class="container">
          <div class="row flex-row-reverse">
            <div class="col-md-2 col-sm-2 col-3 p-0">
              <button
                class="btn btn-block button-font p-1 sd-bg-color text-ghostwhite"
                (click)="
                  openRaitingModal(
                    'training',
                    1000,
                    trainingDetails.id,
                    trainingDetails.raitingCommentTraining,
                    trainingDetails.raitingValueTraining,
                    trainingDetails.hasFill
                  )
                "
              >
                Podsumuj trening
              </button>
            </div>
            <div class="col-md-2 col-5 pe-0" *ngIf="user$ | async as user">
              <button
                class="btn btn-block button-font p-1 sd-bg-color text-ghostwhite"
                (click)="openDriveGoogle(user.driveLink)"
              >
                Dodaj nagrania
              </button>
            </div>
          </div>
        </div>
      </mat-card-title>

      <div
        class="container mt-3 px-3"
        *ngFor="let training of trainingDetails.trainingElements; let i = index"
      >
        <div class="row d-flex justify-content-center">
          <div class="col-1 p-0 text-center">
            <span>{{ i + 1 }}.</span>
          </div>
          <div class="col">
            <div class="row">
              <div class="border rounded mb-3">
                <div class="row align-items-center">
                  <div class="pt-3 ps-4 text-title">
                    <span class="bg-white">Ćwiczenie</span>
                  </div>
                </div>
                <p class="mx-1 mb-1">{{ training.exercise }}</p>
              </div>
            </div>
            <div class="row">
              <div class="border rounded mb-3">
                <div class="row align-items-center">
                  <div class="pt-3 ps-4 text-title">
                    <span class="text-title-without-btn bg-white"
                      >Komentarz</span
                    >
                  </div>
                </div>
                <p class="mx-1 mb-1">{{ training.comment }}</p>
              </div>
            </div>
          </div>
          <div class="col-md ms-5 ms-md-0">
            <div class="row">
              <div class="col-sm">
                <div class="row ps-3 mb-1">
                  <div class="col-2 ps-2 col-md-3 col-sm-3 border-right">
                    <div class="row">
                      <p class="mb-0 p-0 text-center bg-success text-white">
                        Obciazenie
                      </p>
                    </div>
                    <div class="row">
                      <p class="mb-0 p-0 text-center bg-info">Serie</p>
                    </div>
                    <div class="row">
                      <p class="mb-0 p-0 text-center bg-warning">Powtórzenia</p>
                    </div>
                  </div>
                  <div class="col ps-0 d-flex flex-wrap">
                    <div
                      class="border-right"
                      *ngFor="let quantity of training.quantity"
                    >
                      <div class="container">
                        <div class="row">
                          <p
                            class="mb-0 px-1 text-center bg-success text-white"
                          >
                            {{ quantity.value }}
                          </p>
                        </div>
                        <div class="row">
                          <p class="mb-0 px-1 bg-info text-center">
                            {{ quantity.set }}
                          </p>
                        </div>
                        <div class="row">
                          <p class="mb-0 px-1 bg-warning text-center">
                            {{ quantity.rep }}
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row d-flex mb-1 mt-3 me-5">
                  <div class="d-inline-flex justify-content-end">
                    <button
                      class="btn btn-block button-font p-1 sd-bg-color text-ghostwhite"
                      (click)="
                        openRaitingModal(
                          'exercise',
                          training.index,
                          trainingDetails.id,
                          training.raitingCommentExercise,
                          training.raitingValueExercise,
                          trainingDetails.hasFill,
                          training.quantity,
                          training.exerciseValue
                        )
                      "
                    >
                      Podsumuj ćwiczenie
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <mat-divider></mat-divider>
      </div>
    </mat-card>
  </ng-container>
</section>
