"use strict";(self.webpackChunkTraining=self.webpackChunkTraining||[]).push([[179],{2011:(wt,Me,V)=>{V.d(Me,{Dh:()=>ve,GT:()=>oe,cc:()=>Se,hO:()=>He,on:()=>q,pX:()=>de,xv:()=>we});var d=V(4650),$=V(9260),O=V(4976);wt=V.hmd(wt);const re=["ngOnDestroy"],de=(Re,Oe,je,De={})=>new Proxy(Re,{get:(Te,Pe)=>je.runOutsideAngular(()=>{var ze;if(Re[Pe])return!(null===(ze=De?.spy)||void 0===ze)&&ze.get&&De.spy.get(Pe,Re[Pe]),Re[Pe];if(re.indexOf(Pe)>-1)return()=>{};const Le=Oe.toPromise().then(le=>{const it=le&&le[Pe];return"function"==typeof it?it.bind(le):it&&it.then?it.then(Dt=>je.run(()=>Dt)):je.run(()=>it)});return new Proxy(()=>{},{get:(le,it)=>Le[it],apply:(le,it,Dt)=>Le.then(ot=>{var qt;const ht=ot&&ot(...Dt);return!(null===(qt=De?.spy)||void 0===qt)&&qt.apply&&De.spy.apply(Pe,Dt,ht),ht})})})}),oe=(Re,Oe)=>{Oe.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(De=>{Object.defineProperty(Re.prototype,De,Object.getOwnPropertyDescriptor(je.prototype||je,De))})})};class xe{constructor(Oe){return Oe}}const ve=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function q(Re,Oe,je){const Te="object"==typeof je&&je||{};Te.name=Te.name||"string"==typeof je&&je||"[DEFAULT]";const ze=$.Z.apps.filter(Le=>Le&&Le.name===Te.name)[0]||Oe.runOutsideAngular(()=>$.Z.initializeApp(Re,Te));try{JSON.stringify(Re)!==JSON.stringify(ze.options)&&W("error",`${ze.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new xe(ze)}const W=(Re,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Re](...Oe)},ee={provide:xe,useFactory:q,deps:[ve,d.R0b,[new d.FiY,we]]};let He=(()=>{class Re{constructor(je){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",d.q4F.full,je.toString())}static initializeApp(je,De){return{ngModule:Re,providers:[{provide:ve,useValue:je},{provide:we,useValue:De}]}}}return Re.\u0275fac=function(je){return new(je||Re)(d.LFG(d.Lbi))},Re.\u0275mod=d.oAB({type:Re}),Re.\u0275inj=d.cJS({providers:[ee]}),Re})();function Se(Re,Oe,je,De,Te){const[,Pe,ze]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Re)||[];if(Pe)return function qe(Re,Oe){try{return Re.toString()===Oe.toString()}catch{return Re===Oe}}(Te,ze)||(be("error",`${Oe} was already initialized on the ${je} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:Te,was:ze})),Pe;{const Le=De();return globalThis.\u0275AngularfireInstanceCache.push([Re,Le,Te]),Le}}const at=!!wt.hot,be=(Re,...Oe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Re](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(wt,Me,V)=>{V.d(Me,{q4:()=>hl,iC:()=>ch,HU:()=>Ea,vb:()=>Zf,JM:()=>ml,u3:()=>jn});var d=V(4650),$=V(259),O=V(5861),re=V(6881),de=V(2090),oe=V(4859),xe=V(1877);const ve=(w,I)=>I.some(A=>w instanceof A);let we,q;const He=new WeakMap,Se=new WeakMap,qe=new WeakMap,at=new WeakMap,be=new WeakMap;let je={get(w,I,A){if(w instanceof IDBTransaction){if("done"===I)return Se.get(w);if("objectStoreNames"===I)return w.objectStoreNames||qe.get(w);if("store"===I)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return ze(w[I])},set:(w,I,A)=>(w[I]=A,!0),has:(w,I)=>w instanceof IDBTransaction&&("done"===I||"store"===I)||I in w};function Pe(w){return"function"==typeof w?function Te(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...I){return w.apply(Le(this),I),ze(He.get(this))}:function(...I){return ze(w.apply(Le(this),I))}:function(I,...A){const U=w.call(Le(this),I,...A);return qe.set(U,I.sort?I.sort():[I]),ze(U)}}(w):(w instanceof IDBTransaction&&function Oe(w){if(Se.has(w))return;const I=new Promise((A,U)=>{const K=()=>{w.removeEventListener("complete",Q),w.removeEventListener("error",me),w.removeEventListener("abort",me)},Q=()=>{A(),K()},me=()=>{U(w.error||new DOMException("AbortError","AbortError")),K()};w.addEventListener("complete",Q),w.addEventListener("error",me),w.addEventListener("abort",me)});Se.set(w,I)}(w),ve(w,function W(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,je):w)}function ze(w){if(w instanceof IDBRequest)return function Re(w){const I=new Promise((A,U)=>{const K=()=>{w.removeEventListener("success",Q),w.removeEventListener("error",me)},Q=()=>{A(ze(w.result)),K()},me=()=>{U(w.error),K()};w.addEventListener("success",Q),w.addEventListener("error",me)});return I.then(A=>{A instanceof IDBCursor&&He.set(A,w)}).catch(()=>{}),be.set(I,w),I}(w);if(at.has(w))return at.get(w);const I=Pe(w);return I!==w&&(at.set(w,I),be.set(I,w)),I}const Le=w=>be.get(w),Dt=["get","getKey","getAll","getAllKeys","count"],ot=["put","add","delete","clear"],qt=new Map;function ht(w,I){if(!(w instanceof IDBDatabase)||I in w||"string"!=typeof I)return;if(qt.get(I))return qt.get(I);const A=I.replace(/FromIndex$/,""),U=I!==A,K=ot.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!K&&!Dt.includes(A))return;const Q=function(){var me=(0,O.Z)(function*(Ze,...We){const _t=this.transaction(Ze,K?"readwrite":"readonly");let Pt=_t.store;return U&&(Pt=Pt.index(We.shift())),(yield Promise.all([Pt[A](...We),K&&_t.done]))[0]});return function(We){return me.apply(this,arguments)}}();return qt.set(I,Q),Q}!function De(w){je=w(je)}(w=>({...w,get:(I,A,U)=>ht(I,A)||w.get(I,A,U),has:(I,A)=>!!ht(I,A)||w.has(I,A)}));const Ds="@firebase/installations",Ei="0.6.4",fr=1e4,ps=`w:${Ei}`,ue="FIS_v2",pe="https://firebaseinstallations.googleapis.com/v1",ye=36e5,lt=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ut(w){return w instanceof de.ZR&&w.code.includes("request-failed")}function hn({projectId:w}){return`${pe}/projects/${w}/installations`}function Et(w){return{token:w.token,requestStatus:2,expiresIn:oi(w.expiresIn),creationTime:Date.now()}}function sn(w,I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(w,I){const U=(yield I.json()).error;return lt.create("request-failed",{requestName:w,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function gn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function kn(w){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(w){const I=yield w();return I.status>=500&&I.status<600?w():I})).apply(this,arguments)}function oi(w){return Number(w.replace("s","000"))}function pt(){return(pt=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:I},{fid:A}){const U=hn(w),K=gn(w),Q=I.getImmediate({optional:!0});if(Q){const _t=yield Q.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const Ze={method:"POST",headers:K,body:JSON.stringify({fid:A,authVersion:ue,appId:w.appId,sdkVersion:ps})},We=yield kn(()=>fetch(U,Ze));if(We.ok){const _t=yield We.json();return{fid:_t.fid||A,registrationStatus:2,refreshToken:_t.refreshToken,authToken:Et(_t.authToken)}}throw yield sn("Create Installation",We)})).apply(this,arguments)}function Gn(w){return new Promise(I=>{setTimeout(I,w)})}const Qn=/^[cdef][\w-]{21}$/,Hi="";function Qi(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const A=function fn(w){return function gs(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return Qn.test(A)?A:Hi}catch{return Hi}}function Kt(w){return`${w.appName}!${w.appId}`}const ft=new Map;function Ft(w,I){const A=Kt(w);Wn(A,I),function Xi(w,I){const A=function Ci(){return!qn&&"BroadcastChannel"in self&&(qn=new BroadcastChannel("[Firebase] FID Change"),qn.onmessage=w=>{Wn(w.data.key,w.data.fid)}),qn}();A&&A.postMessage({key:w,fid:I}),function Xt(){0===ft.size&&qn&&(qn.close(),qn=null)}()}(A,I)}function Wn(w,I){const A=ft.get(w);if(A)for(const U of A)U(I)}let qn=null;const Er="firebase-installations-database",Jt=1,mr="firebase-installations-store";let jt=null;function Jn(){return jt||(jt=function le(w,I,{blocked:A,upgrade:U,blocking:K,terminated:Q}={}){const me=indexedDB.open(w,I),Ze=ze(me);return U&&me.addEventListener("upgradeneeded",We=>{U(ze(me.result),We.oldVersion,We.newVersion,ze(me.transaction))}),A&&me.addEventListener("blocked",()=>A()),Ze.then(We=>{Q&&We.addEventListener("close",()=>Q()),K&&We.addEventListener("versionchange",()=>K())}).catch(()=>{}),Ze}(Er,Jt,{upgrade:(w,I)=>{0===I&&w.createObjectStore(mr)}})),jt}function Bn(w,I){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,O.Z)(function*(w,I){const A=Kt(w),K=(yield Jn()).transaction(mr,"readwrite"),Q=K.objectStore(mr),me=yield Q.get(A);return yield Q.put(I,A),yield K.done,(!me||me.fid!==I.fid)&&Ft(w,I.fid),I})).apply(this,arguments)}function ei(w){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,O.Z)(function*(w){const I=Kt(w),U=(yield Jn()).transaction(mr,"readwrite");yield U.objectStore(mr).delete(I),yield U.done})).apply(this,arguments)}function zi(w,I){return er.apply(this,arguments)}function er(){return(er=(0,O.Z)(function*(w,I){const A=Kt(w),K=(yield Jn()).transaction(mr,"readwrite"),Q=K.objectStore(mr),me=yield Q.get(A),Ze=I(me);return void 0===Ze?yield Q.delete(A):yield Q.put(Ze,A),yield K.done,Ze&&(!me||me.fid!==Ze.fid)&&Ft(w,Ze.fid),Ze})).apply(this,arguments)}function G(w){return z.apply(this,arguments)}function z(){return z=(0,O.Z)(function*(w){let I;const A=yield zi(w.appConfig,U=>{const K=function F(w){return It(w||{fid:Qi(),registrationStatus:0})}(U),Q=function L(w,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(lt.create("app-offline"))};const A={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},U=function R(w,I){return Z.apply(this,arguments)}(w,A);return{installationEntry:A,registrationPromise:U}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Ee(w)}:{installationEntry:I}}(w,K);return I=Q.registrationPromise,Q.installationEntry});return A.fid===Hi?{installationEntry:yield I}:{installationEntry:A,registrationPromise:I}}),z.apply(this,arguments)}function Z(){return Z=(0,O.Z)(function*(w,I){try{const A=yield function $n(w,I){return pt.apply(this,arguments)}(w,I);return Bn(w.appConfig,A)}catch(A){throw ut(A)&&409===A.customData.serverCode?yield ei(w.appConfig):yield Bn(w.appConfig,{fid:I.fid,registrationStatus:0}),A}}),Z.apply(this,arguments)}function Ee(w){return rt.apply(this,arguments)}function rt(){return(rt=(0,O.Z)(function*(w){let I=yield St(w.appConfig);for(;1===I.registrationStatus;)yield Gn(100),I=yield St(w.appConfig);if(0===I.registrationStatus){const{installationEntry:A,registrationPromise:U}=yield G(w);return U||A}return I})).apply(this,arguments)}function St(w){return zi(w,I=>{if(!I)throw lt.create("installation-not-found");return It(I)})}function It(w){return function Zt(w){return 1===w.registrationStatus&&w.registrationTime+fr<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function Dn(){return(Dn=(0,O.Z)(function*({appConfig:w,heartbeatServiceProvider:I},A){const U=function Ht(w,{fid:I}){return`${hn(w)}/${I}/authTokens:generate`}(w,A),K=function si(w,{refreshToken:I}){const A=gn(w);return A.append("Authorization",function xr(w){return`${ue} ${w}`}(I)),A}(w,A),Q=I.getImmediate({optional:!0});if(Q){const _t=yield Q.getHeartbeatsHeader();_t&&K.append("x-firebase-client",_t)}const Ze={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:ps,appId:w.appId}})},We=yield kn(()=>fetch(U,Ze));if(We.ok)return Et(yield We.json());throw yield sn("Generate Auth Token",We)})).apply(this,arguments)}function Ii(w){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,O.Z)(function*(w,I=!1){let A;const U=yield zi(w.appConfig,Q=>{if(!en(Q))throw lt.create("not-registered");const me=Q.authToken;if(!I&&function bt(w){return 2===w.requestStatus&&!function yn(w){const I=Date.now();return I<w.creationTime||w.creationTime+w.expiresIn<I+ye}(w)}(me))return Q;if(1===me.requestStatus)return A=function ge(w,I){return se.apply(this,arguments)}(w,I),Q;{if(!navigator.onLine)throw lt.create("app-offline");const Ze=function an(w){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:I})}(Q);return A=function yt(w,I){return At.apply(this,arguments)}(w,Ze),Ze}});return A?yield A:U.authToken}),Ss.apply(this,arguments)}function se(){return(se=(0,O.Z)(function*(w,I){let A=yield Be(w.appConfig);for(;1===A.authToken.requestStatus;)yield Gn(100),A=yield Be(w.appConfig);const U=A.authToken;return 0===U.requestStatus?Ii(w,I):U})).apply(this,arguments)}function Be(w){return zi(w,I=>{if(!en(I))throw lt.create("not-registered");return function $i(w){return 1===w.requestStatus&&w.requestTime+fr<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function At(){return At=(0,O.Z)(function*(w,I){try{const A=yield function Mt(w,I){return Dn.apply(this,arguments)}(w,I),U=Object.assign(Object.assign({},I),{authToken:A});return yield Bn(w.appConfig,U),A}catch(A){if(!ut(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const U=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield Bn(w.appConfig,U)}else yield ei(w.appConfig);throw A}}),At.apply(this,arguments)}function en(w){return void 0!==w&&2===w.registrationStatus}function Nl(){return(Nl=(0,O.Z)(function*(w){const I=w,{installationEntry:A,registrationPromise:U}=yield G(I);return U?U.catch(console.error):Ii(I).catch(console.error),A.fid})).apply(this,arguments)}function Zs(){return Zs=(0,O.Z)(function*(w,I=!1){const A=w;return yield function Di(w){return Je.apply(this,arguments)}(A),(yield Ii(A,I)).token}),Zs.apply(this,arguments)}function Je(){return(Je=(0,O.Z)(function*(w){const{registrationPromise:I}=yield G(w);I&&(yield I)})).apply(this,arguments)}function Xr(w){return lt.create("missing-app-config-values",{valueName:w})}const $t="installations",Pr=w=>{const I=w.getProvider("app").getImmediate(),A=function Wa(w){if(!w||!w.options)throw Xr("App Configuration");if(!w.name)throw Xr("App Name");const I=["projectId","apiKey","appId"];for(const A of I)if(!w.options[A])throw Xr(A);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(I);return{app:I,appConfig:A,heartbeatServiceProvider:(0,re._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},sa=w=>{const I=w.getProvider("app").getImmediate(),A=(0,re._getProvider)(I,$t).getImmediate();return{getId:()=>function Ti(w){return Nl.apply(this,arguments)}(A),getToken:K=>function Mf(w){return Zs.apply(this,arguments)}(A,K)}};(function As(){(0,re._registerComponent)(new oe.wA($t,Pr,"PUBLIC")),(0,re._registerComponent)(new oe.wA("installations-internal",sa,"PRIVATE"))})(),(0,re.registerVersion)(Ds,Ei),(0,re.registerVersion)(Ds,Ei,"esm2017");const fi="@firebase/remote-config",mi=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kp{constructor(I,A,U,K){this.client=I,this.storage=A,this.storageCache=U,this.logger=K}isCachedDataFresh(I,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-A,K=U<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${K}.`),K}fetch(I){var A=this;return(0,O.Z)(function*(){const[U,K]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(K&&A.isCachedDataFresh(I.cacheMaxAgeMillis,U))return K;I.eTag=K&&K.eTag;const Q=yield A.client.fetch(I),me=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&me.push(A.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(me),Q})()}}function vu(w=navigator){return w.languages&&w.languages[0]||w.language}class kf{constructor(I,A,U,K,Q,me){this.firebaseInstallations=I,this.sdkVersion=A,this.namespace=U,this.projectId=K,this.apiKey=Q,this.appId=me}fetch(I){var A=this;return(0,O.Z)(function*(){const[U,K]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},We={sdk_version:A.sdkVersion,app_instance_id:U,app_instance_id_token:K,app_id:A.appId,language_code:vu()},_t={method:"POST",headers:Ze,body:JSON.stringify(We)},Pt=fetch(me,_t),Lt=new Promise((vr,Ur)=>{I.signal.addEventListener(()=>{const Ia=new Error("The operation was aborted.");Ia.name="AbortError",Ur(Ia)})});let yr;try{yield Promise.race([Pt,Lt]),yr=yield Pt}catch(vr){let Ur="fetch-client-network";throw"AbortError"===vr?.name&&(Ur="fetch-timeout"),mi.create(Ur,{originalErrorMessage:vr?.message})}let Bi=yr.status;const jo=yr.headers.get("ETag")||void 0;let Md,Ca;if(200===yr.status){let vr;try{vr=yield yr.json()}catch(Ur){throw mi.create("fetch-client-parse",{originalErrorMessage:Ur?.message})}Md=vr.entries,Ca=vr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ca?Bi=500:"NO_CHANGE"===Ca?Bi=304:("NO_TEMPLATE"===Ca||"EMPTY_CONFIG"===Ca)&&(Md={}),304!==Bi&&200!==Bi)throw mi.create("fetch-status",{httpStatus:Bi});return{status:Bi,eTag:jo,config:Md}})()}}class wu{constructor(I,A){this.client=I,this.storage=A}fetch(I){var A=this;return(0,O.Z)(function*(){const U=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(I,U)})()}attemptFetch(I,{throttleEndTimeMillis:A,backoffCount:U}){var K=this;return(0,O.Z)(function*(){yield function bu(w,I){return new Promise((A,U)=>{const K=Math.max(I-Date.now(),0),Q=setTimeout(A,K);w.addEventListener(()=>{clearTimeout(Q),U(mi.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,A);try{const Q=yield K.client.fetch(I);return yield K.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function Zp(w){if(!(w instanceof de.ZR&&w.customData))return!1;const I=Number(w.customData.httpStatus);return 429===I||500===I||503===I||504===I}(Q))throw Q;const me={throttleEndTimeMillis:Date.now()+(0,de.$s)(U),backoffCount:U+1};return yield K.storage.setThrottleMetadata(me),K.attemptFetch(I,me)}})()}}class Rf{constructor(I,A,U,K,Q){this.app=I,this._client=A,this._storageCache=U,this._storage=K,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Js(w,I){const A=w.target.error||void 0;return mi.create(I,{originalErrorMessage:A&&A?.message})}const gr="app_namespace_store";class Cu{constructor(I,A,U,K=function Nf(){return new Promise((w,I)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=U=>{I(Js(U,"storage-open"))},A.onsuccess=U=>{w(U.target.result)},A.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(gr,{keyPath:"compositeKey"})}}catch(A){I(mi.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=I,this.appName=A,this.namespace=U,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var A=this;return(0,O.Z)(function*(){const U=yield A.openDbPromise;return new Promise((K,Q)=>{const Ze=U.transaction([gr],"readonly").objectStore(gr),We=A.createCompositeKey(I);try{const _t=Ze.get(We);_t.onerror=Pt=>{Q(Js(Pt,"storage-get"))},_t.onsuccess=Pt=>{const Lt=Pt.target.result;K(Lt?Lt.value:void 0)}}catch(_t){Q(mi.create("storage-get",{originalErrorMessage:_t?.message}))}})})()}set(I,A){var U=this;return(0,O.Z)(function*(){const K=yield U.openDbPromise;return new Promise((Q,me)=>{const We=K.transaction([gr],"readwrite").objectStore(gr),_t=U.createCompositeKey(I);try{const Pt=We.put({compositeKey:_t,value:A});Pt.onerror=Lt=>{me(Js(Lt,"storage-set"))},Pt.onsuccess=()=>{Q()}}catch(Pt){me(mi.create("storage-set",{originalErrorMessage:Pt?.message}))}})})()}delete(I){var A=this;return(0,O.Z)(function*(){const U=yield A.openDbPromise;return new Promise((K,Q)=>{const Ze=U.transaction([gr],"readwrite").objectStore(gr),We=A.createCompositeKey(I);try{const _t=Ze.delete(We);_t.onerror=Pt=>{Q(Js(Pt,"storage-delete"))},_t.onsuccess=()=>{K()}}catch(_t){Q(mi.create("storage-delete",{originalErrorMessage:_t?.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class eo{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,O.Z)(function*(){const A=I.storage.getLastFetchStatus(),U=I.storage.getLastSuccessfulFetchTimestampMillis(),K=I.storage.getActiveConfig(),Q=yield A;Q&&(I.lastFetchStatus=Q);const me=yield U;me&&(I.lastSuccessfulFetchTimestampMillis=me);const Ze=yield K;Ze&&(I.activeConfig=Ze)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Tu(){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,O.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}!function la(){(0,re._registerComponent)(new oe.wA("remote-config",function w(I,{instanceIdentifier:A}){const U=I.getProvider("app").getImmediate(),K=I.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mi.create("registration-window");if(!(0,de.hl)())throw mi.create("indexed-db-unavailable");const{projectId:Q,apiKey:me,appId:Ze}=U.options;if(!Q)throw mi.create("registration-project-id");if(!me)throw mi.create("registration-api-key");if(!Ze)throw mi.create("registration-app-id");const We=new Cu(Ze,U.name,A=A||"firebase"),_t=new eo(We),Pt=new xe.Yd(fi);Pt.logLevel=xe.in.ERROR;const Lt=new kf(K,re.SDK_VERSION,A,Q,me,Ze),yr=new wu(Lt,We),Bi=new Kp(yr,We,_t,Pt),jo=new Rf(U,Bi,_t,We,Pt);return function tr(w){const I=(0,de.m9)(w);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(jo),jo},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(fi,"0.4.4"),(0,re.registerVersion)(fi,"0.4.4","esm2017")}();const Of=(w,I)=>I.some(A=>w instanceof A);let to,Zc;const ca=new WeakMap,To=new WeakMap,Vn=new WeakMap,Ya=new WeakMap,Vl=new WeakMap;let So={get(w,I,A){if(w instanceof IDBTransaction){if("done"===I)return To.get(w);if("objectStoreNames"===I)return w.objectStoreNames||Vn.get(w);if("store"===I)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return nr(w[I])},set:(w,I,A)=>(w[I]=A,!0),has:(w,I)=>w instanceof IDBTransaction&&("done"===I||"store"===I)||I in w};function Ul(w){return"function"==typeof w?function Ff(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Du(){return Zc||(Zc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...I){return w.apply(Ai(this),I),nr(ca.get(this))}:function(...I){return nr(w.apply(Ai(this),I))}:function(I,...A){const U=w.call(Ai(this),I,...A);return Vn.set(U,I.sort?I.sort():[I]),nr(U)}}(w):(w instanceof IDBTransaction&&function Do(w){if(To.has(w))return;const I=new Promise((A,U)=>{const K=()=>{w.removeEventListener("complete",Q),w.removeEventListener("error",me),w.removeEventListener("abort",me)},Q=()=>{A(),K()},me=()=>{U(w.error||new DOMException("AbortError","AbortError")),K()};w.addEventListener("complete",Q),w.addEventListener("error",me),w.addEventListener("abort",me)});To.set(w,I)}(w),Of(w,function Bl(){return to||(to=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,So):w)}function nr(w){if(w instanceof IDBRequest)return function pi(w){const I=new Promise((A,U)=>{const K=()=>{w.removeEventListener("success",Q),w.removeEventListener("error",me)},Q=()=>{A(nr(w.result)),K()},me=()=>{U(w.error),K()};w.addEventListener("success",Q),w.addEventListener("error",me)});return I.then(A=>{A instanceof IDBCursor&&ca.set(A,w)}).catch(()=>{}),Vl.set(I,w),I}(w);if(Ya.has(w))return Ya.get(w);const I=Ul(w);return I!==w&&(Ya.set(w,I),Vl.set(I,w)),I}const Ai=w=>Vl.get(w);function Qa(w,I,{blocked:A,upgrade:U,blocking:K,terminated:Q}={}){const me=indexedDB.open(w,I),Ze=nr(me);return U&&me.addEventListener("upgradeneeded",We=>{U(nr(me.result),We.oldVersion,We.newVersion,nr(me.transaction))}),A&&me.addEventListener("blocked",()=>A()),Ze.then(We=>{Q&&We.addEventListener("close",()=>Q()),K&&We.addEventListener("versionchange",()=>K())}).catch(()=>{}),Ze}function no(w,{blocked:I}={}){const A=indexedDB.deleteDatabase(w);return I&&A.addEventListener("blocked",()=>I()),nr(A).then(()=>{})}const Su=["get","getKey","getAll","getAllKeys","count"],Rs=["put","add","delete","clear"],Xa=new Map;function da(w,I){if(!(w instanceof IDBDatabase)||I in w||"string"!=typeof I)return;if(Xa.get(I))return Xa.get(I);const A=I.replace(/FromIndex$/,""),U=I!==A,K=Rs.includes(A);if(!(A in(U?IDBIndex:IDBObjectStore).prototype)||!K&&!Su.includes(A))return;const Q=function(){var me=(0,O.Z)(function*(Ze,...We){const _t=this.transaction(Ze,K?"readwrite":"readonly");let Pt=_t.store;return U&&(Pt=Pt.index(We.shift())),(yield Promise.all([Pt[A](...We),K&&_t.done]))[0]});return function(We){return me.apply(this,arguments)}}();return Xa.set(I,Q),Q}!function Fi(w){So=w(So)}(w=>({...w,get:(I,A,U)=>da(I,A)||w.get(I,A,U),has:(I,A)=>!!da(I,A)||w.has(I,A)}));const Rt="/firebase-messaging-sw.js",jl="/firebase-cloud-messaging-push-scope",Lf="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yc="https://fcmregistrations.googleapis.com/v1",Qc="google.c.a.c_id",Xc="google.c.a.c_l",Au="google.c.a.ts",Mu="google.c.a.e";var _e=(()=>{return(w=_e||(_e={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",_e;var w})();function Bt(w){const I=new Uint8Array(w);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jc(w){const A=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(A),K=new Uint8Array(U.length);for(let Q=0;Q<U.length;++Q)K[Q]=U.charCodeAt(Q);return K}const Ja="fcm_token_details_db",ti=5,ku="fcm_token_object_Store";function Fr(){return Fr=(0,O.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Ja))return null;let I=null;return(yield Qa(Ja,ti,{upgrade:(U=(0,O.Z)(function*(K,Q,me,Ze){var We;if(Q<2||!K.objectStoreNames.contains(ku))return;const _t=Ze.objectStore(ku),Pt=yield _t.index("fcmSenderId").get(w);if(yield _t.clear(),Pt)if(2===Q){const Lt=Pt;if(!Lt.auth||!Lt.p256dh||!Lt.endpoint)return;I={token:Lt.fcmToken,createTime:null!==(We=Lt.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Lt.auth,p256dh:Lt.p256dh,endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:"string"==typeof Lt.vapidKey?Lt.vapidKey:Bt(Lt.vapidKey)}}}else if(3===Q){const Lt=Pt;I={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Bt(Lt.auth),p256dh:Bt(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Bt(Lt.vapidKey)}}}else if(4===Q){const Lt=Pt;I={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Bt(Lt.auth),p256dh:Bt(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Bt(Lt.vapidKey)}}}}),function(Q,me,Ze,We){return U.apply(this,arguments)})})).close(),yield no(Ja),yield no("fcm_vapid_details_db"),yield no("undefined"),function Hl(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:I}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}(I)?I:null;var U}),Fr.apply(this,arguments)}const Ru="firebase-messaging-database",Pu=1,io="firebase-messaging-store";let ha=null;function Li(){return ha||(ha=Qa(Ru,Pu,{upgrade:(w,I)=>{0===I&&w.createObjectStore(io)}})),ha}function _r(w){return ro.apply(this,arguments)}function ro(){return ro=(0,O.Z)(function*(w){const I=Ou(w),U=yield(yield Li()).transaction(io).objectStore(io).get(I);if(U)return U;{const K=yield function ua(w){return Fr.apply(this,arguments)}(w.appConfig.senderId);if(K)return yield Ps(w,K),K}}),ro.apply(this,arguments)}function Ps(w,I){return _s.apply(this,arguments)}function _s(){return(_s=(0,O.Z)(function*(w,I){const A=Ou(w),K=(yield Li()).transaction(io,"readwrite");return yield K.objectStore(io).put(I,A),yield K.done,I})).apply(this,arguments)}function Ao(){return(Ao=(0,O.Z)(function*(w){const I=Ou(w),U=(yield Li()).transaction(io,"readwrite");yield U.objectStore(io).delete(I),yield U.done})).apply(this,arguments)}function Ou({appConfig:w}){return w.appId}const ni=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function zl(w,I){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(w,I){const A=yield tl(w),U=Gl(I),K={method:"POST",headers:A,body:JSON.stringify(U)};let Q;try{Q=yield(yield fetch(ed(w.appConfig),K)).json()}catch(me){throw ni.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(Q.error)throw ni.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw ni.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function $l(){return($l=(0,O.Z)(function*(w,I){const A=yield tl(w),U=Gl(I.subscriptionOptions),K={method:"PATCH",headers:A,body:JSON.stringify(U)};let Q;try{Q=yield(yield fetch(`${ed(w.appConfig)}/${I.token}`,K)).json()}catch(me){throw ni.create("token-update-failed",{errorInfo:me?.toString()})}if(Q.error)throw ni.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw ni.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Lu(w,I){return fa.apply(this,arguments)}function fa(){return(fa=(0,O.Z)(function*(w,I){const U={method:"DELETE",headers:yield tl(w)};try{const Q=yield(yield fetch(`${ed(w.appConfig)}/${I}`,U)).json();if(Q.error)throw ni.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(K){throw ni.create("token-unsubscribe-failed",{errorInfo:K?.toString()})}})).apply(this,arguments)}function ed({projectId:w}){return`${Yc}/projects/${w}/registrations`}function tl(w){return td.apply(this,arguments)}function td(){return(td=(0,O.Z)(function*({appConfig:w,installations:I}){const A=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Gl({p256dh:w,auth:I,endpoint:A,vapidKey:U}){const K={web:{endpoint:A,auth:I,p256dh:w}};return U!==Lf&&(K.web.applicationPubKey=U),K}const Bu=6048e5;function Vu(){return Vu=(0,O.Z)(function*(w){const I=yield function Xp(w,I){return Uu.apply(this,arguments)}(w.swRegistration,w.vapidKey),A={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:I.endpoint,auth:Bt(I.getKey("auth")),p256dh:Bt(I.getKey("p256dh"))},U=yield _r(w.firebaseDependencies);if(U){if(function Jp(w,I){return I.vapidKey===w.vapidKey&&I.endpoint===w.endpoint&&I.auth===w.auth&&I.p256dh===w.p256dh}(U.subscriptionOptions,A))return Date.now()>=U.createTime+Bu?function Pn(w,I){return id.apply(this,arguments)}(w,{token:U.token,createTime:Date.now(),subscriptionOptions:A}):U.token;try{yield Lu(w.firebaseDependencies,U.token)}catch(K){console.warn(K)}return ma(w.firebaseDependencies,A)}return ma(w.firebaseDependencies,A)}),Vu.apply(this,arguments)}function ys(){return ys=(0,O.Z)(function*(w){const I=yield _r(w.firebaseDependencies);I&&(yield Lu(w.firebaseDependencies,I.token),yield function Nu(w){return Ao.apply(this,arguments)}(w.firebaseDependencies));const A=yield w.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),ys.apply(this,arguments)}function id(){return id=(0,O.Z)(function*(w,I){try{const A=yield function Fu(w,I){return $l.apply(this,arguments)}(w.firebaseDependencies,I),U=Object.assign(Object.assign({},I),{token:A,createTime:Date.now()});return yield Ps(w.firebaseDependencies,U),A}catch(A){throw yield function Gi(w){return ys.apply(this,arguments)}(w),A}}),id.apply(this,arguments)}function ma(w,I){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(w,I){const U={token:yield zl(w,I),createTime:Date.now(),subscriptionOptions:I};return yield Ps(w,U),U.token})).apply(this,arguments)}function Uu(){return(Uu=(0,O.Z)(function*(w,I){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jc(I)})})).apply(this,arguments)}function ql(w){const I={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function rd(w,I){if(!I.notification)return;w.notification={};const A=I.notification.title;A&&(w.notification.title=A);const U=I.notification.body;U&&(w.notification.body=U);const K=I.notification.image;K&&(w.notification.image=K);const Q=I.notification.icon;Q&&(w.notification.icon=Q)}(I,w),function ju(w,I){I.data&&(w.data=I.data)}(I,w),function Hu(w,I){var A,U,K,Q,me;if(!(I.fcmOptions||null!==(A=I.notification)&&void 0!==A&&A.click_action))return;w.fcmOptions={};const Ze=null!==(K=null===(U=I.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==K?K:null===(Q=I.notification)||void 0===Q?void 0:Q.click_action;Ze&&(w.fcmOptions.link=Ze);const We=null===(me=I.fcmOptions)||void 0===me?void 0:me.analytics_label;We&&(w.fcmOptions.analyticsLabel=We)}(I,w),I}function pa(w,I){const A=[];for(let U=0;U<w.length;U++)A.push(w.charAt(U)),U<I.length&&A.push(I.charAt(U));return A.join("")}function Ns(w){return ni.create("missing-app-config-values",{valueName:w})}pa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class eg{constructor(I,A,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function nl(w){if(!w||!w.options)throw Ns("App Configuration Object");if(!w.name)throw Ns("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:A}=w;for(const U of I)if(!A[U])throw Ns(U);return{appName:w.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:K,installations:A,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Bf(w){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,O.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Rt,{scope:jl}),w.swRegistration.update().catch(()=>{})}catch(I){throw ni.create("failed-service-worker-registration",{browserErrorMessage:I?.message})}})).apply(this,arguments)}function Os(){return(Os=(0,O.Z)(function*(w,I){if(!I&&!w.swRegistration&&(yield Bf(w)),I||!w.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw ni.create("invalid-sw-registration");w.swRegistration=I}})).apply(this,arguments)}function il(){return(il=(0,O.Z)(function*(w,I){I?w.vapidKey=I:w.vapidKey||(w.vapidKey=Lf)})).apply(this,arguments)}function ga(){return ga=(0,O.Z)(function*(w,I){if(!navigator)throw ni.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ni.create("permission-blocked");return yield function sd(w,I){return il.apply(this,arguments)}(w,I?.vapidKey),yield function zu(w,I){return Os.apply(this,arguments)}(w,I?.serviceWorkerRegistration),function nd(w){return Vu.apply(this,arguments)}(w)}),ga.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(w,I,A){const U=function Mo(w){switch(w){case _e.NOTIFICATION_CLICKED:return"notification_open";case _e.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(I);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:A[Qc],message_name:A[Xc],message_time:A[Au],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ko(){return ko=(0,O.Z)(function*(w,I){const A=I.data;if(!A.isFirebaseMessaging)return;w.onMessageHandler&&A.messageType===_e.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(ql(A)):w.onMessageHandler.next(ql(A)));const U=A.data;(function Kl(w){return"object"==typeof w&&!!w&&Qc in w})(U)&&"1"===U[Mu]&&(yield function $u(w,I,A){return so.apply(this,arguments)}(w,A.messageType,U))}),ko.apply(this,arguments)}const ya="@firebase/messaging",sl=w=>{const I=new eg(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function _a(w,I){return ko.apply(this,arguments)}(I,A)),I},od=w=>{const I=w.getProvider("messaging").getImmediate();return{getToken:U=>function Yl(w,I){return ga.apply(this,arguments)}(I,U)}};function Vf(){return ad.apply(this,arguments)}function ad(){return(ad=(0,O.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ol(){(0,re._registerComponent)(new oe.wA("messaging",sl,"PUBLIC")),(0,re._registerComponent)(new oe.wA("messaging-internal",od,"PRIVATE")),(0,re.registerVersion)(ya,"0.12.4"),(0,re.registerVersion)(ya,"0.12.4","esm2017")}();const oo="analytics",Xl="firebase_id",qu="origin",al=6e4,Ku="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jl="https://www.googletagmanager.com/gtag/js",gi=new xe.Yd("@firebase/analytics"),Un=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Uf(w){if(!w.startsWith(Jl)){const I=Un.create("invalid-gtag-resource",{gtagURL:w});return gi.warn(I.message),""}return w}function ao(w){return Promise.all(w.map(I=>I.catch(A=>A)))}function lo(){return(lo=(0,O.Z)(function*(w,I,A,U,K,Q){const me=U[K];try{if(me)yield I[me];else{const We=(yield ao(A)).find(_t=>_t.measurementId===K);We&&(yield I[We.appId])}}catch(Ze){gi.error(Ze)}w("config",K,Q)})).apply(this,arguments)}function Ro(){return(Ro=(0,O.Z)(function*(w,I,A,U,K){try{let Q=[];if(K&&K.send_to){let me=K.send_to;Array.isArray(me)||(me=[me]);const Ze=yield ao(A);for(const We of me){const _t=Ze.find(Lt=>Lt.measurementId===We),Pt=_t&&I[_t.appId];if(!Pt){Q=[];break}Q.push(Pt)}}0===Q.length&&(Q=Object.values(I)),yield Promise.all(Q),w("event",U,K||{})}catch(Q){gi.error(Q)}})).apply(this,arguments)}const tc=30,Oo=new class Zu{constructor(I={},A=1e3){this.throttleMetadata=I,this.intervalMillis=A}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,A){this.throttleMetadata[I]=A}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Hf(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function cn(){return(cn=(0,O.Z)(function*(w){var I;const{appId:A,apiKey:U}=w,K={method:"GET",headers:Hf(U)},Q=Ku.replace("{app-id}",A),me=yield fetch(Q,K);if(200!==me.status&&304!==me.status){let Ze="";try{const We=yield me.json();null!==(I=We.error)&&void 0!==I&&I.message&&(Ze=We.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ze})}return me.json()})).apply(this,arguments)}function Qu(){return(Qu=(0,O.Z)(function*(w,I=Oo,A){const{appId:U,apiKey:K,measurementId:Q}=w.options;if(!U)throw Un.create("no-app-id");if(!K){if(Q)return{measurementId:Q,appId:U};throw Un.create("no-api-key")}const me=I.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Ey;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==A?A:al),md({appId:U,apiKey:K,measurementId:Q},me,Ze,I)})).apply(this,arguments)}function md(w,I,A){return pd.apply(this,arguments)}function pd(){return pd=(0,O.Z)(function*(w,{throttleEndTimeMillis:I,backoffCount:A},U,K=Oo){var Q;const{appId:me,measurementId:Ze}=w;try{yield function zf(w,I){return new Promise((A,U)=>{const K=Math.max(I-Date.now(),0),Q=setTimeout(A,K);w.addEventListener(()=>{clearTimeout(Q),U(Un.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(U,I)}catch(We){if(Ze)return gi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:me,measurementId:Ze};throw We}try{const We=yield function Yu(w){return cn.apply(this,arguments)}(w);return K.deleteThrottleMetadata(me),We}catch(We){const _t=We;if(!function xy(w){if(!(w instanceof de.ZR&&w.customData))return!1;const I=Number(w.customData.httpStatus);return 429===I||500===I||503===I||504===I}(_t)){if(K.deleteThrottleMetadata(me),Ze)return gi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:me,measurementId:Ze};throw We}const Pt=503===Number(null===(Q=_t?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,de.$s)(A,K.intervalMillis,tc):(0,de.$s)(A,K.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Pt,backoffCount:A+1};return K.setThrottleMetadata(me,Lt),gi.debug(`Calling attemptFetch again in ${Pt} millis`),md(w,Lt,U,K)}}),pd.apply(this,arguments)}class Ey{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}let Fo,yd;function $f(){return($f=(0,O.Z)(function*(w,I,A,U,K){if(K&&K.global)w("event",A,U);else{const Q=yield I;w("event",A,Object.assign(Object.assign({},U),{send_to:Q}))}})).apply(this,arguments)}function Br(){return(Br=(0,O.Z)(function*(){if(!(0,de.hl)())return gi.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(w){return gi.warn(Un.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function ct(){return ct=(0,O.Z)(function*(w,I,A,U,K,Q,me){var Ze;const We=function fd(w){return Qu.apply(this,arguments)}(w);We.then(Bi=>{A[Bi.measurementId]=Bi.appId,w.options.measurementId&&Bi.measurementId!==w.options.measurementId&&gi.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${Bi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bi=>gi.error(Bi)),I.push(We);const _t=function Lr(){return Br.apply(this,arguments)}().then(Bi=>{if(Bi)return U.getId()}),[Pt,Lt]=yield Promise.all([We,_t]);(function No(w){const I=window.document.getElementsByTagName("script");for(const A of Object.values(I))if(A.src&&A.src.includes(Jl)&&A.src.includes(w))return A;return null})(Q)||function ba(w,I){const A=function ec(w,I){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(w,I)),A}("firebase-js-sdk-policy",{createScriptURL:Uf}),U=document.createElement("script"),K=`${Jl}?l=${w}&id=${I}`;U.src=A?A?.createScriptURL(K):K,U.async=!0,document.head.appendChild(U)}(Q,Pt.measurementId),yd&&(K("consent","default",yd),function rc(w){yd=w}(void 0)),K("js",new Date);const yr=null!==(Ze=me?.config)&&void 0!==Ze?Ze:{};return yr[qu]="firebase",yr.update=!0,null!=Lt&&(yr[Xl]=Lt),K("config",Pt.measurementId,yr),Fo&&(K("set",Fo),function vd(w){Fo=w}(void 0)),Pt.measurementId}),ct.apply(this,arguments)}class rr{constructor(I){this.app=I}_delete(){return delete Nn[this.app.options.appId],Promise.resolve()}}let Nn={},sc=[];const Fs={};let sr,tt,Zn="dataLayer",ai="gtag",es=!1;function Gf(w,I,A){!function or(){const w=[];if((0,de.ru)()&&w.push("This is a browser extension environment."),(0,de.zI)()||w.push("Cookies are not available."),w.length>0){const I=w.map((U,K)=>`(${K+1}) ${U}`).join(" "),A=Un.create("invalid-analytics-context",{errorInfo:I});gi.warn(A.message)}}();const U=w.options.appId;if(!U)throw Un.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw Un.create("no-api-key");gi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nn[U])throw Un.create("already-exists",{id:U});if(!es){!function dd(w){let I=[];Array.isArray(window[w])?I=window[w]:window[w]=I}(Zn);const{wrappedGtag:Q,gtagCore:me}=function Po(w,I,A,U,K){let Q=function(...me){window[U].push(arguments)};return window[K]&&"function"==typeof window[K]&&(Q=window[K]),window[K]=function ll(w,I,A,U){function Q(){return Q=(0,O.Z)(function*(me,...Ze){try{if("event"===me){const[We,_t]=Ze;yield function jf(w,I,A,U,K){return Ro.apply(this,arguments)}(w,I,A,We,_t)}else if("config"===me){const[We,_t]=Ze;yield function ud(w,I,A,U,K,Q){return lo.apply(this,arguments)}(w,I,A,U,We,_t)}else if("consent"===me){const[We]=Ze;w("consent","update",We)}else if("get"===me){const[We,_t,Pt]=Ze;w("get",We,_t,Pt)}else if("set"===me){const[We]=Ze;w("set",We)}else w(me,...Ze)}catch(We){gi.error(We)}}),Q.apply(this,arguments)}return function K(me){return Q.apply(this,arguments)}}(Q,w,I,A),{gtagCore:Q,wrappedGtag:window[K]}}(Nn,sc,Fs,Zn,ai);tt=Q,sr=me,es=!0}return Nn[U]=function dn(w,I,A,U,K,Q,me){return ct.apply(this,arguments)}(w,sc,Fs,I,sr,Zn,A),new rr(w)}function Ju(){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const nh="@firebase/analytics";!function Yn(){(0,re._registerComponent)(new oe.wA(oo,(I,{options:A})=>Gf(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,re._registerComponent)(new oe.wA("analytics-internal",function w(I){try{const A=I.getProvider(oo).getImmediate();return{logEvent:(U,K,Q)=>function th(w,I,A,U){w=(0,de.m9)(w),function Cy(w,I,A,U,K){return $f.apply(this,arguments)}(tt,Nn[w.app.options.appId],I,A,U).catch(K=>gi.error(K))}(A,U,K,Q)}}catch(A){throw Un.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,re.registerVersion)(nh,"0.10.0"),(0,re.registerVersion)(nh,"0.10.0","esm2017")}();var xd=V(4408),Ls=V(7565);const Id=new class Cd extends Ls.v{}(class Ed extends xd.o{constructor(I,A){super(I,A),this.scheduler=I,this.work=A}schedule(I,A=0){return A>0?super.schedule(I,A):(this.delay=A,this.state=I,this.scheduler.flush(this),this)}execute(I,A){return A>0||this.closed?super.execute(I,A):this._execute(I,A)}requestAsyncId(I,A,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(I,A,U):(I.flush(this),0)}});var qf=V(4986),ul=V(9751),ih=V(8505),dc=V(9468),Bo=V(5363);const hl=new d.GfV("7.6.1"),Dd="__angularfire_symbol__analyticsIsSupportedValue",rh="__angularfire_symbol__analyticsIsSupported",fl="__angularfire_symbol__remoteConfigIsSupportedValue",sh="__angularfire_symbol__remoteConfigIsSupported",Kf="__angularfire_symbol__messagingIsSupportedValue",oh="__angularfire_symbol__messagingIsSupported";function ml(w,I,A){if(I){if(1===I.length)return I[0];const Q=I.filter(me=>me.app===A);if(1===Q.length)return Q[0]}return A.container.getProvider(w).getImmediate({optional:!0})}globalThis[rh]||(globalThis[rh]=Ju().then(w=>globalThis[Dd]=w).catch(()=>globalThis[Dd]=!1)),globalThis[oh]||(globalThis[oh]=Vf().then(w=>globalThis[Kf]=w).catch(()=>globalThis[Kf]=!1)),globalThis[sh]||(globalThis[sh]=Tu().then(w=>globalThis[fl]=w).catch(()=>globalThis[fl]=!1));const Zf=(w,I)=>{const A=I?[I]:(0,$.C6)(),U=[];return A.forEach(K=>{K.container.getProvider(w).instances.forEach(me=>{U.includes(me)||U.push(me)})}),U};function Vo(){}class uc{constructor(I,A=Id){this.zone=I,this.delegate=A}now(){return this.delegate.now()}schedule(I,A,U){const K=this.zone;return this.delegate.schedule(function(me){K.runGuarded(()=>{I.apply(this,[me])})},A,U)}}class ns{constructor(I){this.zone=I,this.task=null}call(I,A){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo)),A.pipe((0,ih.b)({next:U,complete:U,error:U})).subscribe(I).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ea=(()=>{class w{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new uc(Zone.current)),this.insideAngular=A.run(()=>new uc(Zone.current,qf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(A){return new(A||w)(d.LFG(d.R0b))},w.\u0275prov=d.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Uo(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function uo(w){return Uo().ngZone.run(()=>w())}function ch(w){return Uo(),function Qf(w){return function(A){return(A=A.lift(new ns(w.ngZone))).pipe((0,dc.R)(w.outsideAngular),(0,Bo.Q)(w.insideAngular))}}(Uo())(w)}const Xf=(w,I)=>function(){const U=arguments;return I&&setTimeout(()=>{"scheduled"===I.state&&I.invoke()},10),uo(()=>w.apply(void 0,U))},jn=(w,I)=>function(){let A;const U=arguments;for(let Q=0;Q<arguments.length;Q++)"function"==typeof U[Q]&&(I&&(A||(A=uo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vo,{},Vo,Vo)))),U[Q]=Xf(U[Q],A));const K=function lh(w){return Uo().ngZone.runOutsideAngular(()=>w())}(()=>w.apply(this,U));if(!I){if(K instanceof ul.y){const Q=Uo();return K.pipe((0,dc.R)(Q.outsideAngular),(0,Bo.Q)(Q.insideAngular))}return uo(()=>K)}return K instanceof ul.y?K.pipe(ch):K instanceof Promise?uo(()=>new Promise((Q,me)=>K.then(Ze=>uo(()=>Q(Ze)),Ze=>uo(()=>me(Ze))))):"function"==typeof K&&A?function(){return setTimeout(()=>{A&&"scheduled"===A.state&&A.invoke()},10),K.apply(this,arguments)}:uo(()=>K)}},1389:(wt,Me,V)=>{V.d(Me,{$:()=>Rt,A:()=>W,D:()=>Se,I:()=>Kn,J:()=>Pr,L:()=>Or,N:()=>zi,P:()=>dn,Q:()=>Cu,R:()=>ic,U:()=>Iu,V:()=>Tu,W:()=>Ll,X:()=>ks,Y:()=>Bl,Z:()=>Du,_:()=>Vl,a:()=>ir,a0:()=>Lf,a1:()=>Qc,a2:()=>Yp,a3:()=>ku,a4:()=>Fr,a5:()=>Ru,a6:()=>io,a7:()=>Li,a8:()=>ro,a9:()=>_s,aA:()=>le,aB:()=>rh,aC:()=>ei,aD:()=>er,aE:()=>ih,aF:()=>eh,aG:()=>cc,aH:()=>vn,aL:()=>vs,aO:()=>to,aa:()=>Nu,ab:()=>Ou,ac:()=>Qp,ad:()=>Fu,ae:()=>Lu,af:()=>ed,ai:()=>Bu,aj:()=>Vu,ak:()=>Gi,an:()=>Ff,ao:()=>rd,aq:()=>il,ar:()=>ya,as:()=>Dt,at:()=>It,au:()=>Ee,av:()=>De,aw:()=>Lt,ax:()=>oh,ay:()=>Zt,az:()=>Te,b:()=>Ql,c:()=>tt,d:()=>Gf,e:()=>oc,f:()=>nh,g:()=>Cd,h:()=>xd,i:()=>hd,j:()=>qf,k:()=>Ca,l:()=>cl,m:()=>Ia,o:()=>hc,p:()=>ve,r:()=>Xu,s:()=>co,u:()=>Lr});var d=V(5861),$=V(2090),O=V(6881),re=V(7582),de=V(1877),oe=V(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function ee(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},qe=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Re=new de.Yd("@firebase/auth");function je(b,...p){Re.logLevel<=de.in.ERROR&&Re.error(`Auth (${O.SDK_VERSION}): ${b}`,...p)}function De(b,...p){throw Le(b,...p)}function Te(b,...p){return Le(b,...p)}function Pe(b,p,_){const x=Object.assign(Object.assign({},qe()),{[p]:_});return new $.LL("auth","Firebase",x).create(p,{appName:b.name})}function ze(b,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&De(b,"argument-error"),Pe(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(b,...p){if("string"!=typeof b){const _=p[0],x=[...p.slice(1)];return x[0]&&(x[0].appName=b.name),b._errorFactory.create(_,...x)}return at.create(b,...p)}function le(b,p,..._){if(!b)throw Le(p,..._)}function it(b){const p="INTERNAL ASSERTION FAILED: "+b;throw je(p),new Error(p)}function Dt(b,p){b||it(p)}function ot(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function qt(){return"http:"===ht()||"https:"===ht()}function ht(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class fr{constructor(p,_){this.shortDelay=p,this.longDelay=_,Dt(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Ds(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ps(b,p){Dt(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class ue{static initialize(p,_,x){this.fetchImpl=p,_&&(this.headersImpl=_),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ye=new fr(3e4,6e4);function ne(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function Ae(b,p,_,x){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,d.Z)(function*(b,p,_,x,M={}){return lt(b,M,(0,d.Z)(function*(){let N={},J={};x&&("GET"===p?J=x:N={body:JSON.stringify(x)});const he=(0,$.xO)(Object.assign({key:b.config.apiKey},J)).slice(1),$e=yield b._getAdditionalHeaders();return $e["Content-Type"]="application/json",b.languageCode&&($e["X-Firebase-Locale"]=b.languageCode),ue.fetch()(sn(b,b.config.apiHost,_,he),Object.assign({method:p,headers:$e,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function lt(b,p,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(b,p,_){b._canInitEmulator=!1;const x=Object.assign(Object.assign({},pe),p);try{const M=new Mn(b),N=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const J=yield N.json();if("needConfirmation"in J)throw gn(b,"account-exists-with-different-credential",J);if(N.ok&&!("errorMessage"in J))return J;{const he=N.ok?J.errorMessage:J.error.message,[$e,Qe]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw gn(b,"credential-already-in-use",J);if("EMAIL_EXISTS"===$e)throw gn(b,"email-already-in-use",J);if("USER_DISABLED"===$e)throw gn(b,"user-disabled",J);const vt=x[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw Pe(b,vt,Qe);De(b,vt)}}catch(M){if(M instanceof $.ZR)throw M;De(b,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function hn(b,p,_,x){return Et.apply(this,arguments)}function Et(){return(Et=(0,d.Z)(function*(b,p,_,x,M={}){const N=yield Ae(b,p,_,x,M);return"mfaPendingCredential"in N&&De(b,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function sn(b,p,_,x){const M=`${p}${_}?${x}`;return b.config.emulator?ps(b.config,M):`${b.config.apiScheme}://${M}`}class Mn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,x)=>{this.timer=setTimeout(()=>x(Te(this.auth,"network-request-failed")),ye.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gn(b,p,_){const x={appName:b.name};_.email&&(x.email=_.email),_.phoneNumber&&(x.phoneNumber=_.phoneNumber);const M=Te(b,p,x);return M.customData._tokenResponse=_,M}function kn(){return(kn=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function $n(){return($n=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function pt(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Qn(){return(Qn=(0,d.Z)(function*(b,p=!1){const _=(0,$.m9)(b),x=yield _.getIdToken(p),M=Qi(x);le(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,J=N?.sign_in_provider;return{claims:M,token:x,authTime:pt(Hi(M.auth_time)),issuedAtTime:pt(Hi(M.iat)),expirationTime:pt(Hi(M.exp)),signInProvider:J||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Hi(b){return 1e3*Number(b)}function Qi(b){const[p,_,x]=b.split(".");if(void 0===p||void 0===_||void 0===x)return je("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(_);return M?JSON.parse(M):(je("Failed to decode base64 JWT payload"),null)}catch(M){return je("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Kt(b,p){return ft.apply(this,arguments)}function ft(){return(ft=(0,d.Z)(function*(b,p,_=!1){if(_)return p;try{return yield p}catch(x){throw x instanceof $.ZR&&function Ft({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(x)&&b.auth.currentUser===b&&(yield b.auth.signOut()),x}})).apply(this,arguments)}class Xn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const x=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),x)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Pi{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=pt(this.lastLoginAt),this.creationTime=pt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wn(b){return Xi.apply(this,arguments)}function Xi(){return Xi=(0,d.Z)(function*(b){var p;const _=b.auth,x=yield b.getIdToken(),M=yield Kt(b,function xr(b,p){return $n.apply(this,arguments)}(_,{idToken:x}));le(M?.users.length,_,"internal-error");const N=M.users[0];b._notifyReloadListener(N);const J=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?function Er(b){return b.map(p=>{var{providerId:_}=p,x=(0,re._T)(p,["providerId"]);return{providerId:_,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(N.providerUserInfo):[],he=function Xt(b,p){return[...b.filter(x=>!p.some(M=>M.providerId===x.providerId)),...p]}(b.providerData,J),vt=!!b.isAnonymous&&!(b.email&&N.passwordHash||he?.length),Gt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:he,metadata:new Pi(N.createdAt,N.lastLoginAt),isAnonymous:vt};Object.assign(b,Gt)}),Xi.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(b){const p=(0,$.m9)(b);yield Wn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(b,p){const _=yield lt(b,{},(0,d.Z)(function*(){const x=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=b.config,J=sn(b,M,"/v1/token",`key=${N}`),he=yield b._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(J,{method:"POST",headers:he,body:x})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){le(p.idToken,"internal-error"),le(typeof p.idToken<"u","internal-error"),le(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function fn(b){const p=Qi(b);return le(p,"internal-error"),le(typeof p.exp<"u","internal-error"),le(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var x=this;return(0,d.Z)(function*(){return le(!x.accessToken||x.refreshToken,p,"user-token-expired"),_||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(p,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var x=this;return(0,d.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:J}=yield function Jt(b,p){return mr.apply(this,arguments)}(p,_);x.updateTokensAndExpiration(M,N,Number(J))})()}updateTokensAndExpiration(p,_,x){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(p,_){const{refreshToken:x,accessToken:M,expirationTime:N}=_,J=new jt;return x&&(le("string"==typeof x,"internal-error",{appName:p}),J.refreshToken=x),M&&(le("string"==typeof M,"internal-error",{appName:p}),J.accessToken=M),N&&(le("number"==typeof N,"internal-error",{appName:p}),J.expirationTime=N),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new jt,this.toJSON())}_performRefresh(){return it("not implemented")}}function Jn(b,p){le("string"==typeof b||typeof b>"u","internal-error",{appName:p})}class Bn{constructor(p){var{uid:_,auth:x,stsTokenManager:M}=p,N=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=x,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Pi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,d.Z)(function*(){const x=yield Kt(_,_.stsTokenManager.getToken(_.auth,p));return le(x,_.auth,"internal-error"),_.accessToken!==x&&(_.accessToken=x,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),x})()}getIdTokenResult(p){return function gs(b){return Qn.apply(this,arguments)}(this,p)}reload(){return function qn(b){return Ci.apply(this,arguments)}(this)}_assign(p){this!==p&&(le(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new Bn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var x=this;return(0,d.Z)(function*(){let M=!1;p.idToken&&p.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield Wn(x)),yield x.auth._persistUserIfCurrent(x),M&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var p=this;return(0,d.Z)(function*(){const _=yield p.getIdToken();return yield Kt(p,function si(b,p){return kn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var x,M,N,J,he,$e,Qe,vt;const Gt=null!==(x=_.displayName)&&void 0!==x?x:void 0,br=null!==(M=_.email)&&void 0!==M?M:void 0,ho=null!==(N=_.phoneNumber)&&void 0!==N?N:void 0,kd=null!==(J=_.photoURL)&&void 0!==J?J:void 0,fh=null!==(he=_.tenantId)&&void 0!==he?he:void 0,gl=null!==($e=_._redirectEventId)&&void 0!==$e?$e:void 0,nm=null!==(Qe=_.createdAt)&&void 0!==Qe?Qe:void 0,mh=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Rd,emailVerified:im,isAnonymous:Pd,providerData:Nd,stsTokenManager:_l}=_;le(Rd&&_l,p,"internal-error");const Od=jt.fromJSON(this.name,_l);le("string"==typeof Rd,p,"internal-error"),Jn(Gt,p.name),Jn(br,p.name),le("boolean"==typeof im,p,"internal-error"),le("boolean"==typeof Pd,p,"internal-error"),Jn(ho,p.name),Jn(kd,p.name),Jn(fh,p.name),Jn(gl,p.name),Jn(nm,p.name),Jn(mh,p.name);const fc=new Bn({uid:Rd,auth:p,email:br,emailVerified:im,displayName:Gt,isAnonymous:Pd,photoURL:kd,phoneNumber:ho,tenantId:fh,stsTokenManager:Od,createdAt:nm,lastLoginAt:mh});return Nd&&Array.isArray(Nd)&&(fc.providerData=Nd.map(ph=>Object.assign({},ph))),gl&&(fc._redirectEventId=gl),fc}static _fromIdTokenResponse(p,_,x=!1){return(0,d.Z)(function*(){const M=new jt;M.updateFromServerResponse(_);const N=new Bn({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:x});return yield Wn(N),N})()}}const Ni=new Map;function ei(b){Dt(b instanceof Function,"Expected a class definition");let p=Ni.get(b);return p?(Dt(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,Ni.set(b,p),p)}const zi=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,x){var M=this;return(0,d.Z)(function*(){M.storage[_]=x})()}_get(_){var x=this;return(0,d.Z)(function*(){const M=x.storage[_];return void 0===M?null:M})()}_remove(_){var x=this;return(0,d.Z)(function*(){delete x.storage[_]})()}_addListener(_,x){}_removeListener(_,x){}}return b.type="NONE",b})();function er(b,p,_){return`firebase:${b}:${p}:${_}`}class G{constructor(p,_,x){this.persistence=p,this.auth=_,this.userKey=x;const{config:M,name:N}=this.auth;this.fullUserKey=er(this.userKey,M.apiKey,N),this.fullPersistenceKey=er("persistence",M.apiKey,N),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?Bn._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,d.Z)(function*(){if(_.persistence===p)return;const x=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,x?_.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,x="authUser"){return(0,d.Z)(function*(){if(!_.length)return new G(ei(zi),p,x);const M=(yield Promise.all(_.map(function(){var Qe=(0,d.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let N=M[0]||ei(zi);const J=er(x,p.config.apiKey,p.name);let he=null;for(const Qe of _)try{const vt=yield Qe._get(J);if(vt){const Gt=Bn._fromJSON(p,vt);Qe!==N&&(he=Gt),N=Qe;break}}catch{}const $e=M.filter(Qe=>Qe._shouldAllowMigration);return N._shouldAllowMigration&&$e.length?(N=$e[0],he&&(yield N._set(J,he.toJSON())),yield Promise.all(_.map(function(){var Qe=(0,d.Z)(function*(vt){if(vt!==N)try{yield vt._remove(J)}catch{}});return function(vt){return Qe.apply(this,arguments)}}())),new G(N,p,x)):new G(N,p,x)})()}}function z(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Z(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(rt(p))return"Blackberry";if(St(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||R(p))&&!p.includes("edge/"))return"Chrome";if(Ee(p))return"Android";{const x=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function F(b=(0,$.z$)()){return/firefox\//i.test(b)}function L(b=(0,$.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function R(b=(0,$.z$)()){return/crios\//i.test(b)}function Z(b=(0,$.z$)()){return/iemobile/i.test(b)}function Ee(b=(0,$.z$)()){return/android/i.test(b)}function rt(b=(0,$.z$)()){return/blackberry/i.test(b)}function St(b=(0,$.z$)()){return/webos/i.test(b)}function It(b=(0,$.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Zt(b=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Ht(b=(0,$.z$)()){return It(b)||Ee(b)||St(b)||rt(b)||/windows phone/i.test(b)||Z(b)}function Ss(b,p=[]){let _;switch(b){case"Browser":_=z((0,$.z$)());break;case"Worker":_=`${z((0,$.z$)())}-${b}`;break;default:_=b}const x=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${x}`}function se(){return(se=(0,d.Z)(function*(b){return(yield Ae(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Be(b,p){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(b,p){return Ae(b,"GET","/v2/recaptchaConfig",ne(b,p))})).apply(this,arguments)}function At(b){return void 0!==b&&void 0!==b.getResponse}function en(b){return void 0!==b&&void 0!==b.enterprise}class bt{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function an(b){return new Promise((p,_)=>{const x=document.createElement("script");x.setAttribute("src",b),x.onload=p,x.onerror=M=>{const N=Te("internal-error");N.customData=M,_(N)},x.type="text/javascript",x.charset="UTF-8",function yn(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(x)})}function $i(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Mf="NO_RECAPTCHA";class Zs{constructor(p){this.type="recaptcha-enterprise",this.auth=vn(p)}verify(p="verify",_=!1){var x=this;return(0,d.Z)(function*(){function N(){return N=(0,d.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var $e=(0,d.Z)(function*(Qe,vt){Be(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Gt=>{if(void 0!==Gt.recaptchaKey){const br=new bt(Gt);return null==he.tenantId?he._agentRecaptchaConfig=br:he._tenantRecaptchaConfigs[he.tenantId]=br,Qe(br.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(Gt=>{vt(Gt)})});return function(Qe,vt){return $e.apply(this,arguments)}}())}),N.apply(this,arguments)}function J(he,$e,Qe){const vt=window.grecaptcha;en(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(he,{action:p}).then(Gt=>{$e(Gt)}).catch(()=>{$e(Mf)})}):Qe(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,$e)=>{(function M(he){return N.apply(this,arguments)})(x.auth).then(Qe=>{if(!_&&en(window.grecaptcha))J(Qe,he,$e);else{if(typeof window>"u")return void $e(new Error("RecaptchaVerifier is only supported in browser"));an("https://www.google.com/recaptcha/enterprise.js?render="+Qe).then(()=>{J(Qe,he,$e)}).catch(vt=>{$e(vt)})}}).catch(Qe=>{$e(Qe)})})})()}}function Di(b,p,_){return Je.apply(this,arguments)}function Je(){return(Je=(0,d.Z)(function*(b,p,_,x=!1){const M=new Zs(b);let N;try{N=yield M.verify(_)}catch{N=yield M.verify(_,!0)}const J=Object.assign({},p);return Object.assign(J,x?{captchaResp:N}:{captchaResponse:N}),Object.assign(J,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(J,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),J})).apply(this,arguments)}class Yt{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const x=N=>new Promise((J,he)=>{try{J(p(N))}catch($e){he($e)}});x.onAbort=_,this.queue.push(x);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,d.Z)(function*(){if(_.auth.currentUser===p)return;const x=[];try{for(const M of _.queue)yield M(p),M.onAbort&&x.push(M.onAbort)}catch(M){x.reverse();for(const N of x)try{N()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class Rn{constructor(p,_,x,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=x,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ys(this),this.idTokenSubscription=new Ys(this),this.beforeStateQueue=new Yt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var x=this;return _&&(this._popupRedirectResolver=ei(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var M,N;if(!x._deleted&&(x.persistenceManager=yield G.create(x,p),!x._deleted)){if(null!==(M=x._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(_),x.lastNotifiedUid=(null===(N=x.currentUser)||void 0===N?void 0:N.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,d.Z)(function*(){var x;const M=yield _.assertedPersistence.getCurrentUser();let N=M,J=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId,$e=N?._redirectEventId,Qe=yield _.tryRedirectSignIn(p);(!he||he===$e)&&Qe?.user&&(N=Qe.user,J=!0)}if(!N)return _.directlySetCurrentUser(null);if(!N._redirectEventId){if(J)try{yield _.beforeStateQueue.runMiddleware(N)}catch(he){N=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return N?_.reloadAndSetCurrentUserOrClear(N):_.directlySetCurrentUser(null)}return le(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===N._redirectEventId?_.directlySetCurrentUser(N):_.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var _=this;return(0,d.Z)(function*(){let x=null;try{x=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,d.Z)(function*(){try{yield Wn(p)}catch(x){if("auth/network-request-failed"!==x?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Ei(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,d.Z)(function*(){const x=p?(0,$.m9)(p):null;return x&&le(x.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(x&&x._clone(_))})()}_updateCurrentUser(p,_=!1){var x=this;return(0,d.Z)(function*(){if(!x._deleted)return p&&le(x.tenantId===p.tenantId,x,"tenant-id-mismatch"),_||(yield x.beforeStateQueue.runMiddleware(p)),x.queue((0,d.Z)(function*(){yield x.directlySetCurrentUser(p),x.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(ei(p))}))}initializeRecaptchaConfig(){var p=this;return(0,d.Z)(function*(){const _=yield Be(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new bt(_);null==p.tenantId?p._agentRecaptchaConfig=x:p._tenantRecaptchaConfigs[p.tenantId]=x,x.emailPasswordEnabled&&new Zs(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,x){return this.registerStateListener(this.authStateSubscription,p,_,x)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,x){return this.registerStateListener(this.idTokenSubscription,p,_,x)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var x=this;return(0,d.Z)(function*(){const M=yield x.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const x=p&&ei(p)||_._popupRedirectResolver;le(x,_,"argument-error"),_.redirectPersistenceManager=yield G.create(_,[ei(x._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,d.Z)(function*(){var x,M;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(x=_._currentUser)||void 0===x?void 0:x._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,d.Z)(function*(){if(p===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,x,M){if(this._deleted)return()=>{};const N="function"==typeof _?_:_.next.bind(_),J=this._isInitialized?Promise.resolve():this._initializationPromise;return le(J,this,"internal-error"),J.then(()=>N(this.currentUser)),"function"==typeof _?p.addObserver(_,x,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,d.Z)(function*(){var _;const x={"X-Client-Version":p.clientVersion};p.app.options.appId&&(x["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(x["X-Firebase-Client"]=M);const N=yield p._getAppCheckToken();return N&&(x["X-Firebase-AppCheck"]=N),x})()}_getAppCheckToken(){var p=this;return(0,d.Z)(function*(){var _;const x=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return x?.error&&function Oe(b,...p){Re.logLevel<=de.in.WARN&&Re.warn(`Auth (${O.SDK_VERSION}): ${b}`,...p)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}function vn(b){return(0,$.m9)(b)}class Ys{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kn(b,p,_){const x=vn(b);le(x._canInitEmulator,x,"emulator-config-failed"),le(/^https?:\/\//.test(p),x,"invalid-emulator-scheme");const M=!!_?.disableWarnings,N=Wa(p),{host:J,port:he}=function Xr(b){const p=Wa(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!_)return{host:"",port:null};const x=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(x);if(M){const N=M[1];return{host:N,port:$t(x.substr(N.length+1))}}{const[N,J]=x.split(":");return{host:N,port:$t(J)}}}(p);x.config.emulator={url:`${N}//${J}${null===he?"":`:${he}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:J,port:he,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Ol(){function b(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Wa(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function $t(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Pr{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(p){return it("not implemented")}_linkToIdToken(p,_){return it("not implemented")}_getReauthenticationResolver(p){return it("not implemented")}}function sa(b,p){return As.apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:resetPassword",ne(b,p))})).apply(this,arguments)}function fi(b,p){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:update",ne(b,p))})).apply(this,arguments)}function Co(b,p){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithPassword",ne(b,p))})).apply(this,arguments)}function In(b,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:sendOobCode",ne(b,p))})).apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(b,p){return In(b,p)})).apply(this,arguments)}function oa(b,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,d.Z)(function*(b,p){return In(b,p)})).apply(this,arguments)}function Ms(b,p){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,d.Z)(function*(b,p){return In(b,p)})).apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(b,p){return In(b,p)})).apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithEmailLink",ne(b,p))})).apply(this,arguments)}function Ka(){return(Ka=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithEmailLink",ne(b,p))})).apply(this,arguments)}class pr extends Pr{constructor(p,_,x,M=null){super("password",x),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new pr(p,_,"password")}static _fromEmailAndCode(p,_,x=null){return new pr(p,_,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,d.Z)(function*(){var x;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=p._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const N=yield Di(p,M,"signInWithPassword");return Co(p,N)}return Co(p,M).catch(function(){var N=(0,d.Z)(function*(J){if("auth/missing-recaptcha-token"===J.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield Di(p,M,"signInWithPassword");return Co(p,he)}return Promise.reject(J)});return function(J){return N.apply(this,arguments)}}());case"emailLink":return function Jr(b,p){return Io.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:De(p,"internal-error")}})()}_linkToIdToken(p,_){var x=this;return(0,d.Z)(function*(){switch(x.signInMethod){case"password":return fi(p,{idToken:_,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Fl(b,p){return Ka.apply(this,arguments)}(p,{idToken:_,email:x._email,oobCode:x._password});default:De(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Xs(b,p){return Za.apply(this,arguments)}function Za(){return(Za=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithIdp",ne(b,p))})).apply(this,arguments)}class Or extends Pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Or(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):De("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:M}=_,N=(0,re._T)(_,["providerId","signInMethod"]);if(!x||!M)return null;const J=new Or(x,M);return J.idToken=N.idToken||void 0,J.accessToken=N.accessToken||void 0,J.secret=N.secret,J.nonce=N.nonce,J.pendingToken=N.pendingToken||null,J}_getIdTokenResponse(p){return Xs(p,this.buildRequest())}_linkToIdToken(p,_){const x=this.buildRequest();return x.idToken=_,Xs(p,x)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Xs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function vu(){return(vu=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:sendVerificationCode",ne(b,p))})).apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithPhoneNumber",ne(b,p))})).apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(b,p){const _=yield hn(b,"POST","/v1/accounts:signInWithPhoneNumber",ne(b,p));if(_.temporaryProof)throw gn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const xu={USER_NOT_FOUND:"user-not-found"};function Rf(){return(Rf=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithPhoneNumber",ne(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),xu)})).apply(this,arguments)}class Js extends Pr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Js({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Js({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function kf(b,p){return bu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Zp(b,p){return wu.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Eu(b,p){return Rf.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:x,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:x,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:x,phoneNumber:M,temporaryProof:N}=p;return x||_||M||N?new Js({verificationId:_,verificationCode:x,phoneNumber:M,temporaryProof:N}):null}}class aa{constructor(p){var _,x,M,N,J,he;const $e=(0,$.zd)((0,$.pd)(p)),Qe=null!==(_=$e.apiKey)&&void 0!==_?_:null,vt=null!==(x=$e.oobCode)&&void 0!==x?x:null,Gt=function gr(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=$e.mode)&&void 0!==M?M:null);le(Qe&&vt&&Gt,"argument-error"),this.apiKey=Qe,this.operation=Gt,this.code=vt,this.continueUrl=null!==(N=$e.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(J=$e.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(he=$e.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function Pf(b){const p=(0,$.zd)((0,$.pd)(b)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,x=(0,$.zd)((0,$.pd)(b)).deep_link_id;return(x?(0,$.zd)((0,$.pd)(x)).link:null)||x||_||p||b}(p);try{return new aa(_)}catch{return null}}}let Cu=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,x){return pr._fromEmailAndPassword(_,x)}static credentialWithLink(_,x){const M=aa.parseLink(x);return le(M,"argument-error"),pr._fromEmailAndCode(_,M.code,M.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class eo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class la extends eo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ks extends la{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return le("providerId"in _&&"signInMethod"in _,"argument-error"),Or._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return le(p.idToken||p.accessToken,"argument-error"),Or._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ks.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ks.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:x,oauthTokenSecret:M,pendingToken:N,nonce:J,providerId:he}=p;if(!x&&!M&&!_&&!N||!he)return null;try{return new ks(he)._credential({idToken:_,accessToken:x,nonce:J,pendingToken:N})}catch{return null}}}let Iu=(()=>{class b extends la{constructor(){super("facebook.com")}static credential(_){return Or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Tu=(()=>{class b extends la{constructor(){super("google.com"),this.addScope("profile")}static credential(_,x){return Or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:x})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:x,oauthAccessToken:M}=_;if(!x&&!M)return null;try{return b.credential(x,M)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Ll=(()=>{class b extends la{constructor(){super("github.com")}static credential(_){return Or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class to extends Pr{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Xs(p,this.buildRequest())}_linkToIdToken(p,_){const x=this.buildRequest();return x.idToken=_,Xs(p,x)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Xs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:M,pendingToken:N}=_;return x&&M&&N&&x===M?new to(x,N):null}static _create(p,_){return new to(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bl extends eo{constructor(p){le(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Bl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Bl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=to.fromJSON(p);return le(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:x}=p;if(!_||!x)return null;try{return to._create(x,_)}catch{return null}}}let Du=(()=>{class b extends la{constructor(){super("twitter.com")}static credential(_,x){return Or._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:x})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:x,oauthTokenSecret:M}=_;if(!x||!M)return null;try{return b.credential(x,M)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function ca(b,p){return To.apply(this,arguments)}function To(){return(To=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signUp",ne(b,p))})).apply(this,arguments)}class Vn{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,x,M=!1){return(0,d.Z)(function*(){const N=yield Bn._fromIdTokenResponse(p,x,M),J=Ya(x);return new Vn({user:N,providerId:J,_tokenResponse:x,operationType:_})})()}static _forOperation(p,_,x){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(x,!0);const M=Ya(x);return new Vn({user:p,providerId:M,_tokenResponse:x,operationType:_})})()}}function Ya(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Vl(b){return pi.apply(this,arguments)}function pi(){return(pi=(0,d.Z)(function*(b){var p;const _=vn(b);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Vn({user:_.currentUser,providerId:null,operationType:"signIn"});const x=yield ca(_,{returnSecureToken:!0}),M=yield Vn._fromIdTokenResponse(_,"signIn",x,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Do extends $.ZR{constructor(p,_,x,M){var N;super(_.code,_.message),this.operationType=x,this.user=M,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:_.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(p,_,x,M){return new Do(p,_,x,M)}}function So(b,p,_,x){return("reauthenticate"===p?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Do._fromErrorAndOperation(b,N,p,x):N})}function Fi(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Ff(b,p){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,d.Z)(function*(b,p){const _=(0,$.m9)(b);yield Qa(!0,_,p);const{providerUserInfo:x}=yield function Ln(b,p){return oi.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=Fi(x||[]);return _.providerData=_.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Ul.apply(this,arguments)}function nr(b,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,d.Z)(function*(b,p,_=!1){const x=yield Kt(b,p._linkToIdToken(b.auth,yield b.getIdToken()),_);return Vn._forOperation(b,"link",x)})).apply(this,arguments)}function Qa(b,p,_){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(b,p,_){yield Wn(p);const M=!1===b?"provider-already-linked":"no-such-provider";le(Fi(p.providerData).has(_)===b,p.auth,M)})).apply(this,arguments)}function Su(b,p){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(b,p,_=!1){const{auth:x}=b,M="reauthenticate";try{const N=yield Kt(b,So(x,M,p,b),_);le(N.idToken,x,"internal-error");const J=Qi(N.idToken);le(J,x,"internal-error");const{sub:he}=J;return le(b.uid===he,x,"user-mismatch"),Vn._forOperation(b,M,N)}catch(N){throw"auth/user-not-found"===N?.code&&De(x,"user-mismatch"),N}})).apply(this,arguments)}function Xa(b,p){return da.apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(b,p,_=!1){const x="signIn",M=yield So(b,x,p),N=yield Vn._fromIdTokenResponse(b,x,M);return _||(yield b._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Rt(b,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,d.Z)(function*(b,p){return Xa(vn(b),p)})).apply(this,arguments)}function Lf(b,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,d.Z)(function*(b,p){const _=(0,$.m9)(b);return yield Qa(!1,_,p.providerId),nr(_,p)})).apply(this,arguments)}function Qc(b,p){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,d.Z)(function*(b,p){return Su((0,$.m9)(b),p)})).apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(b,p){return hn(b,"POST","/v1/accounts:signInWithCustomToken",ne(b,p))})).apply(this,arguments)}function Yp(b,p){return _e.apply(this,arguments)}function _e(){return _e=(0,d.Z)(function*(b,p){const _=vn(b),x=yield function Au(b,p){return Mu.apply(this,arguments)}(_,{token:p,returnSecureToken:!0}),M=yield Vn._fromIdTokenResponse(_,"signIn",x);return yield _._updateCurrentUser(M.user),M}),_e.apply(this,arguments)}class Bt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?Jc._fromServerResponse(p,_):"totpInfo"in _?Ja._fromServerResponse(p,_):De(p,"internal-error")}}class Jc extends Bt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new Jc(_)}}class Ja extends Bt{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new Ja(_)}}function ti(b,p,_){var x;le((null===(x=_.url)||void 0===x?void 0:x.length)>0,b,"invalid-continue-uri"),le(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(le(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(le(_.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function ku(b,p,_){return ua.apply(this,arguments)}function ua(){return ua=(0,d.Z)(function*(b,p,_){var x;const M=vn(b),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=M._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const J=yield Di(M,N,"getOobCode",!0);_&&ti(M,J,_),yield oa(M,J)}else _&&ti(M,N,_),yield oa(M,N).catch(function(){var J=(0,d.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const $e=yield Di(M,N,"getOobCode",!0);_&&ti(M,$e,_),yield oa(M,$e)}});return function(he){return J.apply(this,arguments)}}())}),ua.apply(this,arguments)}function Fr(b,p,_){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,d.Z)(function*(b,p,_){yield sa((0,$.m9)(b),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Ru(b,p){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,d.Z)(function*(b,p){yield function Eo(b,p){return Cr.apply(this,arguments)}((0,$.m9)(b),{oobCode:p})}),Pu.apply(this,arguments)}function io(b,p){return ha.apply(this,arguments)}function ha(){return(ha=(0,d.Z)(function*(b,p){const _=(0,$.m9)(b),x=yield sa(_,{oobCode:p}),M=x.requestType;switch(le(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(x.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(x.mfaInfo,_,"internal-error");default:le(x.email,_,"internal-error")}let N=null;return x.mfaInfo&&(N=Bt._fromServerResponse(vn(_),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function Li(b,p){return _r.apply(this,arguments)}function _r(){return(_r=(0,d.Z)(function*(b,p){const{data:_}=yield io((0,$.m9)(b),p);return _.email})).apply(this,arguments)}function ro(b,p,_){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,d.Z)(function*(b,p,_){var x;const M=vn(b),N={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let J;if(null!==(x=M._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const Qe=yield Di(M,N,"signUpPassword");J=ca(M,Qe)}else J=ca(M,N).catch(function(){var Qe=(0,d.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Gt=yield Di(M,N,"signUpPassword");return ca(M,Gt)}return Promise.reject(vt)});return function(vt){return Qe.apply(this,arguments)}}());const he=yield J.catch(Qe=>Promise.reject(Qe)),$e=yield Vn._fromIdTokenResponse(M,"signIn",he);return yield M._updateCurrentUser($e.user),$e}),Ps.apply(this,arguments)}function _s(b,p,_){return Rt((0,$.m9)(b),Cu.credential(p,_))}function Nu(b,p,_){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,d.Z)(function*(b,p,_){var x;const M=vn(b),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function J(he,$e){le($e.handleCodeInApp,M,"argument-error"),$e&&ti(M,he,$e)}if(null!==(x=M._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const he=yield Di(M,N,"getOobCode",!0);J(he,_),yield Ms(M,he)}else J(N,_),yield Ms(M,N).catch(function(){var he=(0,d.Z)(function*($e){if("auth/missing-recaptcha-token"!==$e.code)return Promise.reject($e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Qe=yield Di(M,N,"getOobCode",!0);J(Qe,_),yield Ms(M,Qe)}});return function($e){return he.apply(this,arguments)}}())}),Ao.apply(this,arguments)}function Ou(b,p){return"EMAIL_SIGNIN"===aa.parseLink(p)?.operation}function Qp(b,p,_){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b),M=Cu.credentialWithLink(p,_||ot());return le(M._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Rt(x,M)})).apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:createAuthUri",ne(b,p))})).apply(this,arguments)}function Fu(b,p){return $l.apply(this,arguments)}function $l(){return $l=(0,d.Z)(function*(b,p){const x={identifier:p,continueUri:qt()?ot():"http://localhost"},{signinMethods:M}=yield function zl(b,p){return el.apply(this,arguments)}((0,$.m9)(b),x);return M||[]}),$l.apply(this,arguments)}function Lu(b,p){return fa.apply(this,arguments)}function fa(){return fa=(0,d.Z)(function*(b,p){const _=(0,$.m9)(b),M={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&ti(_.auth,M,p);const{email:N}=yield function Kc(b,p){return qa.apply(this,arguments)}(_.auth,M);N!==b.email&&(yield b.reload())}),fa.apply(this,arguments)}function ed(b,p,_){return tl.apply(this,arguments)}function tl(){return tl=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};_&&ti(x.auth,N,_);const{email:J}=yield function yu(b,p){return tr.apply(this,arguments)}(x.auth,N);J!==b.email&&(yield b.reload())}),tl.apply(this,arguments)}function Gl(){return(Gl=(0,d.Z)(function*(b,p){return Ae(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bu(b,p){return nd.apply(this,arguments)}function nd(){return nd=(0,d.Z)(function*(b,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const x=(0,$.m9)(b),N={idToken:yield x.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},J=yield Kt(x,function td(b,p){return Gl.apply(this,arguments)}(x.auth,N));x.displayName=J.displayName||null,x.photoURL=J.photoUrl||null;const he=x.providerData.find(({providerId:$e})=>"password"===$e);he&&(he.displayName=x.displayName,he.photoURL=x.photoURL),yield x._updateTokensIfNecessary(J)}),nd.apply(this,arguments)}function Vu(b,p){return ys((0,$.m9)(b),p,null)}function Gi(b,p){return ys((0,$.m9)(b),null,p)}function ys(b,p,_){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,d.Z)(function*(b,p,_){const{auth:x}=b,N={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(N.email=p),_&&(N.password=_);const J=yield Kt(b,fi(x,N));yield b._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class ma{constructor(p,_,x={}){this.isNewUser=p,this.providerId=_,this.profile=x}}class Wl extends ma{constructor(p,_,x,M){super(p,_,x),this.username=M}}class Xp extends ma{constructor(p,_){super(p,"facebook.com",_)}}class Uu extends Wl{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Jp extends ma{constructor(p,_){super(p,"google.com",_)}}class ql extends Wl{constructor(p,_,x){super(p,"twitter.com",_,x)}}function rd(b){const{user:p,_tokenResponse:_}=b;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function id(b){var p,_;if(!b)return null;const{providerId:x}=b,M=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},N=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!x&&b?.idToken){const J=null===(_=null===(p=Qi(b.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(J)return new ma(N,"anonymous"!==J&&"custom"!==J?J:null)}if(!x)return null;switch(x){case"facebook.com":return new Xp(N,M);case"github.com":return new Uu(N,M);case"google.com":return new Jp(N,M);case"twitter.com":return new ql(N,M,b.screenName||null);case"custom":case"anonymous":return new ma(N,null);default:return new ma(N,x,M)}}(_)}class Os{constructor(p,_,x){this.type=p,this.credential=_,this.auth=x}static _fromIdtoken(p,_){return new Os("enroll",p,_)}static _fromMfaPendingCredential(p){return new Os("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,x;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Os._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(x=p.multiFactorSession)&&void 0!==x&&x.idToken)return Os._fromIdtoken(p.multiFactorSession.idToken)}return null}}class sd{constructor(p,_,x){this.session=p,this.hints=_,this.signInResolver=x}static _fromError(p,_){const x=vn(p),M=_.customData._serverResponse,N=(M.mfaInfo||[]).map(he=>Bt._fromServerResponse(x,he));le(M.mfaPendingCredential,x,"internal-error");const J=Os._fromMfaPendingCredential(M.mfaPendingCredential);return new sd(J,N,function(){var he=(0,d.Z)(function*($e){const Qe=yield $e._process(x,J);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(_.operationType){case"signIn":const Gt=yield Vn._fromIdTokenResponse(x,_.operationType,vt);return yield x._updateCurrentUser(Gt.user),Gt;case"reauthenticate":return le(_.user,x,"internal-error"),Vn._forOperation(_.user,_.operationType,vt);default:De(x,"internal-error")}});return function($e){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,d.Z)(function*(){return _.signInResolver(p)})()}}function il(b,p){var _;const x=(0,$.m9)(b),M=p;return le(p.customData.operationType,x,"argument-error"),le(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,x,"argument-error"),sd._fromError(x,M)}class _a{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(x=>Bt._fromServerResponse(p.auth,x)))})}static _fromUser(p){return new _a(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Os._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var x=this;return(0,d.Z)(function*(){const M=p,N=yield x.getSession(),J=yield Kt(x.user,M._process(x.user.auth,N,_));return yield x.user._updateTokensIfNecessary(J),x.user.reload()})()}unenroll(p){var _=this;return(0,d.Z)(function*(){const x="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const N=yield Kt(_.user,function Mo(b,p){return Ae(b,"POST","/v2/accounts/mfaEnrollment:withdraw",ne(b,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:J})=>J!==x),yield _.user._updateTokensIfNecessary(N),yield _.user.reload()}catch(N){throw N}})()}}const ko=new WeakMap;function ya(b){const p=(0,$.m9)(b);return ko.has(p)||ko.set(p,_a._fromUser(p)),ko.get(p)}const rl="__sak";class sl{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(rl,"1"),this.storage.removeItem(rl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ql=(()=>{class b extends sl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,x)=>this.onStorageEvent(_,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function od(){const b=(0,$.z$)();return L(b)||It(b)}()&&function Ii(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ht(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const x of Object.keys(this.listeners)){const M=this.storage.getItem(x),N=this.localCache[x];M!==N&&_(x,N,M)}}onStorageEvent(_,x=!1){if(!_.key)return void this.forAllChangedKeys((he,$e,Qe)=>{this.notifyListeners(he,Qe)});const M=_.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(M);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!x)return}const N=()=>{const he=this.storage.getItem(M);!x&&this.localCache[M]===he||this.notifyListeners(M,he)},J=this.storage.getItem(M);!function Dn(){return(0,$.w1)()&&10===document.documentMode}()||J===_.newValue||_.newValue===_.oldValue?N():setTimeout(N,10)}notifyListeners(_,x){this.localCache[_]=x;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,x,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:x,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,x){var M=()=>super._set,N=this;return(0,d.Z)(function*(){yield M().call(N,_,x),N.localCache[_]=JSON.stringify(x)})()}_get(_){var x=()=>super._get,M=this;return(0,d.Z)(function*(){const N=yield x().call(M,_);return M.localCache[_]=JSON.stringify(N),N})()}_remove(_){var x=()=>super._remove,M=this;return(0,d.Z)(function*(){yield x().call(M,_),delete M.localCache[_]})()}}return b.type="LOCAL",b})(),ir=(()=>{class b extends sl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,x){}_removeListener(_,x){}}return b.type="SESSION",b})();let cd=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const x=this.receivers.find(N=>N.isListeningto(_));if(x)return x;const M=new b(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var x=this;return(0,d.Z)(function*(){const M=_,{eventId:N,eventType:J,data:he}=M.data,$e=x.handlersMap[J];if(!$e?.size)return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:J});const Qe=Array.from($e).map(function(){var Gt=(0,d.Z)(function*(br){return br(M.origin,he)});return function(br){return Gt.apply(this,arguments)}}()),vt=yield function Gu(b){return Promise.all(b.map(function(){var p=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(x){return{fulfilled:!1,reason:x}}});return function(_){return p.apply(this,arguments)}}()))}(Qe);M.ports[0].postMessage({status:"done",eventId:N,eventType:J,response:vt})})()}_subscribe(_,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(x)}_unsubscribe(_,x){this.handlersMap[_]&&x&&this.handlersMap[_].delete(x),(!x||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function vs(b="",p=10){let _="";for(let x=0;x<p;x++)_+=Math.floor(10*Math.random());return b+_}class Wu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,x=50){var M=this;return(0,d.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let J,he;return new Promise(($e,Qe)=>{const vt=vs("",20);N.port1.start();const Gt=setTimeout(()=>{Qe(new Error("unsupported_event"))},x);he={messageChannel:N,onMessage(br){const ho=br;if(ho.data.eventId===vt)switch(ho.data.status){case"ack":clearTimeout(Gt),J=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),$e(ho.data.response);break;default:clearTimeout(Gt),clearTimeout(J),Qe(new Error("invalid_response"))}}},M.handlers.add(he),N.port1.addEventListener("message",he.onMessage),M.target.postMessage({eventType:p,eventId:vt,data:_},[N.port2])}).finally(()=>{he&&M.removeMessageHandler(he)})})()}}function ii(){return window}function Xl(){return typeof ii().WorkerGlobalScope<"u"&&"function"==typeof ii().importScripts}function al(){return(al=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const gi="firebaseLocalStorageDb",va=1,Un="firebaseLocalStorage",Uf="fbase_key";class ao{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ec(b,p){return b.transaction([Un],p?"readwrite":"readonly").objectStore(Un)}function dd(){const b=indexedDB.open(gi,va);return new Promise((p,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const x=b.result;try{x.createObjectStore(Un,{keyPath:Uf})}catch(M){_(M)}}),b.addEventListener("success",(0,d.Z)(function*(){const x=b.result;x.objectStoreNames.contains(Un)?p(x):(x.close(),yield function ba(){const b=indexedDB.deleteDatabase(gi);return new ao(b).toPromise()}(),p(yield dd()))}))})}function ud(b,p,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(b,p,_){const x=ec(b,!0).put({[Uf]:p,value:_});return new ao(x).toPromise()})).apply(this,arguments)}function Ro(){return(Ro=(0,d.Z)(function*(b,p){const _=ec(b,!1).get(p),x=yield new ao(_).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function ll(b,p){const _=ec(b,!0).delete(p);return new ao(_).toPromise()}const hd=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield dd()),_.db})()}_withRetries(_){var x=this;return(0,d.Z)(function*(){let M=0;for(;;)try{const N=yield x._openDb();return yield _(N)}catch(N){if(M++>3)throw N;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Xl()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=cd._getInstance(function Jl(){return Xl()?self:null}()),_.receiver._subscribe("keyChanged",function(){var x=(0,d.Z)(function*(M,N){return{keyProcessed:(yield _._poll()).includes(N.key)}});return function(M,N){return x.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var x=(0,d.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return x.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var x,M;if(_.activeServiceWorker=yield function qu(){return al.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Wu(_.activeServiceWorker);const N=yield _.sender._send("ping",{},800);N&&null!==(x=N[0])&&void 0!==x&&x.fulfilled&&null!==(M=N[0])&&void 0!==M&&M.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var x=this;return(0,d.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Ku(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:_},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield dd();return yield ud(_,rl,"1"),yield ll(_,rl),!0}catch{}return!1})()}_withPendingWrite(_){var x=this;return(0,d.Z)(function*(){x.pendingWrites++;try{yield _()}finally{x.pendingWrites--}})()}_set(_,x){var M=this;return(0,d.Z)(function*(){return M._withPendingWrite((0,d.Z)(function*(){return yield M._withRetries(N=>ud(N,_,x)),M.localCache[_]=x,M.notifyServiceWorker(_)}))})()}_get(_){var x=this;return(0,d.Z)(function*(){const M=yield x._withRetries(N=>function jf(b,p){return Ro.apply(this,arguments)}(N,_));return x.localCache[_]=M,M})()}_remove(_){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(M=>ll(M,_)),delete x.localCache[_],x.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const x=yield _._withRetries(J=>{const he=ec(J,!1).getAll();return new ao(he).toPromise()});if(!x)return[];if(0!==_.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:J,value:he}of x)N.add(J),JSON.stringify(_.localCache[J])!==JSON.stringify(he)&&(_.notifyListeners(J,he),M.push(J));for(const J of Object.keys(_.localCache))_.localCache[J]&&!N.has(J)&&(_.notifyListeners(J,null),M.push(J));return M})()}notifyListeners(_,x){this.localCache[_]=x;const M=this.listeners[_];if(M)for(const N of Array.from(M))N(x)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(x)}_removeListener(_,x){this.listeners[_]&&(this.listeners[_].delete(x),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})(),fd=1e12;class Qu{constructor(p){this.auth=p,this.counter=fd,this._widgets=new Map}render(p,_){const x=this.counter;return this._widgets.set(x,new md(p,this.auth.name,_||{})),this.counter++,x}reset(p){var _;const x=p||fd;null===(_=this._widgets.get(x))||void 0===_||_.delete(),this._widgets.delete(x)}getResponse(p){var _;return(null===(_=this._widgets.get(p||fd))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,d.Z)(function*(){var x;return null===(x=_._widgets.get(p||fd))||void 0===x||x.execute(),""})()}}class md{constructor(p,_,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;le(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pd(b){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<b;x++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zf=$i("rcb"),xy=new fr(3e4,6e4);class Fo{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ii().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return le(function Cy(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&At(ii().grecaptcha)?Promise.resolve(ii().grecaptcha):new Promise((x,M)=>{const N=ii().setTimeout(()=>{M(Te(p,"network-request-failed"))},xy.get());ii()[zf]=()=>{ii().clearTimeout(N),delete ii()[zf];const he=ii().grecaptcha;if(!he||!At(he))return void M(Te(p,"internal-error"));const $e=he.render;he.render=(Qe,vt)=>{const Gt=$e(Qe,vt);return this.counter++,Gt},this.hostLanguage=_,x(he)},an(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:zf,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(N),M(Te(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=ii().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $f{load(p){return(0,d.Z)(function*(){return new Qu(p)})()}clearedOneInstance(){}}const _i="recaptcha",nc={theme:"light",type:"image"};class ic{constructor(p,_=Object.assign({},nc),x){this.parameters=_,this.type=_i,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vn(x),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;le(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $f:new Fo,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),x=p.getAssertedRecaptcha();return x.getResponse(_)||new Promise(N=>{const J=he=>{he&&(p.tokenChangeListeners.delete(J),N(he))};p.tokenChangeListeners.add(J),p.isInvisible&&x.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(x=>x(_)),"function"==typeof p)p(_);else if("string"==typeof p){const x=ii()[p];"function"==typeof x&&x(_)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const x=document.createElement("div");_.appendChild(x),_=x}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){le(qt()&&!Xl(),p.auth,"internal-error"),yield function gd(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ge(b){return se.apply(this,arguments)}(p.auth);le(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ir{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Js._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function co(b,p,_){return _d.apply(this,arguments)}function _d(){return(_d=(0,d.Z)(function*(b,p,_){const x=vn(b),M=yield rc(x,p,(0,$.m9)(_));return new Ir(M,N=>Rt(x,N))})).apply(this,arguments)}function cl(b,p,_){return wa.apply(this,arguments)}function wa(){return(wa=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b);yield Qa(!1,x,"phone");const M=yield rc(x.auth,p,(0,$.m9)(_));return new Ir(M,N=>Lf(x,N))})).apply(this,arguments)}function Xu(b,p,_){return yd.apply(this,arguments)}function yd(){return(yd=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b),M=yield rc(x.auth,p,(0,$.m9)(_));return new Ir(M,N=>Qc(x,N))})).apply(this,arguments)}function rc(b,p,_){return vd.apply(this,arguments)}function vd(){return vd=(0,d.Z)(function*(b,p,_){var x;const M=yield _.verify();try{let N;if(le("string"==typeof M,b,"argument-error"),le(_.type===_i,b,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const J=N.session;if("phoneNumber"in N)return le("enroll"===J.type,b,"internal-error"),(yield function Yl(b,p){return Ae(b,"POST","/v2/accounts/mfaEnrollment:start",ne(b,p))}(b,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{le("signin"===J.type,b,"internal-error");const he=(null===(x=N.multiFactorHint)||void 0===x?void 0:x.uid)||N.multiFactorUid;return le(he,b,"missing-multi-factor-info"),(yield function Zu(b,p){return Ae(b,"POST","/v2/accounts/mfaSignIn:start",ne(b,p))}(b,{mfaPendingCredential:J.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield function Kp(b,p){return vu.apply(this,arguments)}(b,{phoneNumber:N.phoneNumber,recaptchaToken:M});return J}}finally{_._reset()}}),vd.apply(this,arguments)}function Lr(b,p){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(b,p){yield nr((0,$.m9)(b),p)})).apply(this,arguments)}let dn=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=vn(_)}verifyPhoneNumber(_,x){return rc(this.auth,_,(0,$.m9)(x))}static credential(_,x){return Js._fromVerification(_,x)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:x,temporaryProof:M}=_;return x&&M?Js._fromTokenResponse(x,M):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function ct(b,p){return p?ei(p):(le(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class rr extends Pr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Xs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Xs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Xs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Nn(b){return Xa(b.auth,new rr(b),b.bypassAuthState)}function sc(b){const{auth:p,user:_}=b;return le(_,p,"internal-error"),Su(_,new rr(b),b.bypassAuthState)}function Fs(b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(b){const{auth:p,user:_}=b;return le(_,p,"internal-error"),nr(_,new rr(b),b.bypassAuthState)})).apply(this,arguments)}class ai{constructor(p,_,x,M,N=!1){this.auth=p,this.resolver=x,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,d.Z)(function*(x,M){p.pendingPromise={resolve:x,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(x,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,d.Z)(function*(){const{urlResponse:x,sessionId:M,postBody:N,tenantId:J,error:he,type:$e}=p;if(he)return void _.reject(he);const Qe={auth:_.auth,requestUri:x,sessionId:M,tenantId:J||void 0,postBody:N||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask($e)(Qe))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Nn;case"linkViaPopup":case"linkViaRedirect":return Fs;case"reauthViaPopup":case"reauthViaRedirect":return sc;default:De(this.auth,"internal-error")}}resolve(p){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sr=new fr(2e3,1e4);function tt(b,p,_){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(b,p,_){const x=vn(b);ze(b,p,eo);const M=ct(x,_);return new bd(x,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function oc(b,p,_){return or.apply(this,arguments)}function or(){return(or=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b);ze(x.auth,p,eo);const M=ct(x.auth,_);return new bd(x.auth,"reauthViaPopup",p,M,x).executeNotNull()})).apply(this,arguments)}function Gf(b,p,_){return xa.apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b);ze(x.auth,p,eo);const M=ct(x.auth,_);return new bd(x.auth,"linkViaPopup",p,M,x).executeNotNull()})).apply(this,arguments)}let bd=(()=>{class b extends ai{constructor(_,x,M,N,J){super(_,x,N,J),this.provider=M,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const x=yield _.execute();return le(x,_.auth,"internal-error"),x})()}onExecution(){var _=this;return(0,d.Z)(function*(){Dt(1===_.filter.length,"Popup operations only handle one event");const x=vs();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],x),_.authWindow.associatedEvent=x,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Te(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Te(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var x,M;this.pollId=null!==(M=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Te(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,sr.get())};_()}}return b.currentPopupAction=null,b})();const Ju="pendingRedirect",ts=new Map;class ac extends ai{constructor(p,_,x=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,x),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,d.Z)(function*(){let x=ts.get(_.auth._key());if(!x){try{const N=(yield function lc(b,p){return Vr.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;x=()=>Promise.resolve(N)}catch(M){x=()=>Promise.reject(M)}ts.set(_.auth._key(),x)}return _.bypassAuthState||ts.set(_.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,x=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(x,p);if("unknown"!==p.type){if(p.eventId){const M=yield x.auth._redirectUserForId(p.eventId);if(M)return x.user=M,_().call(x,p);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Vr(){return(Vr=(0,d.Z)(function*(b,p){const _=wd(p),x=th(b);if(!(yield x._isAvailable()))return!1;const M="true"===(yield x._get(_));return yield x._remove(_),M})).apply(this,arguments)}function Wf(b,p){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(b,p){return th(b)._set(wd(p),"true")})).apply(this,arguments)}function cc(){ts.clear()}function eh(b,p){ts.set(b._key(),p)}function th(b){return ei(b._redirectPersistence)}function wd(b){return er(Ju,b.config.apiKey,b.name)}function nh(b,p,_){return function dl(b,p,_){return Yn.apply(this,arguments)}(b,p,_)}function Yn(){return(Yn=(0,d.Z)(function*(b,p,_){const x=vn(b);ze(b,p,eo),yield x._initializationPromise;const M=ct(x,_);return yield Wf(M,x),M._openRedirect(x,p,"signInViaRedirect")})).apply(this,arguments)}function xd(b,p,_){return function Ed(b,p,_){return Ls.apply(this,arguments)}(b,p,_)}function Ls(){return(Ls=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b);ze(x.auth,p,eo),yield x.auth._initializationPromise;const M=ct(x.auth,_);yield Wf(M,x.auth);const N=yield Bo(x);return M._openRedirect(x.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function Cd(b,p,_){return function Id(b,p,_){return Td.apply(this,arguments)}(b,p,_)}function Td(){return(Td=(0,d.Z)(function*(b,p,_){const x=(0,$.m9)(b);ze(x.auth,p,eo),yield x.auth._initializationPromise;const M=ct(x.auth,_);yield Qa(!1,x,p.providerId),yield Wf(M,x.auth);const N=yield Bo(x);return M._openRedirect(x.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function qf(b,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(b,p){return yield vn(b)._initializationPromise,ih(b,p,!1)})).apply(this,arguments)}function ih(b,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(b,p,_=!1){const x=vn(b),M=ct(x,p),J=yield new ac(x,M,_).execute();return J&&!_&&(delete J.user._redirectEventId,yield x._persistUserIfCurrent(J.user),yield x._setRedirectUser(null,p)),J})).apply(this,arguments)}function Bo(b){return hl.apply(this,arguments)}function hl(){return(hl=(0,d.Z)(function*(b){const p=vs(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class rh{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(p,x)&&(_=!0,this.sendToConsumer(p,x),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Kf(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sh(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var x;if(p.error&&!sh(p)){const M=(null===(x=p.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";_.onError(Te(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const x=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&x}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fl(p))}saveEventToCache(p){this.cachedEventUids.add(fl(p)),this.lastProcessedEventTime=Date.now()}}function fl(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function sh({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===p?.code}function oh(b){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,d.Z)(function*(b,p={}){return Ae(b,"GET","/v1/projects",p)})).apply(this,arguments)}const Iy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tg=/^https?/;function ml(){return(ml=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield oh(b);for(const _ of p)try{if(Zf(_))return}catch{}De(b,"unauthorized-domain")})).apply(this,arguments)}function Zf(b){const p=ot(),{protocol:_,hostname:x}=new URL(p);if(b.startsWith("chrome-extension://")){const J=new URL(b);return""===J.hostname&&""===x?"chrome-extension:"===_&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&J.hostname===x}if(!tg.test(_))return!1;if(Iy.test(b))return x===b;const M=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(x)}const Vo=new fr(3e4,6e4);function uc(){const b=ii().___jsl;if(b?.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Ea=null;const lh=new fr(5e3,15e3),uo="__/auth/iframe",Ad="emulator/auth/iframe",Yf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ch=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qf(b){const p=b.config;le(p.authDomain,b,"auth-domain-config-required");const _=p.emulator?ps(p,Ad):`https://${b.config.authDomain}/${uo}`,x={apiKey:p.apiKey,appName:b.name,v:O.SDK_VERSION},M=ch.get(b.config.apiHost);M&&(x.eid=M);const N=b._getFrameworks();return N.length&&(x.fw=N.join(",")),`${_}?${(0,$.xO)(x).slice(1)}`}function jn(){return jn=(0,d.Z)(function*(b){const p=yield function Uo(b){return Ea=Ea||function ns(b){return new Promise((p,_)=>{var x,M,N;function J(){uc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{uc(),_(Te(b,"network-request-failed"))},timeout:Vo.get()})}if(null!==(M=null===(x=ii().gapi)||void 0===x?void 0:x.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(N=ii().gapi)||void 0===N||!N.load){const he=$i("iframefcb");return ii()[he]=()=>{gapi.load?J():_(Te(b,"network-request-failed"))},an(`https://apis.google.com/js/api.js?onload=${he}`).catch($e=>_($e))}J()}}).catch(p=>{throw Ea=null,p})}(b),Ea}(b),_=ii().gapi;return le(_,b,"internal-error"),p.open({where:document.body,url:Qf(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yf,dontclear:!0},x=>new Promise(function(){var M=(0,d.Z)(function*(N,J){yield x.restyle({setHideOnLeave:!1});const he=Te(b,"network-request-failed"),$e=ii().setTimeout(()=>{J(he)},lh.get());function Qe(){ii().clearTimeout($e),N(x)}x.ping(Qe).then(Qe,()=>{J(he)})});return function(N,J){return M.apply(this,arguments)}}()))}),jn.apply(this,arguments)}const w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I=500,A=600,U="_blank",K="http://localhost";class Q{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const We="__/auth/handler",_t="emulator/auth/handler",Pt=encodeURIComponent("fac");function Lt(b,p,_,x,M,N){return yr.apply(this,arguments)}function yr(){return(yr=(0,d.Z)(function*(b,p,_,x,M,N){le(b.config.authDomain,b,"auth-domain-config-required"),le(b.config.apiKey,b,"invalid-api-key");const J={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:x,v:O.SDK_VERSION,eventId:M};if(p instanceof eo){p.setDefaultLanguage(b.languageCode),J.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[vt,Gt]of Object.entries(N||{}))J[vt]=Gt}if(p instanceof la){const vt=p.getScopes().filter(Gt=>""!==Gt);vt.length>0&&(J.scopes=vt.join(","))}b.tenantId&&(J.tid=b.tenantId);const he=J;for(const vt of Object.keys(he))void 0===he[vt]&&delete he[vt];const $e=yield b._getAppCheckToken(),Qe=$e?`#${Pt}=${encodeURIComponent($e)}`:"";return`${function Bi({config:b}){return b.emulator?ps(b,_t):`https://${b.authDomain}/${We}`}(b)}?${(0,$.xO)(he).slice(1)}${Qe}`})).apply(this,arguments)}const jo="webStorageSupport",Ca=class Md{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ir,this._completeRedirectFn=ih,this._overrideRedirectResult=eh}_openPopup(p,_,x,M){var N=this;return(0,d.Z)(function*(){var J;Dt(null===(J=N.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const he=yield Lt(p,_,x,ot(),M);return function me(b,p,_,x=I,M=A){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),J=Math.max((window.screen.availWidth-x)/2,0).toString();let he="";const $e=Object.assign(Object.assign({},w),{width:x.toString(),height:M.toString(),top:N,left:J}),Qe=(0,$.z$)().toLowerCase();_&&(he=R(Qe)?U:_),F(Qe)&&(p=p||K,$e.scrollbars="yes");const vt=Object.entries($e).reduce((br,[ho,kd])=>`${br}${ho}=${kd},`,"");if(function Mt(b=(0,$.z$)()){var p;return It(b)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Qe)&&"_self"!==he)return function Ze(b,p){const _=document.createElement("a");_.href=b,_.target=p;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(x)}(p||"",he),new Q(null);const Gt=window.open(p||"",he,vt);le(Gt,b,"popup-blocked");try{Gt.focus()}catch{}return new Q(Gt)}(p,he,vs())})()}_openRedirect(p,_,x,M){var N=this;return(0,d.Z)(function*(){return yield N._originValidation(p),function oo(b){ii().location.href=b}(yield Lt(p,_,x,ot(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:N}=this.eventManagers[_];return M?Promise.resolve(M):(Dt(N,"If manager is not set, promise should be"),N)}const x=this.initAndGetManager(p);return this.eventManagers[_]={promise:x},x.catch(()=>{delete this.eventManagers[_]}),x}initAndGetManager(p){var _=this;return(0,d.Z)(function*(){const x=yield function Xf(b){return jn.apply(this,arguments)}(p),M=new rh(p);return x.register("authEvent",N=>(le(N?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=x,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(jo,{type:jo},M=>{var N;const J=null===(N=M?.[0])||void 0===N?void 0:N[jo];void 0!==J&&_(!!J),De(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ah(b){return ml.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ht()||L()||It()}};class vr{constructor(p){this.factorId=p}_process(p,_,x){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,x);case"signin":return this._finalizeSignIn(p,_.credential);default:return it("unexpected MultiFactorSessionType")}}}class Ur extends vr{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ur(p)}_finalizeEnroll(p,_,x){return function ga(b,p){return Ae(b,"POST","/v2/accounts/mfaEnrollment:finalize",ne(b,p))}(p,{idToken:_,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Oo(b,p){return Ae(b,"POST","/v2/accounts/mfaSignIn:finalize",ne(b,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ia=(()=>{class b{constructor(){}static assertion(_){return Ur._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var uh="@firebase/auth";class bs{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(x=>{p(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);_&&(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const tm=(0,$.Pz)("authIdTokenMaxAge")||300;let rg=null;const Ty=b=>function(){var p=(0,d.Z)(function*(_){const x=_&&(yield _.getIdTokenResult()),M=x&&((new Date).getTime()-Date.parse(x.issuedAtTime))/1e3;if(M&&M>tm)return;const N=x?.token;rg!==N&&(rg=N,yield fetch(b,{method:N?"POST":"DELETE",headers:N?{Authorization:`Bearer ${N}`}:{}}))});return function(_){return p.apply(this,arguments)}}();function hc(b=(0,O.getApp)()){const p=(0,O._getProvider)(b,"auth");if(p.isInitialized())return p.getImmediate();const _=function Si(b,p){const _=(0,O._getProvider)(b,"auth");if(_.isInitialized()){const M=_.getImmediate(),N=_.getOptions();if((0,$.vZ)(N,p??{}))return M;De(M,"already-initialized")}return _.initialize({options:p})}(b,{popupRedirectResolver:Ca,persistence:[hd,Ql,ir]}),x=(0,$.Pz)("authTokenSyncURL");if(x){const N=Ty(x);(function pa(b,p,_){(0,$.m9)(b).beforeAuthStateChanged(p,_)})(_,N,()=>N(_.currentUser)),function Kl(b,p,_,x){(0,$.m9)(b).onIdTokenChanged(p,_,x)}(_,J=>N(J))}const M=(0,$.q4)("auth");return M&&Kn(_,`http://${M}`),_}!function ng(b){(0,O._registerComponent)(new oe.wA("auth",(p,{options:_})=>{const x=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:J,authDomain:he}=x.options;le(J&&!J.includes(":"),"invalid-api-key",{appName:x.name});const $e={apiKey:J,authDomain:he,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ss(b)},Qe=new Rn(x,M,N,$e);return function wo(b,p){const _=p?.persistence||[],x=(Array.isArray(_)?_:[_]).map(ei);p?.errorMap&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(x,p?.popupRedirectResolver)}(Qe,_),Qe},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,x)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new oe.wA("auth-internal",p=>{const _=vn(p.getProvider("auth").getImmediate());return new bs(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(uh,"0.23.2",function is(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,O.registerVersion)(uh,"0.23.2","esm2017")}("Browser")},2090:(wt,Me,V)=>{V.d(Me,{$s:()=>ei,BH:()=>Pe,DV:()=>oi,G6:()=>ps,GJ:()=>kn,L:()=>we,LL:()=>Ve,P0:()=>je,Pz:()=>Te,Sg:()=>ze,UG:()=>it,UI:()=>$n,US:()=>oe,Wl:()=>Et,Yr:()=>fr,ZB:()=>ee,ZR:()=>Ae,aH:()=>De,b$:()=>qt,cI:()=>hn,dS:()=>Er,eu:()=>pe,g5:()=>O,gK:()=>Xi,gQ:()=>fn,h$:()=>ve,hl:()=>ue,hu:()=>$,jU:()=>Dt,m9:()=>er,ne:()=>Kt,p$:()=>W,pd:()=>Qi,q4:()=>Oe,r3:()=>Ln,ru:()=>ot,tV:()=>q,uI:()=>le,ug:()=>Jt,vZ:()=>pt,w1:()=>Ds,w9:()=>si,xO:()=>Qn,xb:()=>xr,z$:()=>Le,zI:()=>ye,zd:()=>Hi});const d={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},$=function(G,z){if(!G)throw O(z)},O=function(G){return new Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+G)},re=function(G){const z=[];let F=0;for(let L=0;L<G.length;L++){let R=G.charCodeAt(L);R<128?z[F++]=R:R<2048?(z[F++]=R>>6|192,z[F++]=63&R|128):55296==(64512&R)&&L+1<G.length&&56320==(64512&G.charCodeAt(L+1))?(R=65536+((1023&R)<<10)+(1023&G.charCodeAt(++L)),z[F++]=R>>18|240,z[F++]=R>>12&63|128,z[F++]=R>>6&63|128,z[F++]=63&R|128):(z[F++]=R>>12|224,z[F++]=R>>6&63|128,z[F++]=63&R|128)}return z},oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,z){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,L=[];for(let R=0;R<G.length;R+=3){const Z=G[R],Ee=R+1<G.length,rt=Ee?G[R+1]:0,St=R+2<G.length,It=St?G[R+2]:0;let Dn=(15&rt)<<2|It>>6,Ht=63&It;St||(Ht=64,Ee||(Dn=64)),L.push(F[Z>>2],F[(3&Z)<<4|rt>>4],F[Dn],F[Ht])}return L.join("")},encodeString(G,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(G):this.encodeByteArray(re(G),z)},decodeString(G,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(G):function(G){const z=[];let F=0,L=0;for(;F<G.length;){const R=G[F++];if(R<128)z[L++]=String.fromCharCode(R);else if(R>191&&R<224){const Z=G[F++];z[L++]=String.fromCharCode((31&R)<<6|63&Z)}else if(R>239&&R<365){const St=((7&R)<<18|(63&G[F++])<<12|(63&G[F++])<<6|63&G[F++])-65536;z[L++]=String.fromCharCode(55296+(St>>10)),z[L++]=String.fromCharCode(56320+(1023&St))}else{const Z=G[F++],Ee=G[F++];z[L++]=String.fromCharCode((15&R)<<12|(63&Z)<<6|63&Ee)}}return z.join("")}(this.decodeStringToByteArray(G,z))},decodeStringToByteArray(G,z){this.init_();const F=z?this.charToByteMapWebSafe_:this.charToByteMap_,L=[];for(let R=0;R<G.length;){const Z=F[G.charAt(R++)],rt=R<G.length?F[G.charAt(R)]:0;++R;const It=R<G.length?F[G.charAt(R)]:64;++R;const Mt=R<G.length?F[G.charAt(R)]:64;if(++R,null==Z||null==rt||null==It||null==Mt)throw new xe;L.push(Z<<2|rt>>4),64!==It&&(L.push(rt<<4&240|It>>2),64!==Mt&&L.push(It<<6&192|Mt))}return L},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ve=function(G){const z=re(G);return oe.encodeByteArray(z,!0)},we=function(G){return ve(G).replace(/\./g,"")},q=function(G){try{return oe.decodeString(G,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function W(G){return ee(void 0,G)}function ee(G,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return z}for(const F in z)!z.hasOwnProperty(F)||!He(F)||(G[F]=ee(G[F],z[F]));return G}function He(G){return"__proto__"!==G}const Re=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=G&&q(G[1]);return z&&JSON.parse(z)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},Oe=G=>{var z,F;return null===(F=null===(z=Re())||void 0===z?void 0:z.emulatorHosts)||void 0===F?void 0:F[G]},je=G=>{const z=Oe(G);if(!z)return;const F=z.lastIndexOf(":");if(F<=0||F+1===z.length)throw new Error(`Invalid host ${z} with no separate hostname and port!`);const L=parseInt(z.substring(F+1),10);return"["===z[0]?[z.substring(1,F-1),L]:[z.substring(0,F),L]},De=()=>{var G;return null===(G=Re())||void 0===G?void 0:G.config},Te=G=>{var z;return null===(z=Re())||void 0===z?void 0:z[`_${G}`]};class Pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,F)=>{this.resolve=z,this.reject=F})}wrapCallback(z){return(F,L)=>{F?this.reject(F):this.resolve(L),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(F):z(F,L))}}}function ze(G,z){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const L=z||"demo-project",R=G.iat||0,Z=G.sub||G.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${L}`,aud:L,iat:R,exp:R+3600,auth_time:R,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},G);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(Ee)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function it(){var G;const z=null===(G=Re())||void 0===G?void 0:G.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Dt(){return"object"==typeof self&&self.self===self}function ot(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ds(){const G=Le();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function fr(){return!0===d.NODE_CLIENT||!0===d.NODE_ADMIN}function ps(){return!it()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){try{return"object"==typeof indexedDB}catch{return!1}}function pe(){return new Promise((G,z)=>{try{let F=!0;const L="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(L);R.onsuccess=()=>{R.result.close(),F||self.indexedDB.deleteDatabase(L),G(!0)},R.onupgradeneeded=()=>{F=!1},R.onerror=()=>{var Z;z((null===(Z=R.error)||void 0===Z?void 0:Z.message)||"")}}catch(F){z(F)}})}function ye(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ae extends Error{constructor(z,F,L){super(F),this.code=z,this.customData=L,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ve.prototype.create)}}class Ve{constructor(z,F,L){this.service=z,this.serviceName=F,this.errors=L}create(z,...F){const L=F[0]||{},R=`${this.service}/${z}`,Z=this.errors[z],Ee=Z?function lt(G,z){return G.replace(ut,(F,L)=>{const R=z[L];return null!=R?String(R):`<${L}?>`})}(Z,L):"Error";return new Ae(R,`${this.serviceName}: ${Ee} (${R}).`,L)}}const ut=/\{\$([^}]+)}/g;function hn(G){return JSON.parse(G)}function Et(G){return JSON.stringify(G)}const sn=function(G){let z={},F={},L={},R="";try{const Z=G.split(".");z=hn(q(Z[0])||""),F=hn(q(Z[1])||""),R=Z[2],L=F.d||{},delete F.d}catch{}return{header:z,claims:F,data:L,signature:R}},si=function(G){const F=sn(G).claims;return!!F&&"object"==typeof F&&F.hasOwnProperty("iat")},kn=function(G){const z=sn(G).claims;return"object"==typeof z&&!0===z.admin};function Ln(G,z){return Object.prototype.hasOwnProperty.call(G,z)}function oi(G,z){if(Object.prototype.hasOwnProperty.call(G,z))return G[z]}function xr(G){for(const z in G)if(Object.prototype.hasOwnProperty.call(G,z))return!1;return!0}function $n(G,z,F){const L={};for(const R in G)Object.prototype.hasOwnProperty.call(G,R)&&(L[R]=z.call(F,G[R],R,G));return L}function pt(G,z){if(G===z)return!0;const F=Object.keys(G),L=Object.keys(z);for(const R of F){if(!L.includes(R))return!1;const Z=G[R],Ee=z[R];if(Gn(Z)&&Gn(Ee)){if(!pt(Z,Ee))return!1}else if(Z!==Ee)return!1}for(const R of L)if(!F.includes(R))return!1;return!0}function Gn(G){return null!==G&&"object"==typeof G}function Qn(G){const z=[];for(const[F,L]of Object.entries(G))Array.isArray(L)?L.forEach(R=>{z.push(encodeURIComponent(F)+"="+encodeURIComponent(R))}):z.push(encodeURIComponent(F)+"="+encodeURIComponent(L));return z.length?"&"+z.join("&"):""}function Hi(G){const z={};return G.replace(/^\?/,"").split("&").forEach(L=>{if(L){const[R,Z]=L.split("=");z[decodeURIComponent(R)]=decodeURIComponent(Z)}}),z}function Qi(G){const z=G.indexOf("?");if(!z)return"";const F=G.indexOf("#",z);return G.substring(z,F>0?F:void 0)}class fn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,F){F||(F=0);const L=this.W_;if("string"==typeof z)for(let Mt=0;Mt<16;Mt++)L[Mt]=z.charCodeAt(F)<<24|z.charCodeAt(F+1)<<16|z.charCodeAt(F+2)<<8|z.charCodeAt(F+3),F+=4;else for(let Mt=0;Mt<16;Mt++)L[Mt]=z[F]<<24|z[F+1]<<16|z[F+2]<<8|z[F+3],F+=4;for(let Mt=16;Mt<80;Mt++){const Dn=L[Mt-3]^L[Mt-8]^L[Mt-14]^L[Mt-16];L[Mt]=4294967295&(Dn<<1|Dn>>>31)}let It,Zt,R=this.chain_[0],Z=this.chain_[1],Ee=this.chain_[2],rt=this.chain_[3],St=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(It=rt^Z&(Ee^rt),Zt=1518500249):(It=Z^Ee^rt,Zt=1859775393):Mt<60?(It=Z&Ee|rt&(Z|Ee),Zt=2400959708):(It=Z^Ee^rt,Zt=3395469782);const Dn=(R<<5|R>>>27)+It+St+Zt+L[Mt]&4294967295;St=rt,rt=Ee,Ee=4294967295&(Z<<30|Z>>>2),Z=R,R=Dn}this.chain_[0]=this.chain_[0]+R&4294967295,this.chain_[1]=this.chain_[1]+Z&4294967295,this.chain_[2]=this.chain_[2]+Ee&4294967295,this.chain_[3]=this.chain_[3]+rt&4294967295,this.chain_[4]=this.chain_[4]+St&4294967295}update(z,F){if(null==z)return;void 0===F&&(F=z.length);const L=F-this.blockSize;let R=0;const Z=this.buf_;let Ee=this.inbuf_;for(;R<F;){if(0===Ee)for(;R<=L;)this.compress_(z,R),R+=this.blockSize;if("string"==typeof z){for(;R<F;)if(Z[Ee]=z.charCodeAt(R),++Ee,++R,Ee===this.blockSize){this.compress_(Z),Ee=0;break}}else for(;R<F;)if(Z[Ee]=z[R],++Ee,++R,Ee===this.blockSize){this.compress_(Z),Ee=0;break}}this.inbuf_=Ee,this.total_+=F}digest(){const z=[];let F=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let R=this.blockSize-1;R>=56;R--)this.buf_[R]=255&F,F/=256;this.compress_(this.buf_);let L=0;for(let R=0;R<5;R++)for(let Z=24;Z>=0;Z-=8)z[L]=this.chain_[R]>>Z&255,++L;return z}}function Kt(G,z){const F=new ft(G,z);return F.subscribe.bind(F)}class ft{constructor(z,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{z(this)}).catch(L=>{this.error(L)})}next(z){this.forEachObserver(F=>{F.next(z)})}error(z){this.forEachObserver(F=>{F.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,F,L){let R;if(void 0===z&&void 0===F&&void 0===L)throw new Error("Missing Observer.");R=function Xn(G,z){if("object"!=typeof G||null===G)return!1;for(const F of z)if(F in G&&"function"==typeof G[F])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:F,complete:L},void 0===R.next&&(R.next=Pi),void 0===R.error&&(R.error=Pi),void 0===R.complete&&(R.complete=Pi);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Z}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,z)}sendOne(z,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{F(this.observers[z])}catch(L){typeof console<"u"&&console.error&&console.error(L)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pi(){}function Xi(G,z){return`${G} failed: ${z} argument `}const Er=function(G){const z=[];let F=0;for(let L=0;L<G.length;L++){let R=G.charCodeAt(L);if(R>=55296&&R<=56319){const Z=R-55296;L++,$(L<G.length,"Surrogate pair missing trail surrogate."),R=65536+(Z<<10)+(G.charCodeAt(L)-56320)}R<128?z[F++]=R:R<2048?(z[F++]=R>>6|192,z[F++]=63&R|128):R<65536?(z[F++]=R>>12|224,z[F++]=R>>6&63|128,z[F++]=63&R|128):(z[F++]=R>>18|240,z[F++]=R>>12&63|128,z[F++]=R>>6&63|128,z[F++]=63&R|128)}return z},Jt=function(G){let z=0;for(let F=0;F<G.length;F++){const L=G.charCodeAt(F);L<128?z++:L<2048?z+=2:L>=55296&&L<=56319?(z+=4,F++):z+=3}return z},jt=1e3,Jn=2,Bn=144e5,Ni=.5;function ei(G,z=jt,F=Jn){const L=z*Math.pow(F,G),R=Math.round(Ni*L*(Math.random()-.5)*2);return Math.min(Bn,L+R)}function er(G){return G&&G._delegate?G._delegate:G}},9483:(wt,Me,V)=>{var d=V(4650);let $=null;function O(){return $}class de{}const oe=new d.OlP("DocumentToken");let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return(0,d.LFG)(q)}()},providedIn:"platform"}),n})();const we=new d.OlP("Location Initialized");let q=(()=>{class n extends xe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const i=O().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=O().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){W()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){W()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ee(){return new q((0,d.LFG)(oe))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let at=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Re)},providedIn:"root"}),n})();const be=new d.OlP("appBaseHref");let Re=(()=>{class n extends at{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(oe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+qe(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){const l=this.prepareExternalUrl(r+qe(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xe),d.LFG(be,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oe=(()=>{class n extends at{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=He(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,i,l)}replaceState(t,i,r,s){let l=this.prepareExternalUrl(r+qe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(xe),d.LFG(be,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),je=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function ze(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(Pe(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+qe(i))}normalize(t){return n.stripTrailingSlash(function Te(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Pe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=qe,n.joinWithSlash=He,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(d.LFG(at))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function De(){return new je((0,d.LFG)(at))}()},providedIn:"root"}),n})();function Pe(n){return n.replace(/\/index.html$/,"")}function Zs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class Si{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wo=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,l)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Si(r.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)i.remove(null===s?void 0:s);else if(null!==s){const h=i.get(s);i.move(h,l),Kn(h,r)}});for(let r=0,s=i.length;r<s;r++){const h=i.get(r).context;h.index=r,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Kn(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Kn(n,e){n.context.$implicit=e.item}let Xr=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new $t,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ol("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ol("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $t{constructor(){this.$implicit=null,this.ngIf=null}}function Ol(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class Pr{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let sa=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),As=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new Pr(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(sa,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),mi=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=i.createEmbeddedView(r,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[d.TTD]}),n})();class Kc{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class qa{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const oa=new qa,Qs=new Kc;let Ms=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if((0,d.QGY)(t))return oa;if((0,d.F4k)(t))return Qs;throw function Nr(n,e){return new d.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.sBO,16))},n.\u0275pipe=d.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Or=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=d.Yjl({name:"json",type:n,pure:!1,standalone:!0}),n})(),gr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Pf="browser",aa="server";function la(n){return n===aa}let Ll=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Of((0,d.LFG)(oe),window)}),n})();class Of{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Zc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=to(this.window.history)||to(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function to(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Du{}class Hu extends de{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Kl extends Hu{static makeCurrent(){!function re(n){$||($=n)}(new Kl)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function nl(){return pa=pa||document.querySelector("base"),pa?pa.getAttribute("href"):null}();return null==t?null:function eg(n){Ns=Ns||document.createElement("a"),Ns.setAttribute("href",n);const e=Ns.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Zs(document.cookie,e)}}let Ns,pa=null;const Bf=new d.OlP("TRANSITION_ID"),zu=[{provide:d.ip1,useFactory:function Zl(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const i=O(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Bf,oe,d.zs3],multi:!0}];let sd=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const il=new d.OlP("EventManagerPlugins");let Yl=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const l=r[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(il),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class ga{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=O().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let $u=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n extends $u{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Mo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_a=/%COMP%/g,ol=new d.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ql(n,e){return e.flat(100).map(t=>t.replace(_a,n))}function ld(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ir=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Gu(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof Xl?r.applyToHost(t):r instanceof oo&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const l=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(i.encapsulation){case d.ifc.Emulated:s=new Xl(l,h,i,this.appId,m);break;case d.ifc.ShadowDom:return new ii(l,h,t,i);default:s=new oo(l,h,i,m)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yl),d.LFG(so),d.LFG(d.AFp),d.LFG(ol))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Gu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Mo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Wu(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(Wu(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Mo[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Mo[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,i,r&d.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ld(i)):this.eventManager.addEventListener(e,t,ld(i))}}function Wu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ii extends Gu{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ql(r.id,r.styles);for(const l of s){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class oo extends Gu{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=Ql(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Xl extends oo{constructor(e,t,i,r,s){const l=r+"-"+i.id;super(e,t,i,s,l),this.contentAttr=function Vf(n){return"_ngcontent-%COMP%".replace(_a,n)}(l),this.hostAttr=function ad(n){return"_nghost-%COMP%".replace(_a,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let qu=(()=>{class n extends ga{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const al=["alt","control","meta","shift"],Ku={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let gi=(()=>{class n extends ga{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),l=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let l="",h=i.indexOf("code");if(h>-1&&(i.splice(h,1),l="code."),al.forEach(y=>{const C=i.indexOf(y);C>-1&&(i.splice(C,1),l+=y+".")}),l+=s,0!=i.length||0===s.length)return null;const m={};return m.domEventName=r,m.fullKey=l,m}static matchEventFullKeyCode(t,i){let r=Ku[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),al.forEach(l=>{l!==r&&(0,Jl[l])(t)&&(s+=l+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const jf=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Pf},{provide:d.g9A,useValue:function ba(){Kl.makeCurrent()},multi:!0},{provide:oe,useFactory:function ud(){return(0,d.RDi)(document),document},deps:[]}]),Ro=new d.OlP(""),ll=[{provide:d.rWj,useClass:class Os{addToWindow(e){d.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(i=>{const r=d.dqk.getAllAngularTestabilities();let s=r.length,l=!1;const h=function(m){l=l||m,s--,0==s&&i(l)};r.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Po=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function dd(){return new d.qLn},deps:[]},{provide:il,useClass:qu,multi:!0,deps:[oe,d.R0b,d.Lbi]},{provide:il,useClass:gi,multi:!0,deps:[oe]},{provide:ir,useClass:ir,deps:[Yl,so,d.AFp,ol]},{provide:d.FYo,useExisting:ir},{provide:$u,useExisting:so},{provide:so,useClass:so,deps:[oe]},{provide:Yl,useClass:Yl,deps:[il,d.R0b]},{provide:Du,useClass:sd,deps:[]},[]];let No=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Bf,useExisting:d.AFp},zu]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ro,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Po,...ll],imports:[gr,d.hGG]}),n})(),Hf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let i=null;return i=t?new t:function Oo(){return new Hf((0,d.LFG)(oe))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;var Br=V(7669),dn=V(8996);function ct(...n){const e=(0,Br.yG)(n);return(0,dn.D)(n,e)}var rr=V(9751),Nn=V(5577),sc=V(576);function Fs(n,e){return(0,sc.m)(e)?(0,Nn.z)(n,e,1):(0,Nn.z)(n,1)}var Zn=V(4482),ai=V(5403);function sr(n,e){return(0,Zn.e)((t,i)=>{let r=0;t.subscribe((0,ai.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}var tt=V(4004);class es{}class oc{}class or{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),l=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(s=>s.toString()),r.length>0){const s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof or?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new or;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof or?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===s.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class xa{encodeKey(e){return ac(e)}encodeValue(e){return ac(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Ju=/%(\d[a-f0-9])/gi,ts={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ac(n){return encodeURIComponent(n).replace(Ju,(e,t)=>ts[t]??e)}function lc(n){return`${n}`}class Vr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new xa,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function bd(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[l,h]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(lc):[lc(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(lc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(lc(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Lo{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eh(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function th(n){return typeof Blob<"u"&&n instanceof Blob}function wd(n){return typeof FormData<"u"&&n instanceof FormData}class dl{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function cc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new or),this.context||(this.context=new Lo),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Vr,this.urlWithParams=t}serializeBody(){return null===this.body?null:eh(this.body)||th(this.body)||wd(this.body)||function nh(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||wd(this.body)?null:th(this.body)?this.body.type||null:eh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,y=e.params||this.params;const C=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((D,k)=>D.set(k,e.setHeaders[k]),m)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,k)=>D.set(k,e.setParams[k]),y)),new dl(t,i,s,{params:y,headers:m,context:C,reportProgress:h,responseType:r,withCredentials:l})}}var Yn=(()=>((Yn=Yn||{})[Yn.Sent=0]="Sent",Yn[Yn.UploadProgress=1]="UploadProgress",Yn[Yn.ResponseHeader=2]="ResponseHeader",Yn[Yn.DownloadProgress=3]="DownloadProgress",Yn[Yn.Response=4]="Response",Yn[Yn.User=5]="User",Yn))();class xd{constructor(e,t=200,i="OK"){this.headers=e.headers||new or,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ed extends xd{constructor(e={}){super(e),this.type=Yn.ResponseHeader}clone(e={}){return new Ed({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ls extends xd{constructor(e={}){super(e),this.type=Yn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ls({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Cd extends xd{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Id(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Td=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof dl)s=t;else{let m,y;m=r.headers instanceof or?r.headers:new or(r.headers),r.params&&(y=r.params instanceof Vr?r.params:new Vr({fromObject:r.params})),s=new dl(t,i,void 0!==r.body?r.body:null,{headers:m,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const l=ct(s).pipe(Fs(m=>this.handler.handle(m)));if(t instanceof dl||"events"===r.observe)return l;const h=l.pipe(sr(m=>m instanceof Ls));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,tt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,tt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,tt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,tt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Vr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Id(r,i))}post(t,i,r={}){return this.request("POST",t,Id(r,i))}put(t,i,r={}){return this.request("PUT",t,Id(r,i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(es))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function qf(n,e){return e(n)}function ul(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const dc=new d.OlP("HTTP_INTERCEPTORS"),Bo=new d.OlP("HTTP_INTERCEPTOR_FNS");function hl(){let n=null;return(e,t)=>(null===n&&(n=((0,d.f3M)(dc,{optional:!0})??[]).reduceRight(ul,qf)),n(e,t))}let Dd=(()=>{class n extends es{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(Bo)));this.chain=i.reduceRight((r,s)=>function ih(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(r,s,this.injector),qf)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oc),d.LFG(d.lqb))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo=/^\)\]\}',?\n/;let ns=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new rr.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((B,H)=>r.setRequestHeader(B,H.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const B=t.detectContentTypeHeader();null!==B&&r.setRequestHeader("Content-Type",B)}if(t.responseType){const B=t.responseType.toLowerCase();r.responseType="json"!==B?B:"text"}const s=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const B=r.statusText||"OK",H=new or(r.getAllResponseHeaders()),X=function uc(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return l=new Ed({headers:H,status:r.status,statusText:B,url:X}),l},m=()=>{let{headers:B,status:H,statusText:X,url:ce}=h(),Ne=null;204!==H&&(Ne=typeof r.response>"u"?r.responseText:r.response),0===H&&(H=Ne?200:0);let Ke=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof Ne){const Xe=Ne;Ne=Ne.replace(Vo,"");try{Ne=""!==Ne?JSON.parse(Ne):null}catch(dt){Ne=Xe,Ke&&(Ke=!1,Ne={error:dt,text:Ne})}}Ke?(i.next(new Ls({body:Ne,headers:B,status:H,statusText:X,url:ce||void 0})),i.complete()):i.error(new Cd({error:Ne,headers:B,status:H,statusText:X,url:ce||void 0}))},y=B=>{const{url:H}=h(),X=new Cd({error:B,status:r.status||0,statusText:r.statusText||"Unknown Error",url:H||void 0});i.error(X)};let C=!1;const D=B=>{C||(i.next(h()),C=!0);let H={type:Yn.DownloadProgress,loaded:B.loaded};B.lengthComputable&&(H.total=B.total),"text"===t.responseType&&r.responseText&&(H.partialText=r.responseText),i.next(H)},k=B=>{let H={type:Yn.UploadProgress,loaded:B.loaded};B.lengthComputable&&(H.total=B.total),i.next(H)};return r.addEventListener("load",m),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",D),null!==s&&r.upload&&r.upload.addEventListener("progress",k)),r.send(s),i.next({type:Yn.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",m),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",D),null!==s&&r.upload&&r.upload.removeEventListener("progress",k)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Du))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ea=new d.OlP("XSRF_ENABLED"),lh=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ad=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Yf{}let ch=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Zs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(d.Lbi),d.LFG(lh))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Qf(n,e){const t=n.url.toLowerCase();if(!(0,d.f3M)(Ea)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=(0,d.f3M)(Yf).getToken(),r=(0,d.f3M)(Ad);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var jn=(()=>((jn=jn||{})[jn.Interceptors=0]="Interceptors",jn[jn.LegacyInterceptors=1]="LegacyInterceptors",jn[jn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",jn[jn.NoXsrfProtection=3]="NoXsrfProtection",jn[jn.JsonpSupport=4]="JsonpSupport",jn[jn.RequestsMadeViaParent=5]="RequestsMadeViaParent",jn))();function w(n,e){return{\u0275kind:n,\u0275providers:e}}function I(...n){const e=[Td,ns,Dd,{provide:es,useExisting:Dd},{provide:oc,useExisting:ns},{provide:Bo,useValue:Qf,multi:!0},{provide:Ea,useValue:!0},{provide:Yf,useClass:ch}];for(const t of n)e.push(...t.\u0275providers);return(0,d.MR2)(e)}const U=new d.OlP("LEGACY_INTERCEPTOR_FN");let Pt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[I(w(jn.LegacyInterceptors,[{provide:U,useFactory:hl},{provide:Bo,useExisting:U,multi:!0}]))]}),n})();const{isArray:Bi}=Array,{getPrototypeOf:jo,prototype:Md,keys:Ca}=Object;function vr(n){if(1===n.length){const e=n[0];if(Bi(e))return{args:e,keys:null};if(function Ur(n){return n&&"object"==typeof n&&jo(n)===Md}(e)){const t=Ca(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Ia=V(8421);const{isArray:dh}=Array;function em(n){return(0,tt.U)(e=>function Jf(n,e){return dh(e)?n(...e):n(e)}(n,e))}function pl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let hh=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),bs=(()=>{class n extends hh{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const is=new d.OlP("NgValueAccessor"),tm={provide:is,useExisting:(0,d.Gpc)(()=>hc),multi:!0},Ty=new d.OlP("CompositionEventMode");let hc=(()=>{class n extends hh{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function rg(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Ty,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&d.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[d._Bn([tm]),d.qOj]}),n})();const b=!1;function p(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function _(n){return null!=n&&"number"==typeof n.length}const x=new d.OlP("NgValidators"),M=new d.OlP("NgAsyncValidators"),N=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class J{static min(e){return function he(n){return e=>{if(p(e.value)||p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function $e(n){return e=>{if(p(e.value)||p(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Qe(e)}static requiredTrue(e){return function vt(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Gt(n){return p(n.value)||N.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function br(n){return e=>p(e.value)||!_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ho(n){return e=>_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function kd(n){if(!n)return fh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(p(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return Nd(e)}static composeAsync(e){return Od(e)}}function Qe(n){return p(n.value)?{required:!0}:null}function fh(n){return null}function gl(n){return null!=n}function nm(n){const e=(0,d.QGY)(n)?(0,dn.D)(n):n;if(b&&!(0,d.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new d.vHH(-1101,t)}return e}function mh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Rd(n,e){return e.map(t=>t(n))}function Pd(n){return n.map(e=>function im(n){return!n.validate}(e)?e:t=>e.validate(t))}function Nd(n){if(!n)return null;const e=n.filter(gl);return 0==e.length?null:function(t){return mh(Rd(t,e))}}function _l(n){return null!=n?Nd(Pd(n)):null}function Od(n){if(!n)return null;const e=n.filter(gl);return 0==e.length?null:function(t){return function uh(...n){const e=(0,Br.jO)(n),{args:t,keys:i}=vr(n),r=new rr.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let m=l,y=l;for(let C=0;C<l;C++){let D=!1;(0,Ia.Xf)(t[C]).subscribe((0,ai.x)(s,k=>{D||(D=!0,y--),h[C]=k},()=>m--,void 0,()=>{(!m||!D)&&(y||s.next(i?pl(i,h):h),s.complete())}))}});return e?r.pipe(em(e)):r}(Rd(t,e).map(nm)).pipe((0,tt.U)(mh))}}function fc(n){return null!=n?Od(Pd(n)):null}function ph(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function sg(n){return n._rawValidators}function og(n){return n._rawAsyncValidators}function Fd(n){return n?Array.isArray(n)?n:[n]:[]}function ag(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dy(n,e){const t=Fd(e);return Fd(n).forEach(r=>{ag(t,r)||t.push(r)}),t}function cw(n,e){return Fd(e).filter(t=>!ag(n,t))}class dw{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_l(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class rs extends dw{get formDirective(){return null}get path(){return null}}class Ta extends dw{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Sy{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yl=(()=>{class n extends Sy{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ta,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[d.qOj]}),n})(),lg=(()=>{class n extends Sy{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&d.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[d.qOj]}),n})();function fw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Da=!1,vl="VALID",cg="INVALID",sm="PENDING",dg="DISABLED";function mw(n){return(ug(n)?n.validators:n)||null}function pw(n,e){return(ug(e)?e.asyncValidators:n)||null}function ug(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function _w(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new d.vHH(1e3,Da?function eD(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new d.vHH(1001,Da?function tD(n,e){return`Cannot find form control ${fw(n,e)}`}(e,t):"")}function yw(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new d.vHH(1002,Da?function nD(n,e){return`Must supply a value for form control ${fw(n,e)}`}(e,r):"")})}class hg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vl}get invalid(){return this.status===cg}get pending(){return this.status==sm}get disabled(){return this.status===dg}get enabled(){return this.status!==dg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Dy(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dy(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(cw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(cw(e,this._rawAsyncValidators))}hasValidator(e){return ag(this._rawValidators,e)}hasAsyncValidator(e){return ag(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=sm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=dg,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vl,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vl||this.status===sm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dg:vl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=sm,this._hasOwnPendingAsyncValidator=!0;const t=nm(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?dg:this.errors?cg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sm)?sm:this._anyControlsHaveStatus(cg)?cg:vl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ug(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function RN(n){return Array.isArray(n)?_l(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function gw(n){return Array.isArray(n)?fc(n):n||null}(this._rawAsyncValidators)}}class Sa extends hg{constructor(e,t,i){super(mw(t),pw(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yw(this,!0,e),Object.keys(e).forEach(i=>{_w(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Py extends Sa{}const Ld=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ny}),Ny="always";function Oy(n,e){return[...e.path,n]}function mg(n,e,t=Ny){vw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function rD(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&bw(n,e)})}(n,e),function oD(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sD(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&bw(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function PN(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function gh(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),om(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _h(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vw(n,e){const t=sg(n);null!==e.validator?n.setValidators(ph(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=og(n);null!==e.asyncValidator?n.setAsyncValidators(ph(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();_h(e._rawValidators,r),_h(e._rawAsyncValidators,r)}function om(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=sg(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=og(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return _h(e._rawValidators,i),_h(e._rawAsyncValidators,i),t}function bw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Fy(n,e){vw(n,e)}function Uy(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const lD={provide:rs,useExisting:(0,d.Gpc)(()=>Hy)},yh=(()=>Promise.resolve())();let Hy=(()=>{class n extends rs{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Sa({},_l(t),fc(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){yh.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),mg(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){yh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){yh.then(()=>{const i=this._findContainer(t.path),r=new Sa({});Fy(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){yh.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){yh.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Uy(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(x,10),d.Y36(M,10),d.Y36(Ld,8))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&d.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([lD]),d.qOj]}),n})();function cD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function vh(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ss=class extends hg{constructor(e=null,t,i){super(mw(t),pw(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ug(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vh(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vh(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let zy=(()=>{class n extends rs{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Oy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})(),am=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),lm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const vg=new d.OlP("NgModelWithFormControlWarning"),gD={provide:rs,useExisting:(0,d.Gpc)(()=>_c)};let _c=(()=>{class n extends rs{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(om(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return mg(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){gh(t.control||null,t,!1),function aD(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,Uy(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(gh(i||null,t),(n=>n instanceof ss)(r)&&(mg(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);Fy(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function pg(n,e){return om(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vw(this.form,this),this._oldForm&&om(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(x,10),d.Y36(M,10),d.Y36(Ld,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&d.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([gD]),d.qOj,d.TTD]}),n})();const bh={provide:rs,useExisting:(0,d.Gpc)(()=>bg)};let bg=(()=>{class n extends zy{constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}_checkParentType(){xg(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rs,13),d.Y36(x,10),d.Y36(M,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[d._Bn([bh]),d.qOj]}),n})();const _D={provide:rs,useExisting:(0,d.Gpc)(()=>wg)};let wg=(()=>{class n extends rs{constructor(t,i,r){super(),this._parent=t,this._setValidators(i),this._setAsyncValidators(r)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Oy(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){xg(this._parent)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rs,13),d.Y36(x,10),d.Y36(M,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[d._Bn([_D]),d.qOj]}),n})();function xg(n){return!(n instanceof bg||n instanceof _c||n instanceof wg)}const yD={provide:Ta,useExisting:(0,d.Gpc)(()=>wh)};let wh=(()=>{class n extends Ta{set isDisabled(t){}constructor(t,i,r,s,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function jy(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===hc?t=s:function ww(n){return Object.getPrototypeOf(n.constructor)===bs}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function Vy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Oy(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(rs,13),d.Y36(x,10),d.Y36(M,10),d.Y36(is,10),d.Y36(vg,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([yD]),d.qOj,d.TTD]}),n})(),yc=(()=>{class n{constructor(){this._validator=fh}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):fh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,features:[d.TTD]}),n})();const Yy={provide:x,useExisting:(0,d.Gpc)(()=>hm),multi:!0};let hm=(()=>{class n extends yc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.D6c,this.createValidator=t=>Qe}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&d.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([Yy]),d.qOj]}),n})(),Ow=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[lm]}),n})();class Fw extends hg{constructor(e,t,i){super(mw(t),pw(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){yw(this,!1,e),e.forEach((i,r)=>{_w(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Lw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Bw=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return Lw(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Sa(r,s)}record(t,i=null){const r=this._reduceControls(t);return new Py(r,i)}control(t,i,r){let s={};return this.useNonNullable?(Lw(i)?s=i:(s.validators=i,s.asyncValidators=r),new ss(t,{...s,nonNullable:!0})):new ss(t,i,r)}array(t,i,r){const s=t.map(l=>this._createControl(l));return new Fw(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof ss||t instanceof hg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:vg,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ld,useValue:t.callSetDisabledState??Ny}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ow]}),n})();var li=V(7579);class Bs extends li.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Ig=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var xh=V(4671),SD=V(9672);function Qy(...n){const e=(0,Br.yG)(n),t=(0,Br.jO)(n),{args:i,keys:r}=vr(n);if(0===i.length)return(0,dn.D)([],e);const s=new rr.y(function AD(n,e,t=xh.y){return i=>{Qt(e,()=>{const{length:r}=n,s=new Array(r);let l=r,h=r;for(let m=0;m<r;m++)Qt(e,()=>{const y=(0,dn.D)(n[m],e);let C=!1;y.subscribe((0,ai.x)(i,D=>{s[m]=D,C||(C=!0,h--),h||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}(i,e,r?l=>pl(r,l):xh.y));return t?s.pipe(em(t)):s}function Qt(n,e,t){n?(0,SD.f)(t,n,e):e()}var Eh=V(8189);function mm(...n){return function Vw(){return(0,Eh.J)(1)}()((0,dn.D)(n,(0,Br.yG)(n)))}function Uw(n){return new rr.y(e=>{(0,Ia.Xf)(n()).subscribe(e)})}var MD=V(9635);function Ch(n,e){const t=(0,sc.m)(n)?n:()=>n,i=r=>r.error(t());return new rr.y(e?r=>e.schedule(i,0,r):i)}var wl=V(515),pm=V(727);function Xy(){return(0,Zn.e)((n,e)=>{let t=null;n._refCount++;const i=(0,ai.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class jw extends rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pm.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ai.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pm.w0.EMPTY)}return e}refCount(){return Xy()(this)}}function Tr(n,e){return(0,Zn.e)((t,i)=>{let r=null,s=0,l=!1;const h=()=>l&&!r&&i.complete();t.subscribe((0,ai.x)(i,m=>{r?.unsubscribe();let y=0;const C=s++;(0,Ia.Xf)(n(m,C)).subscribe(r=(0,ai.x)(i,D=>i.next(e?e(m,D,C,y++):D),()=>{r=null,h()}))},()=>{l=!0,h()}))})}function Ma(n){return n<=0?()=>wl.E:(0,Zn.e)((e,t)=>{let i=0;e.subscribe((0,ai.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Ih(...n){const e=(0,Br.yG)(n);return(0,Zn.e)((t,i)=>{(e?mm(n,t,e):mm(n,t)).subscribe(i)})}function ka(n){return(0,Zn.e)((e,t)=>{let i=!1;e.subscribe((0,ai.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Hw(n=Jy){return(0,Zn.e)((e,t)=>{let i=!1;e.subscribe((0,ai.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Jy(){return new Ig}function Ho(n,e){const t=arguments.length>=2;return i=>i.pipe(n?sr((r,s)=>n(r,s,i)):xh.y,Ma(1),t?ka(e):Hw(()=>new Ig))}var Dr=V(8505);function Ud(n){return(0,Zn.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,ai.x)(t,void 0,void 0,l=>{s=(0,Ia.Xf)(n(l,Ud(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Tg(n,e){return(0,Zn.e)(function GN(n,e,t,i,r){return(s,l)=>{let h=t,m=e,y=0;s.subscribe((0,ai.x)(l,C=>{const D=y++;m=h?n(m,C,D):(h=!0,C),i&&l.next(m)},r&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ev(n){return n<=0?()=>wl.E:(0,Zn.e)((e,t)=>{let i=[];e.subscribe((0,ai.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function tv(n,e){const t=arguments.length>=2;return i=>i.pipe(n?sr((r,s)=>n(r,s,i)):xh.y,ev(1),t?ka(e):Hw(()=>new Ig))}function vc(n){return(0,Zn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const rn="primary",Th=Symbol("RouteTitle");class Dg{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Dh(n){return new Dg(n)}function zw(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const l=i[s],h=n[s];if(l.startsWith(":"))r[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ra(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!$w(n[r],e[r]))return!1;return!0}function $w(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Gw(n){return Array.prototype.concat.apply([],n)}function Ww(n){return n.length>0?n[n.length-1]:null}function Sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function xl(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,dn.D)(Promise.resolve(n)):ct(n)}const gm=!1,nv={exact:function FD(n,e,t){if(!El(n.segments,e.segments)||!_m(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!FD(n.children[i],e.children[i],t))return!1;return!0},subset:iv},ND={exact:function OD(n,e){return Ra(n,e)},subset:function Sh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>$w(n[t],e[t]))},ignored:()=>!0};function Sg(n,e,t){return nv[t.paths](n.root,e.root,t.matrixParams)&&ND[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function iv(n,e,t){return qw(n,e,e.segments,t)}function qw(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!El(r,t)||e.hasChildren()||!_m(r,t,i))}if(n.segments.length===t.length){if(!El(n.segments,t)||!_m(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!iv(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(El(n.segments,r)&&_m(n.segments,r,i)&&n.children[rn])&&qw(n.children[rn],e,s,i)}}function _m(n,e,t){return e.every((i,r)=>ND[t](n[r].parameters,i.parameters))}class bc{constructor(e=new un([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dh(this.queryParams)),this._queryParamMap}toString(){return Kw.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sr(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kh(this)}}class wc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Dh(this.parameters)),this._parameterMap}toString(){return Zw(this)}}function El(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let jd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Mh},providedIn:"root"}),n})();class Mh{parse(e){const t=new av(e);return new bc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hd(e.root,!0)}`,i=function Qw(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${vm(t)}=${vm(r)}`).join("&"):`${vm(t)}=${vm(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function rv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kw=new Mh;function kh(n){return n.segments.map(e=>Zw(e)).join("/")}function Hd(n,e){if(!n.hasChildren())return kh(n);if(e){const t=n.children[rn]?Hd(n.children[rn],!1):"",i=[];return Sr(n.children,(r,s)=>{s!==rn&&i.push(`${s}:${Hd(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function ym(n,e){let t=[];return Sr(n.children,(i,r)=>{r===rn&&(t=t.concat(e(i,r)))}),Sr(n.children,(i,r)=>{r!==rn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===rn?[Hd(n.children[rn],!1)]:[`${r}:${Hd(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[rn]?`${kh(n)}/${t[0]}`:`${kh(n)}/(${t.join("//")})`}}function Ag(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vm(n){return Ag(n).replace(/%3B/gi,";")}function sv(n){return Ag(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mg(n){return decodeURIComponent(n)}function ov(n){return Mg(n.replace(/\+/g,"%20"))}function Zw(n){return`${sv(n.path)}${function Yw(n){return Object.keys(n).map(e=>`;${sv(e)}=${sv(n[e])}`).join("")}(n.parameters)}`}const LD=/^[^\/()?;=#]+/;function kg(n){const e=n.match(LD);return e?e[0]:""}const Vs=/^[^=?&#]+/,VD=/^[^&#]+/;class av{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[rn]=new un(e,t)),i}parseSegment(){const e=kg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,gm);return this.capture(e),new wc(Mg(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=kg(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=kg(this.remaining);r&&(i=r,this.capture(i))}e[Mg(t)]=Mg(i)}parseQueryParam(e){const t=function BD(n){const e=n.match(Vs);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const l=function qN(n){const e=n.match(VD);return e?e[0]:""}(this.remaining);l&&(i=l,this.capture(i))}const r=ov(t),s=ov(i);if(e.hasOwnProperty(r)){let l=e[r];Array.isArray(l)||(l=[l],e[r]=l),l.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=kg(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new d.vHH(4010,gm);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=rn);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[rn]:new un([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,gm)}}function Rg(n){return n.segments.length>0?new un([],{[rn]:n}):n}function Pg(n){const e={};for(const i of Object.keys(n.children)){const s=Pg(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function UD(n){if(1===n.numberOfChildren&&n.children[rn]){const e=n.children[rn];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function zd(n){return n instanceof bc}const Ng=!1;function jD(n,e,t,i,r){if(0===t.length)return Rh(e.root,e.root,e.root,i,r);const s=function Fg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zo(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Sr(s.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...r,{outlets:h}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===l?(s.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&r.push(h))}),r):[...r,s]},[]);return new zo(t,e,i)}(t);return s.toRoot()?Rh(e.root,e.root,new un([],{}),i,r):function l(m){const y=function ex(n,e,t,i){if(n.isAbsolute)return new Ph(e.root,!0,0);if(-1===i)return new Ph(t,t===e.root,0);return function tx(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new d.vHH(4005,Ng&&"Invalid number of '../'");r=i.segments.length}return new Ph(i,!1,r-s)}(t,i+(bm(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,m),C=y.processChildren?xc(y.segmentGroup,y.index,s.commands):lv(y.segmentGroup,y.index,s.commands);return Rh(e.root,y.segmentGroup,C,i,r)}(n.snapshot?._lastPathIndex)}function bm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function wm(n){return"object"==typeof n&&null!=n&&n.outlets}function Rh(n,e,t,i,r){let l,s={};i&&Sr(i,(m,y)=>{s[y]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),l=n===e?t:Jw(n,e,t);const h=Rg(Pg(l));return new bc(h,s,r)}function Jw(n,e,t){const i={};return Sr(n.children,(r,s)=>{i[s]=r===e?t:Jw(r,e,t)}),new un(n.segments,i)}class zo{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&bm(i[0]))throw new d.vHH(4003,Ng&&"Root segment cannot have matrix parameters");const r=i.find(wm);if(r&&r!==Ww(i))throw new d.vHH(4004,Ng&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ph{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function lv(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return xc(n,e,t);const i=function $D(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const l=n.segments[r],h=t[i];if(wm(h))break;const m=`${h}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!Em(m,y,l))return s;i+=2}else{if(!Em(m,{},l))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,i.pathIndex),{});return s.children[rn]=new un(n.segments.slice(i.pathIndex),n.children),xc(s,0,r)}return i.match&&0===r.length?new un(n.segments,{}):i.match&&!n.hasChildren()?cv(n,e,t):i.match?xc(n,0,r):cv(n,e,t)}function xc(n,e,t){if(0===t.length)return new un(n.segments,{});{const i=function zD(n){return wm(n[0])?n[0].outlets:{[rn]:n}}(t),r={};if(!i[rn]&&n.children[rn]&&1===n.numberOfChildren&&0===n.children[rn].segments.length){const s=xc(n.children[rn],e,t);return new un(n.segments,s.children)}return Sr(i,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[l]=lv(n.children[l],e,s))}),Sr(n.children,(s,l)=>{void 0===i[l]&&(r[l]=s)}),new un(n.segments,r)}}function cv(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(wm(s)){const m=Lg(s.outlets);return new un(i,m)}if(0===r&&bm(t[0])){i.push(new wc(n.segments[e].path,xm(t[0]))),r++;continue}const l=wm(s)?s.outlets[rn]:`${s}`,h=r<t.length-1?t[r+1]:null;l&&h&&bm(h)?(i.push(new wc(l,xm(h))),r+=2):(i.push(new wc(l,{})),r++)}return new un(i,{})}function Lg(n){const e={};return Sr(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=cv(new un([],{}),0,t))}),e}function xm(n){const e={};return Sr(n,(t,i)=>e[i]=`${t}`),e}function Em(n,e,t){return n==t.path&&Ra(e,t.parameters)}const Bg="imperative";class fo{constructor(e,t){this.id=e,this.url=t}}class nx extends fo{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ec extends fo{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cm extends fo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Im extends fo{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Vg extends fo{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dv extends fo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cl extends fo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ug extends fo{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jg extends fo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tm extends fo{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GD{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ix{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rx{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qD{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dm{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sx{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ZD=(()=>{class n{createUrlTree(t,i,r,s,l,h){return jD(t||i.root,r,s,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),QD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(e){return ZD.\u0275fac(e)},providedIn:"root"}),n})();class ox{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uv(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=uv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return hv(e,this._root).map(t=>t.value)}}function uv(n,e){if(n===e.value)return e;for(const t of e.children){const i=uv(n,t);if(i)return i}return null}function hv(n,e){if(n===e.value)return[e];for(const t of e.children){const i=hv(n,t);if(i.length)return i.unshift(e),i}return[]}class Pa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Cc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class ax extends ox{constructor(e,t){super(e),this.snapshot=t,fv(this,e)}toString(){return this.snapshot.toString()}}function Hg(n,e){const t=function XD(n,e){const l=new zg([],{},{},"",{},rn,e,null,n.root,-1,{});return new cx("",new Pa(l,[]))}(n,e),i=new Bs([new wc("",{})]),r=new Bs({}),s=new Bs({}),l=new Bs({}),h=new Bs(""),m=new Nh(i,r,l,h,s,rn,e,t.root);return m.snapshot=t.root,new ax(new Pa(m,[]),t)}class Nh{constructor(e,t,i,r,s,l,h,m){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,tt.U)(y=>y[Th]))??ct(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(e=>Dh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(e=>Dh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function lx(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function JD(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class zg{get title(){return this.data?.[Th]}constructor(e,t,i,r,s,l,h,m,y,C,D){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Dh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Dh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cx extends ox{constructor(e,t){super(t),this.url=e,fv(this,t)}toString(){return mv(this._root)}}function fv(n,e){e.value._routerState=n,e.children.forEach(t=>fv(n,t))}function mv(n){const e=n.children.length>0?` { ${n.children.map(mv).join(", ")} } `:"";return`${n.value}${e}`}function $g(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ra(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ra(e.params,t.params)||n.params.next(t.params),function RD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ra(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ra(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function pv(n,e){const t=Ra(n.params,e.params)&&function Ah(n,e){return El(n,e)&&n.every((t,i)=>Ra(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||pv(n.parent,e.parent))}function Oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function QN(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Oh(n,i,r);return Oh(n,i)})}(n,e,t);return new Pa(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Oh(n,h)),l}}const i=function Gg(n){return new Nh(new Bs(n.url),new Bs(n.params),new Bs(n.queryParams),new Bs(n.fragment),new Bs(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Oh(n,s));return new Pa(i,r)}}const gv="ngNavigationCancelingError";function dx(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=zd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Wg(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Wg(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[gv]=!0,i.cancellationCode=e,t&&(i.url=t),i}function ux(n){return $o(n)&&zd(n.url)}function $o(n){return n&&n[gv]}class Sm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wi,this.attachRef=null}}let Wi=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Sm,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Na=!1;let Fh=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=rn,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Wi),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Na);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Na);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Na);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new d.vHH(4013,Na);this._activatedRoute=t;const r=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new mo(t,h,r.injector);if(i&&function _v(n){return!!n.resolveComponentFactory}(i)){const y=i.resolveComponentFactory(l);this.activated=r.createComponent(y,r.length,m)}else this.activated=r.createComponent(l,{index:r.length,injector:m,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]}),n})();class mo{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Nh?this.route:e===Wi?this.childContexts:this.parent.get(e,t)}}let Ic=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(t,i){1&t&&d._UZ(0,"router-outlet")},dependencies:[Fh],encapsulation:2}),n})();function $d(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function qg(n){const e=n.children&&n.children.map(qg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==rn&&(t.component=Ic),t}function Us(n){return n.outlet||rn}function yv(n,e){const t=n.filter(i=>Us(i)===e);return t.push(...n.filter(i=>Us(i)!==e)),t}function Vh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class mx{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),$g(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Cc(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,r[l],i),delete r[l]}),Sr(r,(s,l)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const l=i.getContext(r.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cc(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);if(i&&i.outlet){const l=i.outlet.detach(),h=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Cc(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Cc(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Dm(s.value.snapshot))}),e.children.length&&this.forwardEvent(new WD(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if($g(r),r===s)if(r.component){const l=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const l=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const h=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),$g(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Vh(r.snapshot),m=h?.get(d._Vd)??null;l.attachRef=null,l.route=r,l.resolver=m,l.injector=h,l.outlet&&l.outlet.activateWith(r,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,i)}}class vv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Pm{constructor(e,t){this.component=e,this.route=t}}function eS(n,e,t){const i=n._root;return Nm(i,e?e._root:null,t,[i.value])}function Gd(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||(0,d.Z0I)(n)?e.get(n):n:i}function Nm(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Cc(e);return n.children.forEach(l=>{(function px(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const m=function bv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!El(n.url,e.url);case"pathParamsOrQueryParamsChange":return!El(n.url,e.url)||!Ra(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!pv(n,e)||!Ra(n.queryParams,e.queryParams);default:return!pv(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new vv(i)):(s.data=l.data,s._resolvedData=l._resolvedData),Nm(n,e,s.component?h?h.children:null:t,i,r),m&&h&&h.outlet&&h.outlet.isActivated&&r.canDeactivateChecks.push(new Pm(h.outlet.component,l))}else l&&Wd(e,h,r),r.canActivateChecks.push(new vv(i)),Nm(n,null,s.component?h?h.children:null:t,i,r)})(l,s[l.value.outlet],t,i.concat([l.value]),r),delete s[l.value.outlet]}),Sr(s,(l,h)=>Wd(l,t.getContext(h),r)),r}function Wd(n,e,t){const i=Cc(n),r=n.value;Sr(i,(s,l)=>{Wd(s,r.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Pm(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Om(n){return"function"==typeof n}function Fm(n){return n instanceof Ig||"EmptyError"===n?.name}const Lm=Symbol("INITIAL_VALUE");function qd(){return Tr(n=>Qy(n.map(e=>e.pipe(Ma(1),Ih(Lm)))).pipe((0,tt.U)(e=>{for(const t of e)if(!0!==t){if(t===Lm)return Lm;if(!1===t||t instanceof bc)return t}return!0}),sr(e=>e!==Lm),Ma(1)))}function Ev(n){return(0,MD.z)((0,Dr.b)(e=>{if(zd(e))throw dx(0,e)}),(0,tt.U)(e=>!0===e))}const Bm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cv(n,e,t,i,r){const s=Xg(n,e,t);return s.matched?function Ex(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ct(r.map(l=>{const h=Gd(l,n);return xl(function Qg(n){return n&&Om(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(qd(),Ev()):ct(!0)}(i=$d(e,i),e,t).pipe((0,tt.U)(l=>!0===l?s:{...Bm})):ct(s)}function Xg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Bm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||zw)(t,n,e);if(!r)return{...Bm};const s={};Sr(r.posParams,(h,m)=>{s[m]=h.path});const l=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:l,positionalParamSegments:r.posParams??{}}}function Vm(n,e,t,i){if(t.length>0&&function Tx(n,e,t){return t.some(i=>Um(n,e,i)&&Us(i)!==rn)}(n,t,i)){const s=new un(e,function Ix(n,e,t,i){const r={};r[rn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Us(s)!==rn){const l=new un([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,r[Us(s)]=l}return r}(n,e,i,new un(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function Dx(n,e,t){return t.some(i=>Um(n,e,i))}(n,t,i)){const s=new un(n.segments,function Cx(n,e,t,i,r){const s={};for(const l of i)if(Um(n,t,l)&&!r[Us(l)]){const h=new un([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[Us(l)]=h}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new un(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Um(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jm(n,e,t,i){return!!(Us(n)===i||i!==rn&&Um(e,t,n))&&("**"===n.path||Xg(e,n,t).matched)}function Il(n,e,t){return 0===e.length&&!n.children[t]}const Jg=!1;class e_{constructor(e){this.segmentGroup=e||null}}class t_{constructor(e){this.urlTree=e}}function Go(n){return Ch(new e_(n))}function n_(n){return Ch(new t_(n))}class JN{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Vm(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,rn).pipe((0,tt.U)(s=>this.createUrlTree(Pg(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ud(s=>{if(s instanceof t_)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof e_?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,rn).pipe((0,tt.U)(r=>this.createUrlTree(Pg(r),e.queryParams,e.fragment))).pipe(Ud(r=>{throw r instanceof e_?this.noMatchError(r):r}))}noMatchError(e){return new d.vHH(4002,Jg)}createUrlTree(e,t,i){const r=Rg(e);return new bc(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,tt.U)(s=>new un([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,dn.D)(r).pipe(Fs(s=>{const l=i.children[s],h=yv(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,tt.U)(m=>({segment:m,outlet:s})))}),Tg((s,l)=>(s[l.outlet]=l.segment,s),{}),tv())}expandSegment(e,t,i,r,s,l){return(0,dn.D)(i).pipe(Fs(h=>this.expandSegmentAgainstRoute(e,t,i,h,r,s,l).pipe(Ud(y=>{if(y instanceof e_)return ct(null);throw y}))),Ho(h=>!!h),Ud((h,m)=>{if(Fm(h))return Il(t,r,s)?ct(new un([],{})):Go(t);throw h}))}expandSegmentAgainstRoute(e,t,i,r,s,l,h){return jm(r,t,s,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l):Go(t):Go(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?n_(s):this.lineralizeSegments(i,s).pipe((0,Nn.z)(l=>{const h=new un(l,{});return this.expandSegment(e,h,t,l,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,l){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:C}=Xg(t,r,s);if(!h)return Go(t);const D=this.applyRedirectCommands(m,r.redirectTo,C);return r.redirectTo.startsWith("/")?n_(D):this.lineralizeSegments(r,D).pipe((0,Nn.z)(k=>this.expandSegment(e,t,i,k.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=$d(i,e),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe((0,tt.U)(h=>(i._loadedRoutes=h.routes,i._loadedInjector=h.injector,new un(r,{})))):ct(new un(r,{}))):Cv(t,i,r,e).pipe(Tr(({matched:l,consumedSegments:h,remainingSegments:m})=>l?this.getChildConfig(e=i._injector??e,i,r).pipe((0,Nn.z)(C=>{const D=C.injector??e,k=C.routes,{segmentGroup:B,slicedSegments:H}=Vm(t,h,m,k),X=new un(B.segments,B.children);if(0===H.length&&X.hasChildren())return this.expandChildren(D,k,X).pipe((0,tt.U)(Xe=>new un(h,Xe)));if(0===k.length&&0===H.length)return ct(new un(h,{}));const ce=Us(i)===s;return this.expandSegment(D,X,k,H,ce?rn:s,!0).pipe((0,tt.U)(Ke=>new un(h.concat(Ke.segments),Ke.children)))})):Go(t)))}getChildConfig(e,t,i){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function xx(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(l=>{const h=Gd(l,n);return xl(function Zg(n){return n&&Om(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(qd(),Ev())}(e,t,i).pipe((0,Nn.z)(r=>r?this.configLoader.loadChildren(e,t).pipe((0,Dr.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Iv(n){return Ch(Wg(Jg,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[rn])return e.redirectTo,Ch(new d.vHH(4e3,Jg));r=r.children[rn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new bc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Sr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const h=r.substring(1);i[s]=t[h]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let l={};return Sr(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,i,r)}),new un(s,l)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new d.vHH(4001,Jg);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class Ax{}class Mx{constructor(e,t,i,r,s,l,h){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=Vm(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,rn).pipe((0,tt.U)(t=>{if(null===t)return null;const i=new zg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Pa(i,t),s=new cx(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=lx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return(0,dn.D)(Object.keys(i.children)).pipe(Fs(r=>{const s=i.children[r],l=yv(t,r);return this.processSegmentGroup(e,l,s,r)}),Tg((r,s)=>r&&s?(r.push(...s),r):null),function WN(n,e=!1){return(0,Zn.e)((t,i)=>{let r=0;t.subscribe((0,ai.x)(i,s=>{const l=n(s,r++);(l||e)&&i.next(s),!l&&i.complete()}))})}(r=>null!==r),ka(null),tv(),(0,tt.U)(r=>{if(null===r)return null;const s=Rx(r);return function cS(n){n.sort((e,t)=>e.value.outlet===rn?-1:t.value.outlet===rn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return(0,dn.D)(t).pipe(Fs(l=>this.processSegmentAgainstRoute(l._injector??e,l,i,r,s)),Ho(l=>!!l),Ud(l=>{if(Fm(l))return Il(i,r,s)?ct([]):ct(null);throw l}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!jm(t,i,r,s))return ct(null);let l;if("**"===t.path){const h=r.length>0?Ww(r).parameters:{},m=Kd(i)+r.length;l=ct({snapshot:new zg(r,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Nx(t),Us(t),t.component??t._loadedComponent??null,t,Tv(i),m,Dv(t)),consumedSegments:[],remainingSegments:[]})}else l=Cv(i,t,r,e).pipe((0,tt.U)(({matched:h,consumedSegments:m,remainingSegments:y,parameters:C})=>{if(!h)return null;const D=Kd(i)+m.length;return{snapshot:new zg(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Nx(t),Us(t),t.component??t._loadedComponent??null,t,Tv(i),D,Dv(t)),consumedSegments:m,remainingSegments:y}}));return l.pipe(Tr(h=>{if(null===h)return ct(null);const{snapshot:m,consumedSegments:y,remainingSegments:C}=h;e=t._injector??e;const D=t._loadedInjector??e,k=function dS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:B,slicedSegments:H}=Vm(i,y,C,k.filter(ce=>void 0===ce.redirectTo));if(0===H.length&&B.hasChildren())return this.processChildren(D,k,B).pipe((0,tt.U)(ce=>null===ce?null:[new Pa(m,ce)]));if(0===k.length&&0===H.length)return ct([new Pa(m,[])]);const X=Us(t)===s;return this.processSegment(D,k,B,H,X?rn:s).pipe((0,tt.U)(ce=>null===ce?null:[new Pa(m,ce)]))}))}}function kx(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Rx(n){const e=[],t=new Set;for(const i of n){if(!kx(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Rx(i.children);e.push(new Pa(i.value,r))}return e.filter(i=>!t.has(i))}function Tv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kd(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Nx(n){return n.data||{}}function Dv(n){return n.resolve||{}}function Fx(n){return"string"==typeof n.title||null===n.title}function Mv(n){return Tr(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,tt.U)(()=>e)):ct(e)})}const jr=new d.OlP("ROUTES");let js=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=xl(t.loadComponent()).pipe((0,tt.U)(kv),(0,Dr.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),vc(()=>{this.componentLoaders.delete(t)})),r=new jw(i,()=>new li.x).pipe(Xy());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,tt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(i);let m,y,C=!1;Array.isArray(h)?y=h:(m=h.create(t).injector,y=Gw(m.get(jr,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(qg),injector:m}}),vc(()=>{this.childrenLoaders.delete(i)})),l=new jw(s,()=>new li.x).pipe(Xy());return this.childrenLoaders.set(i,l),l}loadModuleFactoryOrRoutes(t){return xl(t()).pipe((0,tt.U)(kv),(0,Nn.z)(i=>i instanceof d.YKP||Array.isArray(i)?ct(i):(0,dn.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function kv(n){return function Lx(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let r_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new li.x,this.configLoader=(0,d.f3M)(js),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(jd),this.rootContexts=(0,d.f3M)(Wi),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new ix(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new GD(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Bs({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Bg,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(sr(i=>0!==i.id),(0,tt.U)(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),Tr(i=>{let r=!1,s=!1;return ct(i).pipe((0,Dr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Tr(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const C="";return this.events.next(new Im(l.id,t.serializeUrl(i.rawUrl),C,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),wl.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Bx(l.source)&&(t.browserUrlTree=l.extractedUrl),ct(l).pipe(Tr(C=>{const D=this.transitions?.getValue();return this.events.next(new nx(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),D!==this.transitions?.getValue()?wl.E:Promise.resolve(C)}),function aS(n,e,t,i){return Tr(r=>function XN(n,e,t,i,r){return new JN(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,tt.U)(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Dr.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},i.urlAfterRedirects=C.urlAfterRedirects}),function uS(n,e,t,i,r){return(0,Nn.z)(s=>function lr(n,e,t,i,r,s,l="emptyOnly"){return new Mx(n,e,t,i,r,l,s).recognize().pipe(Tr(h=>null===h?function lS(n){return new rr.y(e=>e.error(n))}(new Ax):ct(h)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe((0,tt.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Dr.b)(C=>{if(i.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const k=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(k,C)}t.browserUrlTree=C.urlAfterRedirects}const D=new dv(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(D)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:C,extractedUrl:D,source:k,restoredState:B,extras:H}=l,X=new nx(C,this.urlSerializer.serialize(D),k,B);this.events.next(X);const ce=Hg(D,this.rootComponentType).snapshot;return ct(i={...l,targetSnapshot:ce,urlAfterRedirects:D,extras:{...H,skipLocationChange:!1,replaceUrl:!1}})}{const C="";return this.events.next(new Im(l.id,t.serializeUrl(i.extractedUrl),C,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),wl.E}}),(0,Dr.b)(l=>{const h=new Cl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,tt.U)(l=>i={...l,guards:eS(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function xv(n,e){return(0,Nn.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?ct({...t,guardsResult:!0}):function _x(n,e,t,i){return(0,dn.D)(n).pipe((0,Nn.z)(r=>function sS(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(h=>{const m=Vh(e)??r,y=Gd(h,m);return xl(function Yg(n){return n&&Om(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,i):m.runInContext(()=>y(n,e,t,i))).pipe(Ho())})).pipe(qd()):ct(!0)}(r.component,r.route,t,e,i)),Ho(r=>!0!==r,!0))}(l,i,r,n).pipe((0,Nn.z)(h=>h&&function Kg(n){return"boolean"==typeof n}(h)?function rS(n,e,t,i){return(0,dn.D)(e).pipe(Fs(r=>mm(function vx(n,e){return null!==n&&e&&e(new rx(n)),ct(!0)}(r.route.parent,i),function yx(n,e){return null!==n&&e&&e(new qD(n)),ct(!0)}(r.route,i),function wx(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function tS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Uw(()=>ct(l.guards.map(m=>{const y=Vh(l.node)??t,C=Gd(m,y);return xl(function nS(n){return n&&Om(n.canActivateChild)}(C)?C.canActivateChild(i,n):y.runInContext(()=>C(i,n))).pipe(Ho())})).pipe(qd())));return ct(s).pipe(qd())}(n,r.path,t),function bx(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>Uw(()=>{const l=Vh(e)??t,h=Gd(s,l);return xl(function wv(n){return n&&Om(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(Ho())}));return ct(r).pipe(qd())}(n,r.route,t))),Ho(r=>!0!==r,!0))}(i,s,n,e):ct(h)),(0,tt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Dr.b)(l=>{if(i.guardsResult=l.guardsResult,zd(l.guardsResult))throw dx(0,l.guardsResult);const h=new Ug(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),sr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Mv(l=>{if(l.guards.canActivateChecks.length)return ct(l).pipe((0,Dr.b)(h=>{const m=new jg(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),Tr(h=>{let m=!1;return ct(h).pipe(function Ox(n,e){return(0,Nn.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ct(t);let s=0;return(0,dn.D)(r).pipe(Fs(l=>function tO(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!Fx(r)&&(s[Th]=r.title),function Sv(n,e,t,i){const r=function Av(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return(0,dn.D)(r).pipe((0,Nn.z)(l=>function Oa(n,e,t,i){const r=Vh(e)??i,s=Gd(n,r);return xl(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[l],e,t,i).pipe(Ho(),(0,Dr.b)(h=>{s[l]=h}))),ev(1),function kD(n){return(0,tt.U)(()=>n)}(s),Ud(l=>Fm(l)?wl.E:Ch(l)))}(s,n,e,i).pipe((0,tt.U)(l=>(n._resolvedData=l,n.data=lx(n,t).resolve,r&&Fx(r)&&(n.data[Th]=r.title),null)))}(l.route,i,n,e)),(0,Dr.b)(()=>s++),ev(1),(0,Nn.z)(l=>s===r.length?ct(t):wl.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Dr.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,Dr.b)(h=>{const m=new Tm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),Mv(l=>{const h=m=>{const y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,Dr.b)(C=>{m.component=C}),(0,tt.U)(()=>{})));for(const C of m.children)y.push(...h(C));return y};return Qy(h(l.targetSnapshot.root)).pipe(ka(),Ma(1))}),Mv(()=>this.afterPreactivation()),(0,tt.U)(l=>{const h=function YN(n,e,t){const i=Oh(n,e._root,t?t._root:void 0);return new ax(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:h}}),(0,Dr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,tt.U)(i=>(new mx(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Ma(1),(0,Dr.b)({next:l=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ec(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{r=!0}}),vc(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ud(l=>{if(s=!0,$o(l)){ux(l)||(t.navigated=!0,t.restoreHistory(i,!0));const h=new Cm(i.id,this.urlSerializer.serialize(i.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),ux(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Bx(i.source)};t.scheduleNavigation(m,Bg,null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const h=new Vg(i.id,this.urlSerializer.serialize(i.extractedUrl),l,i.targetSnapshot??void 0);this.events.next(h);try{i.resolve(t.errorHandler(l))}catch(m){i.reject(m)}}return wl.E}))}))}cancelNavigationTransition(t,i,r){const s=new Cm(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Bx(n){return n!==Bg}let Vx=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===rn);return i}getResolvedTitleForRoute(t){return t.data[Th]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Rv)},providedIn:"root"}),n})(),Rv=(()=>{class n extends Vx{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Ux)},providedIn:"root"}),n})();class hS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Ux=(()=>{class n extends hS{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=d.n5z(n)))(i||n)}}(),n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const s_=new d.OlP("",{providedIn:"root",factory:()=>({})});let jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(Hx)},providedIn:"root"}),n})(),Hx=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mS(n){throw n}function zx(n,e,t){return e.parse("/")}const $x={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hr=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this.options=(0,d.f3M)(s_,{optional:!0})||{},this.errorHandler=this.options.errorHandler||mS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||zx,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(jx),this.routeReuseStrategy=(0,d.f3M)(Hm),this.urlCreationStrategy=(0,d.f3M)(QD),this.titleStrategy=(0,d.f3M)(Vx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Gw((0,d.f3M)(jr,{optional:!0})??[]),this.navigationTransitions=(0,d.f3M)(r_),this.urlSerializer=(0,d.f3M)(jd),this.location=(0,d.f3M)(je),this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new bc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hg(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Bg,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},l=r?.navigationId?r:null;if(r){const m={...r};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,i,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(qg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:m}=i,y=m?this.currentUrlTree.fragment:l;let C=null;switch(h){case"merge":C={...this.currentUrlTree.queryParams,...s};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=s||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,C,y??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=zd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Bg,null,i)}navigate(t,i={skipLocationChange:!1}){return function Gx(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...$x}:!1===i?{...Pv}:i,zd(t))return Sg(this.currentUrlTree,t,r);const s=this.parseUrl(t);return Sg(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,l){if(this.disposed)return Promise.resolve(!1);let h,m,y,C;return l?(h=l.resolve,m=l.reject,y=l.promise):y=new Promise((D,k)=>{h=D,m=k}),C="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(D=>Promise.reject(D))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const l={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",l)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zm=(()=>{class n{constructor(t,i,r,s,l,h){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new li.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof Ec&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,d.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,d.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,d.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Hr),d.Y36(Nh),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(at))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&d.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&d.uIk("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[d.TTD]}),n})();class Nv{}let Kx=(()=>{class n{constructor(t,i,r,s,l){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(sr(t=>t instanceof Ec),Fs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,d.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,dn.D)(r).pipe((0,Eh.J)())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ct(null);const s=r.pipe((0,Nn.z)(l=>null===l?ct(void 0):(i._loadedRoutes=l.routes,i._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(i.loadComponent&&!i._loadedComponent){const l=this.loader.loadComponent(i);return(0,dn.D)([s,l]).pipe((0,Eh.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Nv),d.LFG(js))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ov=new d.OlP("");let Zx=(()=>{class n{constructor(t,i,r,s,l={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nx?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ec&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof sx&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new sx(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();var Hs=(()=>((Hs=Hs||{})[Hs.COMPLETE=0]="COMPLETE",Hs[Hs.FAILED=1]="FAILED",Hs[Hs.REDIRECTING=2]="REDIRECTING",Hs))();const jh=!1;function Dc(n,e){return{\u0275kind:n,\u0275providers:e}}const Fv=new d.OlP("",{providedIn:"root",factory:()=>!1});function Qx(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const i=n.get(Hr),r=n.get(Xx);1===n.get(Lv)&&i.initialNavigation(),n.get(Bv,null,d.XFs.Optional)?.setUpPreloading(),n.get(Ov,null,d.XFs.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const Xx=new d.OlP(jh?"bootstrap done indicator":"",{factory:()=>new li.x}),Lv=new d.OlP(jh?"initial navigation":"",{providedIn:"root",factory:()=>1});function wS(){let n=[];return n=jh?[{provide:d.Xts,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Hr);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ZN(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Dc(1,n)}const Bv=new d.OlP(jh?"router preloader":"");function Jx(n){return Dc(0,[{provide:Bv,useExisting:Kx},{provide:Nv,useExisting:n}])}const Hh=!1,Vv=new d.OlP(Hh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),eE=[je,{provide:jd,useClass:Mh},Hr,Wi,{provide:Nh,useFactory:function Yx(n){return n.routerState.root},deps:[Hr]},js,Hh?{provide:Fv,useValue:!0}:[]];function Uv(){return new d.PXZ("Router",Hr)}let o_=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[eE,Hh&&i?.enableTracing?wS().\u0275providers:[],{provide:jr,multi:!0,useValue:t},{provide:Vv,useFactory:zh,deps:[[Hr,new d.FiY,new d.tp0]]},{provide:s_,useValue:i||{}},i?.useHash?{provide:at,useClass:Oe}:{provide:at,useClass:Re},{provide:Ov,useFactory:()=>{const n=(0,d.f3M)(Ll),e=(0,d.f3M)(d.R0b),t=(0,d.f3M)(s_),i=(0,d.f3M)(r_),r=(0,d.f3M)(jd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Zx(r,i,n,e,t)}},i?.preloadingStrategy?Jx(i.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Uv},i?.initialNavigation?sO(i):[],[{provide:a_,useFactory:Qx},{provide:d.tb,multi:!0,useExisting:a_}]]}}static forChild(t){return{ngModule:n,providers:[{provide:jr,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vv,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ic]}),n})();function zh(n){if(Hh&&n)throw new d.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function sO(n){return["disabled"===n.initialNavigation?Dc(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const e=(0,d.f3M)(Hr);return()=>{e.setUpLocationChangeListener()}}},{provide:Lv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Dc(2,[{provide:Lv,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:e=>{const t=e.get(we,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Hr),s=e.get(Xx);(function _S(n,e){n.events.pipe(sr(t=>t instanceof Ec||t instanceof Cm||t instanceof Vg||t instanceof Im),(0,tt.U)(t=>t instanceof Ec||t instanceof Im?Hs.COMPLETE:t instanceof Cm&&(0===t.code||1===t.code)?Hs.REDIRECTING:Hs.FAILED),sr(t=>t!==Hs.REDIRECTING),Ma(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(r_).afterPreactivation=()=>(i(!0),s.closed?ct(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const a_=new d.OlP(Hh?"Router Initializer":"");let l_;try{l_=typeof Intl<"u"&&Intl.v8BreakIterator}catch{l_=!1}let $h,qo=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function eo(n){return n===Pf}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!l_)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tE=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function nE(){if($h)return $h;if("object"!=typeof document||!document)return $h=new Set(tE),$h;let n=document.createElement("input");return $h=new Set(tE.filter(e=>(n.setAttribute("type",e),n.type===e))),$h}let Fa,c_;function Tl(n){return function AS(){if(null==Fa&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Fa=!0}))}finally{Fa=Fa||!1}return Fa}()?n:!!n.capture}function Qd(n){return n.composedPath?n.composedPath()[0]:n.target}var vE=V(4986);function Hv(n,e=vE.z){return(0,Zn.e)((t,i)=>{let r=null,s=null,l=null;const h=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function m(){const y=l+n,C=e.now();if(C<y)return r=this.schedule(void 0,y-C),void i.add(r);h()}t.subscribe((0,ai.x)(i,y=>{s=y,l=e.now(),r||(r=e.schedule(m,n),i.add(r))},()=>{h(),i.complete()},void 0,()=>{s=r=null}))})}function bE(n){return sr((e,t)=>n<=t)}function Gh(n,e=xh.y){return n=n??wE,(0,Zn.e)((t,i)=>{let r,s=!0;t.subscribe((0,ai.x)(i,l=>{const h=e(l);(s||!n(r,h))&&(s=!1,r=h,i.next(l))}))})}function wE(n,e){return n===e}var xE=V(5032);function Sc(n){return(0,Zn.e)((e,t)=>{(0,Ia.Xf)(n).subscribe((0,ai.x)(t,()=>t.complete(),xE.Z)),!t.closed&&e.subscribe(t)})}function zr(n){return null!=n&&"false"!=`${n}`}function CE(n){return Array.isArray(n)?n:[n]}function Dl(n){return n instanceof d.SBq?n.nativeElement:n}let IE=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_A=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Dl(t);return new rr.y(r=>{const l=this._observeElement(i).subscribe(r);return()=>{l.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new li.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(IE))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TE=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=zr(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function zv(n,e=0){return function EE(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Hv(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_A),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Ac=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[IE]}),n})();const f_=new Set;let os,yA=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Km}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function m_(n){if(!f_.has(n))try{os||(os=document.createElement("style"),os.setAttribute("type","text/css"),document.head.appendChild(os)),os.sheet&&(os.sheet.insertRule(`@media ${n} {body{ }}`,0),f_.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qo))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Km(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let vA=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new li.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return DE(CE(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Qy(DE(CE(t)).map(l=>this._registerQuery(l).observable));return s=mm(s.pipe(Ma(1)),s.pipe(bE(1),Hv(0))),s.pipe((0,tt.U)(l=>{const h={matches:!1,breakpoints:{}};return l.forEach(({matches:m,query:y})=>{h.matches=h.matches||m,h.breakpoints[y]=m}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new rr.y(l=>{const h=m=>this._zone.run(()=>l.next(m));return i.addListener(h),()=>{i.removeListener(h)}}).pipe(Ih(i),(0,tt.U)(({matches:l})=>({query:t,matches:l})),Sc(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(yA),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function DE(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function p_(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function Wh(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const AA=new d.OlP("cdk-input-modality-detector-options"),qv={ignoreKeys:[18,17,224,91,16]},Xd=Tl({passive:!0,capture:!0});let MA=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Bs(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(h=>h===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qd(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(p_(l)?"keyboard":"mouse"),this._mostRecentTarget=Qd(l))},this._onTouchstart=l=>{Wh(l)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qd(l))},this._options={...qv,...s},this.modalityDetected=this._modality.pipe(bE(1)),this.modalityChanged=this.modalityDetected.pipe(Gh()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Xd),r.addEventListener("mousedown",this._onMousedown,Xd),r.addEventListener("touchstart",this._onTouchstart,Xd)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xd),document.removeEventListener("mousedown",this._onMousedown,Xd),document.removeEventListener("touchstart",this._onTouchstart,Xd))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qo),d.LFG(d.R0b),d.LFG(oe),d.LFG(AA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Zv=new d.OlP("cdk-focus-monitor-default-options"),Yv=Tl({passive:!0,capture:!0});let HE=(()=>{class n{constructor(t,i,r,s,l){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new li.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=Qd(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=s,this._detectionMode=l?.detectionMode||0}monitor(t,i=!1){const r=Dl(t);if(!this._platform.isBrowser||1!==r.nodeType)return ct(null);const s=function iE(n){if(function kS(){if(null==c_){const n=typeof document<"u"?document.head:null;c_=!(!n||!n.createShadowRoot&&!n.attachShadow)}return c_}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),l=this._elementInfo.get(r);if(l)return i&&(l.checkChildren=!0),l.subject;const h={checkChildren:i,subject:new li.x,rootNode:s};return this._elementInfo.set(r,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const i=Dl(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Dl(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,m])=>this._originChanged(h,i,m)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Qd(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Yv),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Yv)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Sc(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Yv),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Yv),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let l=0;l<s.length;l++)if(s[l].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(qo),d.LFG(MA),d.LFG(oe,8),d.LFG(Zv,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qv="cdk-high-contrast-black-on-white",Jd="cdk-high-contrast-white-on-black",Xv="cdk-high-contrast-active";let Jv=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,d.f3M)(vA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Xv,Qv,Jd),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(Xv,Qv):2===i&&t.add(Xv,Jd)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qo),d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eb=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jv))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ac]}),n})();const vF=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function NA(){return(0,d.f3M)(oe)}}),bF=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let FA=(()=>{class n{constructor(t){this.value="ltr",this.change=new d.vpe,t&&(this.value=function OA(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?bF.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vF,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const $A=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function zA(){return!0}});let Ar=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function sE(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Jv),d.LFG($A,8),d.LFG(oe))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[tb,tb]}),n})();function TF(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=zr(e)}constructor(...e){super(...e),this._disabled=!1}}}function WA(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function DF(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=zr(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function SF(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let QA=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NF{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const XA=Tl({passive:!0,capture:!0});class OF{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Qd(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const l=s.get(i);l?l.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,XA)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,XA)))}}const $E={enterDuration:225,exitDuration:150},GE=Tl({passive:!0,capture:!0}),eM=["mousedown","touchstart"],WE=["mouseup","mouseleave","touchend","touchcancel"];class eu{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Dl(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...$E,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const l=i.radius||function qE(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),h=e-r.left,m=t-r.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-l+"px",C.style.top=m-l+"px",C.style.height=2*l+"px",C.style.width=2*l+"px",null!=i.color&&(C.style.backgroundColor=i.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C);const D=window.getComputedStyle(C),B=D.transitionDuration,H="none"===D.transitionProperty||"0s"===B||"0s, 0s"===B||0===r.width&&0===r.height,X=new NF(this,C,i,H);C.style.transform="scale3d(1, 1, 1)",X.state=0,i.persistent||(this._mostRecentTransientRipple=X);let ce=null;return!H&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ne=()=>this._finishRippleTransition(X),Ke=()=>this._destroyRipple(X);C.addEventListener("transitionend",Ne),C.addEventListener("transitioncancel",Ke),ce={onTransitionEnd:Ne,onTransitionCancel:Ke}}),this._activeRipples.set(X,ce),(H||!y)&&this._finishRippleTransition(X),X}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...$E,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Dl(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,eM.forEach(i=>{eu._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{WE.forEach(t=>{this._triggerElement.addEventListener(t,this,GE)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=p_(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Wh(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(eM.forEach(t=>eu._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&WE.forEach(t=>e.removeEventListener(t,this,GE)))}}eu._eventManager=new OF;const KE=new d.OlP("mat-ripple-global-options");let po=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,l){this._elementRef=t,this._animationMode=l,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new eu(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(qo),d.Y36(KE,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,Ar]}),n})(),tM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar]}),n})();const XE=["*",[["mat-toolbar-row"]]],oM=["*","mat-toolbar-row"],ab=WA(class{constructor(n){this._elementRef=n}});let Sl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),kc=(()=>{class n extends ab{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(qo),d.Y36(oe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&d.Suo(r,Sl,5),2&t){let s;d.iGM(s=d.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&d.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[d.qOj],ngContentSelectors:oM,decls:2,vars:0,template:function(t,i){1&t&&(d.F$t(XE),d.Hsn(0),d.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,Ar]}),n})();const JE=["*"];let lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navigation"]],ngContentSelectors:JE,decls:4,vars:1,consts:[[3,"routerLink"]],template:function(t,i){1&t&&(d.F$t(),d.TgZ(0,"mat-toolbar")(1,"button",0),d._uU(2,"plans"),d.qZA()(),d.Hsn(3)),2&t&&(d.xp6(1),d.Q6J("routerLink","/plans"))},dependencies:[kc,zm],encapsulation:2,changeDetection:0}),n})(),jF=(()=>{class n{constructor(){this.title="ng-material-starter-kit-acms"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,i){1&t&&(d.TgZ(0,"app-navigation"),d._UZ(1,"router-outlet"),d.qZA())},dependencies:[Fh,lM]}),n})();var bn=V(4976);function cb(){return(0,Zn.e)((n,e)=>{let t,i=!1;n.subscribe((0,ai.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}var nt,Zo=V(2011),eC=(V(9568),V(3942)),Ce=V(5861),$r=V(6881),Qm=V(4859),Yo=V(1877),te=V(2090),db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},go={},g_=g_||{},Wt=db||self;function Xm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var y_="closure_uid_"+(1e9*Math.random()>>>0),cM=0;function dM(n,e,t){return n.call.apply(n.bind,arguments)}function uM(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function as(n,e,t){return(as=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dM:uM).apply(null,arguments)}function ub(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function cr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[r].apply(i,l)}}function Pc(){this.s=this.s,this.o=this.o}Pc.prototype.s=!1,Pc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function __(n){Object.prototype.hasOwnProperty.call(n,y_)&&n[y_]||(n[y_]=++cM)}(this)},Pc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nC(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function fM(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Xm(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let l=0;l<s;l++)n[r+l]=i[l]}else n.push(i)}}function ls(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ls.prototype.h=function(){this.defaultPrevented=!0};var zF=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Wt.addEventListener("test",()=>{},e),Wt.removeEventListener("test",()=>{},e)}catch{}return n}();function v_(n){return/^[\s\xa0]*$/.test(n)}function b_(){var n=Wt.navigator;return n&&(n=n.userAgent)?n:""}function zs(n){return-1!=b_().indexOf(n)}function hb(n){return hb[" "](n),n}hb[" "]=function(){};var ep,n,iC=zs("Opera"),_o=zs("Trident")||zs("MSIE"),fb=zs("Edge"),Jm=fb||_o,w_=zs("Gecko")&&!(-1!=b_().toLowerCase().indexOf("webkit")&&!zs("Edge"))&&!(zs("Trident")||zs("MSIE"))&&!zs("Edge"),pM=-1!=b_().toLowerCase().indexOf("webkit")&&!zs("Edge");function x_(){var n=Wt.document;return n?n.documentMode:void 0}e:{var qh="",rC=(n=b_(),w_?/rv:([^\);]+)(\)|;)/.exec(n):fb?/Edge\/([\d\.]+)/.exec(n):_o?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pM?/WebKit\/(\S+)/.exec(n):iC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rC&&(qh=rC?rC[1]:""),_o){var sC=x_();if(null!=sC&&sC>parseFloat(qh)){ep=String(sC);break e}}ep=qh}var aC=Wt.document&&_o&&(x_()||parseInt(ep,10))||void 0;function tp(n,e){if(ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(w_){e:{try{hb(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_M[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tp.$.h.call(this)}}cr(tp,ls);var _M={2:"touch",3:"pen",4:"mouse"};tp.prototype.h=function(){tp.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),yM=0;function lC(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++yM,this.fa=this.ia=!1}function ip(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function E_(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function cC(n){const e={};for(const t in n)e[t]=n[t];return e}const mb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C_(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<mb.length;s++)t=mb[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function pb(n){this.src=n,this.g={},this.h=0}function I_(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=tC(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(ip(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rp(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}pb.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=rp(n,e,i,r);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new lC(e,this.src,s,!!i,r)).ia=t,n.push(e)),e};var gb="closure_lm_"+(1e6*Math.random()|0),_b={};function bM(n,e,t,i,r){if(i&&i.once)return dC(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)bM(n,e[s],t,i,r);return null}return t=mC(t),n&&n[np]?n.O(e,t,Rc(i)?!!i.capture:!!i,r):wM(n,e,t,!1,i,r)}function wM(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var l=Rc(r)?!!r.capture:!!r,h=fC(n);if(h||(n[gb]=h=new pb(n)),(t=h.add(e,t,i,l,s)).proxy)return t;if(i=function xM(){const e=$F;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)zF||(r=l),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(EM(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function dC(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)dC(n,e[s],t,i,r);return null}return t=mC(t),n&&n[np]?n.P(e,t,Rc(i)?!!i.capture:!!i,r):wM(n,e,t,!0,i,r)}function uC(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)uC(n,e[s],t,i,r);else i=Rc(i)?!!i.capture:!!i,t=mC(t),n&&n[np]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rp(s=n.g[e],t,i,r))&&(ip(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=fC(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rp(e,t,i,r)),(t=-1<n?e[n]:null)&&hC(t))}function hC(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[np])I_(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(EM(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=fC(e))?(I_(t,n),0==t.h&&(t.src=null,e[gb]=null)):ip(n)}}}function EM(n){return n in _b?_b[n]:_b[n]="on"+n}function $F(n,e){if(n.fa)n=!0;else{e=new tp(e,this);var t=n.listener,i=n.la||n.src;n.ia&&hC(n),n=t.call(i,e)}return n}function fC(n){return(n=n[gb])instanceof pb?n:null}var yb="__closure_events_fn_"+(1e9*Math.random()>>>0);function mC(n){return"function"==typeof n?n:(n[yb]||(n[yb]=function(e){return n.handleEvent(e)}),n[yb])}function Mr(){Pc.call(this),this.i=new pb(this),this.S=this,this.J=null}function Gr(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,"string"==typeof e)e=new ls(e,n);else if(e instanceof ls)e.target=e.target||n;else{var r=e;C_(e=new ls(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];r=vb(l,i,!0,e)&&r}if(r=vb(l=e.g=n,i,!0,e)&&r,r=vb(l,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=vb(l=e.g=t[s],i,!1,e)&&r}function vb(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&I_(n.i,l),r=!1!==h.call(m,i)&&r}}return r&&!i.defaultPrevented}cr(Mr,Pc),Mr.prototype[np]=!0,Mr.prototype.removeEventListener=function(n,e,t,i){uC(this,n,e,t,i)},Mr.prototype.N=function(){if(Mr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)ip(t[i]);delete n.g[e],n.h--}}this.J=null},Mr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Mr.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var pC=Wt.JSON.stringify;function o(){var n=T;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var c=new class GF{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new u,n=>n.reset());class u{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function f(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function g(n){Wt.setTimeout(()=>{throw n},0)}let v,E=!1,T=new class a{constructor(){this.h=this.g=null}add(e,t){const i=c.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},S=()=>{const n=Wt.Promise.resolve(void 0);v=()=>{n.then(P)}};var P=()=>{for(var n;n=o();){try{n.h.call(n.g)}catch(t){g(t)}var e=c;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}E=!1};function j(n,e){Mr.call(this),this.h=n||1,this.g=e||Wt,this.j=as(this.qb,this),this.l=Date.now()}function Y(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ie(n,e,t){if("function"==typeof n)t&&(n=as(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=as(n.handleEvent,n)}return 2147483647<Number(e)?-1:Wt.setTimeout(n,e||0)}function Ie(n){n.g=ie(()=>{n.g=null,n.i&&(n.i=!1,Ie(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}cr(j,Mr),(nt=j.prototype).ga=!1,nt.T=null,nt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Gr(this,"tick"),this.ga&&(Y(this),this.start()))}},nt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.N=function(){j.$.N.call(this),Y(this),delete this.g};class Ge extends Pc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ie(this)}N(){super.N(),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(n){Pc.call(this),this.h=n,this.g={}}cr(Ye,Pc);var gt=[];function kt(n,e,t,i){Array.isArray(t)||(t&&(gt[0]=t.toString()),t=gt);for(var r=0;r<t.length;r++){var s=bM(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Fe(n){E_(n.g,function(e,t){this.g.hasOwnProperty(t)&&hC(e)},n),n.g={}}function Vt(){this.g=!0}function sp(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function R$(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<r.length;l++)r[l]=""}}}return pC(t)}catch{return e}}(n,t)+(i?" "+i:"")})}Ye.prototype.N=function(){Ye.$.N.call(this),Fe(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vt.prototype.Ea=function(){this.g=!1},Vt.prototype.info=function(){};var op={},WF=null;function gC(){return WF=WF||new Mr}function qF(n){ls.call(this,op.Ta,n)}function bb(n){const e=gC();Gr(e,new qF(e))}function KF(n,e){ls.call(this,op.STAT_EVENT,n),this.stat=e}function $s(n){const e=gC();Gr(e,new KF(e,n))}function ZF(n,e){ls.call(this,op.Ua,n),this.size=e}function wb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){n()},e)}op.Ta="serverreachability",cr(qF,ls),op.STAT_EVENT="statevent",cr(KF,ls),op.Ua="timingevent",cr(ZF,ls);var _C={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},YF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function CM(){}function XF(){}CM.prototype.h=null;var DM,xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function IM(){ls.call(this,"d")}function TM(){ls.call(this,"c")}function yC(){}function Eb(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ye(this),this.P=P$,this.V=new j(n=Jm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new JF}function JF(){this.i=null,this.g="",this.h=!1}cr(IM,ls),cr(TM,ls),cr(yC,CM),yC.prototype.g=function(){return new XMLHttpRequest},yC.prototype.i=function(){return{}},DM=new yC;var P$=45e3,SM={},vC={};function AM(n,e,t){n.L=1,n.v=EC(tu(e)),n.s=t,n.S=!0,eL(n,null)}function eL(n,e){n.G=Date.now(),Cb(n),n.A=tu(n.v);var t=n.A,i=n.W;Array.isArray(i)||(i=[String(i)]),dL(t.i,"t",i),n.C=0,t=n.l.J,n.h=new JF,n.g=NL(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Ge(as(n.Pa,n,n.g),n.O)),kt(n.U,n.g,"readystatechange",n.nb),e=n.I?cC(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),bb(),function ci(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");l=2<=D.length&&"type"==D[1]?l+(C+"=")+y+"&":l+(C+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function tL(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function nL(n,e,t){let r,i=!0;for(;!n.J&&n.C<t.length;){if(r=N$(n,t),r==vC){4==e&&(n.o=4,$s(14),i=!1),sp(n.j,n.m,null,"[Incomplete Response]");break}if(r==SM){n.o=4,$s(15),sp(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}sp(n.j,n.m,r,null),MM(n,r)}tL(n)&&r!=vC&&r!=SM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$s(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),LM(e),e.M=!0,$s(11))):(sp(n.j,n.m,t,"[Invalid Chunked Response]"),ap(n),Ib(n))}function N$(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?vC:(t=Number(e.substring(t,i)),isNaN(t)?SM:(i+=1)+t>e.length?vC:(e=e.slice(i,i+t),n.C=i+t,e))}function Cb(n){n.Y=Date.now()+n.P,iL(n,n.P)}function iL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wb(as(n.lb,n),e)}function bC(n){n.B&&(Wt.clearTimeout(n.B),n.B=null)}function Ib(n){0==n.l.H||n.J||ML(n.l,n)}function ap(n){bC(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Y(n.V),Fe(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function MM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||kM(t.i,n)))if(!n.K&&kM(t.i,n)&&3==t.H){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;AC(t),DC(t)}FM(t),$s(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&0==t.A&&!t.v&&(t.v=wb(as(t.ib,t),6e3));if(1>=fL(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else cp(t,11)}else if((n.K||t.g==n)&&AC(t),!v_(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const C=y[3];null!=C&&(t.ra=C,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const k=y[5];null!=k&&"number"==typeof k&&0<k&&(t.L=i=1.5*k,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;const B=n.g;if(B){const H=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var s=i.i;s.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(RM(s,s.h),s.h=null))}if(i.F){const X=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(i.Da=X,yi(i.I,i.F,X))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((i=t).wa=PL(i,i.J?i.pa:null,i.Y),l.K){mL(i.i,l);var h=l,m=i.L;m&&h.setTimeout(m),h.B&&(bC(h),Cb(h)),i.g=l}else SL(i);0<t.j.length&&SC(t)}else"stop"!=y[0]&&"close"!=y[0]||cp(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?cp(t,7):OM(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}bb()}catch{}}function rL(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function F$(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function O$(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Xm(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(nt=Eb.prototype).setTimeout=function(n){this.P=n},nt.nb=function(n){n=n.target;const e=this.M;e&&3==Nc(n)?e.l():this.Pa(n)},nt.Pa=function(n){try{if(n==this.g)e:{const C=Nc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>C)&&(3!=C||Jm||this.g&&(this.h.h||this.g.ja()||xL(this.g)))){this.J||4!=C||7==e||bb(),bC(this);var t=this.g.da();this.ca=t;t:if(tL(this)){var i=xL(this.g);n="";var r=i.length,s=4==Nc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ap(this),Ib(this);var l="";break t}this.h.i=new Wt.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Vi(n,e,t,i,r,s,l){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.W,C,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v_(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,$s(12),ap(this),Ib(this);break e}sp(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,MM(this,t)}this.S?(nL(this,C,l),Jm&&this.i&&3==C&&(kt(this.U,this.V,"tick",this.mb),this.V.start())):(sp(this.j,this.m,l,null),MM(this,l)),4==C&&ap(this),this.i&&!this.J&&(4==C?ML(this.l,this):(this.i=!1,Cb(this)))}else(function e4(n){const e={};n=(n.g&&2<=Nc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<n.length;i++){if(v_(n[i]))continue;var t=f(n[i]);const r=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[r]||[];e[r]=s,s.push(t)}!function vM(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(i){return i.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,$s(12)):(this.o=0,$s(13)),ap(this),Ib(this)}}}catch{}},nt.mb=function(){if(this.g){var n=Nc(this.g),e=this.g.ja();this.C<e.length&&(bC(this),nL(this,n,e),this.i&&4!=n&&Cb(this))}},nt.cancel=function(){this.J=!0,ap(this)},nt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function k$(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(bb(),$s(17)),ap(this),this.o=2,Ib(this)):iL(this,this.Y-n)};var sL=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lp(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof lp){this.h=n.h,wC(this,n.j),this.s=n.s,this.g=n.g,xC(this,n.m),this.l=n.l;var e=n.i,t=new Sb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oL(this,t),this.o=n.o}else n&&(e=String(n).match(sL))?(this.h=!1,wC(this,e[1]||"",!0),this.s=Tb(e[2]||""),this.g=Tb(e[3]||"",!0),xC(this,e[4]),this.l=Tb(e[5]||"",!0),oL(this,e[6]||"",!0),this.o=Tb(e[7]||"")):(this.h=!1,this.i=new Sb(null,this.h))}function tu(n){return new lp(n)}function wC(n,e,t){n.j=t?Tb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function oL(n,e,t){e instanceof Sb?(n.i=e,function z$(n,e){e&&!n.j&&(Kh(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(lL(this,i),dL(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Db(e,j$)),n.i=new Sb(e,n.h))}function yi(n,e,t){n.i.set(e,t)}function EC(n){return yi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Tb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Db(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,B$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function B$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}lp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Db(e,aL,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Db(e,aL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Db(t,"/"==t.charAt(0)?U$:V$,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Db(t,H$)),n.join("")};var aL=/[#\/\?@]/g,V$=/[#\?:]/g,U$=/[#\?]/g,j$=/[#\?@]/g,H$=/#/g;function Sb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Kh(n){n.g||(n.g=new Map,n.h=0,n.i&&function L$(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lL(n,e){Kh(n),e=T_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cL(n,e){return Kh(n),e=T_(n,e),n.g.has(e)}function dL(n,e,t){lL(n,e),0<t.length&&(n.i=null,n.g.set(T_(n,e),nC(t)),n.h+=t.length)}function T_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function uL(n){this.l=n||G$,n=Wt.PerformanceNavigationTiming?0<(n=Wt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ka&&Wt.g.Ka()&&Wt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Sb.prototype).add=function(n,e){Kh(this),this.i=null,n=T_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){Kh(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},nt.ta=function(){Kh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},nt.Z=function(n){Kh(this);let e=[];if("string"==typeof n)cL(this,n)&&(e=e.concat(this.g.get(T_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return Kh(this),this.i=null,cL(this,n=T_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),l=this.Z(i);for(i=0;i<l.length;i++){var r=s;""!==l[i]&&(r+="="+encodeURIComponent(String(l[i]))),n.push(r)}}return this.i=n.join("&")};var G$=10;function hL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function fL(n){return n.h?1:n.g?n.g.size:0}function kM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function RM(n,e){n.g?n.g.add(e):n.h=e}function mL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function pL(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return nC(n.i)}uL.prototype.cancel=function(){if(this.i=pL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var W$=class{stringify(n){return Wt.JSON.stringify(n,void 0)}parse(n){return Wt.JSON.parse(n,void 0)}};function q$(){this.g=new W$}function K$(n,e,t){const i=t||"";try{rL(n,function(r,s){let l=r;Rc(r)&&(l=pC(r)),e.push(i+s+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function CC(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Ab(n){this.l=n.fc||null,this.j=n.ob||!1}function IC(n,e){Mr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=PM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cr(Ab,CM),Ab.prototype.g=function(){return new IC(this.l,this.j)},Ab.prototype.i=function(n){return function(){return n}}({}),cr(IC,Mr);var PM=0;function gL(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Mb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,kb(n)}function kb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=IC.prototype).open=function(n,e){if(this.readyState!=PM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,kb(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Wt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mb(this)),this.readyState=PM},nt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,kb(this)),this.g&&(this.readyState=3,kb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Wt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gL(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},nt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mb(this):kb(this),3==this.readyState&&gL(this)}},nt.Za=function(n){this.g&&(this.response=this.responseText=n,Mb(this))},nt.Ya=function(n){this.g&&(this.response=n,Mb(this))},nt.ka=function(){this.g&&Mb(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(IC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Y$=Wt.JSON.parse;function qi(n){Mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_L,this.L=this.M=!1}cr(qi,Mr);var _L="",Q$=/^https?$/i,X$=["POST","PUT"];function yL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vL(n),TC(n)}function vL(n){n.F||(n.F=!0,Gr(n,"complete"),Gr(n,"error"))}function bL(n){if(n.h&&typeof g_<"u"&&(!n.C[1]||4!=Nc(n)||2!=n.da()))if(n.v&&4==Nc(n))ie(n.La,0,n);else if(Gr(n,"readystatechange"),4==Nc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===l){var r=String(n.I).match(sL)[1]||null;!r&&Wt.self&&Wt.self.location&&(r=Wt.self.location.protocol.slice(0,-1)),i=!Q$.test(r?r.toLowerCase():"")}t=i}if(t)Gr(n,"complete"),Gr(n,"success");else{n.m=6;try{var s=2<Nc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",vL(n)}}finally{TC(n)}}}function TC(n,e){if(n.g){wL(n);const t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Gr(n,"ready");try{t.onreadystatechange=i}catch{}}}function wL(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Wt.clearTimeout(n.A),n.A=null)}function Nc(n){return n.g?n.g.readyState:0}function xL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case _L:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function EL(n){let e="";return E_(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function NM(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=EL(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yi(n,e,t))}function Rb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function CL(n){this.Ga=0,this.j=[],this.l=new Vt,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Rb("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Rb("baseRetryDelayMs",5e3,n),this.hb=Rb("retryDelaySeedMs",1e4,n),this.eb=Rb("forwardChannelMaxRetries",2,n),this.xa=Rb("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new uL(n&&n.concurrentRequestLimit),this.Ja=new q$,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function OM(n){if(IL(n),3==n.H){var e=n.W++,t=tu(n.I);if(yi(t,"SID",n.K),yi(t,"RID",e),yi(t,"TYPE","terminate"),Pb(n,t),(e=new Eb(n,n.l,e)).L=2,e.v=EC(tu(t)),t=!1,Wt.navigator&&Wt.navigator.sendBeacon)try{t=Wt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Wt.Image&&((new Image).src=e.v,t=!0),t||(e.g=NL(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Cb(e)}RL(n)}function DC(n){n.g&&(LM(n),n.g.cancel(),n.g=null)}function IL(n){DC(n),n.u&&(Wt.clearTimeout(n.u),n.u=null),AC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Wt.clearTimeout(n.m),n.m=null)}function SC(n){if(!hL(n.i)&&!n.m){n.m=!0;var e=n.Na;v||S(),E||(v(),E=!0),T.add(e,n),n.C=0}}function TL(n,e){var t;t=e?e.m:n.W++;const i=tu(n.I);yi(i,"SID",n.K),yi(i,"RID",t),yi(i,"AID",n.V),Pb(n,i),n.o&&n.s&&NM(i,n.o,n.s),t=new Eb(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=DL(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),RM(n.i,t),AM(t,i,e)}function Pb(n,e){n.na&&E_(n.na,function(t,i){yi(e,i,t)}),n.h&&rL({},function(t,i){yi(e,i,t)})}function DL(n,e,t){t=Math.min(n.j.length,t);var i=n.h?as(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=r[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let m=0;m<t;m++){let y=r[m].g;const C=r[m].map;if(y-=s,0>y)s=Math.max(0,r[m].g-100),h=!1;else try{K$(C,l,"req"+y+"_")}catch{i&&i(C)}}if(h){i=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function SL(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;v||S(),E||(v(),E=!0),T.add(e,n),n.A=0}}function FM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=wb(as(n.Ma,n),kL(n,n.A)),n.A++,0))}function LM(n){null!=n.B&&(Wt.clearTimeout(n.B),n.B=null)}function AL(n){n.g=new Eb(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=tu(n.wa);yi(e,"RID","rpc"),yi(e,"SID",n.K),yi(e,"AID",n.V),yi(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&yi(e,"TO",n.qa),yi(e,"TYPE","xmlhttp"),Pb(n,e),n.o&&n.s&&NM(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=EC(tu(e)),t.s=null,t.S=!0,eL(t,n)}function AC(n){null!=n.v&&(Wt.clearTimeout(n.v),n.v=null)}function ML(n,e){var t=null;if(n.g==e){AC(n),LM(n),n.g=null;var i=2}else{if(!kM(n.i,e))return;t=e.F,mL(n.i,e),i=1}if(0!=n.H)if(e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.G;var r=n.C;Gr(i=gC(),new ZF(i,t)),SC(n)}else SL(n);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==i&&function t4(n,e){return!(fL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=wb(as(n.Na,n,e),kL(n,n.C)),n.C++,0)))}(n,e)||2==i&&FM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:cp(n,5);break;case 4:cp(n,10);break;case 3:cp(n,6);break;default:cp(n,2)}}function kL(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function cp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var i=as(n.pb,n);t||(t=new lp("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||wC(t,"https"),EC(t)),function Z$(n,e){const t=new Vt;if(Wt.Image){const i=new Image;i.onload=ub(CC,t,i,"TestLoadImage: loaded",!0,e),i.onerror=ub(CC,t,i,"TestLoadImage: error",!1,e),i.onabort=ub(CC,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=ub(CC,t,i,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else $s(2);n.H=0,n.h&&n.h.za(e),RL(n),IL(n)}function RL(n){if(n.H=0,n.ma=[],n.h){const e=pL(n.i);(0!=e.length||0!=n.j.length)&&(fM(n.ma,e),fM(n.ma,n.j),n.i.i.length=0,nC(n.j),n.j.length=0),n.h.ya()}}function PL(n,e,t){var i=t instanceof lp?tu(t):new lp(t);if(""!=i.g)e&&(i.g=e+"."+i.g),xC(i,i.m);else{var r=Wt.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new lp(null);i&&wC(s,i),e&&(s.g=e),r&&xC(s,r),t&&(s.l=t),i=s}return e=n.Da,(t=n.F)&&e&&yi(i,t,e),yi(i,"VER",n.ra),Pb(n,i),i}function NL(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qi(t&&n.Ha&&!n.va?new Ab({ob:!0}):n.va)).Oa(n.J),e}function OL(){}function MC(){if(_o&&!(10<=Number(aC)))throw Error("Environmental error: no available transport.")}function Qo(n,e){Mr.call(this),this.g=new CL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!v_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!v_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new D_(this)}function FL(n){IM.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function LL(){TM.call(this),this.status=1}function D_(n){this.g=n}function Al(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function BM(n,e,t){t||(t=0);var i=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],l=(e=n.g[0])+(s^(t=n.g[1])&((r=n.g[2])^s))+i[0]+3614090360&4294967295;l=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=(t=(r=(s=(e=t+(l<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(r^e&(t^r))+i[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=r+(t^s&(e^t))+i[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^r&(s^e))+i[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(r^s&(t^r))+i[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(r^s&(t^r))+i[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^r&(e^t))+i[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=r+(e^t&(s^e))+i[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^r)+i[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=r+(s^e^t)+i[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(r^s^e)+i[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(r^(t|~s))+i[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(r^(t|~s))+i[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(r^(t|~s))+i[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=r+(e^(s|~t))+i[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(r|~e))+i[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(e=t+((l=e+(r^(t|~s))+i[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~r))+i[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((r=s+((l=r+(e^(s|~t))+i[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}function Hn(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=0|n[r];i&&s==e||(t[r]=s,i=!1)}this.g=t}(nt=qi.prototype).Oa=function(n){this.M=n},nt.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():DM.g(),this.C=function QF(n){return n.h||(n.h=n.i())}(this.u?this.u:DM),this.g.onreadystatechange=as(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void yL(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Wt.FormData&&n instanceof Wt.FormData,!(0<=tC(X$,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wL(this),0<this.B&&((this.L=function J$(n){return _o&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=as(this.ua,this)):this.A=ie(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){yL(this,s)}},nt.ua=function(){typeof g_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Gr(this,"complete"),Gr(this,"abort"),TC(this))},nt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),TC(this,!0)),qi.$.N.call(this)},nt.La=function(){this.s||(this.G||this.v||this.l?bL(this):this.kb())},nt.kb=function(){bL(this)},nt.isActive=function(){return!!this.g},nt.da=function(){try{return 2<Nc(this)?this.g.status:-1}catch{return-1}},nt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Y$(e)}},nt.Ia=function(){return this.m},nt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=CL.prototype).ra=8,nt.H=1,nt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const r=new Eb(this,this.l,n);let s=this.s;if(this.U&&(s?(s=cC(s),C_(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var i=this.j[t];if(void 0===(i="__data__"in i.map&&"string"==typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=DL(this,r,e),yi(t=tu(this.I),"RID",n),yi(t,"CVER",22),this.F&&yi(t,"X-HTTP-Session-Id",this.F),Pb(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(EL(s)))+"&"+e:this.o&&NM(t,this.o,s)),RM(this.i,r),this.bb&&yi(t,"TYPE","init"),this.P?(yi(t,"$req",e),yi(t,"SID","null"),r.aa=!0,AM(r,t,null)):AM(r,t,e),this.H=2}}else 3==this.H&&(n?TL(this,n):0==this.j.length||hL(this.i)||TL(this))},nt.Ma=function(){if(this.u=null,AL(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=wb(as(this.jb,this),n)}},nt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$s(10),DC(this),AL(this))},nt.ib=function(){null!=this.v&&(this.v=null,DC(this),FM(this),$s(19))},nt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),$s(2)):(this.l.info("Failed to ping google.com"),$s(1))},nt.isActive=function(){return!!this.h&&this.h.isActive(this)},(nt=OL.prototype).Ba=function(){},nt.Aa=function(){},nt.za=function(){},nt.ya=function(){},nt.isActive=function(){return!0},nt.Va=function(){},MC.prototype.g=function(n,e){return new Qo(n,e)},cr(Qo,Mr),Qo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;$s(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=PL(n,null,n.Y),SC(n)},Qo.prototype.close=function(){OM(this.g)},Qo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=pC(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&SC(e)},Qo.prototype.N=function(){this.g.h=null,delete this.j,OM(this.g),delete this.g,Qo.$.N.call(this)},cr(FL,IM),cr(LL,TM),cr(D_,OL),D_.prototype.Ba=function(){Gr(this.g,"a")},D_.prototype.Aa=function(n){Gr(this.g,new FL(n))},D_.prototype.za=function(n){Gr(this.g,new LL)},D_.prototype.ya=function(){Gr(this.g,"b")},cr(Al,function n4(){this.blockSize=-1}),Al.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Al.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=t;)BM(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){BM(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){BM(this,i),r=0;break}}this.h=r,this.i+=e},Al.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};var r4={};function VM(n){return-128<=n&&128>n?function mM(n,e){var t=r4;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Hn([0|e],0>e?-1:0)}):new Hn([0|n],0>n?-1:0)}function Oc(n){if(isNaN(n)||!isFinite(n))return S_;if(0>n)return cs(Oc(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=UM;return new Hn(e,0)}var UM=4294967296,S_=VM(0),jM=VM(1),VL=VM(16777216);function nu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function La(n){return-1==n.h}function cs(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Hn(t,~n.h).add(jM)}function kC(n,e){return n.add(cs(e))}function RC(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Nb(n,e){this.g=n,this.h=e}function PC(n,e){if(nu(e))throw Error("division by zero");if(nu(n))return new Nb(S_,S_);if(La(n))return e=PC(cs(n),e),new Nb(cs(e.g),cs(e.h));if(La(e))return e=PC(n,cs(e)),new Nb(cs(e.g),e.h);if(30<n.g.length){if(La(n)||La(e))throw Error("slowDivide_ only works with positive integers.");for(var t=jM,i=e;0>=i.X(n);)t=UL(t),i=UL(i);var r=A_(t,1),s=A_(i,1);for(i=A_(i,2),t=A_(t,2);!nu(i);){var l=s.add(i);0>=l.X(n)&&(r=r.add(t),s=l),i=A_(i,1),t=A_(t,1)}return e=kC(n,r.R(e)),new Nb(r,e)}for(r=S_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=48>=(i=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,i-48),l=(s=Oc(t)).R(e);La(l)||0<l.X(n);)l=(s=Oc(t-=i)).R(e);nu(s)&&(s=jM),r=r.add(s),n=kC(n,l)}return new Nb(r,n)}function UL(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Hn(t,n.h)}function A_(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Hn(r,n.h)}(nt=Hn.prototype).ea=function(){if(La(this))return-cs(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:UM+i)*e,e*=UM}return n},nt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(nu(this))return"0";if(La(this))return"-"+cs(this).toString(n);for(var e=Oc(Math.pow(n,6)),t=this,i="";;){var r=PC(t,e).g,s=((0<(t=kC(t,r.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(nu(t=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},nt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},nt.X=function(n){return La(n=kC(this,n))?-1:nu(n)?0:1},nt.abs=function(){return La(this)?cs(this):this},nt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&n.D(r)),l=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=l>>>16,t[r]=(l&=65535)<<16|(s&=65535)}return new Hn(t,-2147483648&t[t.length-1]?-1:0)},nt.R=function(n){if(nu(this)||nu(n))return S_;if(La(this))return La(n)?cs(this).R(cs(n)):cs(cs(this).R(n));if(La(n))return cs(this.R(cs(n)));if(0>this.X(VL)&&0>n.X(VL))return Oc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,l=65535&this.D(i),h=n.D(r)>>>16,m=65535&n.D(r);t[2*i+2*r]+=l*m,RC(t,2*i+2*r),t[2*i+2*r+1]+=s*m,RC(t,2*i+2*r+1),t[2*i+2*r+1]+=l*h,RC(t,2*i+2*r+1),t[2*i+2*r+2]+=s*h,RC(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Hn(t,0)},nt.gb=function(n){return PC(this,n).h},nt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Hn(t,this.h&n.h)},nt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Hn(t,this.h|n.h)},nt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Hn(t,this.h^n.h)},MC.prototype.createWebChannel=MC.prototype.g,Qo.prototype.send=Qo.prototype.u,Qo.prototype.open=Qo.prototype.m,Qo.prototype.close=Qo.prototype.close,_C.NO_ERROR=0,_C.TIMEOUT=8,_C.HTTP_ERROR=6,YF.COMPLETE="complete",XF.EventType=xb,xb.OPEN="a",xb.CLOSE="b",xb.ERROR="c",xb.MESSAGE="d",Mr.prototype.listen=Mr.prototype.O,qi.prototype.listenOnce=qi.prototype.P,qi.prototype.getLastError=qi.prototype.Sa,qi.prototype.getLastErrorCode=qi.prototype.Ia,qi.prototype.getStatus=qi.prototype.da,qi.prototype.getResponseJson=qi.prototype.Wa,qi.prototype.getResponseText=qi.prototype.ja,qi.prototype.send=qi.prototype.ha,qi.prototype.setWithCredentials=qi.prototype.Oa,Al.prototype.digest=Al.prototype.l,Al.prototype.reset=Al.prototype.reset,Al.prototype.update=Al.prototype.j,Hn.prototype.add=Hn.prototype.add,Hn.prototype.multiply=Hn.prototype.R,Hn.prototype.modulo=Hn.prototype.gb,Hn.prototype.compare=Hn.prototype.X,Hn.prototype.toNumber=Hn.prototype.ea,Hn.prototype.toString=Hn.prototype.toString,Hn.prototype.getBits=Hn.prototype.D,Hn.fromNumber=Oc,Hn.fromString=function BL(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return cs(BL(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Oc(Math.pow(e,8)),i=S_,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),l=parseInt(n.substring(r,r+s),e);8>s?(s=Oc(Math.pow(e,s)),i=i.R(s).add(Oc(l))):i=(i=i.R(t)).add(Oc(l))}return i};var s4=go.createWebChannelTransport=function(){return new MC},o4=go.getStatEventTarget=function(){return gC()},HM=go.ErrorCode=_C,a4=go.EventType=YF,l4=go.Event=op,jL=go.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},c4=go.FetchXmlHttpFactory=Ab,NC=go.WebChannel=XF,d4=go.XhrIo=qi,u4=go.Md5=Al,M_=go.Integer=Hn;const HL="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let k_="9.23.0";const Zh=new Yo.Yd("@firebase/firestore");function zM(){return Zh.logLevel}function Ue(n,...e){if(Zh.logLevel<=Yo.in.DEBUG){const t=e.map($M);Zh.debug(`Firestore (${k_}): ${n}`,...t)}}function dr(n,...e){if(Zh.logLevel<=Yo.in.ERROR){const t=e.map($M);Zh.error(`Firestore (${k_}): ${n}`,...t)}}function Ba(n,...e){if(Zh.logLevel<=Yo.in.WARN){const t=e.map($M);Zh.warn(`Firestore (${k_}): ${n}`,...t)}}function $M(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${k_}) INTERNAL ASSERTION FAILED: `+n;throw dr(e),new Error(e)}function Ct(n,e){n||mt()}function st(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends te.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class p4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class g4{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new kr,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,Ce.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},m=y=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new kr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ct("string"==typeof i.accessToken),new zL(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Wr(e)}}class _4{constructor(e,t,i){this.h=e,this.l=t,this.m=i,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class y4{constructor(e,t,i){this.h=e,this.l=t,this.m=i}getToken(){return Promise.resolve(new _4(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $L{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v4{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const i=s=>{null!=s.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,Ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.T=t.token,new $L(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function b4(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class GL{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=b4(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function tn(n,e){return n<e?-1:n>e?1:0}function R_(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function WL(n){return n+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Mi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Mi(0,0))}static max(){return new Tt(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ob{constructor(e,t,i){void 0===t?t=0:t>e.length&&mt(),void 0===i?i=e.length-t:i>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Ob.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ob?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),l=t.get(r);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Ob{construct(e,t,i){return new En(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new En(t)}static emptyPath(){return new En([])}}const w4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ki extends Ob{construct(e,t,i){return new Ki(e,t,i)}static isValidIdentifier(e){return w4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ki.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ki(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if("\\"===h){if(r+1===e.length)throw new ke(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ke(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,r+=2}else"`"===h?(l=!l,r++):"."!==h||l?(i+=h,r++):(s(),r++)}if(s(),l)throw new ke(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ki(t)}static emptyPath(){return new Ki([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(En.fromString(e))}static fromName(e){return new et(En.fromString(e).popFirst(5))}static empty(){return new et(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new En(e.slice()))}}class OC{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function GM(n){return n.fields.find(e=>2===e.kind)}function dp(n){return n.fields.filter(e=>2!==e.kind)}OC.UNKNOWN_ID=-1;class FC{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fb(0,Xo.min())}}function qL(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Tt.fromTimestamp(1e9===i?new Mi(t+1,0):new Mi(t,i));return new Xo(r,et.empty(),e)}function KL(n){return new Xo(n.readTime,n.key,-1)}class Xo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xo(Tt.min(),et.empty(),-1)}static max(){return new Xo(Tt.max(),et.empty(),-1)}}function WM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:tn(n.largestBatchId,e.largestBatchId))}const ZL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Yh(n){return qM.apply(this,arguments)}function qM(){return qM=(0,Ce.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==ZL)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),qM.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,i)=>{t(e)})}static reject(e){return new ae((t,i)=>{i(e)})}static waitFor(e){return new ae((t,i)=>{let r=0,s=0,l=!1;e.forEach(h=>{++r,h.next(()=>{++s,l&&s===r&&t()},m=>i(m))}),l=!0,s===r&&t()})}static or(e){let t=ae.resolve(!1);for(const i of e)t=t.next(r=>r?ae.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new ae((i,r)=>{const s=e.length,l=new Array(s);let h=0;for(let m=0;m<s;m++){const y=m;t(e[y]).next(C=>{l[y]=C,++h,h===s&&i(l)},C=>r(C))}})}static doWhile(e,t){return new ae((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class LC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new kr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Lb(e,t.error)):this.v.resolve()},this.transaction.onerror=i=>{const r=KM(i.target.error);this.v.reject(new Lb(e,r))}}static open(e,t,i,r){try{return new LC(t,e.transaction(r,i))}catch(s){throw new Lb(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new I4(t)}}class Ml{constructor(e,t,i){this.name=e,this.version=t,this.V=i,12.2===Ml.S((0,te.z$)())&&dr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),up(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,te.hl)())return!1;if(Ml.C())return!0;const e=(0,te.z$)(),t=Ml.S(e),i=0<t&&t<10,r=Ml.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static N(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}$(e){var t=this;return(0,Ce.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{i(l.target.result)},s.onblocked=()=>{r(new Lb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;r("VersionError"===h.name?new ke(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Lb(e,h))},s.onupgradeneeded=l=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=i=>t.F(i)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ce.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.$(e);const m=LC.open(s.db,e,l?"readonly":"readwrite",i),y=r(m).next(C=>(m.P(),C)).catch(C=>(m.abort(C),ae.reject(C))).toPromise();return y.catch(()=>{}),yield m.R,y}catch(m){const y=m,C="FirebaseError"!==y.name&&h<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",C),s.close(),!C)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C4{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return up(this.L.delete())}}class Lb extends ke{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qh(n){return"IndexedDbTransactionError"===n.name}class I4{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),up(i)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),up(this.store.add(e))}get(e){return up(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),up(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),up(this.store.count())}j(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.W(r,(l,h)=>{s.push(h)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ae((s,l)=>{r.onerror=h=>{l(h.target.error)},r.onsuccess=h=>{s(h.target.result)}})}}H(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ae((r,s)=>{i.onerror=l=>{s(l.target.error)},i.onsuccess=l=>{r(l.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.W(r,(s,l,h)=>h.delete())}X(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.W(r,t)}Z(e){const t=this.cursor({});return new ae((i,r)=>{t.onerror=s=>{const l=KM(s.target.error);r(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():i()}):i()}})}W(e,t){const i=[];return new ae((r,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const m=new C4(h),y=t(h.primaryKey,h.value,m);if(y instanceof ae){const C=y.catch(D=>(m.done(),ae.reject(D)));i.push(C)}m.isDone?r():null===m.K?h.continue():h.continue(m.K)}}).next(()=>ae.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function up(n){return new ae((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=KM(i.target.error);t(r)}})}let QL=!1;function KM(n){const e=Ml.S((0,te.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QL||(QL=!0,setTimeout(()=>{throw i},0)),i}}return n}class T4{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ce.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(i){Qh(i)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Yh(i)}yield t.et(6e4)}))}}class D4{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ce.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.st(i,e))})()}st(e,t){const i=new Set;let r=t,s=!0;return ae.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!i.has(l))return Ue("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,r).next(h=>{r-=h,i.add(l)});s=!1})).next(()=>t-r)}it(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(r,s)).next(h=>(Ue("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let i=e;return t.changes.forEach((r,s)=>{const l=KL(s);WM(l,i)>0&&(i=l)}),new Xo(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Jo=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>i.writeSequenceNumber(r))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Bb(n){return null==n}function Vb(n){return 0===n&&1/n==-1/0}function XL(n){return"number"==typeof n&&Number.isInteger(n)&&!Vb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function xs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=JL(e)),e=S4(n.get(t),e);return JL(e)}function S4(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function JL(n){return n+"\x01\x01"}function Fc(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&mt(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let m;0===r.length?m=h:(r+=h,m=r,r=""),i.push(m);break;case"\x10":r+=n.substring(s,l),r+="\0";break;case"\x11":r+=n.substring(s,l+1);break;default:mt()}s=l+2}return new En(i)}const e2=["userId","batchId"];function BC(n,e){return[n,xs(e)]}function t2(n,e,t){return[n,xs(e),t]}const A4={},M4=["prefixPath","collectionGroup","readTime","documentId"],k4=["prefixPath","collectionGroup","documentId"],R4=["collectionGroup","readTime","prefixPath","documentId"],P4=["canonicalId","targetId"],N4=["targetId","path"],O4=["path","targetId"],F4=["collectionId","parent"],L4=["indexId","uid"],B4=["uid","sequenceNumber"],V4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],U4=["indexId","uid","orderedDocumentKey"],j4=["userId","collectionPath","documentId"],H4=["userId","collectionPath","largestBatchId"],z4=["userId","collectionGroup","largestBatchId"],n2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$4=[...n2,"documentOverlays"],r2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],s2=r2,G4=[...s2,"indexConfiguration","indexState","indexEntries"];class ZM extends YL{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function qr(n,e){const t=st(n);return Ml.M(t.ht,e)}function o2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function a2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class di{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new di(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new di(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new VC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new VC(this.root,e,this.comparator,!1)}getReverseIterator(){return new VC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new VC(this.root,e,this.comparator,!0)}}class VC{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??ds.RED,this.left=r??ds.EMPTY,this.right=s??ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new ds(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ds.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ds(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vi{constructor(e){this.comparator=e,this.data=new di(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l2(this.data.getIterator())}getIteratorFrom(e){return new l2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vi(this.comparator);return t.data=e,t}}class l2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function P_(n){return n.hasNext()?n.getNext():void 0}class yo{constructor(e){this.fields=e,e.sort(Ki.comparator)}static empty(){return new yo([])}unionWith(e){let t=new vi(Ki.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new yo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return R_(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class c2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new c2("Invalid base64 string: "+r):r}}(e);return new Rr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new Rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rr.EMPTY_BYTE_STRING=new Rr("");const q4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jh(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=q4.exec(n);if(Ct(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Zi(n.seconds),nanos:Zi(n.nanos)}}function Zi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function iu(n){return"string"==typeof n?Rr.fromBase64String(n):Rr.fromUint8Array(n)}function UC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jC(n){const e=n.mapValue.fields.__previous_value__;return UC(e)?jC(e):e}function Ub(n){const e=Jh(n.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class K4{constructor(e,t,i,r,s,l,h,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=y}}class ef{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ef("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ef&&e.projectId===this.projectId&&e.database===this.database}}const tf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},HC={nullValue:"NULL_VALUE"};function nf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?UC(n)?4:f2(n)?9007199254740991:10:mt()}function Lc(n,e){if(n===e)return!0;const t=nf(n);if(t!==nf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ub(n).isEqual(Ub(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Jh(i.timestampValue),l=Jh(r.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,iu(n.bytesValue).isEqual(iu(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Zi(i.geoPointValue.latitude)===Zi(r.geoPointValue.latitude)&&Zi(i.geoPointValue.longitude)===Zi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Zi(i.integerValue)===Zi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Zi(i.doubleValue),l=Zi(r.doubleValue);return s===l?Vb(s)===Vb(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return R_(n.arrayValue.values||[],e.arrayValue.values||[],Lc);case 10:return function(i,r){const s=i.mapValue.fields||{},l=r.mapValue.fields||{};if(o2(s)!==o2(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!Lc(s[h],l[h])))return!1;return!0}(n,e);default:return mt()}var r}function jb(n,e){return void 0!==(n.values||[]).find(t=>Lc(t,e))}function rf(n,e){if(n===e)return 0;const t=nf(n),i=nf(e);if(t!==i)return tn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(n.booleanValue,e.booleanValue);case 2:return function(r,s){const l=Zi(r.integerValue||r.doubleValue),h=Zi(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return d2(n.timestampValue,e.timestampValue);case 4:return d2(Ub(n),Ub(e));case 5:return tn(n.stringValue,e.stringValue);case 6:return function(r,s){const l=iu(r),h=iu(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const l=r.split("/"),h=s.split("/");for(let m=0;m<l.length&&m<h.length;m++){const y=tn(l[m],h[m]);if(0!==y)return y}return tn(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const l=tn(Zi(r.latitude),Zi(s.latitude));return 0!==l?l:tn(Zi(r.longitude),Zi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const l=r.values||[],h=s.values||[];for(let m=0;m<l.length&&m<h.length;++m){const y=rf(l[m],h[m]);if(y)return y}return tn(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===tf.mapValue&&s===tf.mapValue)return 0;if(r===tf.mapValue)return 1;if(s===tf.mapValue)return-1;const l=r.fields||{},h=Object.keys(l),m=s.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const D=tn(h[C],y[C]);if(0!==D)return D;const k=rf(l[h[C]],m[y[C]]);if(0!==k)return k}return tn(h.length,y.length)}(n.mapValue,e.mapValue);default:throw mt()}}function d2(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return tn(n,e);const t=Jh(n),i=Jh(e),r=tn(t.seconds,i.seconds);return 0!==r?r:tn(t.nanos,i.nanos)}function N_(n){return YM(n)}function YM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Jh(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?iu(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const l of i.values||[])s?s=!1:r+=",",r+=YM(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",l=!0;for(const h of r)l?l=!1:s+=",",s+=`${h}:${YM(i.fields[h])}`;return s+"}"}(n.mapValue):mt();var e}function hp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function QM(n){return!!n&&"integerValue"in n}function Hb(n){return!!n&&"arrayValue"in n}function u2(n){return!!n&&"nullValue"in n}function h2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $C(n){return!!n&&"mapValue"in n}function zb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xh(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=zb(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zb(n.arrayValue.values[t]);return e}return Object.assign({},n)}function f2(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Z4(n){return"nullValue"in n?HC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hp(ef.empty(),et.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function Y4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hp(ef.empty(),et.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?tf:mt()}function m2(n,e){const t=rf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function p2(n,e){const t=rf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$C(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zb(t)}setAll(e){let t=Ki.emptyPath(),i={},r=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=zb(l):r.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());$C(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];$C(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Xh(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new us(zb(this.value))}}function g2(n){const e=[];return Xh(n.fields,(t,i)=>{const r=new Ki([t]);if($C(i)){const s=g2(i.mapValue).fields;if(0===s.length)e.push(r);else for(const l of s)e.push(r.child(l))}else e.push(r)}),new yo(e)}class bi{constructor(e,t,i,r,s,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=l,this.documentState=h}static newInvalidDocument(e){return new bi(e,0,Tt.min(),Tt.min(),Tt.min(),us.empty(),0)}static newFoundDocument(e,t,i,r){return new bi(e,1,t,Tt.min(),i,r,0)}static newNoDocument(e,t){return new bi(e,2,t,Tt.min(),Tt.min(),us.empty(),0)}static newUnknownDocument(e,t){return new bi(e,3,t,Tt.min(),Tt.min(),us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof bi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sf{constructor(e,t){this.position=e,this.inclusive=t}}function _2(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],l=n.position[r];if(i=s.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):rf(l,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function y2(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lc(n.position[t],e.position[t]))return!1;return!0}class O_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class v2{}class wn extends v2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new X4(e,t,i):"array-contains"===t?new t3(e,i):"in"===t?new I2(e,i):"not-in"===t?new n3(e,i):"array-contains-any"===t?new r3(e,i):new wn(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new J4(e,i):new e3(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(rf(t,this.value)):null!==t&&nf(this.value)===nf(t)&&this.matchesComparison(rf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class zn extends v2{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new zn(e,t)}matches(e){return F_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function F_(n){return"and"===n.op}function XM(n){return"or"===n.op}function JM(n){return b2(n)&&F_(n)}function b2(n){for(const e of n.filters)if(e instanceof zn)return!1;return!0}function ek(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+N_(n.value);if(JM(n))return n.filters.map(e=>ek(e)).join(",");{const e=n.filters.map(t=>ek(t)).join(",");return`${n.op}(${e})`}}function w2(n,e){return n instanceof wn?(t=n,(i=e)instanceof wn&&t.op===i.op&&t.field.isEqual(i.field)&&Lc(t.value,i.value)):n instanceof zn?function(t,i){return i instanceof zn&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((r,s,l)=>r&&w2(s,i.filters[l]),!0)}(n,e):void mt();var t,i}function x2(n,e){const t=n.filters.concat(e);return zn.create(t,n.op)}function E2(n){return n instanceof wn?`${(e=n).field.canonicalString()} ${e.op} ${N_(e.value)}`:n instanceof zn?function(e){return e.op.toString()+" {"+e.getFilters().map(E2).join(" ,")+"}"}(n):"Filter";var e}class X4 extends wn{constructor(e,t,i){super(e,t,i),this.key=et.fromName(i.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class J4 extends wn{constructor(e,t){super(e,"in",t),this.keys=C2(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class e3 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=C2(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function C2(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>et.fromName(i.referenceValue))}class t3 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hb(t)&&jb(t.arrayValue,this.value)}}class I2 extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jb(this.value.arrayValue,t)}}class n3 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(jb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jb(this.value.arrayValue,t)}}class r3 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>jb(this.value.arrayValue,i))}}class s3{constructor(e,t=null,i=[],r=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=l,this.endAt=h,this.dt=null}}function tk(n,e=null,t=[],i=[],r=null,s=null,l=null){return new s3(n,e,t,i,r,s,l)}function fp(n){const e=st(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>ek(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Bb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>N_(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>N_(i)).join(",")),e.dt=t}return e.dt}function $b(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!w2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y2(n.startAt,e.startAt)&&y2(n.endAt,e.endAt)}function GC(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function WC(n,e){return n.filters.filter(t=>t instanceof wn&&t.field.isEqual(e))}function T2(n,e,t){let i=HC,r=!0;for(const s of WC(n,e)){let l=HC,h=!0;switch(s.op){case"<":case"<=":l=Z4(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=HC}m2({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];m2({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}function D2(n,e,t){let i=tf,r=!0;for(const s of WC(n,e)){let l=tf,h=!0;switch(s.op){case">=":case">":l=Y4(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=tf}p2({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];p2({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}return{value:i,inclusive:r}}class ru{constructor(e,t=null,i=[],r=[],s=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function S2(n,e,t,i,r,s,l,h){return new ru(n,e,t,i,r,s,l,h)}function L_(n){return new ru(n)}function A2(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function nk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ik(n){return null!==n.collectionGroup}function mp(n){const e=st(n);if(null===e.wt){e.wt=[];const t=qC(e),i=nk(e);if(null!==t&&null===i)t.isKeyField()||e.wt.push(new O_(t)),e.wt.push(new O_(Ki.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new O_(Ki.keyField(),s))}}}return e.wt}function Gs(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=tk(e.path,e.collectionGroup,mp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of mp(e))t.push(new O_(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new sf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sf(e.startAt.position,e.startAt.inclusive):null;e._t=tk(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e._t}function rk(n,e){e.getFirstInequalityField(),qC(n);const t=n.filters.concat([e]);return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function KC(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gb(n,e){return $b(Gs(n),Gs(e))&&n.limitType===e.limitType}function M2(n){return`${fp(Gs(n))}|lt:${n.limitType}`}function sk(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(i=>E2(i)).join(", ")}]`),Bb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(i=>{return`${(r=i).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>N_(i)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>N_(i)).join(",")),`Target(${t})`}(Gs(n))}; limitType=${n.limitType})`}function Wb(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):et.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of mp(t))if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,l){const h=_2(r,s,l);return r.inclusive?h<=0:h<0}(t.startAt,mp(t),i)||t.endAt&&!function(r,s,l){const h=_2(r,s,l);return r.inclusive?h>=0:h>0}(t.endAt,mp(t),i)));var t,i}function k2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R2(n){return(e,t)=>{let i=!1;for(const r of mp(n)){const s=o3(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function o3(n,e,t){const i=n.field.isKeyField()?et.comparator(e.key,t.key):function(r,s,l){const h=s.data.field(r),m=l.data.field(r);return null!==h&&null!==m?rf(h,m):mt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return mt()}}class su{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xh(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return a2(this.inner)}size(){return this.innerSize}}const a3=new di(et.comparator);function vo(){return a3}const P2=new di(et.comparator);function qb(...n){let e=P2;for(const t of n)e=e.insert(t.key,t);return e}function N2(n){let e=P2;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Bc(){return Kb()}function O2(){return Kb()}function Kb(){return new su(n=>n.toString(),(n,e)=>n.isEqual(e))}const l3=new di(et.comparator),c3=new vi(et.comparator);function ln(...n){let e=c3;for(const t of n)e=e.add(t);return e}const d3=new vi(tn);function ok(){return d3}function F2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vb(e)?"-0":e}}function L2(n){return{integerValue:""+n}}function B2(n,e){return XL(e)?L2(e):F2(n,e)}class ZC{constructor(){this._=void 0}}function u3(n,e,t){return n instanceof B_?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&UC(r)&&(r=jC(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof pp?U2(n,e):n instanceof gp?j2(n,e):function(i,r){const s=V2(i,r),l=H2(s)+H2(i.gt);return QM(s)&&QM(i.gt)?L2(l):F2(i.serializer,l)}(n,e)}function h3(n,e,t){return n instanceof pp?U2(n,e):n instanceof gp?j2(n,e):t}function V2(n,e){return n instanceof V_?QM(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class B_ extends ZC{}class pp extends ZC{constructor(e){super(),this.elements=e}}function U2(n,e){const t=z2(e);for(const i of n.elements)t.some(r=>Lc(r,i))||t.push(i);return{arrayValue:{values:t}}}class gp extends ZC{constructor(e){super(),this.elements=e}}function j2(n,e){let t=z2(e);for(const i of n.elements)t=t.filter(r=>!Lc(r,i));return{arrayValue:{values:t}}}class V_ extends ZC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function H2(n){return Zi(n.integerValue||n.doubleValue)}function z2(n){return Hb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zb{constructor(e,t){this.field=e,this.transform=t}}class m3{constructor(e,t){this.version=e,this.transformResults=t}}class ki{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ki}static exists(e){return new ki(void 0,e)}static updateTime(e){return new ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QC{}function $2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new j_(n.key,ki.none()):new U_(n.key,n.data,ki.none());{const t=n.data,i=us.empty();let r=new vi(Ki.comparator);for(let s of e.fields)if(!r.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?i.delete(s):i.set(s,l),r=r.add(s)}return new ou(n.key,i,new yo(r.toArray()),ki.none())}}function p3(n,e,t){n instanceof U_?function(i,r,s){const l=i.value.clone(),h=q2(i.fieldTransforms,r,s.transformResults);l.setAll(h),r.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ou?function(i,r,s){if(!YC(i.precondition,r))return void r.convertToUnknownDocument(s.version);const l=q2(i.fieldTransforms,r,s.transformResults),h=r.data;h.setAll(W2(i)),h.setAll(l),r.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yb(n,e,t,i){return n instanceof U_?function(r,s,l,h){if(!YC(r.precondition,s))return l;const m=r.value.clone(),y=K2(r.fieldTransforms,h,s);return m.setAll(y),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof ou?function(r,s,l,h){if(!YC(r.precondition,s))return l;const m=K2(r.fieldTransforms,h,s),y=s.data;return y.setAll(W2(r)),y.setAll(m),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(C=>C.field))}(n,e,t,i):(l=t,YC(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function g3(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=V2(i.transform,r||null);null!=s&&(null===t&&(t=us.empty()),t.set(i.field,s))}return t||null}function G2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&R_(t,i,(r,s)=>function f3(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof pp&&i instanceof pp||t instanceof gp&&i instanceof gp?R_(t.elements,i.elements,Lc):t instanceof V_&&i instanceof V_?Lc(t.gt,i.gt):t instanceof B_&&i instanceof B_);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class U_ extends QC{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ou extends QC{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function W2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function q2(n,e,t){const i=new Map;Ct(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],l=s.transform,h=e.data.field(s.field);i.set(s.field,h3(l,h,t[r]))}return i}function K2(n,e,t){const i=new Map;for(const r of n){const s=r.transform,l=t.data.field(r.field);i.set(r.field,u3(s,l,e))}return i}class j_ extends QC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ak extends QC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class lk{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&p3(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Yb(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Yb(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=O2();return this.mutations.forEach(r=>{const s=e.get(r.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(r.key)?null:h;const m=$2(l,h);null!==m&&i.set(r.key,m),l.isValidDocument()||l.convertToNoDocument(Tt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ln())}isEqual(e){return this.batchId===e.batchId&&R_(this.mutations,e.mutations,(t,i)=>G2(t,i))&&R_(this.baseMutations,e.baseMutations,(t,i)=>G2(t,i))}}class ck{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ct(e.mutations.length===i.length);let r=l3;const s=e.mutations;for(let l=0;l<s.length;l++)r=r.insert(s[l].key,i[l].version);return new ck(e,t,i,r)}}class dk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class y3{constructor(e,t){this.count=e,this.unchangedNames=t}}var wr,Cn;function Z2(n){switch(n){default:return mt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function Y2(n){if(void 0===n)return dr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case wr.OK:return fe.OK;case wr.CANCELLED:return fe.CANCELLED;case wr.UNKNOWN:return fe.UNKNOWN;case wr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case wr.INTERNAL:return fe.INTERNAL;case wr.UNAVAILABLE:return fe.UNAVAILABLE;case wr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case wr.NOT_FOUND:return fe.NOT_FOUND;case wr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case wr.ABORTED:return fe.ABORTED;case wr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case wr.DATA_LOSS:return fe.DATA_LOSS;default:return mt()}}(Cn=wr||(wr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class uk{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return XC}static getOrCreateInstance(){return null===XC&&(XC=new uk),XC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let XC=null;function Q2(){return new TextEncoder}const v3=new M_([4294967295,4294967295],0);function X2(n){const e=Q2().encode(n),t=new u4;return t.update(e),new Uint8Array(t.digest())}function J2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new M_([t,i],0),new M_([r,s],0)]}class hk{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qb(`Invalid padding: ${t}`);if(i<0)throw new Qb(`Invalid hash count: ${i}`);if(e.length>0&&0===this.hashCount)throw new Qb(`Invalid hash count: ${i}`);if(0===e.length&&0!==t)throw new Qb(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=M_.fromNumber(this.It)}Et(e,t,i){let r=e.add(t.multiply(M_.fromNumber(i)));return 1===r.compare(v3)&&(r=new M_([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=X2(e),[i,r]=J2(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);if(!this.At(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new hk(s,r,t);return i.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=X2(e),[i,r]=J2(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(i,r,s);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Qb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xb{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Jb.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Xb(Tt.min(),r,new di(tn),vo(),ln())}}class Jb{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Jb(i,t,ln(),ln(),ln())}}class JC{constructor(e,t,i,r){this.Pt=e,this.removedTargetIds=t,this.key=i,this.bt=r}}class eB{constructor(e,t){this.targetId=e,this.Vt=t}}class tB{constructor(e,t,i=Rr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class nB{constructor(){this.St=0,this.Dt=rB(),this.Ct=Rr.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ln(),t=ln(),i=ln();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:mt()}}),new Jb(this.Ct,this.xt,e,t,i)}Ft(){this.Nt=!1,this.Dt=rB()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class b3{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=vo(),this.zt=iB(),this.Wt=new di(tn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const i=this.Zt(t);switch(e.state){case 0:this.te(t)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(t);break;case 3:this.te(t)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),i.$t(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((i,r)=>{this.te(r)&&t(r)})}ne(e){var t;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const l=s.target;if(GC(l))if(0===r){const h=new et(l.path);this.Yt(i,h,bi.newNoDocument(h,Tt.min()))}else Ct(1===r);else{const h=this.ie(i);if(h!==r){const m=this.re(e,h);0!==m&&(this.ee(i),this.Wt=this.Wt.insert(i,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=uk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,C,D){var k,B,H,X,ce,Ne;const Ke={localCacheCount:C,existenceFilterCount:D.count},Xe=D.unchangedNames;return Xe&&(Ke.bloomFilter={applied:0===y,hashCount:null!==(k=Xe?.hashCount)&&void 0!==k?k:0,bitmapLength:null!==(X=null===(H=null===(B=Xe?.bits)||void 0===B?void 0:B.bitmap)||void 0===H?void 0:H.length)&&void 0!==X?X:0,padding:null!==(Ne=null===(ce=Xe?.bits)||void 0===ce?void 0:ce.padding)&&void 0!==Ne?Ne:0}),Ke}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=i;let m,y;try{m=iu(s).toUint8Array()}catch(C){if(C instanceof c2)return Ba("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw C}try{y=new hk(m,l,h)}catch(C){return Ba(C instanceof Qb?"BloomFilter error: ":"Applying bloom filter failed: ",C),1}return 0===y.It?1:r!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;t.vt(h)||(this.Yt(e,s,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((s,l)=>{const h=this.se(l);if(h){if(s.current&&GC(h.target)){const m=new et(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,bi.newNoDocument(m,e))}s.Mt&&(t.set(l,s.Ot()),s.Ft())}});let i=ln();this.zt.forEach((s,l)=>{let h=!0;l.forEachWhile(m=>{const y=this.se(m);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(i=i.add(s))}),this.jt.forEach((s,l)=>l.setReadTime(e));const r=new Xb(e,t,this.Wt,this.jt,i);return this.jt=vo(),this.zt=iB(),this.Wt=new di(tn),r}Jt(e,t){if(!this.te(e))return;const i=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,i),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),i&&(this.jt=this.jt.insert(t,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new nB,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new vi(tn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new nB),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function iB(){return new di(et.comparator)}function rB(){return new di(et.comparator)}const w3={asc:"ASCENDING",desc:"DESCENDING"},x3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E3={and:"AND",or:"OR"};class C3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fk(n,e){return n.useProto3Json||Bb(e)?e:{value:e}}function H_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sB(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I3(n,e){return H_(n,e.toTimestamp())}function ur(n){return Ct(!!n),Tt.fromTimestamp(function(e){const t=Jh(e);return new Mi(t.seconds,t.nanos)}(n))}function mk(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oB(n){const e=En.fromString(n);return Ct(pB(e)),e}function e0(n,e){return mk(n.databaseId,e.path)}function Vc(n,e){const t=oB(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(lB(t))}function pk(n,e){return mk(n.databaseId,e)}function aB(n){const e=oB(n);return 4===e.length?En.emptyPath():lB(e)}function t0(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lB(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cB(n,e,t){return{name:e0(n,e),fields:t.value.mapValue.fields}}function dB(n,e,t){const i=Vc(n,e.name),r=ur(e.updateTime),s=e.createTime?ur(e.createTime):Tt.min(),l=new us({mapValue:{fields:e.fields}}),h=bi.newFoundDocument(i,r,s,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function n0(n,e){let t;if(e instanceof U_)t={update:cB(n,e.key,e.value)};else if(e instanceof j_)t={delete:e0(n,e.key)};else if(e instanceof ou)t={update:cB(n,e.key,e.data),updateMask:P3(e.fieldMask)};else{if(!(e instanceof ak))return mt();t={verify:e0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const l=s.transform;if(l instanceof B_)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof V_)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw mt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:I3(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:mt()),t;var r}function gk(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?ki.updateTime(ur(r.updateTime)):void 0!==r.exists?ki.exists(r.exists):ki.none():ki.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,l){let h=null;"setToServerValue"in l?(Ct("REQUEST_TIME"===l.setToServerValue),h=new B_):"appendMissingElements"in l?h=new pp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new gp(l.removeAllFromArray.values||[]):"increment"in l?h=new V_(s,l.increment):mt();const m=Ki.fromServerFormat(l.fieldPath);return new Zb(m,h)}(n,r)):[];var r;if(e.update){const r=Vc(n,e.update.name),s=new us({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new yo((e.updateMask.fieldPaths||[]).map(y=>Ki.fromServerFormat(y)));return new ou(r,s,l,t,i)}return new U_(r,s,t,i)}if(e.delete){const r=Vc(n,e.delete);return new j_(r,t)}if(e.verify){const r=Vc(n,e.verify);return new ak(r,t)}return mt()}function uB(n,e){return{documents:[pk(n,e.path)]}}function _k(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=pk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=pk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(m){if(0!==m.length)return mB(zn.create(m,"and"))}(e.filters);r&&(t.structuredQuery.where=r);const s=function(m){if(0!==m.length)return m.map(y=>{return{field:af((C=y).field),direction:M3(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=fk(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function hB(n){let e=aB(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ct(1===i);const C=t.from[0];C.allDescendants?r=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=function(C){const D=fB(C);return D instanceof zn&&JM(D)?D.getFilters():[D]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new O_(z_((D=C).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,Bb(D)?null:D}(t.limit));let m=null;var C;t.startAt&&(m=new sf((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new sf(C.values||[],!C.before)}(t.endAt)),S2(e,r,l,s,h,"F",m,y)}function fB(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=z_(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const i=z_(e.unaryFilter.field);return wn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=z_(e.unaryFilter.field);return wn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=z_(e.unaryFilter.field);return wn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(n):void 0!==n.fieldFilter?wn.create(z_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return zn.create(e.compositeFilter.filters.map(t=>fB(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return mt()}}(e.compositeFilter.op))}(n):mt();var e}function M3(n){return w3[n]}function k3(n){return x3[n]}function R3(n){return E3[n]}function af(n){return{fieldPath:n.canonicalString()}}function z_(n){return Ki.fromServerFormat(n.fieldPath)}function mB(n){return n instanceof wn?function(e){if("=="===e.op){if(h2(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NAN"}};if(u2(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(h2(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NOT_NAN"}};if(u2(e.value))return{unaryFilter:{field:af(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:af(e.field),op:k3(e.op),value:e.value}}}(n):n instanceof zn?function(e){const t=e.getFilters().map(i=>mB(i));return 1===t.length?t[0]:{compositeFilter:{op:R3(e.op),filters:t}}}(n):mt()}function P3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pB(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class au{constructor(e,t,i,r,s=Tt.min(),l=Tt.min(),h=Rr.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new au(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new au(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gB{constructor(e){this.fe=e}}function _B(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:eI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:e0(r=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:H_(r,s.version.toTimestamp()),createTime:H_(r,s.createTime.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:_p(e.version)};else{if(!e.isUnknownDocument())return mt();i.unknownDocument={path:t.path.toArray(),version:_p(e.version)}}var r,s;return i}function eI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _p(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yp(n){const e=new Mi(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function vp(n,e){const t=(e.baseMutations||[]).map(s=>gk(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const i=e.mutations.map(s=>gk(n.fe,s)),r=Mi.fromMillis(e.localWriteTimeMs);return new lk(e.batchId,r,t,i)}function r0(n){const e=yp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?yp(n.lastLimboFreeSnapshotVersion):Tt.min();let i;var r;return void 0!==n.query.documents?(Ct(1===(r=n.query).documents.length),i=Gs(L_(aB(r.documents[0])))):i=Gs(hB(n.query)),new au(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Rr.fromBase64String(n.resumeToken))}function yB(n,e){const t=_p(e.snapshotVersion),i=_p(e.lastLimboFreeSnapshotVersion);let r;r=GC(e.target)?uB(n.fe,e.target):_k(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fp(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function yk(n){const e=hB({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?KC(e,e.limit,"L"):e}function vk(n,e){return new dk(e.largestBatchId,gk(n.fe,e.overlayMutation))}function vB(n,e){const t=e.path.lastSegment();return[n,xs(e.path.popLast()),t]}function bB(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:_p(i.readTime),documentKey:xs(i.documentKey.path),largestBatchId:i.largestBatchId}}class O3{getBundleMetadata(e,t){return wB(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:yp(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return wB(e).put({bundleId:(i=t).id,createTime:_p(ur(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return xB(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:yk(r.bundledQuery),readTime:yp(r.readTime)};var r})}saveNamedQuery(e,t){return xB(e).put({name:(i=t).name,readTime:_p(ur(i.readTime)),bundledQuery:i.bundledQuery});var i}}function wB(n){return qr(n,"bundles")}function xB(n){return qr(n,"namedQueries")}class tI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new tI(e,t.uid||"")}getOverlay(e,t){return s0(e).get(vB(this.userId,t)).next(i=>i?vk(this.serializer,i):null)}getOverlays(e,t){const i=Bc();return ae.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,l)=>{const h=new dk(t,l);r.push(this.we(e,h))}),ae.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(l=>r.add(xs(l.getCollectionPath())));const s=[];return r.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);s.push(s0(e).J("collectionPathOverlayIndex",h))}),ae.waitFor(s)}getOverlaysForCollection(e,t,i){const r=Bc(),s=xs(t),l=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return s0(e).j("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const y=vk(this.serializer,m);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=Bc();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return s0(e).X({index:"collectionGroupOverlayIndex",range:h},(m,y,C)=>{const D=vk(this.serializer,y);s.size()<r||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):C.done()}).next(()=>s)}we(e,t){return s0(e).put(function(i,r,s){const[l,h,m]=vB(r,s.mutation.key);return{userId:r,collectionPath:h,documentId:m,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:n0(i.fe,s.mutation)}}(this.serializer,this.userId,t))}}function s0(n){return qr(n,"documentOverlays")}class bp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Zi(e.integerValue));else if("doubleValue"in e){const i=Zi(e.doubleValue);isNaN(i)?this.ye(t,13):(this.ye(t,15),Vb(i)?t.pe(0):t.pe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie(`${i.seconds||""}`),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(iu(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?f2(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):mt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const i=e.fields||{};this.ye(t,55);for(const r of Object.keys(i))this.Te(r,t),this.me(i[r],t)}Pe(e,t){const i=e.values||[];this.ye(t,50);for(const r of i)this.me(r,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(i=>{this.ye(t,60),this.be(i,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function F3(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function EB(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=F3(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}bp.Ve=new bp;class L3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.De(i.value),i=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ne(i.value),i=t.next();this.ke()}Me(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{const r=t.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{const r=t.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const t=this.Fe(e),i=EB(t);this.Be(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Le(e){const t=this.Fe(e),i=EB(t);this.Be(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class B3{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class V3{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class o0{constructor(){this.je=new L3,this.ze=new B3(this.je),this.We=new V3(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class wp{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new wp(this.indexId,this.documentKey,this.arrayValue,i)}}function lf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CB(n.arrayValue,e.arrayValue),0!==t?t:(t=CB(n.directionalValue,e.directionalValue),0!==t?t:et.comparator(n.documentKey,e.documentKey)))}function CB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class U3{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const i=t;i.isInequality()?this.Ze=i:this.Xe.push(i)}}tn(e){Ct(e.collectionGroup===this.collectionId);const t=GM(e);if(void 0!==t&&!this.en(t))return!1;const i=dp(e);let r=new Set,s=0,l=0;for(;s<i.length&&this.en(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const h=i[s];if(!this.nn(this.Ze,h)||!this.sn(this.Ye[l++],h))return!1}++s}for(;s<i.length;++s)if(l>=this.Ye.length||!this.sn(this.Ye[l++],i[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function IB(n){var e,t;if(Ct(n instanceof wn||n instanceof zn),n instanceof wn){if(n instanceof I2){const r=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>wn.create(n.field,"==",s)))||[];return zn.create(r,"or")}return n}const i=n.filters.map(r=>IB(r));return zn.create(i,n.op)}function j3(n){if(0===n.getFilters().length)return[];const e=xk(IB(n));return Ct(TB(e)),bk(e)||wk(e)?[e]:e.getFilters()}function bk(n){return n instanceof wn}function wk(n){return n instanceof zn&&JM(n)}function TB(n){return bk(n)||wk(n)||function(e){if(e instanceof zn&&XM(e)){for(const t of e.getFilters())if(!bk(t)&&!wk(t))return!1;return!0}return!1}(n)}function xk(n){if(Ct(n instanceof wn||n instanceof zn),n instanceof wn)return n;if(1===n.filters.length)return xk(n.filters[0]);const e=n.filters.map(i=>xk(i));let t=zn.create(e,n.op);return t=nI(t),TB(t)?t:(Ct(t instanceof zn),Ct(F_(t)),Ct(t.filters.length>1),t.filters.reduce((i,r)=>Ek(i,r)))}function Ek(n,e){let t;return Ct(n instanceof wn||n instanceof zn),Ct(e instanceof wn||e instanceof zn),t=n instanceof wn?e instanceof wn?zn.create([n,e],"and"):DB(n,e):e instanceof wn?DB(e,n):function(i,r){if(Ct(i.filters.length>0&&r.filters.length>0),F_(i)&&F_(r))return x2(i,r.getFilters());const s=XM(i)?i:r,l=XM(i)?r:i,h=s.filters.map(m=>Ek(m,l));return zn.create(h,"or")}(n,e),nI(t)}function DB(n,e){if(F_(e))return x2(e,n.getFilters());{const t=e.filters.map(i=>Ek(n,i));return zn.create(t,"or")}}function nI(n){if(Ct(n instanceof wn||n instanceof zn),n instanceof wn)return n;const e=n.getFilters();if(1===e.length)return nI(e[0]);if(b2(n))return n;const t=e.map(r=>nI(r)),i=[];return t.forEach(r=>{r instanceof wn?i.push(r):r instanceof zn&&(r.op===n.op?i.push(...r.filters):i.push(r))}),1===i.length?i[0]:zn.create(i,n.op)}class H3{constructor(){this.rn=new Ck}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(Xo.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(Xo.min())}updateCollectionGroup(e,t,i){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class Ck{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new vi(En.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new vi(En.comparator)).toArray()}}const iI=new Uint8Array(0);class z3{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Ck,this.un=new su(i=>fp(i),(i,r)=>$b(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:i,parent:xs(r)};return SB(e).put(s)}return ae.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[WL(t),""],!1,!0);return SB(e).j(r).next(s=>{for(const l of s){if(l.collectionId!==t)break;i.push(Fc(l.parent))}return i})}addFieldIndex(e,t){const i=rI(e),r={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete r.indexId;const s=i.add(r);if(t.indexState){const l=l0(e);return s.next(h=>{l.put(bB(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=rI(e),r=l0(e),s=a0(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=a0(e);let r=!0;const s=new Map;return ae.forEach(this.cn(t),l=>this.an(e,l).next(h=>{r&&(r=!!h),s.set(l,h)})).next(()=>{if(r){let l=ln();const h=[];return ae.forEach(s,(m,y)=>{var C;Ue("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${fp(t)}`);const D=function(Xe,dt){const Ut=GM(dt);if(void 0===Ut)return null;for(const nn of WC(Xe,Ut.fieldPath))switch(nn.op){case"array-contains-any":return nn.value.arrayValue.values||[];case"array-contains":return[nn.value]}return null}(y,m),k=function(Xe,dt){const Ut=new Map;for(const nn of dp(dt))for(const An of WC(Xe,nn.fieldPath))switch(An.op){case"==":case"in":Ut.set(nn.fieldPath.canonicalString(),An.value);break;case"not-in":case"!=":return Ut.set(nn.fieldPath.canonicalString(),An.value),Array.from(Ut.values())}return null}(y,m),B=function(Xe,dt){const Ut=[];let nn=!0;for(const An of dp(dt)){const ms=0===An.kind?T2(Xe,An.fieldPath,Xe.startAt):D2(Xe,An.fieldPath,Xe.startAt);Ut.push(ms.value),nn&&(nn=ms.inclusive)}return new sf(Ut,nn)}(y,m),H=function(Xe,dt){const Ut=[];let nn=!0;for(const An of dp(dt)){const ms=0===An.kind?D2(Xe,An.fieldPath,Xe.endAt):T2(Xe,An.fieldPath,Xe.endAt);Ut.push(ms.value),nn&&(nn=ms.inclusive)}return new sf(Ut,nn)}(y,m),X=this.hn(m,y,B),ce=this.hn(m,y,H),Ne=this.ln(m,y,k),Ke=this.fn(m.indexId,D,X,B.inclusive,ce,H.inclusive,Ne);return ae.forEach(Ke,Xe=>i.H(Xe,t.limit).next(dt=>{dt.forEach(Ut=>{const nn=et.fromSegments(Ut.documentKey);l.has(nn)||(l=l.add(nn),h.push(nn))})}))}).next(()=>h)}return ae.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:j3(zn.create(e.filters,"and")).map(i=>tk(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,i,r,s,l,h){const m=(null!=t?t.length:1)*Math.max(i.length,s.length),y=m/(null!=t?t.length:1),C=[];for(let D=0;D<m;++D){const k=t?this.dn(t[D/y]):iI,B=this.wn(e,k,i[D%y],r),H=this._n(e,k,s[D%y],l),X=h.map(ce=>this.wn(e,k,ce,!0));C.push(...this.createRange(B,H,X))}return C}wn(e,t,i,r){const s=new wp(e,et.empty(),t,i);return r?s:s.Je()}_n(e,t,i,r){const s=new wp(e,et.empty(),t,i);return r?s.Je():s}an(e,t){const i=new U3(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let l=null;for(const h of s)i.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let i=2;const r=this.cn(t);return ae.forEach(r,s=>this.an(e,s).next(l=>{l?0!==i&&l.fields.length<function(h){let m=new vi(Ki.comparator),y=!1;for(const C of h.filters)for(const D of C.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?y=!0:m=m.add(D.field));for(const C of h.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(y?1:0)}(s)&&(i=1):i=0})).next(()=>null!==t.limit&&r.length>1&&2===i?1:i)}mn(e,t){const i=new o0;for(const r of dp(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const l=i.He(r.kind);bp.Ve._e(s,l)}return i.Qe()}dn(e){const t=new o0;return bp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const i=new o0;return bp.Ve._e(hp(this.databaseId,t),i.He(function(r){const s=dp(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.Qe()}ln(e,t,i){if(null===i)return[];let r=[];r.push(new o0);let s=0;for(const l of dp(e)){const h=i[s++];for(const m of r)if(this.yn(t,l.fieldPath)&&Hb(h))r=this.pn(r,l,h);else{const y=m.He(l.kind);bp.Ve._e(h,y)}}return this.In(r)}hn(e,t,i){return this.ln(e,t,i.position)}In(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Qe();return t}pn(e,t,i){const r=[...e],s=[];for(const l of i.arrayValue.values||[])for(const h of r){const m=new o0;m.seed(h.Qe()),bp.Ve._e(l,m.He(t.kind)),s.push(m)}return s}yn(e,t){return!!e.filters.find(i=>i instanceof wn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=rI(e),r=l0(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next(s=>{const l=[];return ae.forEach(s,h=>r.get([h.indexId,this.uid]).next(m=>{l.push(function(y,C){const D=C?new Fb(C.sequenceNumber,new Xo(yp(C.readTime),new et(Fc(C.documentKey)),C.largestBatchId)):Fb.empty(),k=y.fields.map(([B,H])=>new FC(Ki.fromServerFormat(B),H));return new OC(y.indexId,y.collectionGroup,k,D)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:tn(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=rI(e),s=l0(e);return this.Tn(e).next(l=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ae.forEach(h,m=>s.put(bB(m.indexId,this.user,l,i)))))}updateIndexEntries(e,t){const i=new Map;return ae.forEach(t,(r,s)=>{const l=i.get(r.collectionGroup);return(l?ae.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next(h=>(i.set(r.collectionGroup,h),ae.forEach(h,m=>this.En(e,r,m).next(y=>{const C=this.An(s,m);return y.isEqual(C)?ae.resolve():this.vn(e,s,m,y,C)}))))})}Rn(e,t,i,r){return a0(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(i,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,i,r){return a0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(i,t.key),t.key.path.toArray()])}En(e,t,i){const r=a0(e);let s=new vi(lf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.gn(i,t)])},(l,h)=>{s=s.add(new wp(i.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}An(e,t){let i=new vi(lf);const r=this.mn(t,e);if(null==r)return i;const s=GM(t);if(null!=s){const l=e.data.field(s.fieldPath);if(Hb(l))for(const h of l.arrayValue.values||[])i=i.add(new wp(t.indexId,e.key,this.dn(h),r))}else i=i.add(new wp(t.indexId,e.key,iI,r));return i}vn(e,t,i,r,s){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,y,C,D){const k=h.getIterator(),B=m.getIterator();let H=P_(k),X=P_(B);for(;H||X;){let ce=!1,Ne=!1;if(H&&X){const Ke=y(H,X);Ke<0?Ne=!0:Ke>0&&(ce=!0)}else null!=H?Ne=!0:ce=!0;ce?(C(X),X=P_(B)):Ne?(D(H),H=P_(k)):(H=P_(k),X=P_(B))}}(r,s,lf,h=>{l.push(this.Rn(e,t,i,h))},h=>{l.push(this.Pn(e,t,i,h))}),ae.waitFor(l)}Tn(e){let t=1;return l0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((l,h)=>lf(l,h)).filter((l,h,m)=>!h||0!==lf(l,m[h-1]));const r=[];r.push(e);for(const l of i){const h=lf(l,e),m=lf(l,t);if(0===h)r[0]=e.Je();else if(h>0&&m<0)r.push(l),r.push(l.Je());else if(m>0)break}r.push(t);const s=[];for(let l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];s.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,iI,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,iI,[]]))}return s}bn(e,t){return lf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(AB)}getMinOffset(e,t){return ae.mapArray(this.cn(t),i=>this.an(e,i).next(r=>r||mt())).next(AB)}}function SB(n){return qr(n,"collectionParents")}function a0(n){return qr(n,"indexEntries")}function rI(n){return qr(n,"indexConfiguration")}function l0(n){return qr(n,"indexState")}function AB(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;WM(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Xo(e.readTime,e.documentKey,t)}const MB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Es{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Es(e,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kB(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=i.X({range:l},(C,D,k)=>(h++,k.delete()));s.push(m.next(()=>{Ct(1===h)}));const y=[];for(const C of t.mutations){const D=t2(e,C.key.path,t.batchId);s.push(r.delete(D)),y.push(C.key)}return ae.waitFor(s).next(()=>y)}function sI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}Es.DEFAULT_COLLECTION_PERCENTILE=10,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Es.DEFAULT=new Es(41943040,Es.DEFAULT_COLLECTION_PERCENTILE,Es.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Es.DISABLED=new Es(-1,0,0);class oI{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}static de(e,t,i,r){Ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new oI(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).X({index:"userMutationsIndex",range:i},(r,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=$_(e),l=cf(e);return l.add({}).next(h=>{Ct("number"==typeof h);const m=new lk(h,t,i,r),y=function(k,B,H){const X=H.baseMutations.map(Ne=>n0(k.fe,Ne)),ce=H.mutations.map(Ne=>n0(k.fe,Ne));return{userId:B,batchId:H.batchId,localWriteTimeMs:H.localWriteTime.toMillis(),baseMutations:X,mutations:ce}}(this.serializer,this.userId,m),C=[];let D=new vi((k,B)=>tn(k.canonicalString(),B.canonicalString()));for(const k of r){const B=t2(this.userId,k.key.path,h);D=D.add(k.key.path.popLast()),C.push(l.put(y)),C.push(s.put(B,A4))}return D.forEach(k=>{C.push(this.indexManager.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),ae.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return cf(e).get(t).next(i=>i?(Ct(i.userId===this.userId),vp(this.serializer,i)):null)}Sn(e,t){return this.Vn[t]?ae.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.Vn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return cf(e).X({index:"userMutationsIndex",range:r},(l,h,m)=>{h.userId===this.userId&&(Ct(h.batchId>=i),s=vp(this.serializer,h)),m.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return cf(e).X({index:"userMutationsIndex",range:t,reverse:!0},(r,s,l)=>{i=s.batchId,l.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cf(e).j("userMutationsIndex",t).next(i=>i.map(r=>vp(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=BC(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return $_(e).X({range:r},(l,h,m)=>{const[y,C,D]=l,k=Fc(C);if(y===this.userId&&t.path.isEqual(k))return cf(e).get(D).next(B=>{if(!B)throw mt();Ct(B.userId===this.userId),s.push(vp(this.serializer,B))});m.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vi(tn);const r=[];return t.forEach(s=>{const l=BC(this.userId,s.path),h=IDBKeyRange.lowerBound(l),m=$_(e).X({range:h},(y,C,D)=>{const[k,B,H]=y,X=Fc(B);k===this.userId&&s.path.isEqual(X)?i=i.add(H):D.done()});r.push(m)}),ae.waitFor(r).next(()=>this.Dn(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=BC(this.userId,i),l=IDBKeyRange.lowerBound(s);let h=new vi(tn);return $_(e).X({range:l},(m,y,C)=>{const[D,k,B]=m,H=Fc(k);D===this.userId&&i.isPrefixOf(H)?H.length===r&&(h=h.add(B)):C.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const i=[],r=[];return t.forEach(s=>{r.push(cf(e).get(s).next(l=>{if(null===l)throw mt();Ct(l.userId===this.userId),i.push(vp(this.serializer,l))}))}),ae.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return kB(e.ht,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ae.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return $_(e).X({range:i},(s,l,h)=>{if(s[0]===this.userId){const m=Fc(s[1]);r.push(m)}else h.done()}).next(()=>{Ct(0===r.length)})})}containsKey(e,t){return RB(e,this.userId,t)}xn(e){return PB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RB(n,e,t){const i=BC(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let l=!1;return $_(n).X({range:s,Y:!0},(h,m,y)=>{const[C,D,k]=h;C===e&&D===r&&(l=!0),y.done()}).next(()=>l)}function cf(n){return qr(n,"mutations")}function $_(n){return qr(n,"documentMutations")}function PB(n){return qr(n,"mutationQueues")}class xp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xp(0)}static Mn(){return new xp(-1)}}class $3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const i=new xp(t.highestTargetId);return t.highestTargetId=i.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Tt.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(i=>(i.targetCount+=1,this.Bn(t,i),this.On(e,i))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>G_(e).delete(t.targetId)).next(()=>this.$n(e)).next(i=>(Ct(i.targetCount>0),i.targetCount-=1,this.On(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return G_(e).X((l,h)=>{const m=r0(h);m.sequenceNumber<=t&&null===i.get(m.targetId)&&(r++,s.push(this.removeTargetData(e,m)))}).next(()=>ae.waitFor(s)).next(()=>r)}forEachTarget(e,t){return G_(e).X((i,r)=>{const s=r0(r);t(s)})}$n(e){return NB(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}On(e,t){return NB(e).put("targetGlobalKey",t)}Fn(e,t){return G_(e).put(yB(this.serializer,t))}Bn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const i=fp(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return G_(e).X({range:r,index:"queryTargetsIndex"},(l,h,m)=>{const y=r0(h);$b(t,y.target)&&(s=y,m.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=df(e);return t.forEach(l=>{const h=xs(l.path);r.push(s.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))}),ae.waitFor(r)}removeMatchingKeys(e,t,i){const r=df(e);return ae.forEach(t,s=>{const l=xs(s.path);return ae.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=df(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=df(e);let s=ln();return r.X({range:i,Y:!0},(l,h,m)=>{const y=Fc(l[1]),C=new et(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const i=xs(t.path),r=IDBKeyRange.bound([i],[WL(i)],!1,!0);let s=0;return df(e).X({index:"documentTargetsIndex",Y:!0,range:r},([l,h],m,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}le(e,t){return G_(e).get(t).next(i=>i?r0(i):null)}}function G_(n){return qr(n,"targets")}function NB(n){return qr(n,"targetGlobal")}function df(n){return qr(n,"targetDocuments")}function OB([n,e],[t,i]){const r=tn(n,t);return 0===r?tn(e,i):r}class G3{constructor(e){this.Ln=e,this.buffer=new vi(OB),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();OB(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FB{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ce.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Qh(i)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Yh(i)}yield t.Qn(3e5)}))}}class W3{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(Jo.ct);const i=new G3(t);return this.jn.forEachTarget(e,r=>i.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>i.Kn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.jn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(MB)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MB):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let i,r,s,l,h,m,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,l=Date.now(),this.nthSequenceNumber(e,r))).next(D=>(i=D,h=Date.now(),this.removeTargets(e,i,t))).next(D=>(s=D,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(D=>(y=Date.now(),zM()<=Yo.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${r} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(m-h)+`ms\n\tRemoved ${D} documents in `+(y-m)+`ms\nTotal Duration: ${y-C}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class q3{constructor(e,t){this.db=e,this.garbageCollector=function LB(n,e){return new W3(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Jn(e){let t=0;return this.Wn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(i,r)=>t(r))}addReference(e,t,i){return aI(e,i)}removeReference(e,t,i){return aI(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return aI(e,t)}Xn(e,t){return function(i,r){let s=!1;return PB(i).Z(l=>RB(i,l,r).next(h=>(h&&(s=!0),ae.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(l,h)=>{if(h<=t){const m=this.Xn(e,l).next(y=>{if(!y)return s++,i.getEntry(e,l).next(()=>(i.removeEntry(l,Tt.min()),df(e).delete([0,xs(l.path)])))});r.push(m)}}).next(()=>ae.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return aI(e,t)}Yn(e,t){const i=df(e);let r,s=Jo.ct;return i.X({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:y})=>{0===l?(s!==Jo.ct&&t(new et(Fc(r)),s),s=y,r=m):s=Jo.ct}).next(()=>{s!==Jo.ct&&t(new et(Fc(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aI(n,e){return df(n).put((i=n.currentSequenceNumber,{targetId:0,path:xs(e.path),sequenceNumber:i}));var i}class BB{constructor(){this.changes=new su(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class K3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ep(e).put(i)}removeEntry(e,t,i){return Ep(e).delete(function(r,s){const l=r.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],eI(s),l[l.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Zn(e,i)))}getEntry(e,t){let i=bi.newInvalidDocument(t);return Ep(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(r,s)=>{i=this.ts(t,s)}).next(()=>i)}es(e,t){let i={size:0,document:bi.newInvalidDocument(t)};return Ep(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(c0(t))},(r,s)=>{i={document:this.ts(t,s),size:sI(s)}}).next(()=>i)}getEntries(e,t){let i=vo();return this.ns(e,t,(r,s)=>{const l=this.ts(r,s);i=i.insert(r,l)}).next(()=>i)}ss(e,t){let i=vo(),r=new di(et.comparator);return this.ns(e,t,(s,l)=>{const h=this.ts(s,l);i=i.insert(s,h),r=r.insert(s,sI(l))}).next(()=>({documents:i,rs:r}))}ns(e,t,i){if(t.isEmpty())return ae.resolve();let r=new vi(HB);t.forEach(m=>r=r.add(m));const s=IDBKeyRange.bound(c0(r.first()),c0(r.last())),l=r.getIterator();let h=l.getNext();return Ep(e).X({index:"documentKeyIndex",range:s},(m,y,C)=>{const D=et.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&HB(h,D)<0;)i(h,null),h=l.getNext();h&&h.isEqual(D)&&(i(h,y),h=l.hasNext()?l.getNext():null),h?C.G(c0(h)):C.done()}).next(()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,i,r){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),eI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ep(e).j(IDBKeyRange.bound(l,h,!0)).next(m=>{let y=vo();for(const C of m){const D=this.ts(et.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);D.isFoundDocument()&&(Wb(t,D)||r.has(D.key))&&(y=y.insert(D.key,D))}return y})}getAllFromCollectionGroup(e,t,i,r){let s=vo();const l=jB(t,i),h=jB(t,Xo.max());return Ep(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,y,C)=>{const D=this.ts(et.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&C.done()}).next(()=>s)}newChangeBuffer(e){return new Z3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return UB(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Zn(e,t){return UB(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const i=function N3(n,e){let t;if(e.document)t=dB(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=et.fromSegments(e.noDocument.path),r=yp(e.noDocument.readTime);t=bi.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const i=et.fromSegments(e.unknownDocument.path),r=yp(e.unknownDocument.version);t=bi.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new Mi(i[0],i[1]);return Tt.fromTimestamp(r)}(e.readTime)),t}(this.serializer,t);if(!i.isNoDocument()||!i.version.isEqual(Tt.min()))return i}return bi.newInvalidDocument(e)}}function VB(n){return new K3(n)}class Z3 extends BB{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new su(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new vi((s,l)=>tn(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.us.get(s);if(t.push(this.os.removeEntry(e,s,h.readTime)),l.isValidDocument()){const m=_B(this.os.serializer,l);r=r.add(s.path.popLast());const y=sI(m);i+=y-h.size,t.push(this.os.addEntry(e,s,m))}else if(i-=h.size,this.trackRemovals){const m=_B(this.os.serializer,l.convertToNoDocument(Tt.min()));t.push(this.os.addEntry(e,s,m))}}),r.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,i)),ae.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(i=>(this.us.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:i,rs:r})=>(r.forEach((s,l)=>{this.us.set(s,{size:l,readTime:i.get(s).readTime})}),i))}}function UB(n){return qr(n,"remoteDocumentGlobal")}function Ep(n){return qr(n,"remoteDocumentsV14")}function c0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jB(n,e){const t=e.documentKey.path.toArray();return[n,eI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HB(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=tn(t[s],i[s]),r)return r;return r=tn(t.length,i.length),r||(r=tn(t[t.length-2],i[i.length-2]),r||tn(t[t.length-1],i[i.length-1]))}class Y3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zB{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(null!==i&&Yb(i.mutation,r,yo.empty(),Mi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ln()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ln()){const r=Bc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let l=qb();return s.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const i=Bc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ln()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,i,r){let s=vo();const l=Kb(),h=Kb();return t.forEach((m,y)=>{const C=i.get(y.key);r.has(y.key)&&(void 0===C||C.mutation instanceof ou)?s=s.insert(y.key,y):void 0!==C?(l.set(y.key,C.mutation.getFieldMask()),Yb(C.mutation,y,C.mutation.getFieldMask(),Mi.now())):l.set(y.key,yo.empty())}),this.recalculateAndSaveOverlays(e,s).next(m=>(m.forEach((y,C)=>l.set(y,C)),t.forEach((y,C)=>{var D;return h.set(y,new Y3(C,null!==(D=l.get(y))&&void 0!==D?D:null))}),h))}recalculateAndSaveOverlays(e,t){const i=Kb();let r=new di((l,h)=>l-h),s=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let C=i.get(m)||yo.empty();C=h.applyToLocalView(y,C),i.set(m,C);const D=(r.get(h.batchId)||ln()).add(m);r=r.insert(h.batchId,D)})}).next(()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,C=m.value,D=O2();C.forEach(k=>{if(!s.has(k)){const B=$2(t.get(k),i.get(k));null!==B&&D.set(k,B),s=s.add(k)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ae.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return et.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ik(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const l=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):ae.resolve(Bc());let h=-1,m=s;return l.next(y=>ae.forEach(y,(C,D)=>(h<D.largestBatchId&&(h=D.largestBatchId),s.get(C)?ae.resolve():this.remoteDocumentCache.getEntry(e,C).next(k=>{m=m.insert(C,k)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,m,y,ln())).next(C=>({batchId:h,changes:N2(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(i=>{let r=qb();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=qb();return this.indexManager.getCollectionParents(e,r).next(l=>ae.forEach(l,h=>{const m=(y=t,C=h.child(r),new ru(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.getDocumentsMatchingCollectionQuery(e,m,i).next(y=>{y.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r))).next(s=>{r.forEach((h,m)=>{const y=m.getKey();null===s.get(y)&&(s=s.insert(y,bi.newInvalidDocument(y)))});let l=qb();return s.forEach((h,m)=>{const y=r.get(h);void 0!==y&&Yb(y.mutation,m,yo.empty(),Mi.now()),Wb(t,m)&&(l=l.insert(h,m))}),l})}}class Q3{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var i;return this.cs.set(t.id,{id:(i=t).id,version:i.version,createTime:ur(i.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(i=t).name,query:yk(i.bundledQuery),readTime:ur(i.readTime)}),ae.resolve();var i}}class X3{constructor(){this.overlays=new di(et.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Bc();return ae.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.we(e,t,s)}),ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.ls.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),ae.resolve()}getOverlaysForCollection(e,t,i){const r=Bc(),s=t.length+1,l=new et(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&m.largestBatchId>i&&r.set(m.getKey(),m)}return ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new di((y,C)=>y-C);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let C=s.get(y.largestBatchId);null===C&&(C=Bc(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=Bc(),m=s.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,C)=>h.set(y,C)),!(h.size()>=r)););return ae.resolve(h)}we(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const l=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new dk(t,i));let s=this.ls.get(t);void 0===s&&(s=ln(),this.ls.set(t,s)),this.ls.set(t,s.add(i.key))}}class Ik{constructor(){this.fs=new vi(Kr.ds),this.ws=new vi(Kr._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const i=new Kr(e,t);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.ys(new Kr(e,t))}ps(e,t){e.forEach(i=>this.removeReference(i,t))}Is(e){const t=new et(new En([])),i=new Kr(t,e),r=new Kr(t,e+1),s=[];return this.ws.forEachInRange([i,r],l=>{this.ys(l),s.push(l.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new En([])),i=new Kr(t,e),r=new Kr(t,e+1);let s=ln();return this.ws.forEachInRange([i,r],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Kr(e,0),i=this.fs.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class Kr{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||tn(e.As,t.As)}static _s(e,t){return tn(e.As,t.As)||et.comparator(e.key,t.key)}}class J3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new vi(Kr.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.vs;this.vs++;const l=new lk(s,t,i,r);this.mutationQueue.push(l);for(const h of r)this.Rs=this.Rs.add(new Kr(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ae.resolve(l)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.bs(t+1),s=r<0?0:r;return ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Kr(t,0),r=new Kr(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],l=>{const h=this.Ps(l.As);s.push(h)}),ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new vi(tn);return t.forEach(r=>{const s=new Kr(r,0),l=new Kr(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,l],h=>{i=i.add(h.As)})}),ae.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;et.isDocumentKey(s)||(s=s.child(""));const l=new Kr(new et(s),0);let h=new vi(tn);return this.Rs.forEachWhile(m=>{const y=m.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(h=h.add(m.As)),!0)},l),ae.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(i=>{const r=this.Ps(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ct(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let i=this.Rs;return ae.forEach(t.mutations,r=>{const s=new Kr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,t){const i=new Kr(t,0),r=this.Rs.firstAfterOrEqual(i);return ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class e6{constructor(e){this.Ds=e,this.docs=new di(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,l=this.Ds(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ae.resolve(i?i.document.mutableCopy():bi.newInvalidDocument(t))}getEntries(e,t){let i=vo();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():bi.newInvalidDocument(r))}),ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=vo();const l=t.path,h=new et(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:y,value:{document:C}}=m.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||WM(KL(C),i)<=0||(r.has(C.key)||Wb(t,C))&&(s=s.insert(C.key,C.mutableCopy()))}return ae.resolve(s)}getAllFromCollectionGroup(e,t,i,r){mt()}Cs(e,t){return ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new t6(this)}getSize(e){return ae.resolve(this.size)}}class t6 extends BB{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class n6{constructor(e){this.persistence=e,this.xs=new su(t=>fp(t),$b),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Ik,this.targetCount=0,this.Ms=xp.kn()}forEachTarget(e,t){return this.xs.forEach((i,r)=>t(r)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new xp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===i.get(h.targetId)&&(this.xs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)}),ae.waitFor(s).next(()=>r)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.xs.get(t)||null;return ae.resolve(i)}addMatchingKeys(e,t,i){return this.ks.gs(t,i),ae.resolve()}removeMatchingKeys(e,t,i){this.ks.ps(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(l=>{s.push(r.markPotentiallyOrphaned(e,l))}),ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ks.Es(t);return ae.resolve(i)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class Tk{constructor(e,t){this.$s={},this.overlays={},this.Os=new Jo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new n6(this),this.indexManager=new H3,this.remoteDocumentCache=new e6(i=>this.referenceDelegate.Ls(i)),this.serializer=new gB(t),this.qs=new Q3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.$s[e.toKey()];return i||(i=new J3(t,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,i){Ue("MemoryPersistence","Starting transaction:",e);const r=new i6(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,t){return ae.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,t)))}}class i6 extends YL{constructor(e){super(),this.currentSequenceNumber=e}}class lI{constructor(e){this.persistence=e,this.Qs=new Ik,this.js=null}static zs(e){return new lI(e)}get Ws(){if(this.js)return this.js;throw mt()}addReference(e,t,i){return this.Qs.addReference(i,t),this.Ws.delete(i.toString()),ae.resolve()}removeReference(e,t,i){return this.Qs.removeReference(i,t),this.Ws.add(i.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,i=>{const r=et.fromPath(i);return this.Hs(e,r).next(s=>{s||t.removeEntry(r,Tt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(i=>{i?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class r6{constructor(e){this.serializer=e}O(e,t,i,r){const s=new LC("createOrUpgrade",t);var h;i<1&&r>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e2,{unique:!0}),h.createObjectStore("documentMutations"),$B(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ae.resolve();return i<3&&r>=3&&(0!==i&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),$B(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(l=l.next(()=>function(h,m){return m.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",e2,{unique:!0});const C=m.store("mutations"),D=y.map(k=>C.put(k));return ae.waitFor(D)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(l=l.next(()=>this.Ys(s))),i<6&&r>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),i<7&&r>=7&&(l=l.next(()=>this.Zs(s))),i<8&&r>=8&&(l=l.next(()=>this.ti(e,s))),i<9&&r>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(l=l.next(()=>this.ei(s))),i<11&&r>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:j4});m.createIndex("collectionPathOverlayIndex",H4,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",z4,{unique:!1})}(e)})),i<13&&r>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:M4});m.createIndex("documentKeyIndex",k4),m.createIndex("collectionGroupIndex",R4)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(l=l.next(()=>this.si(e,s))),i<15&&r>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:L4}).createIndex("sequenceNumberIndex",B4,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:V4}).createIndex("documentKeyIndex",U4,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((i,r)=>{t+=sI(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Ys(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.j().next(r=>ae.forEach(r,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",l).next(h=>ae.forEach(h,m=>{Ct(m.userId===s.userId);const y=vp(this.serializer,m);return kB(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.X((l,h)=>{const m=new En(l),y=[0,xs(m)];s.push(t.get(y).next(C=>C?ae.resolve():t.put({targetId:0,path:xs(m),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ae.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:F4});const i=t.store("collectionParents"),r=new Ck,s=l=>{if(r.add(l)){const h=l.lastSegment(),m=l.popLast();return i.put({collectionId:h,parent:xs(m)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const m=new En(l);return s(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,m],y)=>{const C=Fc(h);return s(C.popLast())}))}ei(e){const t=e.store("targets");return t.X((i,r)=>{const s=r0(r),l=yB(this.serializer,s);return t.put(l)})}ni(e,t){const i=t.store("remoteDocuments"),r=[];return i.X((s,l)=>{const h=t.store("remoteDocumentsV14"),m=(y=l,y.document?new et(En.fromString(y.document.name).popFirst(5)):y.noDocument?et.fromSegments(y.noDocument.path):y.unknownDocument?et.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(C))}).next(()=>ae.waitFor(r))}si(e,t){const i=t.store("mutations"),r=VB(this.serializer),s=new Tk(lI.zs,this.serializer.fe);return i.j().next(l=>{const h=new Map;return l.forEach(m=>{var y;let C=null!==(y=h.get(m.userId))&&void 0!==y?y:ln();vp(this.serializer,m).keys().forEach(D=>C=C.add(D)),h.set(m.userId,C)}),ae.forEach(h,(m,y)=>{const C=new Wr(y),D=tI.de(this.serializer,C),k=s.getIndexManager(C),B=oI.de(C,this.serializer,k,s.referenceDelegate);return new zB(r,B,D,k).recalculateAndSaveOverlaysForDocumentKeys(new ZM(t,Jo.ct),m).next()})})}}function $B(n){n.createObjectStore("targetDocuments",{keyPath:N4}).createIndex("documentTargetsIndex",O4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",P4,{unique:!0}),n.createObjectStore("targetGlobal")}const Dk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sk{constructor(e,t,i,r,s,l,h,m,y,C,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.ii=s,this.window=l,this.document=h,this.ri=y,this.oi=C,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=k=>Promise.resolve(),!Sk.D())throw new ke(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new q3(this,r),this.di=t+"main",this.serializer=new gB(m),this.wi=new Ml(this.di,this.ui,new r6(this.serializer)),this.Bs=new $3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VB(this.serializer),this.qs=new O3,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===C&&dr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,Dk);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Jo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var i=(0,Ce.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ce.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ce.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Qh(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return d0(e).get("owner").next(t=>ae.resolve(this.Ri(t)))}Pi(e){return dI(e).delete(this.clientId)}bi(){var e=this;return(0,Ce.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=qr(i,"clientMetadata");return r.j().next(s=>{const l=e.Si(s,18e5),h=s.filter(m=>-1===l.indexOf(m));return ae.forEach(h,m=>r.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const i of t)e._i.removeItem(e.Di(i.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ae.resolve(!0):d0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new ke(fe.FAILED_PRECONDITION,Dk);return!1}}return!(!this.networkEnabled||!this.inForeground)||dI(e).j().next(i=>void 0===this.Si(i,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ce.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new ZM(t,Jo.ct);return e.Ai(i).next(()=>e.Pi(i))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(i=>this.Vi(i.updateTimeMs,t)&&!this.Ci(i.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>dI(e).j().next(t=>this.Si(t,18e5).map(i=>i.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return oI.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new z3(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return tI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,i){Ue("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?G4:14===l?s2:13===l?r2:12===l?$4:11===l?n2:void mt();var l;let h;return this.wi.runTransaction(e,r,s,m=>(h=new ZM(m,this.Os?this.Os.next():Jo.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw dr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new ke(fe.FAILED_PRECONDITION,ZL);return i(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>i(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return d0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(fe.FAILED_PRECONDITION,Dk)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return d0(e).put("owner",t)}static D(){return Ml.D()}Ai(e){const t=d0(e);return t.get("owner").next(i=>this.Ri(i)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Vi(e,t){const i=Date.now();return!(e<i-t||e>i&&(dr(`Detected an update time that is in the future: ${e} > ${i}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,te.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const i=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return dr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){dr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function d0(n){return qr(n,"owner")}function dI(n){return qr(n,"clientMetadata")}function Ak(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Mk{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Fi=i,this.Bi=r}static Li(e,t){let i=ln(),r=ln();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Mk(e,t.fromCache,i,r)}}class GB{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,i)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(A2(t))return ae.resolve(null);let i=Gs(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=KC(t,null,"F"),i=Gs(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const l=ln(...s);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(m=>{const y=this.ji(t,h);return this.zi(t,y,l,m.readTime)?this.Ki(e,KC(t,null,"F")):this.Wi(e,y,t,m)}))})))}Gi(e,t,i,r){return A2(t)||r.isEqual(Tt.min())?this.Qi(e,t):this.Ui.getDocuments(e,i).next(s=>{const l=this.ji(t,s);return this.zi(t,l,i,r)?this.Qi(e,t):(zM()<=Yo.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sk(t)),this.Wi(e,l,t,qL(r,-1)))})}ji(e,t){let i=new vi(R2(e));return t.forEach((r,s)=>{Wb(e,s)&&(i=i.add(s))}),i}zi(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return zM()<=Yo.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",sk(t)),this.Ui.getDocumentsMatchingQuery(e,t,Xo.min())}Wi(e,t,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class s6{constructor(e,t,i,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new di(tn),this.Yi=new su(s=>fp(s),$b),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zB(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function WB(n,e,t,i){return new s6(n,e,t,i)}function qB(n,e){return kk.apply(this,arguments)}function kk(){return kk=(0,Ce.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.tr(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const l=[],h=[];let m=ln();for(const y of r){l.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(i,m).next(y=>({er:y,removedBatchIds:l,addedBatchIds:h}))})})}),kk.apply(this,arguments)}function KB(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function ZB(n,e,t){let i=ln(),r=ln();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let l=vo();return t.forEach((h,m)=>{const y=s.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(h)),m.isNoDocument()&&m.version.isEqual(Tt.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):Ue("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{nr:l,sr:r}})}function l6(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function W_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Bs.getTargetData(i,e).next(s=>s?(r=s,ae.resolve(r)):t.Bs.allocateTargetId(i).next(l=>(r=new au(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ji.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(i.targetId,i),t.Yi.set(e,i.targetId)),i})}function q_(n,e,t){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,Ce.Z)(function*(n,e,t){const i=st(n),r=i.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Qh(l))throw l;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}),Rk.apply(this,arguments)}function uI(n,e,t){const i=st(n);let r=Tt.min(),s=ln();return i.persistence.runTransaction("Execute query","readonly",l=>function(h,m,y){const C=st(h),D=C.Yi.get(y);return void 0!==D?ae.resolve(C.Ji.get(D)):C.Bs.getTargetData(m,y)}(i,l,Gs(e)).next(h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{s=m})}).next(()=>i.Hi.getDocumentsMatchingQuery(l,e,t?r:Tt.min(),t?s:ln())).next(h=>(XB(i,k2(e),h),{documents:h,ir:s})))}function YB(n,e){const t=st(n),i=st(t.Bs),r=t.Ji.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.le(s,e).next(l=>l?l.target:null))}function QB(n,e){const t=st(n),i=t.Xi.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Zi.getAllFromCollectionGroup(r,e,qL(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(XB(t,e,r),r))}function XB(n,e,t){let i=n.Xi.get(e)||Tt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Xi.set(e,i)}function Pk(){return Pk=(0,Ce.Z)(function*(n,e,t,i){const r=st(n);let s=ln(),l=vo();for(const y of t){const C=e.rr(y.metadata.name);y.document&&(s=s.add(C));const D=e.ur(y);D.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(C,D)}const h=r.Zi.newChangeBuffer({trackRemovals:!0}),m=yield W_(r,(y=i,Gs(L_(En.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>ZB(y,h,l).next(C=>(h.apply(y),C)).next(C=>r.Bs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>r.Bs.addMatchingKeys(y,s,m.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,C.nr,C.sr)).next(()=>C.nr)))}),Pk.apply(this,arguments)}function d6(n,e){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,Ce.Z)(function*(n,e,t=ln()){const i=yield W_(n,Gs(yk(e.bundledQuery))),r=st(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const l=ur(e.readTime);if(i.snapshotVersion.compareTo(l)>=0)return r.qs.saveNamedQuery(s,e);const h=i.withResumeToken(Rr.EMPTY_BYTE_STRING,l);return r.Ji=r.Ji.insert(h.targetId,h),r.Bs.updateTargetData(s,h).next(()=>r.Bs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Bs.addMatchingKeys(s,t,i.targetId)).next(()=>r.qs.saveNamedQuery(s,e))})}),Nk.apply(this,arguments)}function JB(n,e){return`firestore_clients_${n}_${e}`}function eV(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Ok(n,e){return`firestore_targets_${n}_${e}`}class hI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static ar(e,t,i){const r=JSON.parse(i);let s,l="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(s=new ke(r.error.code,r.error.message))),l?new hI(e,t,r.state,s):(dr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class u0{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static ar(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new ke(i.error.code,i.error.message))),s?new u0(e,i.state,r):(dr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=ok();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=XL(i.activeTargetIds[l]),s=s.add(i.activeTargetIds[l]);return r?new fI(e,s):(dr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Fk{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Fk(t.clientId,t.onlineState):(dr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lk{constructor(){this.activeTargetIds=ok()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bk{constructor(e,t,i,r,s){this.window=e,this.ii=t,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new di(tn),this.started=!1,this.yr=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=JB(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Lk),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.syncEngine.$i();for(const r of t){if(r===e.wr)continue;const s=e.getItem(JB(e.persistenceKey,r));if(s){const l=fI.ar(r,s);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const i=e.storage.getItem(e.vr);if(i){const r=e.br(i);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,i){this.Dr(e,t,i),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ok(this.persistenceKey,e));if(i){const r=u0.ar(e,i);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ok(this.persistenceKey,e))}updateQueryState(e,t,i){this.kr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Cr(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ue("SharedClientState","EVENT",i.key,i.newValue),i.key===this.pr)return void dr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ce.Z)(function*(){if(t.started){if(null!==i.key)if(t.Tr.test(i.key)){if(null==i.newValue){const r=t.Or(i.key);return t.Fr(r,null)}{const r=t.Br(i.key,i.newValue);if(r)return t.Fr(r.clientId,r)}}else if(t.Er.test(i.key)){if(null!==i.newValue){const r=t.Lr(i.key,i.newValue);if(r)return t.qr(r)}}else if(t.Ar.test(i.key)){if(null!==i.newValue){const r=t.Ur(i.key,i.newValue);if(r)return t.Kr(r)}}else if(i.key===t.vr){if(null!==i.newValue){const r=t.br(i.newValue);if(r)return t.Vr(r)}}else if(i.key===t.Ir){const r=function(s){let l=Jo.ct;if(null!=s)try{const h=JSON.parse(s);Ct("number"==typeof h),l=h}catch(h){dr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(i.newValue);r!==Jo.ct&&t.sequenceNumberHandler(r)}else if(i.key===t.Rr){const r=t.Gr(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(i)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,i){const r=new hI(this.currentUser,e,t,i),s=eV(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const t=eV(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,i){const r=Ok(this.persistenceKey,e),s=new u0(e,t,i);this.setItem(r,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const i=this.Or(e);return fI.ar(i,t)}Lr(e,t){const i=this.Er.exec(e),r=Number(i[1]);return hI.ar(new Wr(void 0!==i[2]?i[2]:null),r,t)}Ur(e,t){const i=this.Ar.exec(e),r=Number(i[1]);return u0.ar(r,t)}br(e){return Fk.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ce.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(i),l=[],h=[];return s.forEach(m=>{r.has(m)||l.push(m)}),r.forEach(m=>{s.has(m)||h.push(m)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=i})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=ok();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class tV{constructor(){this.Hr=new Lk,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,i){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Lk,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class u6{Yr(e){}shutdown(){}}class nV{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let mI=null;function Vk(){return null===mI?mI=268435456+Math.round(2147483648*Math.random()):mI++,"0x"+mI.toString(16)}const h6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f6{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Cs="WebChannelConnection";class m6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,i,r,s){const l=Vk(),h=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${l}:`,h,i);const m={};return this.Eo(m,r,s),this.Ao(e,h,m,i).then(y=>(Ue("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw Ba("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",i),y})}vo(e,t,i,r,s,l){return this.Io(e,t,i,r,s)}Eo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+k_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,t){return`${this.mo}/v1/${t}:${h6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,i,r){const s=Vk();return new Promise((l,h)=>{const m=new d4;m.setWithCredentials(!0),m.listenOnce(a4.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case HM.NO_ERROR:const C=m.getResponseJson();Ue(Cs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(C)),l(C);break;case HM.TIMEOUT:Ue(Cs,`RPC '${e}' ${s} timed out`),h(new ke(fe.DEADLINE_EXCEEDED,"Request time out"));break;case HM.HTTP_ERROR:const D=m.getStatus();if(Ue(Cs,`RPC '${e}' ${s} failed with status:`,D,"response text:",m.getResponseText()),D>0){let k=m.getResponseJson();Array.isArray(k)&&(k=k[0]);const B=k?.error;if(B&&B.status&&B.message){const H=function(X){const ce=X.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ce)>=0?ce:fe.UNKNOWN}(B.status);h(new ke(H,B.message))}else h(new ke(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new ke(fe.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{Ue(Cs,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(r);Ue(Cs,`RPC '${e}' ${s} sending request:`,r),m.send(t,"POST",y,i,15)})}Ro(e,t,i){const r=Vk(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=s4(),h=o4(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.xmlHttpFactory=new c4({})),this.Eo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const C=s.join("");Ue(Cs,`Creating RPC '${e}' stream ${r}: ${C}`,m);const D=l.createWebChannel(C,m);let k=!1,B=!1;const H=new f6({ro:ce=>{B?Ue(Cs,`Not sending because RPC '${e}' stream ${r} is closed:`,ce):(k||(Ue(Cs,`Opening RPC '${e}' stream ${r} transport.`),D.open(),k=!0),Ue(Cs,`RPC '${e}' stream ${r} sending:`,ce),D.send(ce))},oo:()=>D.close()}),X=(ce,Ne,Ke)=>{ce.listen(Ne,Xe=>{try{Ke(Xe)}catch(dt){setTimeout(()=>{throw dt},0)}})};return X(D,NC.EventType.OPEN,()=>{B||Ue(Cs,`RPC '${e}' stream ${r} transport opened.`)}),X(D,NC.EventType.CLOSE,()=>{B||(B=!0,Ue(Cs,`RPC '${e}' stream ${r} transport closed`),H.wo())}),X(D,NC.EventType.ERROR,ce=>{B||(B=!0,Ba(Cs,`RPC '${e}' stream ${r} transport errored:`,ce),H.wo(new ke(fe.UNAVAILABLE,"The operation could not be completed")))}),X(D,NC.EventType.MESSAGE,ce=>{var Ne;if(!B){const Ke=ce.data[0];Ct(!!Ke);const dt=Ke.error||(null===(Ne=Ke[0])||void 0===Ne?void 0:Ne.error);if(dt){Ue(Cs,`RPC '${e}' stream ${r} received error:`,dt);const Ut=dt.status;let nn=function(ms){const $a=wr[ms];if(void 0!==$a)return Y2($a)}(Ut),An=dt.message;void 0===nn&&(nn=fe.INTERNAL,An="Unknown error status: "+Ut+" with message "+dt.message),B=!0,H.wo(new ke(nn,An)),D.close()}else Ue(Cs,`RPC '${e}' stream ${r} received:`,Ke),H._o(Ke)}}),X(h,l4.STAT_EVENT,ce=>{ce.stat===jL.PROXY?Ue(Cs,`RPC '${e}' stream ${r} detected buffering proxy`):ce.stat===jL.NOPROXY&&Ue(Cs,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{H.fo()},0),H}}function iV(){return typeof window<"u"?window:null}function pI(){return typeof document<"u"?document:null}function h0(n){return new C3(n,!0)}class Uk{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-i);r>0&&Ue("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class rV{constructor(e,t,i,r,s,l,h,m){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Uk(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ce.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ce.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var i=this;return(0,Ce.Z)(function*(){i.Ho(),i.Jo(),i.qo.cancel(),i.Fo++,4!==e?i.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(dr(t.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),i.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Yo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===t&&this.Zo(i,r)},i=>{e(()=>{const r=new ke(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,t){const i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,Ce.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class p6 extends rV{constructor(e,t,i,r,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function D3(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:mt(),r=e.targetChange.targetIds||[],s=function(m,y){return m.useProto3Json?(Ct(void 0===y||"string"==typeof y),Rr.fromBase64String(y||"")):(Ct(void 0===y||y instanceof Uint8Array),Rr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const y=void 0===m.code?fe.UNKNOWN:Y2(m.code);return new ke(y,m.message||"")}(l);t=new tB(i,r,s,h||null)}else if("documentChange"in e){const i=e.documentChange,r=Vc(n,i.document.name),s=ur(i.document.updateTime),l=i.document.createTime?ur(i.document.createTime):Tt.min(),h=new us({mapValue:{fields:i.document.fields}}),m=bi.newFoundDocument(r,s,l,h);t=new JC(i.targetIds||[],i.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const i=e.documentDelete,r=Vc(n,i.document),s=i.readTime?ur(i.readTime):Tt.min(),l=bi.newNoDocument(r,s);t=new JC([],i.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const i=e.documentRemove,r=Vc(n,i.document);t=new JC([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return mt();{const i=e.filter,{count:r=0,unchangedNames:s}=i,l=new y3(r,s);t=new eB(i.targetId,l)}}var m;return t}(this.serializer,e),i=function(r){if(!("targetChange"in r))return Tt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Tt.min():s.readTime?ur(s.readTime):Tt.min()}(e);return this.listener.nu(t,i)}su(e){const t={};t.database=t0(this.serializer),t.addTarget=function(r,s){let l;const h=s.target;if(l=GC(h)?{documents:uB(r,h)}:{query:_k(r,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=sB(r,s.resumeToken);const m=fk(r,s.expectedCount);null!==m&&(l.expectedCount=m)}else if(s.snapshotVersion.compareTo(Tt.min())>0){l.readTime=H_(r,s.snapshotVersion.toTimestamp());const m=fk(r,s.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const i=function A3(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Wo(t)}iu(e){const t={};t.database=t0(this.serializer),t.removeTarget=e,this.Wo(t)}}class g6 extends rV{constructor(e,t,i,r,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function S3(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(i,r){let s=ur(i.updateTime?i.updateTime:r);return s.isEqual(Tt.min())&&(s=ur(r)),new m3(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=ur(e.commitTime);return this.listener.cu(i,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=t0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>n0(this.serializer,i))};this.Wo(t)}}class _6 extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ke(fe.UNKNOWN,r.toString())})}vo(e,t,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(e,t,i,s,l,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ke(fe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class v6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(dr(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class b6{constructor(e,t,i,r,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{i.enqueueAndForget((0,Ce.Z)(function*(){var m;uf(l)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ce.Z)(function*(y){const C=st(y);C.vu.add(4),yield K_(C),C.bu.set("Unknown"),C.vu.delete(4),yield f0(C)}),function(y){return m.apply(this,arguments)})(l))}))}),this.bu=new v6(i,r)}}function f0(n){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,Ce.Z)(function*(n){if(uf(n))for(const e of n.Ru)yield e(!0)}),Hk.apply(this,arguments)}function K_(n){return zk.apply(this,arguments)}function zk(){return zk=(0,Ce.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),zk.apply(this,arguments)}function gI(n,e){const t=st(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Wk(t)?Gk(t):Y_(t).Ko()&&$k(t,e))}function m0(n,e){const t=st(n),i=Y_(t);t.Au.delete(e),i.Ko()&&sV(t,e),0===t.Au.size&&(i.Ko()?i.jo():uf(t)&&t.bu.set("Unknown"))}function $k(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Y_(n).su(e)}function sV(n,e){n.Vu.qt(e),Y_(n).iu(e)}function Gk(n){n.Vu=new b3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Y_(n).start(),n.bu.gu()}function Wk(n){return uf(n)&&!Y_(n).Uo()&&n.Au.size>0}function uf(n){return 0===st(n).vu.size}function oV(n){n.Vu=void 0}function w6(n){return qk.apply(this,arguments)}function qk(){return qk=(0,Ce.Z)(function*(n){n.Au.forEach((e,t)=>{$k(n,e)})}),qk.apply(this,arguments)}function x6(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,Ce.Z)(function*(n,e){oV(n),Wk(n)?(n.bu.Iu(e),Gk(n)):n.bu.set("Unknown")}),Kk.apply(this,arguments)}function E6(n,e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,Ce.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof tB&&2===e.state&&e.cause)try{yield(i=(0,Ce.Z)(function*(r,s){const l=s.cause;for(const h of s.targetIds)r.Au.has(h)&&(yield r.remoteSyncer.rejectListen(h,l),r.Au.delete(h),r.Vu.removeTarget(h))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield _I(n,i)}else if(e instanceof JC?n.Vu.Ht(e):e instanceof eB?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Tt.min()))try{const i=yield KB(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const l=r.Vu.ce(s);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=r.Au.get(m);y&&r.Au.set(m,y.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach((h,m)=>{const y=r.Au.get(h);if(!y)return;r.Au.set(h,y.withResumeToken(Rr.EMPTY_BYTE_STRING,y.snapshotVersion)),sV(r,h);const C=new au(y.target,h,m,y.sequenceNumber);$k(r,C)}),r.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(i){Ue("RemoteStore","Failed to raise snapshot:",i),yield _I(n,i)}var i}),Zk.apply(this,arguments)}function _I(n,e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,Ce.Z)(function*(n,e,t){if(!Qh(e))throw e;n.vu.add(1),yield K_(n),n.bu.set("Offline"),t||(t=()=>KB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ce.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield f0(n)}))}),Yk.apply(this,arguments)}function aV(n,e){return e().catch(t=>_I(n,t,e))}function Z_(n){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,Ce.Z)(function*(n){const e=st(n),t=hf(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;C6(e);)try{const r=yield l6(e.localStore,i);if(null===r){0===e.Eu.length&&t.jo();break}i=r.batchId,I6(e,r)}catch(r){yield _I(e,r)}lV(e)&&cV(e)}),Qk.apply(this,arguments)}function C6(n){return uf(n)&&n.Eu.length<10}function I6(n,e){n.Eu.push(e);const t=hf(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function lV(n){return uf(n)&&!hf(n).Uo()&&n.Eu.length>0}function cV(n){hf(n).start()}function T6(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,Ce.Z)(function*(n){hf(n).hu()}),Xk.apply(this,arguments)}function D6(n){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,Ce.Z)(function*(n){const e=hf(n);for(const t of n.Eu)e.uu(t.mutations)}),Jk.apply(this,arguments)}function S6(n,e,t){return e1.apply(this,arguments)}function e1(){return e1=(0,Ce.Z)(function*(n,e,t){const i=n.Eu.shift(),r=ck.from(i,e,t);yield aV(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Z_(n)}),e1.apply(this,arguments)}function A6(n,e){return t1.apply(this,arguments)}function t1(){return t1=(0,Ce.Z)(function*(n,e){var t;e&&hf(n).ou&&(yield(t=(0,Ce.Z)(function*(i,r){if(Z2(s=r.code)&&s!==fe.ABORTED){const l=i.Eu.shift();hf(i).Qo(),yield aV(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,r)),yield Z_(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),lV(n)&&cV(n)}),t1.apply(this,arguments)}function dV(n,e){return n1.apply(this,arguments)}function n1(){return n1=(0,Ce.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const i=uf(t);t.vu.add(3),yield K_(t),i&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield f0(t)}),n1.apply(this,arguments)}function r1(n,e){return s1.apply(this,arguments)}function s1(){return s1=(0,Ce.Z)(function*(n,e){const t=st(n);e?(t.vu.delete(2),yield f0(t)):e||(t.vu.add(2),yield K_(t),t.bu.set("Unknown"))}),s1.apply(this,arguments)}function Y_(n){return n.Su||(n.Su=function(e,t,i){const r=st(e);return r.fu(),new p6(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:w6.bind(null,n),ao:x6.bind(null,n),nu:E6.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Su.Qo(),Wk(n)?Gk(n):n.bu.set("Unknown")):(yield n.Su.stop(),oV(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function hf(n){return n.Du||(n.Du=function(e,t,i){const r=st(e);return r.fu(),new g6(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(n.datastore,n.asyncQueue,{uo:T6.bind(null,n),ao:A6.bind(null,n),au:D6.bind(null,n),cu:S6.bind(null,n)}),n.Ru.push(function(){var e=(0,Ce.Z)(function*(t){t?(n.Du.Qo(),yield Z_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class o1{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,i,r,s){const l=Date.now()+i,h=new o1(e,t,l,r,s);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Q_(n,e){if(dr("AsyncQueue",`${e}: ${n}`),Qh(n))return new ke(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class X_{constructor(e){this.comparator=e?(t,i)=>e(t,i)||et.comparator(t.key,i.key):(t,i)=>et.comparator(t.key,i.key),this.keyedMap=qb(),this.sortedSet=new di(this.comparator)}static emptySet(e){return new X_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof X_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new X_;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class uV{constructor(){this.Cu=new di(et.comparator)}track(e){const t=e.doc.key,i=this.Cu.get(t);i?0!==e.type&&3===i.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==i.type?this.Cu=this.Cu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Cu=this.Cu.remove(t):1===e.type&&2===i.type?this.Cu=this.Cu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):mt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,i)=>{e.push(i)}),e}}class J_{constructor(e,t,i,r,s,l,h,m,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,r,s){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new J_(e,t,X_.emptySet(t),l,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class M6{constructor(){this.Nu=void 0,this.listeners=[]}}class k6{constructor(){this.queries=new su(e=>M2(e),Gb),this.onlineState="Unknown",this.ku=new Set}}function a1(n,e){return l1.apply(this,arguments)}function l1(){return l1=(0,Ce.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new M6),r)try{s.Nu=yield t.onListen(i)}catch(l){const h=Q_(l,`Initialization of query '${sk(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&u1(t)}),l1.apply(this,arguments)}function c1(n,e){return d1.apply(this,arguments)}function d1(){return d1=(0,Ce.Z)(function*(n,e){const t=st(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),d1.apply(this,arguments)}function R6(n,e){const t=st(n);let i=!1;for(const r of e){const l=t.queries.get(r.query);if(l){for(const h of l.listeners)h.$u(r)&&(i=!0);l.Nu=r}}i&&u1(t)}function P6(n,e,t){const i=st(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function u1(n){n.ku.forEach(e=>{e.next()})}class h1{constructor(e,t,i){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new J_(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=J_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class N6{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class hV{constructor(e){this.serializer=e}rr(e){return Vc(this.serializer,e)}ur(e){return e.metadata.exists?dB(this.serializer,e.document,!1):bi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ur(e)}}class O6{constructor(e,t,i){this.ju=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fV(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const i=En.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,i=new hV(this.serializer);for(const r of e)if(r.metadata.queries){const s=i.rr(r.metadata.name);for(const l of r.metadata.queries){const h=(t.get(l)||ln()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,Ce.Z)(function*(){const t=yield function c6(n,e,t,i){return Pk.apply(this,arguments)}(e.localStore,new hV(e.serializer),e.documents,e.ju.id),i=e.Wu(e.documents);for(const r of e.queries)yield d6(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function fV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class mV{constructor(e){this.key=e}}class pV{constructor(e){this.key=e}}class gV{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ln(),this.mutatedKeys=ln(),this.tc=R2(e),this.ec=new X_(this.tc)}get nc(){return this.Yu}sc(e,t){const i=t?t.ic:new uV,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const m="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((C,D)=>{const k=r.get(C),B=Wb(this.query,D)?D:null,H=!!k&&this.mutatedKeys.has(k.key),X=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let ce=!1;k&&B?k.data.isEqual(B.data)?H!==X&&(i.track({type:3,doc:B}),ce=!0):this.rc(k,B)||(i.track({type:2,doc:B}),ce=!0,(m&&this.tc(B,m)>0||y&&this.tc(B,y)<0)&&(h=!0)):!k&&B?(i.track({type:0,doc:B}),ce=!0):k&&!B&&(i.track({type:1,doc:k}),ce=!0,(m||y)&&(h=!0)),ce&&(B?(l=l.add(B),s=X?s.add(C):s.delete(C)):(l=l.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),s=s.delete(C.key),i.track({type:1,doc:C})}return{ec:l,ic:i,zi:h,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,C)=>function(D,k){const B=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return B(D)-B(k)}(y.type,C.type)||this.tc(y.doc,C.doc)),this.oc(i);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==s.length||m?{snapshot:new J_(this.query,e.ec,r,s,e.mutatedKeys,0===h,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new uV,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ln(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const t=[];return e.forEach(i=>{this.Zu.has(i)||t.push(new pV(i))}),this.Zu.forEach(i=>{e.has(i)||t.push(new mV(i))}),t}hc(e){this.Yu=e.ir,this.Zu=ln();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return J_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class F6{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class L6{constructor(e){this.key=e,this.fc=!1}}class B6{constructor(e,t,i,r,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new su(h=>M2(h),Gb),this._c=new Map,this.mc=new Set,this.gc=new di(et.comparator),this.yc=new Map,this.Ic=new Ik,this.Tc={},this.Ec=new Map,this.Ac=xp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function V6(n,e){return f1.apply(this,arguments)}function f1(){return f1=(0,Ce.Z)(function*(n,e){const t=F1(n);let i,r;const s=t.wc.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const l=yield W_(t.localStore,Gs(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=yield m1(t,e,i,"current"===h,l.resumeToken),t.isPrimaryClient&&gI(t.remoteStore,l)}return r}),f1.apply(this,arguments)}function m1(n,e,t,i,r){return p1.apply(this,arguments)}function p1(){return p1=(0,Ce.Z)(function*(n,e,t,i,r){n.Rc=(D,k,B)=>{return(H=(0,Ce.Z)(function*(X,ce,Ne,Ke){let Xe=ce.view.sc(Ne);Xe.zi&&(Xe=yield uI(X.localStore,ce.query,!1).then(({documents:nn})=>ce.view.sc(nn,Xe)));const dt=Ke&&Ke.targetChanges.get(ce.targetId),Ut=ce.view.applyChanges(Xe,X.isPrimaryClient,dt);return I1(X,ce.targetId,Ut.cc),Ut.snapshot}),function(X,ce,Ne,Ke){return H.apply(this,arguments)})(n,D,k,B);var H};const s=yield uI(n.localStore,e,!0),l=new gV(e,s.ir),h=l.sc(s.documents),m=Jb.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),y=l.applyChanges(h,n.isPrimaryClient,m);I1(n,t,y.cc);const C=new F6(e,t,l);return n.wc.set(e,C),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),p1.apply(this,arguments)}function U6(n,e){return g1.apply(this,arguments)}function g1(){return g1=(0,Ce.Z)(function*(n,e){const t=st(n),i=t.wc.get(e),r=t._c.get(i.targetId);if(r.length>1)return t._c.set(i.targetId,r.filter(s=>!Gb(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield q_(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),m0(t.remoteStore,i.targetId),ey(t,i.targetId)}).catch(Yh))):(ey(t,i.targetId),yield q_(t.localStore,i.targetId,!0))}),g1.apply(this,arguments)}function _1(){return _1=(0,Ce.Z)(function*(n,e,t){const i=L1(n);try{const r=yield function(s,l){const h=st(s),m=Mi.now(),y=l.reduce((k,B)=>k.add(B.key),ln());let C,D;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let B=vo(),H=ln();return h.Zi.getEntries(k,y).next(X=>{B=X,B.forEach((ce,Ne)=>{Ne.isValidDocument()||(H=H.add(ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,B)).next(X=>{C=X;const ce=[];for(const Ne of l){const Ke=g3(Ne,C.get(Ne.key).overlayedDocument);null!=Ke&&ce.push(new ou(Ne.key,Ke,g2(Ke.value.mapValue),ki.exists(!0)))}return h.mutationQueue.addMutationBatch(k,m,ce,l)}).next(X=>{D=X;const ce=X.applyToLocalDocumentSet(C,H);return h.documentOverlayCache.saveOverlays(k,X.batchId,ce)})}).then(()=>({batchId:D.batchId,changes:N2(C)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,l,h){let m=s.Tc[s.currentUser.toKey()];m||(m=new di(tn)),m=m.insert(l,h),s.Tc[s.currentUser.toKey()]=m}(i,r.batchId,t),yield lu(i,r.changes),yield Z_(i.remoteStore)}catch(r){const s=Q_(r,"Failed to persist write");t.reject(s)}}),_1.apply(this,arguments)}function _V(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,Ce.Z)(function*(n,e){const t=st(n);try{const i=yield function a6(n,e){const t=st(n),i=e.snapshotVersion;let r=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});r=t.Ji;const h=[];e.targetChanges.forEach((C,D)=>{const k=r.get(D);if(!k)return;h.push(t.Bs.removeMatchingKeys(s,C.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(s,C.addedDocuments,D)));let B=k.withSequenceNumber(s.currentSequenceNumber);var H,X,ce;null!==e.targetMismatches.get(D)?B=B.withResumeToken(Rr.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):C.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(C.resumeToken,i)),r=r.insert(D,B),X=B,ce=C,(0===(H=k).resumeToken.approximateByteSize()||X.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(s,B))});let m=vo(),y=ln();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,C))}),h.push(ZB(s,l,e.documentUpdates).next(C=>{m=C.nr,y=C.sr})),!i.isEqual(Tt.min())){const C=t.Bs.getLastRemoteSnapshotVersion(s).next(D=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));h.push(C)}return ae.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,m,y)).next(()=>m)}).then(s=>(t.Ji=r,s))}(t.localStore,e);e.targetChanges.forEach((r,s)=>{const l=t.yc.get(s);l&&(Ct(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.fc=!0:r.modifiedDocuments.size>0?Ct(l.fc):r.removedDocuments.size>0&&(Ct(l.fc),l.fc=!1))}),yield lu(t,i,e)}catch(i){yield Yh(i)}}),y1.apply(this,arguments)}function yV(n,e,t){const i=st(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.wc.forEach((s,l)=>{const h=l.view.Mu(e);h.snapshot&&r.push(h.snapshot)}),function(s,l){const h=st(s);h.onlineState=l;let m=!1;h.queries.forEach((y,C)=>{for(const D of C.listeners)D.Mu(l)&&(m=!0)}),m&&u1(h)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function H6(n,e,t){return v1.apply(this,arguments)}function v1(){return v1=(0,Ce.Z)(function*(n,e,t){const i=st(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.yc.get(e),s=r&&r.key;if(s){let l=new di(et.comparator);l=l.insert(s,bi.newNoDocument(s,Tt.min()));const h=ln().add(s),m=new Xb(Tt.min(),new Map,new di(tn),l,h);yield _V(i,m),i.gc=i.gc.remove(s),i.yc.delete(e),T1(i)}else yield q_(i.localStore,e,!1).then(()=>ey(i,e,t)).catch(Yh)}),v1.apply(this,arguments)}function z6(n,e){return b1.apply(this,arguments)}function b1(){return b1=(0,Ce.Z)(function*(n,e){const t=st(n),i=e.batch.batchId;try{const r=yield function o6(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,y){const C=m.batch,D=C.keys();let k=ae.resolve();return D.forEach(B=>{k=k.next(()=>y.getEntry(h,B)).next(H=>{const X=m.docVersions.get(B);Ct(null!==X),H.version.compareTo(X)<0&&(C.applyToRemoteDocument(H,m),H.isValidDocument()&&(H.setReadTime(m.commitVersion),y.addEntry(H)))})}),k.next(()=>l.mutationQueue.removeMutationBatch(h,C))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let h=ln();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}(t.localStore,e);C1(t,i,null),E1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield lu(t,r)}catch(r){yield Yh(r)}}),b1.apply(this,arguments)}function $6(n,e,t){return w1.apply(this,arguments)}function w1(){return w1=(0,Ce.Z)(function*(n,e,t){const i=st(n);try{const r=yield function(s,l){const h=st(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,l).next(C=>(Ct(null!==C),y=C.keys(),h.mutationQueue.removeMutationBatch(m,C))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(i.localStore,e);C1(i,e,t),E1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield lu(i,r)}catch(r){yield Yh(r)}}),w1.apply(this,arguments)}function x1(){return x1=(0,Ce.Z)(function*(n,e){const t=st(n);uf(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const l=st(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===i)return void e.resolve();const r=t.Ec.get(i)||[];r.push(e),t.Ec.set(i,r)}catch(i){const r=Q_(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),x1.apply(this,arguments)}function E1(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function C1(n,e,t){const i=st(n);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n._c.get(e))n.wc.delete(i),t&&n.dc.Pc(i,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(i=>{n.Ic.containsKey(i)||vV(n,i)})}function vV(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(m0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),T1(n))}function I1(n,e,t){for(const i of t)i instanceof mV?(n.Ic.addReference(i.key,e),W6(n,i)):i instanceof pV?(Ue("SyncEngine","Document no longer in limbo: "+i.key),n.Ic.removeReference(i.key,e),n.Ic.containsKey(i.key)||vV(n,i.key)):mt()}function W6(n,e){const t=e.key,i=t.path.canonicalString();n.gc.get(t)||n.mc.has(i)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(i),T1(n))}function T1(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(En.fromString(e)),i=n.Ac.next();n.yc.set(i,new L6(t)),n.gc=n.gc.insert(t,i),gI(n.remoteStore,new au(Gs(L_(t.path)),i,"TargetPurposeLimboResolution",Jo.ct))}}function lu(n,e,t){return D1.apply(this,arguments)}function D1(){return D1=(0,Ce.Z)(function*(n,e,t){const i=st(n),r=[],s=[],l=[];var h;i.wc.isEmpty()||(i.wc.forEach((h,m)=>{l.push(i.Rc(m,e,t).then(y=>{if((y||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(m.targetId,y?.fromCache?"not-current":"current"),y){r.push(y);const C=Mk.Li(m.targetId,y);s.push(C)}}))}),yield Promise.all(l),i.dc.nu(r),yield(h=(0,Ce.Z)(function*(m,y){const C=st(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ae.forEach(y,k=>ae.forEach(k.Fi,B=>C.persistence.referenceDelegate.addReference(D,k.targetId,B)).next(()=>ae.forEach(k.Bi,B=>C.persistence.referenceDelegate.removeReference(D,k.targetId,B)))))}catch(D){if(!Qh(D))throw D;Ue("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const k=D.targetId;if(!D.fromCache){const B=C.Ji.get(k),X=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);C.Ji=C.Ji.insert(k,X)}}}),function(m,y){return h.apply(this,arguments)})(i.localStore,s))}),D1.apply(this,arguments)}function q6(n,e){return S1.apply(this,arguments)}function S1(){return S1=(0,Ce.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const i=yield qB(t.localStore,e);t.currentUser=e,(r=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new ke(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.Ec.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield lu(t,i.er)}var r}),S1.apply(this,arguments)}function K6(n,e){const t=st(n),i=t.yc.get(e);if(i&&i.fc)return ln().add(i.key);{let r=ln();const s=t._c.get(e);if(!s)return r;for(const l of s){const h=t.wc.get(l);r=r.unionWith(h.view.nc)}return r}}function Z6(n,e){return A1.apply(this,arguments)}function A1(){return A1=(0,Ce.Z)(function*(n,e){const t=st(n),i=yield uI(t.localStore,e.query,!0),r=e.view.hc(i);return t.isPrimaryClient&&I1(t,e.targetId,r.cc),r}),A1.apply(this,arguments)}function Y6(n,e){return M1.apply(this,arguments)}function M1(){return M1=(0,Ce.Z)(function*(n,e){const t=st(n);return QB(t.localStore,e).then(i=>lu(t,i))}),M1.apply(this,arguments)}function Q6(n,e,t,i){return k1.apply(this,arguments)}function k1(){return k1=(0,Ce.Z)(function*(n,e,t,i){const r=st(n),s=yield function(l,h){const m=st(l),y=st(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Sn(C,h).next(D=>D?m.localDocuments.getDocuments(C,D):ae.resolve(null)))}(r.localStore,e);var h;null!==s?("pending"===t?yield Z_(r.remoteStore):"acknowledged"===t||"rejected"===t?(C1(r,e,i||null),E1(r,e),h=e,st(st(r.localStore).mutationQueue).Cn(h)):mt(),yield lu(r,s)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),k1.apply(this,arguments)}function R1(){return R1=(0,Ce.Z)(function*(n,e){const t=st(n);if(F1(t),L1(t),!0===e&&!0!==t.vc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield bV(t,i.toArray());t.vc=!0,yield r1(t.remoteStore,!0);for(const s of r)gI(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const i=[];let r=Promise.resolve();t._c.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then(()=>(ey(t,l),q_(t.localStore,l,!0))),m0(t.remoteStore,l)}),yield r,yield bV(t,i),function(s){const l=st(s);l.yc.forEach((h,m)=>{m0(l.remoteStore,m)}),l.Ic.Ts(),l.yc=new Map,l.gc=new di(et.comparator)}(t),t.vc=!1,yield r1(t.remoteStore,!1)}}),R1.apply(this,arguments)}function bV(n,e,t){return P1.apply(this,arguments)}function P1(){return P1=(0,Ce.Z)(function*(n,e,t){const i=st(n),r=[],s=[];for(const l of e){let h;const m=i._c.get(l);if(m&&0!==m.length){h=yield W_(i.localStore,Gs(m[0]));for(const y of m){const C=i.wc.get(y),D=yield Z6(i,C);D.snapshot&&s.push(D.snapshot)}}else{const y=yield YB(i.localStore,l);h=yield W_(i.localStore,y),yield m1(i,wV(y),l,!1,h.resumeToken)}r.push(h)}return i.dc.nu(s),r}),P1.apply(this,arguments)}function wV(n){return S2(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function J6(n){const e=st(n);return st(st(e.localStore).persistence).$i()}function e5(n,e,t,i){return N1.apply(this,arguments)}function N1(){return N1=(0,Ce.Z)(function*(n,e,t,i){const r=st(n);if(r.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const s=r._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield QB(r.localStore,k2(s[0])),h=Xb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Rr.EMPTY_BYTE_STRING);yield lu(r,l,h);break}case"rejected":yield q_(r.localStore,e,!0),ey(r,e,i);break;default:mt()}}),N1.apply(this,arguments)}function t5(n,e,t){return O1.apply(this,arguments)}function O1(){return O1=(0,Ce.Z)(function*(n,e,t){const i=F1(n);if(i.vc){for(const r of e){if(i._c.has(r)){Ue("SyncEngine","Adding an already active target "+r);continue}const s=yield YB(i.localStore,r),l=yield W_(i.localStore,s);yield m1(i,wV(s),l.targetId,!1,l.resumeToken),gI(i.remoteStore,l)}for(const r of t)i._c.has(r)&&(yield q_(i.localStore,r,!1).then(()=>{m0(i.remoteStore,r),ey(i,r)}).catch(Yh))}}),O1.apply(this,arguments)}function F1(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_V.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H6.bind(null,e),e.dc.nu=R6.bind(null,e.eventManager),e.dc.Pc=P6.bind(null,e.eventManager),e}function L1(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$6.bind(null,e),e}class p0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ce.Z)(function*(){t.serializer=h0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return WB(this.persistence,new GB,e.initialUser,this.serializer)}createPersistence(e){return new Tk(lI.zs,this.serializer)}createSharedClientState(e){return new tV}terminate(){var e=this;return(0,Ce.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class B1 extends p0{constructor(e,t,i){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e),yield i.Vc.initialize(i,e),yield L1(i.Vc.syncEngine),yield Z_(i.Vc.remoteStore),yield i.persistence.Ii(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return WB(this.persistence,new GB,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new FB(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const i=new D4(t,this.persistence);return new T4(e.asyncQueue,i)}createPersistence(e){const t=Ak(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Es.withCacheSize(this.cacheSizeBytes):Es.DEFAULT;return new Sk(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,iV(),pI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tV}}class xV extends B1{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ce.Z)(function*(){yield t().call(i,e);const r=i.Vc.syncEngine;i.sharedClientState instanceof Bk&&(i.sharedClientState.syncEngine={jr:Q6.bind(null,r),zr:e5.bind(null,r),Wr:t5.bind(null,r),$i:J6.bind(null,r),Qr:Y6.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ii(function(){var s=(0,Ce.Z)(function*(l){yield function X6(n,e){return R1.apply(this,arguments)}(i.Vc.syncEngine,l),i.gcScheduler&&(l&&!i.gcScheduler.started?i.gcScheduler.start():l||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(l&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():l||i.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=iV();if(!Bk.D(t))throw new ke(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ak(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bk(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ty{initialize(e,t){var i=this;return(0,Ce.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>yV(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=q6.bind(null,i.syncEngine),yield r1(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new k6}createDatastore(e){const t=h0(e.databaseInfo.databaseId),i=new m6(e.databaseInfo);return new _6(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=h=>yV(this.syncEngine,h,0),l=nV.D()?new nV:new u6,new b6(t,i,r,s,l);var t,i,r,s,l}createSyncEngine(e,t){return function(i,r,s,l,h,m,y){const C=new B6(i,r,s,l,h,m);return y&&(C.vc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ce.Z)(function*(t){const i=st(t);Ue("RemoteStore","RemoteStore shutting down."),i.vu.add(5),yield K_(i),i.Pu.shutdown(),i.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function EV(n,e=10240){let t=0;return{read:()=>(0,Ce.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class yI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class s5{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new kr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(i=>{i&&i.Qu()?this.metadata.resolve(i.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.Gu)}`))},i=>this.metadata.reject(i))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ce.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ce.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.kc();if(null===t)return null;const i=e.xc.decode(t),r=Number(i);isNaN(r)&&e.Mc(`length string (${i}) is not valid number`);const s=yield e.$c(r);return new N6(JSON.parse(s),t.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ce.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}$c(e){var t=this;return(0,Ce.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const i=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ce.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class o5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ce.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ce.Z)(function*(s,l){const h=st(s),m=t0(h.serializer)+"/documents",y={documents:l.map(B=>e0(h.serializer,B))},C=yield h.vo("BatchGetDocuments",m,y,l.length),D=new Map;C.forEach(B=>{const H=function T3(n,e){return"found"in e?function(t,i){Ct(!!i.found);const r=Vc(t,i.found.name),s=ur(i.found.updateTime),l=i.found.createTime?ur(i.found.createTime):Tt.min(),h=new us({mapValue:{fields:i.found.fields}});return bi.newFoundDocument(r,s,l,h)}(n,e):"missing"in e?function(t,i){Ct(!!i.missing),Ct(!!i.readTime);const r=Vc(t,i.missing),s=ur(i.readTime);return bi.newNoDocument(r,s)}(n,e):mt()}(h.serializer,B);D.set(H.key.toString(),H)});const k=[];return l.forEach(B=>{const H=D.get(B.toString());Ct(!!H),k.push(H)}),k}),function(s,l){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new j_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=et.fromPath(r);e.mutations.push(new ak(s,e.precondition(s)))}),yield(i=(0,Ce.Z)(function*(r,s){const l=st(r),h=t0(l.serializer)+"/documents",m={writes:s.map(y=>n0(l.serializer,y))};yield l.Io("Commit",h,m)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=Tt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ke(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Tt.min())?ki.exists(!1):ki.updateTime(t):ki.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new ke(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ki.updateTime(t)}return ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a5{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Bc=i.maxAttempts,this.qo=new Uk(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ce.Z)(function*(){const t=new o5(e.datastore),i=e.qc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const t=this.updateFunction(e);return!Bb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Z2(t)}return!1}}class l5{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Wr.UNAUTHENTICATED,this.clientId=GL.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var l=(0,Ce.Z)(function*(h){Ue("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(i,l=>(Ue("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ce.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Q_(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function vI(n,e){return V1.apply(this,arguments)}function V1(){return V1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ce.Z)(function*(s){i.isEqual(s)||(yield qB(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),V1.apply(this,arguments)}function U1(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,Ce.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield H1(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>dV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>dV(e.remoteStore,s)),n._onlineComponents=e}),j1.apply(this,arguments)}function CV(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function H1(n){return z1.apply(this,arguments)}function z1(){return z1=(0,Ce.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!CV(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),yield vI(n,new p0)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield vI(n,new p0);return n._offlineComponents}),z1.apply(this,arguments)}function bI(n){return $1.apply(this,arguments)}function $1(){return $1=(0,Ce.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield U1(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield U1(n,new ty))),n._onlineComponents}),$1.apply(this,arguments)}function IV(n){return H1(n).then(e=>e.persistence)}function wI(n){return H1(n).then(e=>e.localStore)}function TV(n){return bI(n).then(e=>e.remoteStore)}function G1(n){return bI(n).then(e=>e.syncEngine)}function ny(n){return W1.apply(this,arguments)}function W1(){return W1=(0,Ce.Z)(function*(n){const e=yield bI(n),t=e.eventManager;return t.onListen=V6.bind(null,e.syncEngine),t.onUnlisten=U6.bind(null,e.syncEngine),t}),W1.apply(this,arguments)}function SV(n,e,t={}){const i=new kr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,h,m){const y=new yI({next:D=>{s.enqueueAndForget(()=>c1(r,C));const k=D.docs.has(l);!k&&D.fromCache?m.reject(new ke(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&D.fromCache&&h&&"server"===h.source?m.reject(new ke(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new h1(L_(l.path),y,{includeMetadataChanges:!0,Ku:!0});return a1(r,C)}(yield ny(n),n.asyncQueue,e,t,i)})),i.promise}function AV(n,e,t={}){const i=new kr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function(r,s,l,h,m){const y=new yI({next:D=>{s.enqueueAndForget(()=>c1(r,C)),D.fromCache&&"server"===h.source?m.reject(new ke(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(D)},error:D=>m.reject(D)}),C=new h1(l,y,{includeMetadataChanges:!0,Ku:!0});return a1(r,C)}(yield ny(n),n.asyncQueue,e,t,i)})),i.promise}function MV(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const kV=new Map;function q1(n,e,t){if(!t)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RV(n,e,t,i){if(!0===e&&!0===i)throw new ke(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PV(n){if(!et.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NV(n){if(et.isDocumentKey(n))throw new ke(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":mt()}function xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xI(n);throw new ke(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OV(n,e){if(e<=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class FV{constructor(e){var t,i;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=MV(null!==(i=e.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FV({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ke(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FV(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new m4;switch(t.type){case"firstParty":return new y4(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new ke(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kV.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),kV.delete(e),t.terminate())}(this),Promise.resolve()}}function LV(n,e,t,i={}){var r;const s=(n=xn(n,g0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==l&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),i.mockUserToken){let h,m;if("string"==typeof i.mockUserToken)h=i.mockUserToken,m=Wr.MOCK_USER;else{h=(0,te.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ke(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Wr(y)}n._authCredentials=new p4(new zL(h,m))}}class wi{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wi(this.firestore,e,this._key)}}class hs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class Uc extends hs{constructor(e,t,i){super(e,t,L_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wi(this.firestore,null,new et(e))}withConverter(e){return new Uc(this.firestore,e,this._path)}}function BV(n,e,...t){if(n=(0,te.m9)(n),q1("collection","path",e),n instanceof g0){const i=En.fromString(e,...t);return NV(i),new Uc(n,null,i)}{if(!(n instanceof wi||n instanceof Uc))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(En.fromString(e,...t));return NV(i),new Uc(n.firestore,null,i)}}function EI(n,e,...t){if(n=(0,te.m9)(n),1===arguments.length&&(e=GL.A()),q1("doc","path",e),n instanceof g0){const i=En.fromString(e,...t);return PV(i),new wi(n,null,new et(i))}{if(!(n instanceof wi||n instanceof Uc))throw new ke(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(En.fromString(e,...t));return PV(i),new wi(n.firestore,n instanceof Uc?n.converter:null,new et(i))}}function VV(n,e){return n=(0,te.m9)(n),e=(0,te.m9)(e),(n instanceof wi||n instanceof Uc)&&(e instanceof wi||e instanceof Uc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function K1(n,e){return n=(0,te.m9)(n),e=(0,te.m9)(e),n instanceof hs&&e instanceof hs&&n.firestore===e.firestore&&Gb(n._query,e._query)&&n.converter===e.converter}class y5{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Uk(this,"async_queue_retry"),this.Xc=()=>{const t=pI();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=pI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=pI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new kr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ce.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Qh(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{throw this.Wc=i,this.Hc=!1,dr("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(i)),i}).then(i=>(this.Hc=!1,i))));return this.Gc=t,t}enqueueAfterDelay(e,t,i){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=o1.createAndSchedule(this,e,t,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&mt()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ce.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Z1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class v5{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xi extends g0{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new y5,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UV(this),this._firestoreClient.terminate()}}function w5(n,e){const t="object"==typeof n?n:(0,$r.getApp)(),i="string"==typeof n?n:e||"(default)",r=(0,$r._getProvider)(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=(0,te.P0)("firestore");s&&LV(r,...s)}return r}function hr(n){return n._firestoreClient||UV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function UV(n){var e,t,i;const r=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new K4(n._databaseId,h,n._persistenceKey,(y=r).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,MV(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new l5(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=r.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(i=r.cache)&&void 0!==i&&i._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function jV(n,e,t){const i=new kr;return n.asyncQueue.enqueue((0,Ce.Z)(function*(){try{yield vI(n,t),yield U1(n,e),i.resolve()}catch(r){const s=r;if(!CV(s))throw s;Ba("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function HV(n){if(n._initialized||n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jc(Rr.fromBase64String(e))}catch(t){throw new ke(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jc(Rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ki(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cp{constructor(e){this._methodName=e}}class CI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const k5=/^__.*__$/;class R5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new ou(e,this.data,this.fieldMask,t,this.fieldTransforms):new U_(e,this.data,t,this.fieldTransforms)}}class zV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ou(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $V(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class II{constructor(e,t,i,r,s,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new II(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return SI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if($V(this.ca)&&k5.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class P5{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||h0(e)}ya(e,t,i,r=!1){return new II({ca:e,methodName:t,ga:i,path:Ki.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ip(n){const e=n._freezeSettings(),t=h0(n._databaseId);return new P5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TI(n,e,t,i,r,s={}){const l=n.ya(s.merge||s.mergeFields?2:0,e,t,r);J1("Data must be an object, but it was:",l,i);const h=qV(i,l);let m,y;if(s.merge)m=new yo(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const k=v0(e,D,t);if(!l.contains(k))throw new ke(fe.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);ZV(C,k)||C.push(k)}m=new yo(C),y=l.fieldTransforms.filter(D=>m.covers(D.field))}else m=null,y=l.fieldTransforms;return new R5(new us(h),m,y)}class y0 extends Cp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y0}}function GV(n,e,t){return new II({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Y1 extends Cp{_toFieldTransform(e){return new Zb(e.path,new B_)}isEqual(e){return e instanceof Y1}}class N5 extends Cp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=GV(this,e,!0),i=this.pa.map(s=>Tp(s,t)),r=new pp(i);return new Zb(e.path,r)}isEqual(e){return this===e}}class O5 extends Cp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=GV(this,e,!0),i=this.pa.map(s=>Tp(s,t)),r=new gp(i);return new Zb(e.path,r)}isEqual(e){return this===e}}class F5 extends Cp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new V_(e.serializer,B2(e.serializer,this.Ia));return new Zb(e.path,t)}isEqual(e){return this===e}}function Q1(n,e,t,i){const r=n.ya(1,e,t);J1("Data must be an object, but it was:",r,i);const s=[],l=us.empty();Xh(i,(m,y)=>{const C=DI(e,m,t);y=(0,te.m9)(y);const D=r.da(C);if(y instanceof y0)s.push(C);else{const k=Tp(y,D);null!=k&&(s.push(C),l.set(C,k))}});const h=new yo(s);return new zV(l,h,r.fieldTransforms)}function X1(n,e,t,i,r,s){const l=n.ya(1,e,t),h=[v0(e,i,t)],m=[r];if(s.length%2!=0)throw new ke(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<s.length;k+=2)h.push(v0(e,s[k])),m.push(s[k+1]);const y=[],C=us.empty();for(let k=h.length-1;k>=0;--k)if(!ZV(y,h[k])){const B=h[k];let H=m[k];H=(0,te.m9)(H);const X=l.da(B);if(H instanceof y0)y.push(B);else{const ce=Tp(H,X);null!=ce&&(y.push(B),C.set(B,ce))}}const D=new yo(y);return new zV(C,D,l.fieldTransforms)}function WV(n,e,t,i=!1){return Tp(t,n.ya(i?4:3,e))}function Tp(n,e){if(KV(n=(0,te.m9)(n)))return J1("Unsupported field value:",e,n),qV(n,e);if(n instanceof Cp)return function(t,i){if(!$V(i.ca))throw i._a(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const l of t){let h=Tp(l,i.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),r.push(h),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,te.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return B2(i.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=Mi.fromDate(t);return{timestampValue:H_(i.serializer,r)}}if(t instanceof Mi){const r=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:H_(i.serializer,r)}}if(t instanceof CI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof jc)return{bytesValue:sB(i.serializer,t._byteString)};if(t instanceof wi){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:mk(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i._a(`Unsupported field value: ${xI(t)}`)}(n,e)}function qV(n,e){const t={};return a2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xh(n,(i,r)=>{const s=Tp(r,e.ha(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function KV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Mi||n instanceof CI||n instanceof jc||n instanceof wi||n instanceof Cp)}function J1(n,e,t){if(!KV(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=xI(t);throw e._a("an object"===i?n+" a custom object":n+" "+i)}var i}function v0(n,e,t){if((e=(0,te.m9)(e))instanceof cu)return e._internalPath;if("string"==typeof e)return DI(n,e);throw SI("Field path arguments must be of type string or ",n,!1,void 0,t)}const L5=new RegExp("[~\\*/\\[\\]]");function DI(n,e,t){if(e.search(L5)>=0)throw SI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cu(...e.split("."))._internalPath}catch{throw SI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function SI(n,e,t,i,r){const s=i&&!i.isEmpty(),l=void 0!==r;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(s||l)&&(m+=" (found",s&&(m+=` in field ${i}`),l&&(m+=` in document ${r}`),m+=")"),new ke(fe.INVALID_ARGUMENT,h+n+m)}function ZV(n,e){return n.some(t=>t.isEqual(e))}class b0{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new B5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(AI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class B5 extends b0{data(){return super.data()}}function AI(n,e){return"string"==typeof e?DI(n,e):e instanceof cu?e._internalPath:e._delegate._internalPath}function YV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ke(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eR{}class w0 extends eR{}function ff(n,e,...t){let i=[];e instanceof eR&&i.push(e),i=i.concat(t),function(r){const s=r.filter(h=>h instanceof iy).length,l=r.filter(h=>h instanceof x0).length;if(s>1||s>0&&l>0)throw new ke(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class x0 extends w0{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new x0(e,t,i)}_apply(e){const t=this._parse(e);return eU(e._query,t),new hs(e.firestore,e.converter,rk(e._query,t))}_parse(e){const t=Ip(e.firestore);return function(r,s,l,h,m,y,C){let D;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){JV(C,y);const k=[];for(const B of C)k.push(XV(h,r,B));D={arrayValue:{values:k}}}else D=XV(h,r,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||JV(C,y),D=WV(l,"where",C,"in"===y||"not-in"===y);return wn.create(m,y,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class iy extends eR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return 1===t.length?t[0]:zn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,r){let s=i;const l=r.getFlattenedFilters();for(const h of l)eU(s,h),s=rk(s,h)}(e._query,t),new hs(e.firestore,e.converter,rk(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tR extends w0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tR(e,t)}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new O_(r,s);return function(h,m){if(null===nk(h)){const y=qC(h);null!==y&&tU(0,y,m.field)}}(i,l),l}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new ru(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class MI extends w0{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new MI(e,t,i)}_apply(e){return new hs(e.firestore,e.converter,KC(e._query,this._limit,this._limitType))}}class kI extends w0{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new kI(e,t,i)}_apply(e){const t=QV(e,this.type,this._docOrFields,this._inclusive);return new hs(e.firestore,e.converter,(r=t,new ru((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class RI extends w0{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new RI(e,t,i)}_apply(e){const t=QV(e,this.type,this._docOrFields,this._inclusive);return new hs(e.firestore,e.converter,(r=t,new ru((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function QV(n,e,t,i){if(t[0]=(0,te.m9)(t[0]),t[0]instanceof b0)return function(r,s,l,h,m){if(!h)throw new ke(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const C of mp(r))if(C.field.isKeyField())y.push(hp(s,h.key));else{const D=h.data.field(C.field);if(UC(D))throw new ke(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const k=C.field.canonicalString();throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}y.push(D)}return new sf(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=Ip(n.firestore);return function(s,l,h,m,y,C){const D=s.explicitOrderBy;if(y.length>D.length)throw new ke(fe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let B=0;B<y.length;B++){const H=y[B];if(D[B].field.isKeyField()){if("string"!=typeof H)throw new ke(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof H}`);if(!ik(s)&&-1!==H.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${H}' contains a slash.`);const X=s.path.child(En.fromString(H));if(!et.isDocumentKey(X))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${X}' is not because it contains an odd number of segments.`);const ce=new et(X);k.push(hp(l,ce))}else{const X=WV(h,m,H);k.push(X)}}return new sf(k,C)}(n._query,n.firestore._databaseId,r,e,t,i)}}function XV(n,e,t){if("string"==typeof(t=(0,te.m9)(t))){if(""===t)throw new ke(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ik(e)&&-1!==t.indexOf("/"))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(En.fromString(t));if(!et.isDocumentKey(i))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hp(n,new et(i))}if(t instanceof wi)return hp(n,t._key);throw new ke(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xI(t)}.`)}function JV(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eU(n,e){if(e.isInequality()){const i=qC(n),r=e.field;if(null!==i&&!i.isEqual(r))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const s=nk(n);null!==s&&tU(0,r,s)}const t=function(i,r){for(const s of i)for(const l of s.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ke(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function tU(n,e,t){if(!t.isEqual(e))throw new ke(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class nR{convertValue(e,t="none"){switch(nf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(iu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Xh(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new CI(Zi(e.latitude),Zi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=jC(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ub(e));default:return null}}convertTimestamp(e){const t=Jh(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=En.fromString(e);Ct(pB(i));const r=new ef(i.get(1),i.get(3)),s=new et(i.popFirst(5));return r.isEqual(t)||dr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function PI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class q5 extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class du extends b0{constructor(e,t,i,r,s,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new E0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(AI("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class E0 extends du{data(e={}){return super.data(e)}}class mf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Dp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new E0(this._firestore,this._userDataWriter,i.key,i,new Dp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>({type:"added",doc:new E0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Dp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||3!==l.type).map(l=>{const h=new E0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Dp(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return 0!==l.type&&(m=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:Z5(l.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Z5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function iU(n,e){return n instanceof du&&e instanceof du?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof mf&&e instanceof mf&&n._firestore===e._firestore&&K1(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class pf extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}function rU(n,e,t){n=xn(n,wi);const i=xn(n.firestore,xi),r=PI(n.converter,e,t);return ry(i,[TI(Ip(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,ki.none())])}function sU(n,e,t,...i){n=xn(n,wi);const r=xn(n.firestore,xi),s=Ip(r);let l;return l="string"==typeof(e=(0,te.m9)(e))||e instanceof cu?X1(s,"updateDoc",n._key,e,t,i):Q1(s,"updateDoc",n._key,e),ry(r,[l.toMutation(n._key,ki.exists(!0))])}function oU(n,...e){var t,i,r;n=(0,te.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Z1(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(Z1(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),e[l+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let m,y,C;if(n instanceof wi)y=xn(n.firestore,xi),C=L_(n._key.path),m={next:D=>{e[l]&&e[l](iR(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=xn(n,hs);y=xn(D.firestore,xi),C=D._query;const k=new pf(y);m={next:B=>{e[l]&&e[l](new mf(y,k,D,B))},error:e[l+1],complete:e[l+2]},YV(n._query)}return function(D,k,B,H){const X=new yI(H),ce=new h1(k,X,B);return D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return a1(yield ny(D),ce)})),()=>{X.Dc(),D.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return c1(yield ny(D),ce)}))}}(hr(y),C,h,m)}function ry(n,e){return function(t,i){const r=new kr;return t.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function j6(n,e,t){return _1.apply(this,arguments)}(yield G1(t),i,r)})),r.promise}(hr(n),e)}function iR(n,e,t){const i=t.docs.get(e._key),r=new pf(n);return new du(n,r,e._key,i,new Dp(t.hasPendingWrites,t.fromCache),e.converter)}const fG={maxAttempts:5};class aU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ip(e)}set(e,t,i){this._verifyNotCommitted();const r=gf(e,this._firestore),s=PI(r.converter,t,i),l=TI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(l.toMutation(r._key,ki.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=gf(e,this._firestore);let l;return l="string"==typeof(t=(0,te.m9)(t))||t instanceof cu?X1(this._dataReader,"WriteBatch.update",s._key,t,i,r):Q1(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gf(e,this._firestore);return this._mutations=this._mutations.concat(new j_(t._key,ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gf(n,e){if((n=(0,te.m9)(n)).firestore!==e)throw new ke(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class mG extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ip(e)}get(e){const t=gf(e,this._firestore),i=new q5(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return mt();const s=r[0];if(s.isFoundDocument())return new b0(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new b0(this._firestore,i,t._key,null,t.converter);throw mt()})}set(e,t,i){const r=gf(e,this._firestore),s=PI(r.converter,t,i),l=TI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,l),this}update(e,t,i,...r){const s=gf(e,this._firestore);let l;return l="string"==typeof(t=(0,te.m9)(t))||t instanceof cu?X1(this._dataReader,"Transaction.update",s._key,t,i,r):Q1(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=gf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gf(e,this._firestore),i=new pf(this._firestore);return super.get(e).then(r=>new du(this._firestore,i,t._key,r._document,new Dp(!1,!1),t.converter))}}!function(n,e=!0){k_=$r.SDK_VERSION,(0,$r._registerComponent)(new Qm.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),l=new xi(new g4(t.getProvider("auth-internal")),new v4(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ef(h.options.projectId,m)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),(0,$r.registerVersion)(HL,"3.13.0",n),(0,$r.registerVersion)(HL,"3.13.0","esm2017")}();function rR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function cU(){if(typeof Uint8Array>"u")throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function dU(){if(!function W4(){return typeof atob<"u"}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}class C0{constructor(e){this._delegate=e}static fromBase64String(e){return dU(),new C0(jc.fromBase64String(e))}static fromUint8Array(e){return cU(),new C0(jc.fromUint8Array(e))}toBase64(){return dU(),this._delegate.toBase64()}toUint8Array(){return cU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sR(n){return function EG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class CG{enableIndexedDbPersistence(e,t){return function x5(n,e){HV(n=xn(n,xi));const t=hr(n);if(t._uninitializedComponentsProvider)throw new ke(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Ba("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=n._freezeSettings(),r=new ty;return jV(t,r,new B1(r,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function E5(n){HV(n=xn(n,xi));const e=hr(n);if(e._uninitializedComponentsProvider)throw new ke(fe.FAILED_PRECONDITION,"SDK cache is already specified.");Ba("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),i=new ty;return jV(e,i,new xV(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function C5(n){if(n._initialized&&!n._terminated)throw new ke(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ce.Z)(function*(){try{yield(t=(0,Ce.Z)(function*(i){if(!Ml.D())return Promise.resolve();const r=i+"main";yield Ml.delete(r)}),function(i){return t.apply(this,arguments)})(Ak(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class uU{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ef||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){LV(this._delegate,e,t,i)}enableNetwork(){return function T5(n){return function c5(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield IV(n),t=yield TV(n);return e.setNetworkEnabled(!0),function(i){const r=st(i);return r.vu.delete(0),f0(r)}(t)}))}(hr(n=xn(n,xi)))}(this._delegate)}disableNetwork(){return function D5(n){return function d5(n){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){const e=yield IV(n),t=yield TV(n);return e.setNetworkEnabled(!1),(i=(0,Ce.Z)(function*(r){const s=st(r);s.vu.add(0),yield K_(s),s.bu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(hr(n=xn(n,xi)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,RV("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function I5(n){return function(e){const t=new kr;return e.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return function G6(n,e){return x1.apply(this,arguments)}(yield G1(e),t)})),t.promise}(hr(n=xn(n,xi)))}(this._delegate)}onSnapshotsInSync(e){return function rG(n,e){return function f5(n,e){const t=new yI(e);return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield ny(n),r=t,st(i).ku.add(r),void r.next();var i,r})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return i=yield ny(n),r=t,void st(i).ku.delete(r);var i,r}))}}(hr(n=xn(n,xi)),Z1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new sy(this,BV(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new Va(this,EI(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qs(this,function _5(n,e){if(n=xn(n,g0),q1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(t=e,new ru(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pG(n,e,t){n=xn(n,xi);const i=Object.assign(Object.assign({},fG),t);return function(r){if(r.maxAttempts<1)throw new ke(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,l){const h=new kr;return r.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){const m=yield function DV(n){return bI(n).then(e=>e.datastore)}(r);new a5(r.asyncQueue,m,l,s,h).run()})),h.promise}(hr(n),r=>e(new mG(n,r)),i)}(this._delegate,t=>e(new hU(this,t)))}batch(){return hr(this._delegate),new fU(new aU(this._delegate,e=>ry(this._delegate,e)))}loadBundle(e){return function S5(n,e){const t=hr(n=xn(n,xi)),i=new v5;return function m5(n,e,t,i){const r=function(s,l){let h;return h="string"==typeof s?Q2().encode(s):s,m=function(m,y){if(m instanceof Uint8Array)return EV(m,y);if(m instanceof ArrayBuffer)return EV(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new s5(m,l);var m}(t,h0(e));n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){!function n5(n,e,t){const i=st(n);var r;(r=(0,Ce.Z)(function*(s,l,h){try{const m=yield l.getMetadata();if(yield function(k,B){const H=st(k),X=ur(B.createTime);return H.persistence.runTransaction("hasNewerBundle","readonly",ce=>H.qs.getBundleMetadata(ce,B.id)).then(ce=>!!ce&&ce.createTime.compareTo(X)>=0)}(s.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(k=m).totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}),Promise.resolve(new Set);h._updateProgress(fV(m));const y=new O6(m,s.localStore,l.serializer);let C=yield l.bc();for(;C;){const k=yield y.zu(C);k&&h._updateProgress(k),C=yield l.bc()}const D=yield y.complete();return yield lu(s,D.Ju,void 0),yield function(k,B){const H=st(k);return H.persistence.runTransaction("Save bundle","readwrite",X=>H.qs.saveBundleMetadata(X,B))}(s.localStore,m),h._completeWith(D.progress),Promise.resolve(D.Hu)}catch(m){return Ba("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var k}),function(s,l,h){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield G1(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function A5(n,e){return function p5(n,e){return n.asyncQueue.enqueue((0,Ce.Z)(function*(){return function(t,i){const r=st(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,i))}(yield wI(n),e)}))}(hr(n=xn(n,xi)),e).then(t=>t?new hs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new qs(this,t):null)}}class NI extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new C0(new jc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Va.forKey(t,this.firestore,null)}}class hU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}get(e){const t=Ap(e);return this._delegate.get(t).then(i=>new I0(this._firestore,new du(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Ap(e);return i?(rR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Ap(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}}class fU{constructor(e){this._delegate=e}set(e,t,i){const r=Ap(e);return i?(rR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Ap(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sp{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new E0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T0(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Sp.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Sp(e,new NI(e),t),r.set(t,s)),s}}Sp.INSTANCES=new WeakMap;class Va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}static forPath(e,t,i){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Va(t,new wi(t._delegate,i,new et(e)))}static forKey(e,t,i){return new Va(t,new wi(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new sy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new sy(this.firestore,BV(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,te.m9)(e))instanceof wi&&VV(this._delegate,e)}set(e,t){t=rR("DocumentReference.set",t);try{return t?rU(this._delegate,e,t):rU(this._delegate,e)}catch(i){throw Ws(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?sU(this._delegate,e):sU(this._delegate,e,t,...i)}catch(r){throw Ws(r,"updateDoc()","DocumentReference.update()")}}delete(){return function nG(n){return ry(xn(n.firestore,xi),[new j_(n._key,ki.none())])}(this._delegate)}onSnapshot(...e){const t=mU(e),i=pU(e,r=>new I0(this.firestore,new du(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return oU(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Q5(n){n=xn(n,wi);const e=xn(n.firestore,xi),t=hr(e),i=new pf(e);return function u5(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const h=yield function(m,y){const C=st(m);return C.persistence.runTransaction("read document","readonly",D=>C.localDocuments.getDocument(D,y))}(r,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new ke(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Q_(h,`Failed to get document '${s} from cache`);l.reject(m)}}),function(r,s,l){return i.apply(this,arguments)})(yield wI(n),e,t);var i})),t.promise}(t,n._key).then(r=>new du(e,i,n._key,r,new Dp(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function X5(n){n=xn(n,wi);const e=xn(n.firestore,xi);return SV(hr(e),n._key,{source:"server"}).then(t=>iR(e,n,t))}(this._delegate):function Y5(n){n=xn(n,wi);const e=xn(n.firestore,xi);return SV(hr(e),n._key).then(t=>iR(e,n,t))}(this._delegate),t.then(i=>new I0(this.firestore,new du(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Va(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function mU(n){for(const e of n)if("object"==typeof e&&!sR(e))return e;return{}}function pU(n,e){var t,i;let r;return r=sR(n[0])?n[0]:sR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class I0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iU(this._delegate,e._delegate)}}class T0 extends I0{data(e){const t=this._delegate.data(e);return function f4(n,e){n||mt()}(void 0!==t),t}}class qs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new NI(e)}where(e,t,i){try{return new qs(this.firestore,ff(this._delegate,function V5(n,e,t){const i=e,r=AI("where",n);return x0._create(r,i,t)}(e,t,i)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new qs(this.firestore,ff(this._delegate,function U5(n,e="asc"){const t=e,i=AI("orderBy",n);return tR._create(i,t)}(e,t)))}catch(i){throw Ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qs(this.firestore,ff(this._delegate,function j5(n){return OV("limit",n),MI._create("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new qs(this.firestore,ff(this._delegate,function H5(n){return OV("limitToLast",n),MI._create("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qs(this.firestore,ff(this._delegate,function z5(...n){return kI._create("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qs(this.firestore,ff(this._delegate,function $5(...n){return kI._create("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qs(this.firestore,ff(this._delegate,function G5(...n){return RI._create("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qs(this.firestore,ff(this._delegate,function W5(...n){return RI._create("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return K1(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function eG(n){n=xn(n,hs);const e=xn(n.firestore,xi),t=hr(e),i=new pf(e);return function h5(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,Ce.Z)(function*(){return(i=(0,Ce.Z)(function*(r,s,l){try{const h=yield uI(r,s,!0),m=new gV(s,h.ir),y=m.sc(h.documents),C=m.applyChanges(y,!1);l.resolve(C.snapshot)}catch(h){const m=Q_(h,`Failed to execute query '${s} against cache`);l.reject(m)}}),function(r,s,l){return i.apply(this,arguments)})(yield wI(n),e,t);var i})),t.promise}(t,n._query).then(r=>new mf(e,i,n,r))}(this._delegate):"server"===e?.source?function tG(n){n=xn(n,hs);const e=xn(n.firestore,xi),t=hr(e),i=new pf(e);return AV(t,n._query,{source:"server"}).then(r=>new mf(e,i,n,r))}(this._delegate):function J5(n){n=xn(n,hs);const e=xn(n.firestore,xi),t=hr(e),i=new pf(e);return YV(n._query),AV(t,n._query).then(r=>new mf(e,i,n,r))}(this._delegate),t.then(i=>new oR(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=mU(e),i=pU(e,r=>new oR(this.firestore,new mf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return oU(this._delegate,t,i)}withConverter(e){return new qs(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}class TG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TG(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new T0(this._firestore,i))})}isEqual(e){return iU(this._delegate,e._delegate)}}class sy extends qs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Va(this.firestore,e):null}doc(e){try{return new Va(this.firestore,void 0===e?EI(this._delegate):EI(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function iG(n,e){const t=xn(n.firestore,xi),i=EI(n),r=PI(n.converter,e);return ry(t,[TI(Ip(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ki.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Va(this.firestore,t))}isEqual(e){return VV(this._delegate,e._delegate)}withConverter(e){return new sy(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function Ap(n){return xn(n,wi)}class aR{constructor(...e){this._delegate=new cu(...e)}static documentId(){return new aR(Ki.keyField().canonicalString())}isEqual(e){return(e=(0,te.m9)(e))instanceof cu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Mp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _G(){return new Y1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Mp(e)}static delete(){const e=function gG(){return new y0("deleteField")}();return e._methodName="FieldValue.delete",new Mp(e)}static arrayUnion(...e){const t=function yG(...n){return new N5("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Mp(t)}static arrayRemove(...e){const t=function vG(...n){return new O5("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Mp(t)}static increment(e){const t=function bG(n){return new F5("increment",n)}(e);return t._methodName="FieldValue.increment",new Mp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const DG={Firestore:uU,GeoPoint:CI,Timestamp:Mi,Blob:C0,Transaction:hU,WriteBatch:fU,DocumentReference:Va,DocumentSnapshot:I0,Query:qs,QueryDocumentSnapshot:T0,QuerySnapshot:oR,CollectionReference:sy,FieldPath:aR,FieldValue:Mp,setLogLevel:function IG(n){!function h4(n){Zh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function AG(n){(function SG(n,e){n.INTERNAL.registerComponent(new Qm.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},DG)))})(n,(e,t)=>new uU(e,t,new CG)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(eC.Z);var lR=V(6451),OI=V(5363),MG=V(6063);class kG extends li.x{constructor(e=1/0,t=1/0,i=MG.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!r&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const l=t.now();let h=0;for(let m=1;m<i.length&&i[m]<=l;m+=2)h=m;h&&i.splice(0,h+1)}}}var RG=V(3099);function gU(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,(0,RG.B)({connector:()=>new kG(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function _U(n,e){return(0,sc.m)(e)?Tr(()=>n,e):Tr(()=>n)}var cR=V(9468),uu=V(259);class kp{constructor(e){return e}}class FI{constructor(){return(0,uu.C6)()}}const dR=new d.OlP("angularfire2._apps"),NG={provide:kp,useFactory:function PG(n){return n&&1===n.length?n[0]:new kp((0,uu.Mq)())},deps:[[new d.FiY,dR]]},OG={provide:FI,deps:[[new d.FiY,dR]]};function FG(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new kp(i)}}let LG=(()=>{class n{constructor(t){(0,uu.KN)("angularfire",bn.q4.full,"core"),(0,uu.KN)("angularfire",bn.q4.full,"app"),(0,uu.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[NG,OG]}),n})();function BG(n,...e){return{ngModule:LG,providers:[{provide:dR,useFactory:FG(n),multi:!0,deps:[d.R0b,d.zs3,bn.HU,...e]}]}}const VG=(0,bn.u3)(uu.ZF,!0),uR=new Map,yU={activated:!1,tokenObservers:[]},UG={initialized:!1,enabled:!1};function Yi(n){return uR.get(n)||Object.assign({},yU)}function LI(){return UG}const hR="https://content-firebaseappcheck.googleapis.com/v1",$G="exchangeDebugToken",vU={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class WG{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ce.Z)(function*(){t.stop();try{t.pending=new te.BH,yield function qG(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new te.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new te.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fR(n){if(!Yi(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function UI(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,Ce.Z)(function*({url:n,body:e},t){const i={"Content-Type":"application/json"},r=t.getImmediate({optional:!0});if(r){const D=yield r.getHeartbeatsHeader();D&&(i["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:i};let l,h;try{l=yield fetch(n,s)}catch(D){throw fs.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==l.status)throw fs.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(D){throw fs.create("fetch-parse-error",{originalErrorMessage:D?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(m[1]),C=Date.now();return{token:h.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),pR.apply(this,arguments)}function bU(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${hR}/projects/${t}/apps/${i}:${$G}?key=${r}`,body:{debug_token:e}}}const QG="firebase-app-check-database",XG=1,D0="firebase-app-check-store";let jI=null;function gR(){return gR=(0,Ce.Z)(function*(n,e){const i=(yield function xU(){return jI||(jI=new Promise((n,e)=>{try{const t=indexedDB.open(QG,XG);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(fs.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},t.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(D0,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t?.message}))}}),jI)}()).transaction(D0,"readwrite"),s=i.objectStore(D0).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=m=>{l()},i.onerror=m=>{var y;h(fs.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})}),gR.apply(this,arguments)}const S0=new Yo.Yd("@firebase/app-check");function vR(n,e){return(0,te.hl)()?function eW(n,e){return function EU(n,e){return gR.apply(this,arguments)}(function IU(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{S0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wR(){return LI().enabled}function xR(){return ER.apply(this,arguments)}function ER(){return ER=(0,Ce.Z)(function*(){const n=LI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),ER.apply(this,arguments)}const oW={error:"UNKNOWN_ERROR"};function aW(n){return te.US.encodeString(JSON.stringify(n),!1)}function HI(n){return CR.apply(this,arguments)}function CR(){return CR=(0,Ce.Z)(function*(n,e=!1){const t=n.app;fR(t);const i=Yi(t);let s,r=i.token;if(r&&!oy(r)&&(i.token=void 0,r=void 0),!r){const m=yield i.cachedTokenPromise;m&&(oy(m)?r=m:yield vR(t,void 0))}if(!e&&r&&oy(r))return{token:r.token};let h,l=!1;if(wR()){i.exchangeTokenPromise||(i.exchangeTokenPromise=UI(bU(t,yield xR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),l=!0);const m=yield i.exchangeTokenPromise;return yield vR(t,m),i.token=m,{token:m.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),l=!0),r=yield Yi(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?S0.warn(m.message):S0.error(m),s=m}return r?s?h=oy(r)?{token:r.token,internalError:s}:AU(s):(h={token:r.token},i.token=r,yield vR(t,r)):h=AU(s),l&&function SU(n,e){const t=Yi(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}(t,h),h}),CR.apply(this,arguments)}function IR(){return IR=(0,Ce.Z)(function*(n){const e=n.app;fR(e);const{provider:t}=Yi(e);if(wR()){const i=yield xR(),{token:r}=yield UI(bU(e,i),n.heartbeatServiceProvider);return{token:r}}{const{token:i}=yield t.getToken();return{token:i}}}),IR.apply(this,arguments)}function DR(n,e){const t=Yi(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function DU(n){const{app:e}=n,t=Yi(e);let i=t.tokenRefresher;i||(i=function lW(n){const{app:e}=n;return new WG((0,Ce.Z)(function*(){let i;if(i=Yi(e).token?yield HI(n,!0):yield HI(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=Yi(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},vU.RETRIAL_MIN_WAIT,vU.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function oy(n){return n.expireTimeMillis-Date.now()>0}function AU(n){return{token:aW(oW),error:n}}class cW{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Yi(this.app);for(const t of e)DR(this.app,t.next);return Promise.resolve()}}const LU="app-check-internal";!function EW(){(0,$r._registerComponent)(new Qm.wA("app-check",n=>function dW(n,e){return new cW(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(LU).initialize()})),(0,$r._registerComponent)(new Qm.wA(LU,n=>function uW(n){return{getToken:e=>HI(n,e),getLimitedUseToken:()=>function TU(n){return IR.apply(this,arguments)}(n),addTokenListener:e=>function TR(n,e,t,i){const{app:r}=n,s=Yi(r);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:i,type:e}],s.token&&oy(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),DU(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>DU(n))}(n,"INTERNAL",e),removeTokenListener:e=>DR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$r.registerVersion)("@firebase/app-check","0.8.0")}();class ay{constructor(){return(0,bn.vb)("app-check")}}typeof window<"u"&&window,V(9260);const VU=new d.OlP("angularfire2.auth.use-emulator"),UU=new d.OlP("angularfire2.auth.settings"),jU=new d.OlP("angularfire2.auth.tenant-id"),HU=new d.OlP("angularfire2.auth.langugage-code"),zU=new d.OlP("angularfire2.auth.use-device-language"),$U=new d.OlP("angularfire.auth.persistence"),GU=(n,e,t,i,r,s,l,h)=>(0,Zo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),i&&(m.tenantId=i),m.languageCode=r,s&&m.useDeviceLanguage(),l)for(const[y,C]of Object.entries(l))m.settings[y]=C;return h&&m.setPersistence(h),m},[t,i,r,s,l,h]);let RR=(()=>{class n{constructor(t,i,r,s,l,h,m,y,C,D,k,B){const H=new li.x,X=ct(void 0).pipe((0,OI.Q)(l.outsideAngular),Tr(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,tt.U)(()=>(0,Zo.on)(t,s,i)),(0,tt.U)(ce=>GU(ce,s,h,y,C,D,m,k)),gU({bufferSize:1,refCount:!1}));if(la(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{X.pipe(Ho()).subscribe();const Ne=X.pipe(Tr(dt=>dt.getRedirectResult().then(Ut=>Ut,()=>null)),bn.iC,gU({bufferSize:1,refCount:!1})),Ke=X.pipe(Tr(dt=>new rr.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>dt.onAuthStateChanged(nn=>Ut.next(nn),nn=>Ut.error(nn),()=>Ut.complete()))})))),Xe=X.pipe(Tr(dt=>new rr.y(Ut=>({unsubscribe:s.runOutsideAngular(()=>dt.onIdTokenChanged(nn=>Ut.next(nn),nn=>Ut.error(nn),()=>Ut.complete()))}))));this.authState=Ne.pipe(_U(Ke),(0,cR.R)(l.outsideAngular),(0,OI.Q)(l.insideAngular)),this.user=Ne.pipe(_U(Xe),(0,cR.R)(l.outsideAngular),(0,OI.Q)(l.insideAngular)),this.idToken=this.user.pipe(Tr(dt=>dt?(0,dn.D)(dt.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Tr(dt=>dt?(0,dn.D)(dt.getIdTokenResult()):ct(null))),this.credential=(0,lR.T)(Ne,H,this.authState.pipe(sr(dt=>!dt))).pipe((0,tt.U)(dt=>dt?.user?dt:null),(0,cR.R)(l.outsideAngular),(0,OI.Q)(l.insideAngular))}return(0,Zo.pX)(this,X,s,{spy:{apply:(ce,Ne,Ke)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&Ke.then(Xe=>H.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zo.Dh),d.LFG(Zo.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(bn.HU),d.LFG(VU,8),d.LFG(UU,8),d.LFG(jU,8),d.LFG(HU,8),d.LFG(zU,8),d.LFG($U,8),d.LFG(ay,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function WU(n,e){return function AW(n,e=vE.z){return new rr.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function PR(n,e){return WU(n,e).pipe((0,tt.U)(t=>({payload:t,type:"query"})))}function $I(n,e){return PR(n,e).pipe(Ih(void 0),cb(),(0,tt.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((l,h)=>{const m=r.find(C=>C.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function qU(n,e,t){return $I(n,t).pipe(Tg((i,r)=>function kW(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function RW(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return NR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return NR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return NR(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Gh(),(0,tt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function NR(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function KU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class ZU{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=$I(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,tt.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Ih(void 0),cb(),sr(([i,r])=>r.length>0||!i),(0,tt.U)(([i,r])=>r),bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tg((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=KU(e);return qU(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return PR(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),bn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(bn.iC)}add(e){return this.ref.add(e)}doc(e){return new YU(this.ref.doc(e),this.afs)}}class YU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=QU(i,t);return new ZU(r,s,this.afs)}snapshotChanges(){return function MW(n,e){return WU(n,e).pipe(Ih(void 0),cb(),(0,tt.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(bn.iC)}}class PW{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?$I(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),sr(t=>t.length>0),bn.iC):$I(this.query,this.afs.schedulers.outsideAngular).pipe(bn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Tg((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=KU(e);return qU(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn.iC)}valueChanges(e={}){return PR(this.query,this.afs.schedulers.outsideAngular).pipe((0,tt.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),bn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(bn.iC)}}const NW=new d.OlP("angularfire2.enableFirestorePersistence"),OW=new d.OlP("angularfire2.firestore.persistenceSettings"),FW=new d.OlP("angularfire2.firestore.settings"),LW=new d.OlP("angularfire2.firestore.use-emulator");function QU(n,e=(t=>t)){return{query:e(n),ref:n}}let XU=(()=>{class n{constructor(t,i,r,s,l,h,m,y,C,D,k,B,H,X,ce,Ne,Ke){this.schedulers=m;const Xe=(0,Zo.on)(t,h,i),dt=C;D&&GU(Xe,h,k,H,X,ce,B,Ne),[this.firestore,this.persistenceEnabled$]=(0,Zo.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const Ut=h.runOutsideAngular(()=>Xe.firestore());if(s&&Ut.settings(s),dt&&Ut.useEmulator(...dt),r&&!la(l)){const nn=()=>{try{return(0,dn.D)(Ut.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(An){return typeof console<"u"&&console.warn(An),ct(!1)}};return[Ut,h.runOutsideAngular(nn)]}return[Ut,ct(!1)]},[s,dt,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=QU(r,i),h=this.schedulers.ngZone.run(()=>s);return new ZU(h,l,this)}collectionGroup(t,i){const r=i||(l=>l),s=this.firestore.collectionGroup(t);return new PW(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new YU(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Zo.Dh),d.LFG(Zo.xv,8),d.LFG(NW,8),d.LFG(FW,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(bn.HU),d.LFG(OW,8),d.LFG(LW,8),d.LFG(RR,8),d.LFG(VU,8),d.LFG(UU,8),d.LFG(jU,8),d.LFG(HU,8),d.LFG(zU,8),d.LFG($U,8),d.LFG(ay,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),JU=(()=>{class n{constructor(t){this._client=t,this._traningSubject=new Bs([]),this.traning$=this._traningSubject.asObservable()}addTraining(){return(0,dn.D)(this._client.collection("plans").add({trainingElement:this._traningSubject.value,userId:"",weekId:"",monthId:"",yearId:""})).pipe((0,tt.U)(()=>{}))}addTrainingToContext(t){return this._traningSubject.next([...this._traningSubject.value,t]),ct(void 0)}getAllPlans(){return this._client.collection("plans").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(XU))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ej{}class BW{}const hu="*";function tj(n,e){return{type:7,name:n,definitions:e,options:{}}}function GI(n,e=null){return{type:4,styles:e,timings:n}}function nj(n,e=null){return{type:2,steps:n,options:e}}function fu(n){return{type:6,styles:n,offset:null}}function WI(n,e,t){return{type:0,name:n,styles:e,options:t}}function qI(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ij(n){Promise.resolve().then(n)}class A0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ij(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class rj{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?ij(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,h)=>Math.max(l,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const OR="!",VW=["matFormFieldNotchedOutline",""],UW=["*"],jW=["textField"],HW=["iconPrefixContainer"],zW=["textPrefixContainer"];function $W(n,e){1&n&&d._UZ(0,"span",19)}function GW(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",17),d.NdJ("cdkObserveContent",function(){d.CHM(t);const r=d.oxw(2);return d.KtG(r._refreshOutlineNotchWidth())}),d.Hsn(1,1),d.YNc(2,$W,1,0,"span",18),d.qZA()}if(2&n){const t=d.oxw(2);d.Q6J("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required)}}function WW(n,e){if(1&n&&d.YNc(0,GW,3,6,"label",16),2&n){const t=d.oxw();d.Q6J("ngIf",t._hasFloatingLabel())}}function qW(n,e){1&n&&d._UZ(0,"div",20)}function KW(n,e){}function ZW(n,e){if(1&n&&d.YNc(0,KW,0,0,"ng-template",22),2&n){d.oxw(2);const t=d.MAs(1);d.Q6J("ngTemplateOutlet",t)}}function YW(n,e){if(1&n&&(d.TgZ(0,"div",21),d.YNc(1,ZW,1,1,"ng-template",9),d.qZA()),2&n){const t=d.oxw();d.Q6J("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),d.xp6(1),d.Q6J("ngIf",!t._forceDisplayInfixLabel())}}function QW(n,e){1&n&&(d.TgZ(0,"div",23,24),d.Hsn(2,2),d.qZA())}function XW(n,e){1&n&&(d.TgZ(0,"div",25,26),d.Hsn(2,3),d.qZA())}function JW(n,e){}function e8(n,e){if(1&n&&d.YNc(0,JW,0,0,"ng-template",22),2&n){d.oxw();const t=d.MAs(1);d.Q6J("ngTemplateOutlet",t)}}function t8(n,e){1&n&&(d.TgZ(0,"div",27),d.Hsn(1,4),d.qZA())}function n8(n,e){1&n&&(d.TgZ(0,"div",28),d.Hsn(1,5),d.qZA())}function i8(n,e){1&n&&d._UZ(0,"div",29)}function r8(n,e){if(1&n&&(d.TgZ(0,"div",30),d.Hsn(1,6),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function s8(n,e){if(1&n&&(d.TgZ(0,"mat-hint",34),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function o8(n,e){if(1&n&&(d.TgZ(0,"div",31),d.YNc(1,s8,2,2,"mat-hint",32),d.Hsn(2,7),d._UZ(3,"div",33),d.Hsn(4,8),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const a8=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],l8=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let M0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),c8=0;const sj=new d.OlP("MatError");let FR=(()=>{class n{constructor(t,i){this.id="mat-mdc-error-"+c8++,t||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(d.$8M("aria-live"),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,i){2&t&&d.Ikx("id",i.id)},inputs:{id:"id"},features:[d._Bn([{provide:sj,useExisting:n}])]}),n})(),d8=0,oj=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+d8++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(d.Ikx("id",i.id),d.uIk("align",null),d.ekj("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const u8=new d.OlP("MatPrefix"),h8=new d.OlP("MatSuffix");let aj=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function f8(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const lj="mdc-line-ripple--active",KI="mdc-line-ripple--deactivating";let cj=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,l=s.contains(KI);"opacity"===r.propertyName&&l&&s.remove(lj,KI)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(KI),t.add(lj)}deactivate(){this._elementRef.nativeElement.classList.add(KI)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),dj=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&d.ekj("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:VW,ngContentSelectors:UW,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(d.F$t(),d._UZ(0,"div",0),d.TgZ(1,"div",1),d.Hsn(2),d.qZA(),d._UZ(3,"div",2)),2&t&&(d.xp6(1),d.Udp("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const m8={transitionMessages:tj("transitionMessages",[WI("enter",fu({opacity:1,transform:"translateY(0%)"})),qI("void => enter",[fu({opacity:0,transform:"translateY(-5px)"}),GI("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const hj=new d.OlP("MatFormField"),p8=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let fj=0,LR=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=zr(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,l,h,m,y){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=l,this._defaults=h,this._animationMode=m,this._document=y,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+fj++,this._hintLabelId="mat-mdc-hint-"+fj++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new li.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=Boolean(h?.hideRequiredMarker),h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Sc(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,lR.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Sc(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Sc(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,l=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+l}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(d.R0b),d.Y36(FA),d.Y36(qo),d.Y36(p8,8),d.Y36(d.QbO,8),d.Y36(oe))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(d.Suo(r,M0,5),d.Suo(r,M0,7),d.Suo(r,uj,5),d.Suo(r,u8,5),d.Suo(r,h8,5),d.Suo(r,sj,5),d.Suo(r,oj,5)),2&t){let s;d.iGM(s=d.CRH())&&(i._labelChildNonStatic=s.first),d.iGM(s=d.CRH())&&(i._labelChildStatic=s.first),d.iGM(s=d.CRH())&&(i._formFieldControl=s.first),d.iGM(s=d.CRH())&&(i._prefixChildren=s),d.iGM(s=d.CRH())&&(i._suffixChildren=s),d.iGM(s=d.CRH())&&(i._errorChildren=s),d.iGM(s=d.CRH())&&(i._hintChildren=s)}},viewQuery:function(t,i){if(1&t&&(d.Gf(jW,5),d.Gf(HW,5),d.Gf(zW,5),d.Gf(aj,5),d.Gf(dj,5),d.Gf(cj,5)),2&t){let r;d.iGM(r=d.CRH())&&(i._textField=r.first),d.iGM(r=d.CRH())&&(i._iconPrefixContainer=r.first),d.iGM(r=d.CRH())&&(i._textPrefixContainer=r.first),d.iGM(r=d.CRH())&&(i._floatingLabel=r.first),d.iGM(r=d.CRH())&&(i._notchedOutline=r.first),d.iGM(r=d.CRH())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&d.ekj("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:hj,useExisting:n}])],ngContentSelectors:l8,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(d.F$t(a8),d.YNc(0,WW,1,1,"ng-template",null,0,d.W1O),d.TgZ(2,"div",1,2),d.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),d.YNc(4,qW,1,0,"div",3),d.TgZ(5,"div",4),d.YNc(6,YW,2,3,"div",5),d.YNc(7,QW,3,0,"div",6),d.YNc(8,XW,3,0,"div",7),d.TgZ(9,"div",8),d.YNc(10,e8,1,1,"ng-template",9),d.Hsn(11),d.qZA(),d.YNc(12,t8,2,0,"div",10),d.YNc(13,n8,2,0,"div",11),d.qZA(),d.YNc(14,i8,1,0,"div",12),d.qZA(),d.TgZ(15,"div",13),d.YNc(16,r8,2,1,"div",14),d.YNc(17,o8,5,2,"div",15),d.qZA()),2&t&&(d.xp6(2),d.ekj("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),d.xp6(2),d.Q6J("ngIf",!i._hasOutline()&&!i._control.disabled),d.xp6(2),d.Q6J("ngIf",i._hasOutline()),d.xp6(1),d.Q6J("ngIf",i._hasIconPrefix),d.xp6(1),d.Q6J("ngIf",i._hasTextPrefix),d.xp6(2),d.Q6J("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),d.xp6(2),d.Q6J("ngIf",i._hasTextSuffix),d.xp6(1),d.Q6J("ngIf",i._hasIconSuffix),d.xp6(1),d.Q6J("ngIf",!i._hasOutline()),d.xp6(1),d.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),d.Q6J("ngSwitch",i._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[Xr,mi,sa,As,TE,oj,aj,dj,cj],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[m8.transitionMessages]},changeDetection:0}),n})(),k0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,gr,Ac,Ar]}),n})();const gj=Tl({passive:!0});let y8=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return wl.E;const i=Dl(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new li.x,l="cdk-text-field-autofilled",h=m=>{"cdk-text-field-autofill-start"!==m.animationName||i.classList.contains(l)?"cdk-text-field-autofill-end"===m.animationName&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!1}))):(i.classList.add(l),this._ngZone.run(()=>s.next({target:m.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",h,gj),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",h,gj)}}),s}stopMonitoring(t){const i=Dl(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const b8=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),w8=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let x8=0;const E8=SF(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new li.x}});let BR=(()=>{class n extends E8{get disabled(){return this._disabled}set disabled(t){this._disabled=zr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(J.required)??!1}set required(t){this._required=zr(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&nE().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=zr(t)}constructor(t,i,r,s,l,h,m,y,C,D){super(h,s,l,r),this._elementRef=t,this._platform=i,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+x8++,this.focused=!1,this.stateChanges=new li.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(H=>nE().has(H)),this._iOSKeyupListener=H=>{const X=H.target;!X.value&&0===X.selectionStart&&0===X.selectionEnd&&(X.setSelectionRange(1,1),X.setSelectionRange(0,0))};const k=this._elementRef.nativeElement,B=k.nodeName.toLowerCase();this._inputValueAccessor=m||k,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===B,this._isTextarea="textarea"===B,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=k.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){w8.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(qo),d.Y36(Ta,10),d.Y36(Hy,8),d.Y36(_c,8),d.Y36(QA),d.Y36(b8,10),d.Y36(y8),d.Y36(d.R0b),d.Y36(hj,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){1&t&&d.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(d.Ikx("id",i.id)("disabled",i.disabled)("required",i.required),d.uIk("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),d.ekj("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:uj,useExisting:n}]),d.qOj,d.TTD]}),n})(),VR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,k0,k0,v8,Ar]}),n})();const C8=["mat-button",""],I8=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],T8=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],D8=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],S8=WA(TF(DF(class{constructor(n){this._elementRef=n}})));let A8=(()=>{class n extends S8{constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=(0,d.f3M)(HE),this._isFab=!1;const l=t.nativeElement.classList;for(const h of D8)this._hasHostAttributes(h.selector)&&h.mdcClasses.forEach(m=>{l.add(m)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){d.$Z()},n.\u0275dir=d.lG2({type:n,viewQuery:function(t,i){if(1&t&&d.Gf(po,5),2&t){let r;d.iGM(r=d.CRH())&&(i.ripple=r.first)}},features:[d.qOj]}),n})(),UR=(()=>{class n extends A8{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(qo),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(d.uIk("disabled",i.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:C8,ngContentSelectors:T8,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(d.F$t(I8),d._UZ(0,"span",0),d.Hsn(1),d.TgZ(2,"span",1),d.Hsn(3,1),d.qZA(),d.Hsn(4,2),d._UZ(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(d.ekj("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),d.xp6(6),d.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[po],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),jR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,ob,Ar]}),n})();function R8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"exercise is invalid"),d.qZA())}function P8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"comment is invalid"),d.qZA())}function N8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"set is invalid"),d.qZA())}function O8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"value is invalid"),d.qZA())}function F8(n,e){if(1&n&&(d.ynx(0),d.TgZ(1,"div",8)(2,"mat-form-field",1)(3,"mat-label"),d._uU(4,"Rep"),d.qZA(),d._UZ(5,"input",9),d.qZA(),d.TgZ(6,"mat-form-field",1)(7,"mat-label"),d._uU(8,"Set"),d.qZA(),d._UZ(9,"input",10),d.YNc(10,N8,2,0,"mat-error",3),d.qZA(),d.TgZ(11,"mat-form-field",1)(12,"mat-label"),d._uU(13,"Value"),d.qZA(),d._UZ(14,"input",11),d.YNc(15,O8,2,0,"mat-error",3),d.qZA()(),d.BQk()),2&n){const t=e.index,i=d.oxw();let r,s;d.xp6(1),d.Q6J("formGroupName",t),d.xp6(9),d.Q6J("ngIf",null==(r=i.planForm.get("set"))?null:r.invalid),d.xp6(5),d.Q6J("ngIf",null==(s=i.planForm.get("value"))?null:s.valid)}}function L8(n,e){if(1&n&&(d.TgZ(0,"pre"),d._uU(1),d.ALo(2,"json"),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Oqu(d.lcZ(2,1,t))}}let B8=(()=>{class n{constructor(t,i){this._fb=t,this._trainingService=i,this.planForm=new Sa({exercise:new ss,comment:new ss,quantityExercise:new Fw([])}),this.trainingExercises$=this._trainingService.traning$}onPlanFormSubmitted(t){console.log(t.value),this._trainingService.addTraining().subscribe()}get quantityExercise(){return this.planForm.controls.quantityExercise}addQuantity(){const t=this._fb.group({set:[],rep:[],value:[]});this.quantityExercise.push(t)}addTrainingToContext(t){this._trainingService.addTrainingToContext({exercise:t.get("exercise")?.value,comment:t.get("comment")?.value,quantity:t.get("quantityExercise")?.value}).subscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bw),d.Y36(JU))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-create-plan"]],decls:25,vars:7,consts:[[3,"formGroup"],["appearance","fill"],["matInput","","type","text","placeholder","Exercise","formControlName","exercise"],[4,"ngIf"],["matInput","","type","text","placeholder","Comment","formControlName","comment"],["type","submit","mat-raised-button","","color","primary",3,"click"],["formArrayName","quantityExercise"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["matInput","","type","text","placeholder","Rep","formControlName","rep"],["matInput","","type","text","placeholder","Set","formControlName","set"],["matInput","","type","text","placeholder","Value","formControlName","value"]],template:function(t,i){1&t&&(d.TgZ(0,"form",0)(1,"div")(2,"mat-form-field",1)(3,"mat-label"),d._uU(4,"Exercise"),d.qZA(),d._UZ(5,"input",2),d.YNc(6,R8,2,0,"mat-error",3),d.qZA()(),d.TgZ(7,"div")(8,"mat-form-field",1)(9,"mat-label"),d._uU(10,"Comment"),d.qZA(),d._UZ(11,"input",4),d.YNc(12,P8,2,0,"mat-error",3),d.qZA()(),d.TgZ(13,"div")(14,"button",5),d.NdJ("click",function(){return i.addQuantity()}),d._uU(15," Add quantity "),d.qZA()(),d.ynx(16,6),d.YNc(17,F8,16,3,"ng-container",7),d.BQk(),d.TgZ(18,"button",5),d.NdJ("click",function(){return i.addTrainingToContext(i.planForm)}),d._uU(19," Add exercise "),d.qZA(),d.TgZ(20,"div")(21,"button",5),d.NdJ("click",function(){return i.onPlanFormSubmitted(i.planForm)}),d._uU(22," Submit "),d.qZA()()(),d.YNc(23,L8,3,3,"pre",7),d.ALo(24,"async")),2&t&&(d.Q6J("formGroup",i.planForm),d.xp6(6),d.Q6J("ngIf",i.planForm.get("exercise").invalid),d.xp6(6),d.Q6J("ngIf",i.planForm.get("comment").invalid),d.xp6(5),d.Q6J("ngForOf",i.quantityExercise.controls),d.xp6(6),d.Q6J("ngForOf",d.lcZ(24,5,i.trainingExercises$)))},dependencies:[am,hc,yl,lg,_c,wh,bg,wg,LR,M0,FR,BR,wo,Xr,UR,Ms,Or],encapsulation:2,changeDetection:0}),n})(),_j=(()=>{class n{constructor(t){this._client=t,this._responseSubject=new li.x,this.response$=this._responseSubject.asObservable(),this._userContextSubject=new li.x,this.userContext$=this._userContextSubject.asObservable()}login(t){return(0,dn.D)(this._client.signInWithEmailAndPassword(t.email,t.password)).pipe((0,tt.U)(i=>(console.log(i.user?.multiFactor),i.user?.multiFactor)))}register(t){return(0,dn.D)(this._client.createUserWithEmailAndPassword(t.email,t.password)).pipe(Ma(1),(0,tt.U)(i=>(console.log("registerResponse",i),i)))}getOne(){return this._client.authState}load(){return this.getOne().pipe(Ma(1),(0,tt.U)(t=>{null!==t&&console.log(t)}))}logOut(){return(0,dn.D)(this._client.signOut()).pipe((0,tt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(RR))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yj=(()=>{class n{constructor(t){this._angularFirestore=t,this._userContextSubject=new li.x,this.userContext$=this._userContextSubject.asObservable()}addUser(t){return(0,dn.D)(this._angularFirestore.collection("users").add(t)).pipe((0,tt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(XU))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function V8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"name is invalid"),d.qZA())}function U8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"last name is invalid"),d.qZA())}function j8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"email is invalid"),d.qZA())}function H8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"password is invalid"),d.qZA())}let z8=(()=>{class n{constructor(t,i,r){this._authService=t,this._router=i,this._userService=r,this.registerForm=new Sa({name:new ss,lastName:new ss,email:new ss,password:new ss})}onRegisterFormSubmitted(t){t.invalid||this._authService.register({email:t.get("email")?.value,password:t.get("email")?.value}).subscribe(i=>{this._userService.addUser({name:t.get("name")?.value,lastName:t.get("lastName")?.value,email:t.get("email")?.value,role:"user",authId:i.user.multiFactor.user.uid})})}load(){this._authService.load().subscribe()}logout(){this._authService.logOut().subscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_j),d.Y36(Hr),d.Y36(yj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-registration"]],decls:28,vars:5,consts:[[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","type","text","placeholder","Name","formControlName","name","required",""],[4,"ngIf"],["matInput","","type","text","placeholder","LastName","formControlName","lastName","required",""],["matInput","","type","text","placeholder","Email","formControlName","email","required",""],["matInput","","type","text","placeholder","Password","formControlName","password","required",""],["type","submit","mat-raised-button","","color","primary"]],template:function(t,i){1&t&&(d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return i.onRegisterFormSubmitted(i.registerForm)}),d.TgZ(1,"div")(2,"mat-form-field",1)(3,"mat-label"),d._uU(4,"Name"),d.qZA(),d._UZ(5,"input",2),d.YNc(6,V8,2,0,"mat-error",3),d.qZA()(),d.TgZ(7,"div")(8,"mat-form-field",1)(9,"mat-label"),d._uU(10,"Last name"),d.qZA(),d._UZ(11,"input",4),d.YNc(12,U8,2,0,"mat-error",3),d.qZA()(),d.TgZ(13,"div")(14,"mat-form-field",1)(15,"mat-label"),d._uU(16,"Email"),d.qZA(),d._UZ(17,"input",5),d.YNc(18,j8,2,0,"mat-error",3),d.qZA()(),d.TgZ(19,"div")(20,"mat-form-field",1)(21,"mat-label"),d._uU(22,"Password"),d.qZA(),d._UZ(23,"input",6),d.YNc(24,H8,2,0,"mat-error",3),d.qZA()(),d.TgZ(25,"div")(26,"button",7),d._uU(27,"Submit"),d.qZA()()()),2&t&&(d.Q6J("formGroup",i.registerForm),d.xp6(6),d.Q6J("ngIf",i.registerForm.get("name").invalid),d.xp6(6),d.Q6J("ngIf",i.registerForm.get("lastName").invalid),d.xp6(6),d.Q6J("ngIf",i.registerForm.get("email").invalid),d.xp6(6),d.Q6J("ngIf",i.registerForm.get("password").invalid))},dependencies:[am,hc,yl,lg,hm,_c,wh,LR,M0,FR,BR,Xr,UR],encapsulation:2,changeDetection:0}),n})();function $8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"email is invalid"),d.qZA())}function G8(n,e){1&n&&(d.TgZ(0,"mat-error"),d._uU(1,"password is invalid"),d.qZA())}let W8=(()=>{class n{constructor(t,i){this._authService=t,this._userService=i,this.loginForm=new Sa({email:new ss,password:new ss})}onLoginFormSubmitted(t){this._authService.login({email:t.get("email")?.value,password:t.get("password")?.value}).subscribe(()=>{this._authService.load().subscribe()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_j),d.Y36(yj))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:16,vars:3,consts:[[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","type","text","placeholder","Email","formControlName","email","required",""],[4,"ngIf"],["matInput","","type","text","placeholder","Password","formControlName","password","required",""],["type","submit","mat-raised-button","","color","primary"]],template:function(t,i){1&t&&(d.TgZ(0,"form",0),d.NdJ("ngSubmit",function(){return i.onLoginFormSubmitted(i.loginForm)}),d.TgZ(1,"div")(2,"mat-form-field",1)(3,"mat-label"),d._uU(4,"Email"),d.qZA(),d._UZ(5,"input",2),d.YNc(6,$8,2,0,"mat-error",3),d.qZA()(),d.TgZ(7,"div")(8,"mat-form-field",1)(9,"mat-label"),d._uU(10,"Password"),d.qZA(),d._UZ(11,"input",4),d.YNc(12,G8,2,0,"mat-error",3),d.qZA()(),d.TgZ(13,"div")(14,"button",5),d._uU(15,"Submit"),d.qZA()()()),2&t&&(d.Q6J("formGroup",i.loginForm),d.xp6(6),d.Q6J("ngIf",i.loginForm.get("email").invalid),d.xp6(6),d.Q6J("ngIf",i.loginForm.get("password").invalid))},dependencies:[am,hc,yl,lg,hm,_c,wh,LR,M0,FR,BR,Xr,UR],encapsulation:2,changeDetection:0}),n})();function q8(n,e){if(1&n&&(d.TgZ(0,"pre"),d._uU(1),d.ALo(2,"json"),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Oqu(d.lcZ(2,1,t.quantity))}}function K8(n,e){if(1&n&&(d.TgZ(0,"div",1),d.YNc(1,q8,3,3,"pre",2),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("ngForOf",t.trainingElement)}}let Z8=(()=>{class n{constructor(t){this._trainingService=t,this.trainings$=this._trainingService.getAllPlans()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(JU))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-training"]],decls:2,vars:3,consts:[["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(d.YNc(0,K8,2,1,"div",0),d.ALo(1,"async")),2&t&&d.Q6J("ngForOf",d.lcZ(1,1,i.trainings$))},dependencies:[wo,Ms,Or],encapsulation:2,changeDetection:0}),n})(),gq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,gr,Ar]}),n})(),_q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[fm,k0,VR,gr,jR,gq]}),n})(),yq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[fm,k0,VR,gr,jR]}),n})(),vq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[fm,k0,VR,gr,jR]}),n})(),bq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ar,Ar]}),n})(),Yq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ac,gr,Ar,ob,tM,bq]}),n})(),e9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),s9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[gr,Ar,e9,ob,Ac,eb,Ar]}),n})(),o9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Yq,gr,s9]}),n})(),a9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[o_.forRoot([{path:"create-plan",component:B8},{path:"register",component:z8},{path:"login",component:W8},{path:"plans",component:Z8}]),_q,yq,vq,o9,o_]}),n})();function Ij(n){return new d.vHH(3e3,!1)}function H9(){return typeof window<"u"&&typeof window.document<"u"}function $R(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function _f(n){switch(n.length){case 0:return new A0;case 1:return n[0];default:return new rj(n)}}function Tj(n,e,t,i,r=new Map,s=new Map){const l=[],h=[];let m=-1,y=null;if(i.forEach(C=>{const D=C.get("offset"),k=D==m,B=k&&y||new Map;C.forEach((H,X)=>{let ce=X,Ne=H;if("offset"!==X)switch(ce=e.normalizePropertyName(ce,l),Ne){case OR:Ne=r.get(X);break;case hu:Ne=s.get(X);break;default:Ne=e.normalizeStyleValue(X,ce,Ne,l)}B.set(ce,Ne)}),k||h.push(B),y=B,m=D}),l.length)throw function M9(n){return new d.vHH(3502,!1)}();return h}function GR(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&WR(t,"start",n)));break;case"done":n.onDone(()=>i(t&&WR(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&WR(t,"destroy",n)))}}function WR(n,e,t){const s=qR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function qR(n,e,t,i,r="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!l}}function ea(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Dj(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let KR=(n,e)=>!1,Sj=(n,e,t)=>[],Aj=null;function ZR(n){const e=n.parentNode||n.host;return e===Aj?null:e}($R()||typeof Element<"u")&&(H9()?(Aj=(()=>document.documentElement)(),KR=(n,e)=>{for(;e;){if(e===n)return!0;e=ZR(e)}return!1}):KR=(n,e)=>n.contains(e),Sj=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Rp=null,Mj=!1;const kj=KR,Rj=Sj;let Pj=(()=>{class n{validateStyleProperty(t){return function $9(n){Rp||(Rp=function G9(){return typeof document<"u"?document.body:null}()||{},Mj=!!Rp.style&&"WebkitAppearance"in Rp.style);let e=!0;return Rp.style&&!function z9(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Rp.style,!e&&Mj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Rp.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return kj(t,i)}getParentElement(t){return ZR(t)}query(t,i,r){return Rj(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,l,h=[],m){return new A0(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),YR=(()=>{class n{}return n.NOOP=new Pj,n})();const W9=1e3,QR="ng-enter",ZI="ng-leave",YI="ng-trigger",QI=".ng-trigger",Oj="ng-animating",XR=".ng-animating";function mu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:JR(parseFloat(e[1]),e[2])}function JR(n,e){return"s"===e?n*W9:n}function XI(n,e,t){return n.hasOwnProperty("duration")?n:function K9(n,e,t){let r,s=0,l="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(Ij()),{duration:0,delay:0,easing:""};r=JR(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(s=JR(parseFloat(m),h[4]));const y=h[5];y&&(l=y)}else r=n;if(!t){let h=!1,m=e.length;r<0&&(e.push(function l9(){return new d.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function c9(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(m,0,Ij())}return{duration:r,delay:s,easing:l}}(n,e,t)}function R0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Fj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function yf(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Bj(n,e,t){return t?e+":"+t+";":""}function Vj(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=Bj(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Bj(0,X9(t),n.style[t]));n.setAttribute("style",e)}function Hc(n,e,t){n.style&&(e.forEach((i,r)=>{const s=tP(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),$R()&&Vj(n))}function Pp(n,e){n.style&&(e.forEach((t,i)=>{const r=tP(i);n.style[r]=""}),$R()&&Vj(n))}function P0(n){return Array.isArray(n)?1==n.length?n[0]:nj(n):n}const eP=new RegExp("{{\\s*(.+?)\\s*}}","g");function Uj(n){let e=[];if("string"==typeof n){let t;for(;t=eP.exec(n);)e.push(t[1]);eP.lastIndex=0}return e}function N0(n,e,t){const i=n.toString(),r=i.replace(eP,(s,l)=>{let h=e[l];return null==h&&(t.push(function u9(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return r==i?n:r}function JI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Q9=/-+([a-z0-9])/g;function tP(n){return n.replace(Q9,(...e)=>e[1].toUpperCase())}function X9(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ta(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function h9(n){return new d.vHH(3004,!1)}()}}function jj(n,e){return window.getComputedStyle(n)[e]}const nT="*";function r7(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function s7(n,e,t){if(":"==n[0]){const m=function o7(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function T9(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function I9(n){return new d.vHH(3015,!1)}()),e;const r=i[1],s=i[2],l=i[3];e.push(Hj(r,l));"<"==s[0]&&!(r==nT&&l==nT)&&e.push(Hj(l,r))}(i,t,e)):t.push(n),t}const iT=new Set(["true","1"]),rT=new Set(["false","0"]);function Hj(n,e){const t=iT.has(n)||rT.has(n),i=iT.has(e)||rT.has(e);return(r,s)=>{let l=n==nT||n==r,h=e==nT||e==s;return!l&&t&&"boolean"==typeof r&&(l=r?iT.has(n):rT.has(n)),!h&&i&&"boolean"==typeof s&&(h=s?iT.has(e):rT.has(e)),l&&h}}const a7=new RegExp("s*:selfs*,?","g");function nP(n,e,t,i){return new l7(n).build(e,t,i)}class l7{constructor(e){this._driver=e}build(e,t,i){const r=new u7(t);return this._resetContextStyleTimingState(r),ta(this,P0(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function m9(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,y=m.name;y.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,s.push(this.visitState(m,t))}),m.name=y}else if(1==h.type){const m=this.visitTransition(h,t);i+=m.queryCount,r+=m.depCount,l.push(m)}else t.errors.push(function p9(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,l=r||{};i.styles.forEach(h=>{h instanceof Map&&h.forEach(m=>{Uj(m).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(JI(s.values()),t.errors.push(function g9(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=ta(this,P0(e.animation),t);return{type:1,matchers:r7(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Np(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>ta(this,i,t)),options:Np(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(l=>{t.currentTime=i;const h=ta(this,l,t);return r=Math.max(r,t.currentTime),h});return t.currentTime=r,{type:3,steps:s,options:Np(e.options)}}visitAnimate(e,t){const i=function f7(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return iP(XI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=iP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=XI(t,e);return iP(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:fu({});if(5==s.type)r=this.visitKeyframes(s,t);else{let l=e.styles,h=!1;if(!l){h=!0;const y={};i.easing&&(y.easing=i.easing),l=fu(y)}t.currentTime+=i.duration+i.delay;const m=this.visitStyle(l,t);m.isEmptyStep=h,r=m}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of r)"string"==typeof h?h===hu?i.push(h):t.errors.push(new d.vHH(3002,!1)):i.push(Fj(h));let s=!1,l=null;return i.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(l=h.get("easing"),h.delete("easing")),!s))for(let m of h.values())if(m.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((h,m)=>{const y=t.collectedStyles.get(t.currentQuerySelector),C=y.get(m);let D=!0;C&&(s!=r&&s>=C.startTime&&r<=C.endTime&&(t.errors.push(function y9(n,e,t,i,r){return new d.vHH(3010,!1)}()),D=!1),s=C.startTime),D&&y.set(m,{startTime:s,endTime:r}),t.options&&function Y9(n,e,t){const i=e.params||{},r=Uj(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function d9(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function v9(){return new d.vHH(3011,!1)}()),i;let s=0;const l=[];let h=!1,m=!1,y=0;const C=e.steps.map(Ne=>{const Ke=this._makeStyleAst(Ne,t);let Xe=null!=Ke.offset?Ke.offset:function h7(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ke.styles),dt=0;return null!=Xe&&(s++,dt=Ke.offset=Xe),m=m||dt<0||dt>1,h=h||dt<y,y=dt,l.push(dt),Ke});m&&t.errors.push(function b9(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function w9(){return new d.vHH(3200,!1)}());const D=e.steps.length;let k=0;s>0&&s<D?t.errors.push(function x9(){return new d.vHH(3202,!1)}()):0==s&&(k=1/(D-1));const B=D-1,H=t.currentTime,X=t.currentAnimateTimings,ce=X.duration;return C.forEach((Ne,Ke)=>{const Xe=k>0?Ke==B?1:k*Ke:l[Ke],dt=Xe*ce;t.currentTime=H+X.delay+dt,X.duration=dt,this._validateStyleAst(Ne,t),Ne.offset=Xe,i.styles.push(Ne)}),i}visitReference(e,t){return{type:8,animation:ta(this,P0(e.animation),t),options:Np(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Np(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Np(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function c7(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(a7,"")),n=n.replace(/@\*/g,QI).replace(/@\w+/g,t=>QI+"-"+t.slice(1)).replace(/:animating/g,XR),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ea(t.collectedStyles,t.currentQuerySelector,new Map);const h=ta(this,P0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:h,originalSelector:e.selector,options:Np(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function E9(){return new d.vHH(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:XI(e.timings,t.errors,!0);return{type:12,animation:ta(this,P0(e.animation),t),timings:i,options:null}}}class u7{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Np(n){return n?(n=R0(n)).params&&(n.params=function d7(n){return n?R0(n):null}(n.params)):n={},n}function iP(n,e,t){return{duration:n,delay:e,easing:t}}function rP(n,e,t,i,r,s,l=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:h}}class sT{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const g7=new RegExp(":enter","g"),y7=new RegExp(":leave","g");function sP(n,e,t,i,r,s=new Map,l=new Map,h,m,y=[]){return(new v7).buildKeyframes(n,e,t,i,r,s,l,h,m,y)}class v7{buildKeyframes(e,t,i,r,s,l,h,m,y,C=[]){y=y||new sT;const D=new oP(e,t,y,r,s,C,[]);D.options=m;const k=m.delay?mu(m.delay):0;D.currentTimeline.delayNextStep(k),D.currentTimeline.setStyles([l],null,D.errors,m),ta(this,i,D);const B=D.timelines.filter(H=>H.containsAnimation());if(B.length&&h.size){let H;for(let X=B.length-1;X>=0;X--){const ce=B[X];if(ce.element===t){H=ce;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([h],null,D.errors,m)}return B.length?B.map(H=>H.buildKeyframes()):[rP(t,[],[],[],0,k,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,r,r.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const l="number"==typeof s?s:mu(N0(s,r?.params??{},t.errors));i.delayNextStep(l)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const l=null!=i.duration?mu(i.duration):null,h=null!=i.delay?mu(i.delay):null;return 0!==l&&e.forEach(m=>{const y=t.appendInstructionToTimeline(m,l,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ta(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=oT);const l=mu(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ta(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?mu(e.options.delay):0;e.steps.forEach(l=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),ta(this,l,h),r=Math.max(r,h.currentTimeline.currentTime),i.push(h.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return XI(t.params?N0(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,h=t.createSubContext().currentTimeline;h.easing=i.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*s),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?mu(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=oT);let l=i;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(m=D.currentTimeline),ta(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),h=l*(t.currentQueryTotal-1);let m=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=h-m;break;case"full":m=i.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const D=C.currentTime;ta(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const oT={};class oP{constructor(e,t,i,r,s,l,h,m){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new aT(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=mu(i.duration)),null!=i.delay&&(r.delay=mu(i.delay));const s=i.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!l.hasOwnProperty(h))&&(l[h]=N0(s[h],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new oP(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=oT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new b7(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,l){let h=[];if(r&&h.push(this.element),e.length>0){e=(e=e.replace(g7,"."+this._enterClassName)).replace(y7,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),h.push(...y)}return!s&&0==h.length&&l.push(function C9(n){return new d.vHH(3014,!1)}()),h}}class aT{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new aT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||hu),this._currentKeyframe.set(t,hu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},l=function w7(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,hu)}else yf(r,t)}),t}(e,this._globalTimelineStyles);for(let[h,m]of l){const y=N0(m,s,i);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??hu),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((h,m)=>{const y=yf(h,new Map,this._backFill);y.forEach((C,D)=>{C===OR?e.add(D):C===hu&&t.add(D)}),i||y.set("offset",m/this.duration),r.push(y)});const s=e.size?JI(e.values()):[],l=t.size?JI(t.values()):[];if(i){const h=r[0],m=new Map(h);h.set("offset",0),m.set("offset",1),r=[h,m]}return rP(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}}class b7 extends aT{constructor(e,t,i,r,s,l,h=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=i+t,h=t/l,m=yf(e[0]);m.set("offset",0),s.push(m);const y=yf(e[0]);y.set("offset",Gj(h)),s.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let k=yf(e[D]);const B=k.get("offset");k.set("offset",Gj((t+B*i)/l)),s.push(k)}i=l,t=0,r="",e=s}return rP(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Gj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class aP{}const x7=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class E7 extends aP{normalizePropertyName(e,t){return tP(e)}normalizeStyleValue(e,t,i,r){let s="";const l=i.toString().trim();if(x7.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const h=i.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&r.push(function f9(n,e){return new d.vHH(3005,!1)}())}return l+s}}function Wj(n,e,t,i,r,s,l,h,m,y,C,D,k){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:h,queriedElements:m,preStyleProps:y,postStyleProps:C,totalTime:D,errors:k}}const lP={};class qj{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function C7(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,l,h,m,y,C){const D=[],k=this.ast.options&&this.ast.options.params||lP,H=this.buildStyles(i,h&&h.params||lP,D),X=m&&m.params||lP,ce=this.buildStyles(r,X,D),Ne=new Set,Ke=new Map,Xe=new Map,dt="void"===r,Ut={params:I7(X,k),delay:this.ast.options?.delay},nn=C?[]:sP(e,t,this.ast.animation,s,l,H,ce,Ut,y,D);let An=0;if(nn.forEach($a=>{An=Math.max($a.duration+$a.delay,An)}),D.length)return Wj(t,this._triggerName,i,r,dt,H,ce,[],[],Ke,Xe,An,D);nn.forEach($a=>{const _u=$a.element,l$=ea(Ke,_u,new Set);$a.preStyleProps.forEach(Gp=>l$.add(Gp));const lw=ea(Xe,_u,new Set);$a.postStyleProps.forEach(Gp=>lw.add(Gp)),_u!==t&&Ne.add(_u)});const ms=JI(Ne.values());return Wj(t,this._triggerName,i,r,dt,H,ce,nn,ms,Ke,Xe,An)}}function I7(n,e){const t=R0(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class T7{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=R0(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(r[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,h)=>{l&&(l=N0(l,r,t));const m=this.normalizer.normalizePropertyName(h,t);l=this.normalizer.normalizeStyleValue(h,m,l,t),i.set(h,l)})}),i}}class S7{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new T7(r.style,r.options&&r.options.params||{},i))}),Kj(this.states,"true","1"),Kj(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new qj(e,r,this.states))}),this.fallbackTransition=function A7(n,e,t){return new qj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(l=>l.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function Kj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const M7=new sT;class k7{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=nP(this._driver,t,i,r);if(i.length)throw function k9(n){return new d.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=Tj(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let l;const h=new Map;if(s?(l=sP(this._driver,t,s,QR,ZI,new Map,new Map,i,M7,r),l.forEach(C=>{const D=ea(h,C.element,new Map);C.postStyleProps.forEach(k=>D.set(k,null))})):(r.push(function R9(){return new d.vHH(3300,!1)}()),l=[]),r.length)throw function P9(n){return new d.vHH(3504,!1)}();h.forEach((C,D)=>{C.forEach((k,B)=>{C.set(B,this._driver.computeStyle(D,B,hu))})});const y=_f(l.map(C=>{const D=h.get(C.element);return this._buildPlayer(C,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function N9(n){return new d.vHH(3301,!1)}();return t}listen(e,t,i,r){const s=qR(t,"","","");return GR(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const Zj="ng-animate-queued",cP="ng-animate-disabled",F7=[],Yj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},L7={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ua="__ng_removed";class dP{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function j7(n){return n??null}(i?e.value:e),i){const s=R0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const O0="void",uP=new dP(O0);class B7{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ja(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function O9(n,e){return new d.vHH(3302,!1)}();if(null==i||0==i.length)throw function F9(n){return new d.vHH(3303,!1)}();if(!function H7(n){return"start"==n||"done"==n}(i))throw function L9(n,e){return new d.vHH(3400,!1)}();const s=ea(this._elementListeners,e,[]),l={name:t,phase:i,callback:r};s.push(l);const h=ea(this._engine.statesByElement,e,new Map);return h.has(t)||(ja(e,YI),ja(e,YI+"-"+t),h.set(t,uP)),()=>{this._engine.afterFlush(()=>{const m=s.indexOf(l);m>=0&&s.splice(m,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function B9(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),l=new hP(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ja(e,YI),ja(e,YI+"-"+t),this._engine.statesByElement.set(e,h=new Map));let m=h.get(t);const y=new dP(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&m&&y.absorbOptions(m.options),h.set(t,y),m||(m=uP),y.value!==O0&&m.value===y.value){if(!function G7(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(m.params,y.params)){const X=[],ce=s.matchStyles(m.value,m.params,X),Ne=s.matchStyles(y.value,y.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Pp(e,ce),Hc(e,Ne)})}return}const k=ea(this._engine.playersByElement,e,[]);k.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let B=s.matchTransition(m.value,y.value,e,y.params),H=!1;if(!B){if(!r)return;B=s.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:m,toState:y,player:l,isFallbackTransition:H}),H||(ja(e,Zj),l.onStart(()=>{ly(e,Zj)})),l.onDone(()=>{let X=this.players.indexOf(l);X>=0&&this.players.splice(X,1);const ce=this._engine.playersByElement.get(e);if(ce){let Ne=ce.indexOf(l);Ne>=0&&ce.splice(Ne,1)}}),this.players.push(l),k.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,QI,!0);i.forEach(r=>{if(r[Ua])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const h=[];if(s.forEach((m,y)=>{if(l.set(y,m.value),this._triggers.has(y)){const C=this.trigger(e,y,O0,r);C&&h.push(C)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&_f(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const l=s.name;if(r.has(l))return;r.add(l);const m=this._triggers.get(l).fallbackTransition,y=i.get(l)||uP,C=new dP(O0),D=new hP(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:m,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ua];(!s||s===Yj)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){ja(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,l=this._elementListeners.get(s);l&&l.forEach(h=>{if(h.name==i.triggerName){const m=qR(s,i.triggerName,i.fromState.value,i.toState.value);m._data=e,GR(i.player,h.phase,m,h.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,l=r.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class V7{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new B7(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,h=this.driver.getParentElement(t);for(;h;){const m=r.get(h);if(m){const y=i.indexOf(m);i.splice(y+1,0,e),l=!0;break}h=this.driver.getParentElement(h)}l||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(lT(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!lT(t))return;const s=t[Ua];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ja(e,cP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ly(e,cP))}removeNode(e,t,i,r){if(lT(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ua]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return lT(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,QI,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,XR,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _f(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ua];if(t&&t.setForRemoval){if(e[Ua]=Yj,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(cP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)ja(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?_f(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function V9(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const i=new sT,r=[],s=new Map,l=[],h=new Map,m=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(xt=>{C.add(xt);const Ot=this.driver.query(xt,".ng-animate-queued",!0);for(let zt=0;zt<Ot.length;zt++)C.add(Ot[zt])});const D=this.bodyNode,k=Array.from(this.statesByElement.keys()),B=Jj(k,this.collectedEnterElements),H=new Map;let X=0;B.forEach((xt,Ot)=>{const zt=QR+X++;H.set(Ot,zt),xt.forEach(Tn=>ja(Tn,zt))});const ce=[],Ne=new Set,Ke=new Set;for(let xt=0;xt<this.collectedLeaveElements.length;xt++){const Ot=this.collectedLeaveElements[xt],zt=Ot[Ua];zt&&zt.setForRemoval&&(ce.push(Ot),Ne.add(Ot),zt.hasAnimation?this.driver.query(Ot,".ng-star-inserted",!0).forEach(Tn=>Ne.add(Tn)):Ke.add(Ot))}const Xe=new Map,dt=Jj(k,Array.from(Ne));dt.forEach((xt,Ot)=>{const zt=ZI+X++;Xe.set(Ot,zt),xt.forEach(Tn=>ja(Tn,zt))}),e.push(()=>{B.forEach((xt,Ot)=>{const zt=H.get(Ot);xt.forEach(Tn=>ly(Tn,zt))}),dt.forEach((xt,Ot)=>{const zt=Xe.get(Ot);xt.forEach(Tn=>ly(Tn,zt))}),ce.forEach(xt=>{this.processLeaveNode(xt)})});const Ut=[],nn=[];for(let xt=this._namespaceList.length-1;xt>=0;xt--)this._namespaceList[xt].drainQueuedTransitions(t).forEach(zt=>{const Tn=zt.player,Qr=zt.element;if(Ut.push(Tn),this.collectedEnterElements.length){const Ts=Qr[Ua];if(Ts&&Ts.setForMove){if(Ts.previousTriggersValues&&Ts.previousTriggersValues.has(zt.triggerName)){const Wp=Ts.previousTriggersValues.get(zt.triggerName),Ga=this.statesByElement.get(zt.element);if(Ga&&Ga.has(zt.triggerName)){const GT=Ga.get(zt.triggerName);GT.value=Wp,Ga.set(zt.triggerName,GT)}}return void Tn.destroy()}}const qc=!D||!this.driver.containsElement(D,Qr),ra=Xe.get(Qr),Af=H.get(Qr),ji=this._buildInstruction(zt,i,Af,ra,qc);if(ji.errors&&ji.errors.length)return void nn.push(ji);if(qc)return Tn.onStart(()=>Pp(Qr,ji.fromStyles)),Tn.onDestroy(()=>Hc(Qr,ji.toStyles)),void r.push(Tn);if(zt.isFallbackTransition)return Tn.onStart(()=>Pp(Qr,ji.fromStyles)),Tn.onDestroy(()=>Hc(Qr,ji.toStyles)),void r.push(Tn);const u$=[];ji.timelines.forEach(Ts=>{Ts.stretchStartingKeyframe=!0,this.disabledNodes.has(Ts.element)||u$.push(Ts)}),ji.timelines=u$,i.append(Qr,ji.timelines),l.push({instruction:ji,player:Tn,element:Qr}),ji.queriedElements.forEach(Ts=>ea(h,Ts,[]).push(Tn)),ji.preStyleProps.forEach((Ts,Wp)=>{if(Ts.size){let Ga=m.get(Wp);Ga||m.set(Wp,Ga=new Set),Ts.forEach((GT,kN)=>Ga.add(kN))}}),ji.postStyleProps.forEach((Ts,Wp)=>{let Ga=y.get(Wp);Ga||y.set(Wp,Ga=new Set),Ts.forEach((GT,kN)=>Ga.add(kN))})});if(nn.length){const xt=[];nn.forEach(Ot=>{xt.push(function U9(n,e){return new d.vHH(3505,!1)}())}),Ut.forEach(Ot=>Ot.destroy()),this.reportError(xt)}const An=new Map,ms=new Map;l.forEach(xt=>{const Ot=xt.element;i.has(Ot)&&(ms.set(Ot,Ot),this._beforeAnimationBuild(xt.player.namespaceId,xt.instruction,An))}),r.forEach(xt=>{const Ot=xt.element;this._getPreviousPlayers(Ot,!1,xt.namespaceId,xt.triggerName,null).forEach(Tn=>{ea(An,Ot,[]).push(Tn),Tn.destroy()})});const $a=ce.filter(xt=>tH(xt,m,y)),_u=new Map;Xj(_u,this.driver,Ke,y,hu).forEach(xt=>{tH(xt,m,y)&&$a.push(xt)});const lw=new Map;B.forEach((xt,Ot)=>{Xj(lw,this.driver,new Set(xt),m,OR)}),$a.forEach(xt=>{const Ot=_u.get(xt),zt=lw.get(xt);_u.set(xt,new Map([...Array.from(Ot?.entries()??[]),...Array.from(zt?.entries()??[])]))});const Gp=[],c$=[],d$={};l.forEach(xt=>{const{element:Ot,player:zt,instruction:Tn}=xt;if(i.has(Ot)){if(C.has(Ot))return zt.onDestroy(()=>Hc(Ot,Tn.toStyles)),zt.disabled=!0,zt.overrideTotalTime(Tn.totalTime),void r.push(zt);let Qr=d$;if(ms.size>1){let ra=Ot;const Af=[];for(;ra=ra.parentNode;){const ji=ms.get(ra);if(ji){Qr=ji;break}Af.push(ra)}Af.forEach(ji=>ms.set(ji,Qr))}const qc=this._buildAnimation(zt.namespaceId,Tn,An,s,lw,_u);if(zt.setRealPlayer(qc),Qr===d$)Gp.push(zt);else{const ra=this.playersByElement.get(Qr);ra&&ra.length&&(zt.parentPlayer=_f(ra)),r.push(zt)}}else Pp(Ot,Tn.fromStyles),zt.onDestroy(()=>Hc(Ot,Tn.toStyles)),c$.push(zt),C.has(Ot)&&r.push(zt)}),c$.forEach(xt=>{const Ot=s.get(xt.element);if(Ot&&Ot.length){const zt=_f(Ot);xt.setRealPlayer(zt)}}),r.forEach(xt=>{xt.parentPlayer?xt.syncPlayerEvents(xt.parentPlayer):xt.destroy()});for(let xt=0;xt<ce.length;xt++){const Ot=ce[xt],zt=Ot[Ua];if(ly(Ot,ZI),zt&&zt.hasAnimation)continue;let Tn=[];if(h.size){let qc=h.get(Ot);qc&&qc.length&&Tn.push(...qc);let ra=this.driver.query(Ot,XR,!0);for(let Af=0;Af<ra.length;Af++){let ji=h.get(ra[Af]);ji&&ji.length&&Tn.push(...ji)}}const Qr=Tn.filter(qc=>!qc.destroyed);Qr.length?z7(this,Ot,Qr):this.processLeaveNode(Ot)}return ce.length=0,Gp.forEach(xt=>{this.players.push(xt),xt.onDone(()=>{xt.destroy();const Ot=this.players.indexOf(xt);this.players.splice(Ot,1)}),xt.play()}),Gp}elementContainsData(e,t){let i=!1;const r=t[Ua];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let l=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(l=h)}else{const h=this.playersByElement.get(e);if(h){const m=!s||s==O0;h.forEach(y=>{y.queued||!m&&y.triggerName!=r||l.push(y)})}}return(i||r)&&(l=l.filter(h=>!(i&&i!=h.namespaceId||r&&r!=h.triggerName))),l}_beforeAnimationBuild(e,t,i){const s=t.element,l=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const y=m.element,C=y!==s,D=ea(i,y,[]);this._getPreviousPlayers(y,C,l,h,t.toState).forEach(B=>{const H=B.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),B.destroy(),D.push(B)})}Pp(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,l){const h=t.triggerName,m=t.element,y=[],C=new Set,D=new Set,k=t.timelines.map(H=>{const X=H.element;C.add(X);const ce=X[Ua];if(ce&&ce.removedBeforeQueried)return new A0(H.duration,H.delay);const Ne=X!==m,Ke=function $7(n){const e=[];return eH(n,e),e}((i.get(X)||F7).map(An=>An.getRealPlayer())).filter(An=>!!An.element&&An.element===X),Xe=s.get(X),dt=l.get(X),Ut=Tj(0,this._normalizer,0,H.keyframes,Xe,dt),nn=this._buildPlayer(H,Ut,Ke);if(H.subTimeline&&r&&D.add(X),Ne){const An=new hP(e,h,X);An.setRealPlayer(nn),y.push(An)}return nn});y.forEach(H=>{ea(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function U7(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,H.element,H))}),C.forEach(H=>ja(H,Oj));const B=_f(k);return B.onDestroy(()=>{C.forEach(H=>ly(H,Oj)),Hc(m,t.toStyles)}),D.forEach(H=>{ea(r,H,[]).push(B)}),B}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new A0(e.duration,e.delay)}}class hP{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new A0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>GR(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ea(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function lT(n){return n&&1===n.nodeType}function Qj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Xj(n,e,t,i,r){const s=[];t.forEach(m=>s.push(Qj(m)));const l=[];i.forEach((m,y)=>{const C=new Map;m.forEach(D=>{const k=e.computeStyle(y,D,r);C.set(D,k),(!k||0==k.length)&&(y[Ua]=L7,l.push(y))}),n.set(y,C)});let h=0;return t.forEach(m=>Qj(m,s[h++])),l}function Jj(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function l(h){if(!h)return i;let m=s.get(h);if(m)return m;const y=h.parentNode;return m=t.has(y)?y:r.has(y)?i:l(y),s.set(h,m),m}return e.forEach(h=>{const m=l(h);m!==i&&t.get(m).push(h)}),t}function ja(n,e){n.classList?.add(e)}function ly(n,e){n.classList?.remove(e)}function z7(n,e,t){_f(t).onDone(()=>n.processLeaveNode(e))}function eH(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof rj?eH(i.players,e):e.push(i)}}function tH(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class cT{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new V7(e,t,i),this._timelineEngine=new k7(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const l=e+"-"+r;let h=this._triggerCache[l];if(!h){const m=[],y=[],C=nP(this._driver,s,m,y);if(m.length)throw function A9(n,e){return new d.vHH(3404,!1)}();h=function D7(n,e,t){return new S7(n,e,t)}(r,C,this._normalizer),this._triggerCache[l]=h}this._transitionEngine.registerTrigger(t,r,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,l]=Dj(i);this._timelineEngine.command(s,t,l,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[l,h]=Dj(i);return this._timelineEngine.listen(l,t,h,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let q7=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Hc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Hc(this._element,this._initialStyles),this._endStyles&&(Hc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pp(this._element,this._endStyles),this._endStyles=null),Hc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function fP(n){let e=null;return n.forEach((t,i)=>{(function K7(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class nH{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:jj(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Z7{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return kj(e,t)}getParentElement(e){return ZR(e)}query(e,t,i){return Rj(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,l=[]){const m={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(m.easing=s);const y=new Map,C=l.filter(B=>B instanceof nH);(function J9(n,e){return 0===n||0===e})(i,r)&&C.forEach(B=>{B.currentSnapshot.forEach((H,X)=>y.set(X,H))});let D=function Z9(n){return n.length?n[0]instanceof Map?n:n.map(e=>Fj(e)):[]}(t).map(B=>yf(B));D=function e7(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,l)=>{i.has(l)||r.push(l),i.set(l,s)}),r.length)for(let s=1;s<e.length;s++){let l=e[s];r.forEach(h=>l.set(h,jj(n,h)))}}return e}(e,D,y);const k=function W7(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=fP(e[0]),e.length>1&&(i=fP(e[e.length-1]))):e instanceof Map&&(t=fP(e)),t||i?new q7(n,t,i):null}(e,D);return new nH(e,D,m,k)}}let Y7=(()=>{class n extends ej{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?nj(t):t;return iH(this._renderer,null,i,"register",[r]),new Q7(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(oe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Q7 extends BW{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new X7(this._id,e,t||{},this._renderer)}}class X7{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return iH(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function iH(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const rH="@.disabled";let J7=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,l)=>{const h=l?.parentNode(s);h&&l.removeChild(h,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let C=this._rendererCache.get(s);return C||(C=new sH("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,C)),C}const l=i.id,h=i.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(l,h,t,C.name,C)};return i.data.animation.forEach(m),new eK(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,h]=s;l(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(cT),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class sH{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==rH?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class eK extends sH{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==rH?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function tK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function nK(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,l,h=>{this.factory.scheduleListenerCallback(h._data||-1,i,h)})}return this.delegate.listen(e,t,i)}}let iK=(()=>{class n extends cT{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oe),d.LFG(YR),d.LFG(aP),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const oH=[{provide:ej,useClass:Y7},{provide:aP,useFactory:function rK(){return new E7}},{provide:cT,useClass:iK},{provide:d.FYo,useFactory:function sK(n,e,t){return new J7(n,e,t)},deps:[ir,cT,d.R0b]}],mP=[{provide:YR,useFactory:()=>new Z7},{provide:d.QbO,useValue:"BrowserAnimations"},...oH],aH=[{provide:YR,useClass:Pj},{provide:d.QbO,useValue:"NoopAnimations"},...oH];let oK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?aH:mP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:mP,imports:[No]}),n})();const pP_firebase={projectId:"trainingonline-d1364",appId:"1:726344567352:web:f90df18691dad74b3274cd",storageBucket:"trainingonline-d1364.appspot.com",apiKey:"AIzaSyCbca-F_ZLetGyP8fsdiKbUu3n-AIb3hbU",authDomain:"trainingonline-d1364.firebaseapp.com",messagingSenderId:"726344567352"};var aK=V(1389);class gP{constructor(e){return e}}class _P{constructor(){return(0,bn.vb)("auth")}}const yP=new d.OlP("angularfire2.auth-instances");function cK(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new gP(i)}}const dK={provide:_P,deps:[[new d.FiY,yP]]},uK={provide:gP,useFactory:function lK(n,e){const t=(0,bn.JM)("auth",n,e);return t&&new gP(t)},deps:[[new d.FiY,yP],kp]};let hK=(()=>{class n{constructor(){(0,uu.KN)("angularfire",bn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uK,dK]}),n})();function fK(n,...e){return{ngModule:hK,providers:[{provide:yP,useFactory:cK(n),multi:!0,deps:[d.R0b,d.zs3,bn.HU,FI,[new d.FiY,ay],...e]}]}}const mK=(0,bn.u3)(aK.o,!0),cH="@firebase/database";let vP="";class gK{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,te.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,te.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class _K{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,te.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const uH=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gK(e)}}catch{}return new _K},Op=uH("localStorage"),bP=uH("sessionStorage"),cy=new Yo.Yd("@firebase/database"),hH=function(){let n=1;return function(){return n++}}(),fH=function(n){const e=(0,te.dS)(n),t=new te.gQ;t.update(e);const i=t.digest();return te.US.encodeByteArray(i)},F0=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=F0.apply(null,i):e+="object"==typeof i?(0,te.Wl)(i):i,e+=" "}return e};let Fp=null,mH=!0;const Zr=function(...n){if(!0===mH&&(mH=!1,null===Fp&&!0===bP.get("logging_enabled")&&function(n,e){(0,te.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(cy.logLevel=Yo.in.VERBOSE,Fp=cy.log.bind(cy),e&&bP.set("logging_enabled",!0)):"function"==typeof n?Fp=n:(Fp=null,bP.remove("logging_enabled"))}(!0)),Fp){const e=F0.apply(null,n);Fp(e)}},L0=function(n){return function(...e){Zr(n,...e)}},wP=function(...n){const e="FIREBASE INTERNAL ERROR: "+F0(...n);cy.error(e)},zc=function(...n){const e=`FIREBASE FATAL ERROR: ${F0(...n)}`;throw cy.error(e),new Error(e)},Is=function(...n){const e="FIREBASE WARNING: "+F0(...n);cy.warn(e)},uT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},vf="[MIN_NAME]",pu="[MAX_NAME]",Lp=function(n,e){if(n===e)return 0;if(n===vf||e===pu)return-1;if(e===vf||n===pu)return 1;{const t=yH(n),i=yH(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},bK=function(n,e){return n===e?0:n<e?-1:1},B0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,te.Wl)(e))},xP=function(n){if("object"!=typeof n||null===n)return(0,te.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,te.Wl)(e[i]),t+=":",t+=xP(n[e[i]]);return t+="}",t},gH=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const _H=function(n){(0,te.hu)(!uT(n),"Invalid JSON number");const i=1023;let r,s,l,h,m;0===n?(s=0,l=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=h+i,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const C=y.join("");let D="";for(m=0;m<64;m+=8){let k=parseInt(C.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),D+=k}return D.toLowerCase()},CK=new RegExp("^-?(0*)\\d{1,10}$"),yH=function(n){if(CK.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},dy=function(n){try{n()}catch(e){setTimeout(()=>{throw Is("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},DK=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},V0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class SK{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Is(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class AK{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Is(e)}}let U0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const EH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,TH="websocket",DH="long_polling";class CP{constructor(e,t,i,r,s=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Op.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Op.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function SH(n,e,t){let i;if((0,te.hu)("string"==typeof e,"typeof type must == string"),(0,te.hu)("object"==typeof t,"typeof params must == object"),e===TH)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==DH)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function MK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Yr(t,(s,l)=>{r.push(s+"="+l)}),i+r.join("&")}class kK{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,te.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,te.p$)(this.counters_)}}const IP={},TP={};function DP(n){const e=n.toString();return IP[e]||(IP[e]=new kK),IP[e]}class PK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&dy(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class bf{constructor(e,t,i,r,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=L0(e),this.stats_=DP(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),SH(t,DH,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new PK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,te.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SP((...s)=>{const[l,h,m,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&EH.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bf.forceAllow_=!0}static forceDisallow(){bf.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!bf.forceAllow_&&(bf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,te.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,te.h$)(t),r=gH(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,te.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class SP{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=hH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=SP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Zr("frame writing exception"),h.stack&&Zr(h.stack),Zr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zr("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+r+"="+l.seg+"&ts"+r+"="+l.ts+"&d"+r+"="+l.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,te.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Zr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let fT=null;typeof MozWebSocket<"u"?fT=MozWebSocket:typeof WebSocket<"u"&&(fT=WebSocket);let uy=(()=>{class n{constructor(t,i,r,s,l,h,m){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=L0(this.connId),this.stats_=DP(i),this.connURL=n.connectionURL_(i,h,m,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,l){const h={v:"5"};return!(0,te.Yr)()&&typeof location<"u"&&location.hostname&&EH.test(location.hostname)&&(h.r="f"),i&&(h.s=i),r&&(h.ls=r),s&&(h.ac=s),l&&(h.p=l),SH(t,TH,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Op.set("previous_websocket_failure",!0);try{let r;if((0,te.Yr)()){r={headers:{"User-Agent":`Firebase/5/${vP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(r.proxy={origin:h})}this.mySock=new fT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==fT&&!n.forceDisallow_}static previouslyFailed(){return Op.isInMemoryStorage||!0===Op.get("previous_websocket_failure")}markConnectionHealthy(){Op.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,te.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,te.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=gH(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),OH=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[bf,uy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=uy&&uy.isAvailable();let r=i&&!uy.previouslyFailed();if(t.webSocketOnly&&(i||Is("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[uy];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class HH{constructor(e,t,i,r,s,l,h,m,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=L0("c:"+this.id+":"),this.transportManager_=new OH(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=V0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=B0("t",e),i=B0("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=B0("t",e),i=B0("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=B0("t",e);if("d"in e){const i=e.d;if("h"===t){const r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?wP("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Is("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),V0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Op.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class zH{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class $H{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,te.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,te.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class mT extends $H{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mT}getInitialEvent(e){return(0,te.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const GH=32,WH=768;class Fn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Sn(){return new Fn("")}function mn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wf(n){return n.pieces_.length-n.pieceNum_}function ri(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Fn(n.pieces_,e)}function MP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function j0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qH(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Fn(e,0)}function Ri(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Fn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Fn(t,0)}function pn(n){return n.pieceNum_>=n.pieces_.length}function Ks(n,e){const t=mn(n),i=mn(e);if(null===t)return e;if(t===i)return Ks(ri(n),ri(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function kP(n,e){if(wf(n)!==wf(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ha(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(wf(n)>wf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class nZ{constructor(e,t){this.errorPrefix_=t,this.parts_=j0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,te.ug)(this.parts_[i]);KH(this)}}function KH(n){if(n.byteLength_>WH)throw new Error(n.errorPrefix_+"has a key path longer than "+WH+" bytes ("+n.byteLength_+").");if(n.parts_.length>GH)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GH+") or object contains a cycle "+Bp(n))}function Bp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class RP extends $H{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new RP}getInitialEvent(e){return(0,te.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const H0=1e3;let gT,Vp=(()=>{class n extends zH{constructor(t,i,r,s,l,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=L0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=H0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&mT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,l={r:s,a:t,b:i};this.log_((0,te.Wl)(l)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new te.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?i.resolve(m):i.reject(m)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,te.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const l={p:r};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const y=m.d,C=m.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(r,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,te.r3)(t,"w")){const r=(0,te.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();Is(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,te.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,te.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,te.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const l={p:t};s&&(l.q=r,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const l={p:i,d:r};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,l){this.initConnection_();const h={p:i,d:r};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,te.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):wP("Unrecognized action received from server: "+(0,te.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=H0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ce.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const C=function(){y?y.close():(m=!0,s())};t.realtime_={close:C,sendRequest:function(B){(0,te.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(B)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,H]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?Zr("getToken() completed but was canceled"):(Zr("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=H&&H.token,y=new HH(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,X=>{Is(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(B){t.log_("Failed to get token: "+B),m||(t.repoInfo_.nodeAdmin&&Is(B),C())}}})()}interrupt(t){Zr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=H0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(l=>xP(l)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Fn(t).toString();let s;if(this.listens.has(r)){const l=this.listens.get(r);s=l.get(i),l.delete(i),0===l.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){Zr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Zr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,te.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+vP.replace(/\./g,"-")]=1,(0,te.uI)()?t["framework.cordova"]=1:(0,te.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=mT.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class _n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _n(e,t)}}class pT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new _n(vf,e),r=new _n(vf,t);return 0!==this.compare(i,r)}minPost(){return _n.MIN}}class QH extends pT{static get __EMPTY_NODE(){return gT}static set __EMPTY_NODE(e){gT=e}compare(e,t){return Lp(e.name,t.name)}isDefinedOn(e){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _n.MIN}maxPost(){return new _n(pu,gT)}makePost(e,t){return(0,te.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new _n(e,gT)}toString(){return".key"}}const $c=new QH;class _T{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,r&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let NP,kl=(()=>{class n{constructor(t,i,r,s,l){this.key=t,this.value=i,this.color=r??n.RED,this.left=s??bo.EMPTY_NODE,this.right=l??bo.EMPTY_NODE}copy(t,i,r,s,l){return new n(t??this.key,i??this.value,r??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const l=r(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===l?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return bo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bo{constructor(e,t=bo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,kl.BLACK,null,null))}remove(e){return new bo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,kl.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _T(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _T(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _T(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _T(this.root_,null,this.comparator_,!0,e)}}function dZ(n,e){return Lp(n.name,e.name)}function PP(n,e){return Lp(n,e)}bo.EMPTY_NODE=new class cZ{copy(e,t,i,r,s){return this}insert(e,t,i){return new kl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const XH=function(n){return"number"==typeof n?"number:"+_H(n):"string:"+n},JH=function(n){if(n.isLeafNode()){const e=n.val();(0,te.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,te.r3)(e,".sv"),"Priority must be a string or number.")}else(0,te.hu)(n===NP||n.isEmpty(),"priority of unexpected type.");(0,te.hu)(n===NP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ez,tz,nz,hy=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),JH(this.priorityNode_)}static set __childrenNodeConstructor(t){ez=t}static get __childrenNodeConstructor(){return ez}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return pn(t)?this:".priority"===mn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=mn(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,te.hu)(".priority"!==r||1===wf(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ri(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+XH(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?_H(this.value_):this.value_,this.lazyHash_=fH(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,te.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(r);return(0,te.hu)(s>=0,"Unknown leaf type: "+i),(0,te.hu)(l>=0,"Unknown leaf type: "+r),s===l?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ui=new class mZ extends pT{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?Lp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(pu,new hy("[PRIORITY-POST]",nz))}makePost(e,t){const i=tz(e);return new _n(t,new hy("[PRIORITY-POST]",i))}toString(){return".priority"}},pZ=Math.log(2);class gZ{constructor(e){this.count=parseInt(Math.log(e+1)/pZ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yT=function(n,e,t,i){n.sort(e);const r=function(m,y){const C=y-m;let D,k;if(0===C)return null;if(1===C)return D=n[m],k=t?t(D):D,new kl(k,D.node,kl.BLACK,null,null);{const B=parseInt(C/2,10)+m,H=r(m,B),X=r(B+1,y);return D=n[B],k=t?t(D):D,new kl(k,D.node,kl.BLACK,H,X)}},h=function(m){let y=null,C=null,D=n.length;const k=function(H,X){const ce=D-H,Ne=D;D-=H;const Ke=r(ce+1,Ne),Xe=n[ce],dt=t?t(Xe):Xe;B(new kl(dt,Xe.node,X,null,Ke))},B=function(H){y?(y.left=H,y=H):(C=H,y=H)};for(let H=0;H<m.count;++H){const X=m.nextBitIsOne(),ce=Math.pow(2,m.count-(H+1));X?k(ce,kl.BLACK):(k(ce,kl.BLACK),k(ce,kl.RED))}return C}(new gZ(n.length));return new bo(i||e,h)};let OP;const fy={};class gu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,te.hu)(fy&&ui,"ChildrenNode.ts has not been loaded"),OP=OP||new gu({".priority":fy},{".priority":ui}),OP}get(e){const t=(0,te.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bo?t:null}hasIndex(e){return(0,te.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,te.hu)(e!==$c,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(_n.Wrap);let h,l=s.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=s.getNext();h=r?yT(i,e.getCompare()):fy;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new gu(C,y)}addToIndexes(e,t){const i=(0,te.UI)(this.indexes_,(r,s)=>{const l=(0,te.DV)(this.indexSet_,s);if((0,te.hu)(l,"Missing index implementation for "+s),r===fy){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(_n.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),yT(h,l.getCompare())}return fy}{const h=t.get(e.name);let m=r;return h&&(m=m.remove(new _n(e.name,h))),m.insert(e,e.node)}});return new gu(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,te.UI)(this.indexes_,r=>{if(r===fy)return r;{const s=t.get(e.name);return s?r.remove(new _n(e.name,s)):r}});return new gu(i,this.indexSet_)}}let z0,on=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&JH(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return z0||(z0=new n(new bo(PP),null,gu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||z0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?z0:i}}getChild(t){const i=mn(t);return null===i?this:this.getImmediateChild(i).getChild(ri(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,te.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new _n(t,i);let s,l;i.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(r,this.children_));const h=s.isEmpty()?z0:this.priorityNode_;return new n(s,h,l)}}updateChild(t,i){const r=mn(t);if(null===r)return i;{(0,te.hu)(".priority"!==mn(t)||1===wf(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ri(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,l=!0;if(this.forEachChild(ui,(h,m)=>{i[h]=m.val(t),r++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*r){const h=[];for(const m in i)h[m]=i[m];return h}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+XH(this.getPriority().val())+":"),this.forEachChild(ui,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":fH(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const l=s.getPredecessorKey(new _n(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new _n(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new _n(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,_n.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,_n.Wrap);let l=s.peek();for(;null!=l&&i.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$0?-1:0}withIndex(t){if(t===$c||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===$c||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ui),s=i.getIterator(ui);let l=r.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=r.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===$c?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const $0=new class _Z extends on{constructor(){super(new bo(PP),on.EMPTY_NODE,gu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_n,{MIN:{value:new _n(vf,on.EMPTY_NODE)},MAX:{value:new _n(pu,$0)}}),QH.__EMPTY_NODE=on.EMPTY_NODE,hy.__childrenNodeConstructor=on,function uZ(n){NP=n}($0),function fZ(n){nz=n}($0);const yZ=!0;function Ui(n,e=null){if(null===n)return on.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,te.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new hy(n,Ui(e));if(n instanceof Array||!yZ){let t=on.EMPTY_NODE;return Yr(n,(i,r)=>{if((0,te.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ui(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Ui(e))}{const t=[];let i=!1;if(Yr(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Ui(h);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),t.push(new _n(l,m)))}}),0===t.length)return on.EMPTY_NODE;const s=yT(t,dZ,l=>l.name,PP);if(i){const l=yT(t,ui.getCompare());return new on(s,Ui(e),new gu({".priority":l},{".priority":ui}))}return new on(s,Ui(e),gu.Default)}}!function hZ(n){tz=n}(Ui);class FP extends pT{constructor(e){super(),this.indexPath_=e,(0,te.hu)(!pn(e)&&".priority"!==mn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?Lp(e.name,t.name):s}makePost(e,t){const i=Ui(e),r=on.EMPTY_NODE.updateChild(this.indexPath_,i);return new _n(t,r)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,$0);return new _n(pu,e)}toString(){return j0(this.indexPath_,0).join("/")}}const LP=new class vZ extends pT{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Lp(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(e,t){const i=Ui(e);return new _n(t,i)}toString(){return".value"}};function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class VP{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ui}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ui}copy(){const e=new VP;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function rz(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ui?t="$priority":n.index_===LP?t="$value":n.index_===$c?t="$key":((0,te.hu)(n.index_ instanceof FP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,te.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,te.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,te.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,te.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,te.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function sz(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ui&&(e.i=n.index_.toString()),e}class bT extends zH{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=L0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,te.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=bT.getListenId_(e,i),h={};this.listens_[l]=h;const m=rz(e._queryParams);this.restRequest_(s+".json",m,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,te.DV)(this.listens_,l)===h){let k;k=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(k,null)}})}unlisten(e,t){const i=bT.getListenId_(e,t);delete this.listens_[i]}get(e){const t=rz(e._queryParams),i=e._path.toString(),r=new te.BH;return this.restRequest_(i+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,te.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,te.cI)(h.responseText)}catch{Is("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,m)}else 401!==h.status&&404!==h.status&&Is("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}class DZ{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function wT(){return{value:null,children:new Map}}function py(n,e,t){if(pn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=mn(e);n.children.has(i)||n.children.set(i,wT()),py(n.children.get(i),e=ri(e),t)}}function zP(n,e,t){null!==n.value?t(e,n.value):function SZ(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{zP(r,new Fn(e.toString()+"/"+i),t)})}class AZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Yr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class RZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new AZ(e);const i=1e4+2e4*Math.random();V0(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Yr(e,(r,s)=>{s>0&&(0,te.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),V0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var za=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(za||(za={})),za))();function WP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class xT{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(pn(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Fn(e));return new xT(Sn(),t,this.revert)}}return(0,te.hu)(mn(this.path)===e,"operationForChild called for unrelated child."),new xT(ri(this.path),this.affectedTree,this.revert)}}class Up{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=za.OVERWRITE}operationForChild(e){return pn(this.path)?new Up(this.source,Sn(),this.snap.getImmediateChild(e)):new Up(this.source,ri(this.path),this.snap)}}class gy{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=za.MERGE}operationForChild(e){if(pn(this.path)){const t=this.children.subtree(new Fn(e));return t.isEmpty()?null:t.value?new Up(this.source,Sn(),t.value):new gy(this.source,Sn(),t)}return(0,te.hu)(mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gy(this.source,ri(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xf{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pn(e))return this.isFullyInitialized()&&!this.filtered_;const t=mn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Z0(n,e,t,i,r,s){const l=i.filter(h=>h.type===t);l.sort((h,m)=>function FZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,te.g5)("Should only compare child_ events.");const i=new _n(e.childName,e.snapshotNode),r=new _n(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,h,m)),l.forEach(h=>{const m=function OZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);r.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function ET(n,e){return{eventCache:n,serverCache:e}}function Y0(n,e,t,i){return ET(new xf(e,t,i),n.serverCache)}function az(n,e,t,i){return ET(n.eventCache,new xf(e,t,i))}function CT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let qP;class hi{constructor(e,t=(()=>(qP||(qP=new bo(bK)),qP))()){this.value=e,this.children=t}static fromObject(e){let t=new hi(null);return Yr(e,(i,r)=>{t=t.set(new Fn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Sn(),value:this.value};if(pn(e))return null;{const i=mn(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(ri(e),t);return null!=s?{path:Ri(new Fn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pn(e))return this;{const t=mn(e),i=this.children.get(t);return null!==i?i.subtree(ri(e)):new hi(null)}}set(e,t){if(pn(e))return new hi(t,this.children);{const i=mn(e),s=(this.children.get(i)||new hi(null)).set(ri(e),t),l=this.children.insert(i,s);return new hi(this.value,l)}}remove(e){if(pn(e))return this.children.isEmpty()?new hi(null):new hi(null,this.children);{const t=mn(e),i=this.children.get(t);if(i){const r=i.remove(ri(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new hi(null):new hi(this.value,s)}return this}}get(e){if(pn(e))return this.value;{const t=mn(e),i=this.children.get(t);return i?i.get(ri(e)):null}}setTree(e,t){if(pn(e))return t;{const i=mn(e),s=(this.children.get(i)||new hi(null)).setTree(ri(e),t);let l;return l=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new hi(this.value,l)}}fold(e){return this.fold_(Sn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Ri(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Sn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(pn(e))return null;{const s=mn(e),l=this.children.get(s);return l?l.findOnPath_(ri(e),Ri(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Sn(),t)}foreachOnPath_(e,t,i){if(pn(e))return this;{this.value&&i(t,this.value);const r=mn(e),s=this.children.get(r);return s?s.foreachOnPath_(ri(e),Ri(t,r),i):new hi(null)}}foreach(e){this.foreach_(Sn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ri(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Rl{constructor(e){this.writeTree_=e}static empty(){return new Rl(new hi(null))}}function Q0(n,e,t){if(pn(e))return new Rl(new hi(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const l=Ks(r,e);return s=s.updateChild(l,t),new Rl(n.writeTree_.set(r,s))}{const r=new hi(t),s=n.writeTree_.setTree(e,r);return new Rl(s)}}}function KP(n,e,t){let i=n;return Yr(t,(r,s)=>{i=Q0(i,Ri(e,r),s)}),i}function lz(n,e){if(pn(e))return Rl.empty();{const t=n.writeTree_.setTree(e,new hi(null));return new Rl(t)}}function ZP(n,e){return null!=Hp(n,e)}function Hp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ks(t.path,e)):null}function cz(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ui,(i,r)=>{e.push(new _n(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new _n(i,r.value))}),e}function Ef(n,e){if(pn(e))return n;{const t=Hp(n,e);return new Rl(null!=t?new hi(t):n.writeTree_.subtree(e))}}function YP(n){return n.writeTree_.isEmpty()}function _y(n,e){return dz(Sn(),n.writeTree_,e)}function dz(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,te.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=dz(Ri(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Ri(n,".priority"),i)),t}}function IT(n,e){return pz(e,n)}function HZ(n,e){if(n.snap)return Ha(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ha(Ri(n.path,t),e))return!0;return!1}function $Z(n){return n.visible}function uz(n,e,t){let i=Rl.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const l=s.path;let h;if(s.snap)Ha(t,l)?(h=Ks(t,l),i=Q0(i,h,s.snap)):Ha(l,t)&&(h=Ks(l,t),i=Q0(i,Sn(),s.snap.getChild(h)));else{if(!s.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(Ha(t,l))h=Ks(t,l),i=KP(i,h,s.children);else if(Ha(l,t))if(h=Ks(l,t),pn(h))i=KP(i,Sn(),s.children);else{const m=(0,te.DV)(s.children,mn(h));if(m){const y=m.getChild(ri(h));i=Q0(i,Sn(),y)}}}}}return i}function hz(n,e,t,i,r){if(i||r){const s=Ef(n.visibleWrites,e);return!r&&YP(s)?t:r||null!=t||ZP(s,Sn())?_y(uz(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Ha(y.path,e)||Ha(e,y.path))},e),t||on.EMPTY_NODE):null}{const s=Hp(n.visibleWrites,e);if(null!=s)return s;{const l=Ef(n.visibleWrites,e);return YP(l)?t:null!=t||ZP(l,Sn())?_y(l,t||on.EMPTY_NODE):null}}}function TT(n,e,t,i){return hz(n.writeTree,n.treePath,e,t,i)}function QP(n,e){return function GZ(n,e,t){let i=on.EMPTY_NODE;const r=Hp(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ui,(s,l)=>{i=i.updateImmediateChild(s,l)}),i;if(t){const s=Ef(n.visibleWrites,e);return t.forEachChild(ui,(l,h)=>{const m=_y(Ef(s,new Fn(l)),h);i=i.updateImmediateChild(l,m)}),cz(s).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return cz(Ef(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function fz(n,e,t,i){return function WZ(n,e,t,i,r){(0,te.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Ri(e,t);if(ZP(n.visibleWrites,s))return null;{const l=Ef(n.visibleWrites,s);return YP(l)?r.getChild(t):_y(l,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function DT(n,e){return function KZ(n,e){return Hp(n.visibleWrites,e)}(n.writeTree,Ri(n.treePath,e))}function XP(n,e,t){return function qZ(n,e,t,i){const r=Ri(e,t),s=Hp(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?_y(Ef(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function mz(n,e){return pz(Ri(n.treePath,e),n.writeTree)}function pz(n,e){return{treePath:n,writeTree:e}}class XZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,te.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,W0(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,function G0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,function my(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,te.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,W0(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const gz=new class JZ{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class JP{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new xf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return XP(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jp(this.viewCache_),s=function QZ(n,e,t,i,r,s){return function ZZ(n,e,t,i,r,s,l){let h;const m=Ef(n.visibleWrites,e),y=Hp(m,Sn());if(null!=y)h=y;else{if(null==t)return[];h=_y(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=l.getCompare(),k=s?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let B=k.getNext();for(;B&&C.length<r;)0!==D(B,i)&&C.push(B),B=k.getNext();return C}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function _z(n,e,t,i,r,s){const l=e.eventCache;if(null!=DT(i,t))return e;{let h,m;if(pn(t))if((0,te.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=jp(e),D=QP(i,y instanceof on?y:on.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=TT(i,jp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=mn(t);if(".priority"===y){(0,te.hu)(1===wf(t),"Can't have a priority with additional path components");const C=l.getNode();m=e.serverCache.getNode();const D=fz(i,t,C,m);h=null!=D?n.filter.updatePriority(C,D):l.getNode()}else{const C=ri(t);let D;if(l.isCompleteForChild(y)){m=e.serverCache.getNode();const k=fz(i,t,l.getNode(),m);D=null!=k?l.getNode().getImmediateChild(y).updateChild(C,k):l.getNode().getImmediateChild(y)}else D=XP(i,y,e.serverCache);h=null!=D?n.filter.updateChild(l.getNode(),y,D,C,r,s):l.getNode()}}return Y0(e,h,l.isFullyInitialized()||pn(t),n.filter.filtersNodes())}}function ST(n,e,t,i,r,s,l,h){const m=e.serverCache;let y;const C=l?n.filter:n.filter.getIndexedFilter();if(pn(t))y=C.updateFullNode(m.getNode(),i,null);else if(C.filtersNodes()&&!m.isFiltered()){const B=m.getNode().updateChild(t,i);y=C.updateFullNode(m.getNode(),B,null)}else{const B=mn(t);if(!m.isCompleteForPath(t)&&wf(t)>1)return e;const H=ri(t),ce=m.getNode().getImmediateChild(B).updateChild(H,i);y=".priority"===B?C.updatePriority(m.getNode(),ce):C.updateChild(m.getNode(),B,ce,H,gz,null)}const D=az(e,y,m.isFullyInitialized()||pn(t),C.filtersNodes());return _z(n,D,t,r,new JP(r,D,s),h)}function eN(n,e,t,i,r,s,l){const h=e.eventCache;let m,y;const C=new JP(r,e,s);if(pn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,l),m=Y0(e,y,!0,n.filter.filtersNodes());else{const D=mn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),i),m=Y0(e,y,h.isFullyInitialized(),h.isFiltered());else{const k=ri(t),B=h.getNode().getImmediateChild(D);let H;if(pn(k))H=i;else{const X=C.getCompleteChild(D);H=null!=X?".priority"===MP(k)&&X.getChild(qH(k)).isEmpty()?X:X.updateChild(k,i):on.EMPTY_NODE}m=B.equals(H)?e:Y0(e,n.filter.updateChild(h.getNode(),D,H,k,C,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function yz(n,e){return n.eventCache.isCompleteForChild(e)}function vz(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function tN(n,e,t,i,r,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=pn(t)?i:new hi(null).setTree(t,i);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,k)=>{if(C.hasChild(D)){const H=vz(0,e.serverCache.getNode().getImmediateChild(D),k);m=ST(n,m,new Fn(D),H,r,s,l,h)}}),y.children.inorderTraversal((D,k)=>{const B=!e.serverCache.isCompleteForChild(D)&&null===k.value;if(!C.hasChild(D)&&!B){const X=vz(0,e.serverCache.getNode().getImmediateChild(D),k);m=ST(n,m,new Fn(D),X,r,s,l,h)}}),m}function uY(n,e){const t=jp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!pn(e)&&!t.getImmediateChild(mn(e)).isEmpty())?t.getChild(e):null}function xz(n,e,t,i){e.type===za.MERGE&&null!==e.source.queryId&&((0,te.hu)(jp(n.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(CT(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function nY(n,e,t,i,r){const s=new XZ;let l,h;if(t.type===za.OVERWRITE){const y=t;y.source.fromUser?l=eN(n,e,y.path,y.snap,i,r,s):((0,te.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!pn(y.path),l=ST(n,e,y.path,y.snap,i,r,h,s))}else if(t.type===za.MERGE){const y=t;y.source.fromUser?l=function rY(n,e,t,i,r,s,l){let h=e;return i.foreach((m,y)=>{const C=Ri(t,m);yz(e,mn(C))&&(h=eN(n,h,C,y,r,s,l))}),i.foreach((m,y)=>{const C=Ri(t,m);yz(e,mn(C))||(h=eN(n,h,C,y,r,s,l))}),h}(n,e,y.path,y.children,i,r,s):((0,te.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=tN(n,e,y.path,y.children,i,r,h,s))}else if(t.type===za.ACK_USER_WRITE){const y=t;l=y.revert?function aY(n,e,t,i,r,s){let l;if(null!=DT(i,t))return e;{const h=new JP(i,e,r),m=e.eventCache.getNode();let y;if(pn(t)||".priority"===mn(t)){let C;if(e.serverCache.isFullyInitialized())C=TT(i,jp(e));else{const D=e.serverCache.getNode();(0,te.hu)(D instanceof on,"serverChildren would be complete if leaf node"),C=QP(i,D)}y=n.filter.updateFullNode(m,C,s)}else{const C=mn(t);let D=XP(i,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=m.getImmediateChild(C)),y=null!=D?n.filter.updateChild(m,C,D,ri(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,on.EMPTY_NODE,ri(t),h,s):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=TT(i,jp(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=DT(i,Sn()),Y0(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function sY(n,e,t,i,r,s,l){if(null!=DT(r,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=i.value){if(pn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return ST(n,e,t,m.getNode().getChild(t),r,s,h,l);if(pn(t)){let y=new hi(null);return m.getNode().forEachChild($c,(C,D)=>{y=y.set(new Fn(C),D)}),tN(n,e,t,y,r,s,h,l)}return e}{let y=new hi(null);return i.foreach((C,D)=>{const k=Ri(t,C);m.isCompleteForPath(k)&&(y=y.set(C,m.getNode().getChild(k)))}),tN(n,e,t,y,r,s,h,l)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==za.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+t.type);l=function oY(n,e,t,i,r){const s=e.serverCache;return _z(n,az(e,s.getNode(),s.isFullyInitialized()||pn(t),s.isFiltered()),t,i,gz,r)}(n,e,t.path,i,s)}const m=s.getChanges();return function iY(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=CT(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(function iz(n){return{type:"value",snapshotNode:n}}(CT(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,r,e,t,i);return function tY(n,e){(0,te.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,te.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,function Ez(n,e,t,i){return function NZ(n,e,t,i){const r=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function bZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Z0(n,r,"child_removed",e,i,t),Z0(n,r,"child_added",e,i,t),Z0(n,r,"child_moved",s,i,t),Z0(n,r,"child_changed",e,i,t),Z0(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}(n,s.changes,s.viewCache.eventCache.getNode(),null)}let AT,kT;function nN(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,te.hu)(null!=s,"SyncTree gave us an op for an invalid query."),xz(s,e,t,i)}{let s=[];for(const l of n.views.values())s=s.concat(xz(l,e,t,i));return s}}function Cf(n,e){let t=null;for(const i of n.views.values())t=t||uY(i,e);return t}class Az{constructor(e){this.listenProvider_=e,this.syncPointTree_=new hi(null),this.pendingWriteTree_=function YZ(){return{visibleWrites:Rl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iN(n,e,t,i,r){return function BZ(n,e,t,i,r){(0,te.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Q0(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?yy(n,new Up({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Tf(n,e,t=!1){const i=function UZ(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function jZ(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,te.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&HZ(h,i.path)?r=!1:Ha(i.path,h.path)&&(s=!0)),l--}return!!r&&(s?(function zZ(n){n.visibleWrites=uz(n.allWrites,$Z,Sn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=lz(n.visibleWrites,i.path):Yr(i.children,m=>{n.visibleWrites=lz(n.visibleWrites,Ri(i.path,m))}),!0))}(n.pendingWriteTree_,e)){let s=new hi(null);return null!=i.snap?s=s.set(Sn(),!0):Yr(i.children,l=>{s=s.set(new Fn(l),!0)}),yy(n,new xT(i.path,s,t))}return[]}function X0(n,e,t){return yy(n,new Up({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function PT(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=Cf(h,Ks(l,e));if(y)return y});return hz(r,e,s,t,!0)}function yy(n,e){return kz(e,n.syncPointTree_,null,IT(n.pendingWriteTree_,Sn()))}function kz(n,e,t,i){if(pn(n.path))return Rz(n,e,t,i);{const r=e.get(Sn());null==t&&null!=r&&(t=Cf(r,Sn()));let s=[];const l=mn(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const y=t?t.getImmediateChild(l):null,C=mz(i,l);s=s.concat(kz(h,m,y,C))}return r&&(s=s.concat(nN(r,n,i,t))),s}}function Rz(n,e,t,i){const r=e.get(Sn());null==t&&null!=r&&(t=Cf(r,Sn()));let s=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,y=mz(i,l),C=n.operationForChild(l);C&&(s=s.concat(Rz(C,h,m,y)))}),r&&(s=s.concat(nN(r,n,i,t))),s}function sN(n,e){return n.tagToQueryMap.get(e)}function oN(n){const e=n.indexOf("$");return(0,te.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Fn(n.substr(0,e))}}function aN(n,e,t){const i=n.syncPointTree_.get(e);return(0,te.hu)(i,"Missing sync point for query tag that we're tracking"),nN(i,t,IT(n.pendingWriteTree_,e),null)}class lN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lN(t)}node(){return this.node_}}class cN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ri(this.path_,e);return new cN(this.syncTree_,t)}node(){return PT(this.syncTree_,this.path_)}}const RY=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Nz=function(n,e,t){return n&&"object"==typeof n?((0,te.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?PY(n[".sv"],e,t):"object"==typeof n[".sv"]?NY(n[".sv"],e):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},PY=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,te.hu)(!1,"Unexpected server value: "+n)},NY=function(n,e,t){n.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,te.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,te.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return"number"!=typeof l?i:l+i},Oz=function(n,e,t,i){return uN(e,new cN(t,n),i)},dN=function(n,e,t){return uN(n,new lN(e),t)};function uN(n,e,t){const i=n.getPriority().val(),r=Nz(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=Nz(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new hy(h,Ui(r)):n}{const l=n;return s=l,r!==l.getPriority().val()&&(s=s.updatePriority(new hy(r))),l.forEachChild(ui,(h,m)=>{const y=uN(m,e.getImmediateChild(h),t);y!==m&&(s=s.updateImmediateChild(h,y))}),s}}class hN{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function OT(n,e){let t=e instanceof Fn?e:new Fn(e),i=n,r=mn(t);for(;null!==r;){const s=(0,te.DV)(i.node.children,r)||{children:{},childCount:0};i=new hN(r,i,s),t=ri(t),r=mn(t)}return i}function zp(n){return n.node.value}function fN(n,e){n.node.value=e,mN(n)}function Fz(n){return n.node.childCount>0}function FT(n,e){Yr(n.node.children,(t,i)=>{e(new hN(t,n,i))})}function Lz(n,e,t,i){t&&!i&&e(n),FT(n,r=>{Lz(r,e,!0,i)}),t&&i&&e(n)}function tw(n){return new Fn(null===n.parent?n.name:tw(n.parent)+"/"+n.name)}function mN(n){null!==n.parent&&function LY(n,e,t){const i=function OY(n){return void 0===zp(n)&&!Fz(n)}(t),r=(0,te.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,mN(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,mN(n))}(n.parent,n.name,n)}const BY=/[\[\].#$\/\u0000-\u001F\u007F]/,VY=/[\[\].#$\u0000-\u001F\u007F]/,pN=10485760,LT=function(n){return"string"==typeof n&&0!==n.length&&!BY.test(n)},iw=function(n,e,t){const i=t instanceof Fn?new nZ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Bp(i));if("function"==typeof e)throw new Error(n+"contains a function "+Bp(i)+" with contents = "+e.toString());if(uT(e))throw new Error(n+"contains "+e.toString()+" "+Bp(i));if("string"==typeof e&&e.length>pN/3&&(0,te.ug)(e)>pN)throw new Error(n+"contains a string greater than "+pN+" utf8 bytes "+Bp(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Yr(e,(l,h)=>{if(".value"===l)r=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!LT(l)))throw new Error(n+" contains an invalid key ("+l+") "+Bp(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function iZ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,te.ug)(e),KH(n)})(i,l),iw(n,h,i),function rZ(n){const e=n.parts_.pop();n.byteLength_-=(0,te.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Bp(i)+" in addition to actual children.")}},Uz=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!LT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!VY.test(n)}(n)}(t))throw new Error((0,te.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class zY{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function na(n,e,t){(function BT(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!kP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)})(n,t),function Hz(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?($Y(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,i=>Ha(i,e)||Ha(e,i))}function $Y(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Fp&&Zr("event: "+t.toString()),dy(i)}}}const zz="repo_interrupt",GY=25;class WY{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zY,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wT(),this.transactionQueueTree_=new hN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $z(n){const t=n.infoData_.getNode(new Fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sw(n){return RY({timestamp:$z(n)})}function Gz(n,e,t,i,r){n.dataUpdateCount++;const s=new Fn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const m=(0,te.UI)(t,y=>Ui(y));l=function TY(n,e,t,i){const r=sN(n,i);if(r){const s=oN(r),l=s.path,h=s.queryId,m=Ks(l,e),y=hi.fromObject(t);return aN(n,l,new gy(WP(h),m,y))}return[]}(n.serverSyncTree_,s,m,r)}else{const m=Ui(t);l=function Mz(n,e,t,i){const r=sN(n,i);if(null!=r){const s=oN(r),l=s.path,h=s.queryId,m=Ks(l,e);return aN(n,l,new Up(WP(h),m,t))}return[]}(n.serverSyncTree_,s,m,r)}else if(i){const m=(0,te.UI)(t,y=>Ui(y));l=function EY(n,e,t){const i=hi.fromObject(t);return yy(n,new gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,m)}else{const m=Ui(t);l=X0(n.serverSyncTree_,s,m)}let h=s;l.length>0&&(h=by(n,s)),na(n.eventQueue_,h,l)}function Wz(n,e){yN(n,"connected",e),!1===e&&function QY(n){vy(n,"onDisconnectEvents");const e=sw(n),t=wT();zP(n.onDisconnect_,Sn(),(r,s)=>{const l=Oz(r,s,n.serverSyncTree_,e);py(t,r,l)});let i=[];zP(t,Sn(),(r,s)=>{i=i.concat(X0(n.serverSyncTree_,r,s));const l=function xN(n,e){const t=tw(Zz(n,e)),i=OT(n.transactionQueueTree_,e);return function FY(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{EN(n,r)}),EN(n,i),Lz(i,r=>{EN(n,r)}),t}(n,r);by(n,l)}),n.onDisconnect_=wT(),na(n.eventQueue_,Sn(),i)}(n)}function yN(n,e,t){const i=new Fn("/.info/"+e),r=Ui(t);n.infoData_.updateSnapshot(i,r);const s=X0(n.infoSyncTree_,i,r);na(n.eventQueue_,i,s)}function VT(n){return n.nextWriteId_++}function vy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zr(t,...e)}function wN(n,e,t){return PT(n.serverSyncTree_,e,t)||on.EMPTY_NODE}function UT(n,e=n.transactionQueueTree_){if(e||jT(n,e),zp(e)){const t=Yz(n,e);(0,te.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function rQ(n,e,t){const i=t.map(y=>y.currentWriteId),r=wN(n,e,i);let s=r;const l=r.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,te.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Ks(e,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const h=s.val(!0),m=e;n.server_.put(m.toString(),h,y=>{vy(n,"transaction put response",{path:m.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let k=0;k<t.length;k++)t[k].status=2,C=C.concat(Tf(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&D.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();jT(n,OT(n.transactionQueueTree_,e)),UT(n,n.transactionQueueTree_),na(n.eventQueue_,e,C);for(let k=0;k<D.length;k++)dy(D[k])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Is("transaction at "+m.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}by(n,e)}},l)}(n,tw(e),t)}else Fz(e)&&FT(e,t=>{UT(n,t)})}function by(n,e){const t=Zz(n,e),i=tw(t);return function sQ(n,e,t){if(0===e.length)return;const i=[];let r=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=Ks(t,m.path);let D,C=!1;if((0,te.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,D=m.abortReason,r=r.concat(Tf(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=GY)C=!0,D="maxretry",r=r.concat(Tf(n.serverSyncTree_,m.currentWriteId,!0));else{const k=wN(n,m.path,l);m.currentInputSnapshot=k;const B=e[h].update(k.val());if(void 0!==B){iw("transaction failed: Data returned ",B,m.path);let H=Ui(B);"object"==typeof B&&null!=B&&(0,te.r3)(B,".priority")||(H=H.updatePriority(k.getPriority()));const ce=m.currentWriteId,Ne=sw(n),Ke=dN(H,k,Ne);m.currentOutputSnapshotRaw=H,m.currentOutputSnapshotResolved=Ke,m.currentWriteId=VT(n),l.splice(l.indexOf(ce),1),r=r.concat(iN(n.serverSyncTree_,m.path,Ke,m.currentWriteId,m.applyLocally)),r=r.concat(Tf(n.serverSyncTree_,ce,!0))}else C=!0,D="nodata",r=r.concat(Tf(n.serverSyncTree_,m.currentWriteId,!0))}na(n.eventQueue_,t,r),r=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&i.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}jT(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)dy(i[h]);UT(n,n.transactionQueueTree_)}(n,Yz(n,t),i),i}function Zz(n,e){let t,i=n.transactionQueueTree_;for(t=mn(e);null!==t&&void 0===zp(i);)i=OT(i,t),t=mn(e=ri(e));return i}function Yz(n,e){const t=[];return Qz(n,e,t),t.sort((i,r)=>i.order-r.order),t}function Qz(n,e,t){const i=zp(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);FT(e,r=>{Qz(n,r,t)})}function jT(n,e){const t=zp(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,fN(e,t.length>0?t:void 0)}FT(e,i=>{jT(n,i)})}function EN(n,e){const t=zp(e);if(t){const i=[];let r=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,te.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,te.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Tf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?fN(e,void 0):t.length=s+1,na(n.eventQueue_,tw(e),r);for(let l=0;l<i.length;l++)dy(i[l])}}const CN=function(n,e){const t=lQ(n),i=t.namespace;return"firebase.com"===t.domain&&zc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&zc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Is("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new CP(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Fn(t.pathString)}},lQ=function(n){let e="",t="",i="",r="",s="",l=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(r=function oQ(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(C,D)));const k=function aQ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Is(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const B=e.slice(0,y);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const H=e.indexOf(".");i=e.substring(0,H).toLowerCase(),t=e.substring(H+1),s=i}"ns"in k&&(s=k.ns)}return{host:e,port:m,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:s}};class ia{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return pn(this._path)?null:MP(this._path)}get ref(){return new Pl(this._repo,this._path)}get _queryIdentifier(){const e=sz(this._queryParams),t=xP(e);return"{}"===t?"default":t}get _queryObject(){return sz(this._queryParams)}isEqual(e){if(!((e=(0,te.m9)(e))instanceof ia))return!1;const t=this._repo===e._repo,i=kP(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function eZ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Pl extends ia{constructor(e,t){super(e,t,new VP,!1)}get parent(){const e=qH(this._path);return null===e?null:new Pl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function mY(n){(0,te.hu)(!AT,"__referenceConstructor has already been defined"),AT=n})(Pl),function vY(n){(0,te.hu)(!kT,"__referenceConstructor has already been defined"),kT=n}(Pl);const xQ="FIREBASE_DATABASE_EMULATOR_HOST",TN={};let r$=!1;class SQ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function qY(n,e,t){if(n.stats_=DP(n.repoInfo_),n.forceRestClient_||DK())n.server_=new bT(n.repoInfo_,(i,r,s,l)=>{Gz(n,i,r,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Wz(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Vp(n.repoInfo_,e,(i,r,s,l)=>{Gz(n,i,r,s,l)},i=>{Wz(n,i)},i=>{!function KY(n,e){Yr(e,(t,i)=>{yN(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function RK(n,e){const t=n.toString();return TP[t]||(TP[t]=e()),TP[t]}(n.repoInfo_,()=>new RZ(n.stats_,n.server_)),n.infoData_=new DZ,n.infoSyncTree_=new Az({startListening:(i,r,s,l)=>{let h=[];const m=n.infoData_.getNode(i._path);return m.isEmpty()||(h=X0(n.infoSyncTree_,i._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),yN(n,"connected",!1),n.serverSyncTree_=new Az({startListening:(i,r,s,l)=>(n.server_.listen(i,s,r,(h,m)=>{const y=l(h,m);na(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pl(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function IQ(n,e){const t=TN[e];(!t||t[n.key]!==n)&&zc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function Kz(n){n.persistentConnection_&&n.persistentConnection_.interrupt(zz)}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zc("Cannot call "+e+" on a deleted database.")}}function AQ(n=(0,$r.getApp)(),e){const t=(0,$r._getProvider)(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=(0,te.P0)("database");i&&function MQ(n,e,t,i={}){(n=(0,te.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zc("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&zc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new U0(U0.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,te.Sg)(i.mockUserToken,n.app.options.projectId);s=new U0(l)}!function EQ(n,e,t,i){n.repoInfo_=new CP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(t,...i)}return t}Vp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Vp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function kQ(n){(function pK(n){vP=n})($r.SDK_VERSION),(0,$r._registerComponent)(new Qm.wA("database",(e,{instanceIdentifier:t})=>function CQ(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||zc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,l=CN(s,r),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env[xQ]),y?(m=!0,s=`http://${y}?ns=${h.namespace}`,l=CN(s,r),h=l.repoInfo):m=!l.repoInfo.secure;const C=r&&m?new U0(U0.OWNER):new AK(n.name,n.options,e);Uz("Invalid Firebase Database URL",l),pn(l.path)||zc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function TQ(n,e,t,i){let r=TN[e.name];r||(r={},TN[e.name]=r);let s=r[n.toURLString()];return s&&zc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new WY(n,r$,t,i),r[n.toURLString()]=s,s}(h,n,C,new SK(n.name,t));return new SQ(D,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$r.registerVersion)(cH,"0.14.4",n),(0,$r.registerVersion)(cH,"0.14.4","esm2017")}();class DN{constructor(e){return e}}const o$="database",SN=new d.OlP("angularfire2.database-instances");function FQ(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new DN(i)}}const LQ={provide:class NQ{constructor(){return(0,bn.vb)(o$)}},deps:[[new d.FiY,SN]]},BQ={provide:DN,useFactory:function OQ(n,e){const t=(0,bn.JM)(o$,n,e);return t&&new DN(t)},deps:[[new d.FiY,SN],kp]};let VQ=(()=>{class n{constructor(){(0,uu.KN)("angularfire",bn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[BQ,LQ]}),n})();function UQ(n,...e){return{ngModule:VQ,providers:[{provide:SN,useFactory:FQ(n),multi:!0,deps:[d.R0b,d.zs3,bn.HU,FI,[new d.FiY,_P],[new d.FiY,ay],...e]}]}}const jQ=(0,bn.u3)(AQ,!0);class AN{constructor(e){return e}}const a$="firestore",MN=new d.OlP("angularfire2.firestore-instances");function $Q(n){return(e,t)=>{const i=e.runOutsideAngular(()=>n(t));return new AN(i)}}const GQ={provide:class HQ{constructor(){return(0,bn.vb)(a$)}},deps:[[new d.FiY,MN]]},WQ={provide:AN,useFactory:function zQ(n,e){const t=(0,bn.JM)(a$,n,e);return t&&new AN(t)},deps:[[new d.FiY,MN],kp]};let qQ=(()=>{class n{constructor(){(0,uu.KN)("angularfire",bn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[WQ,GQ]}),n})();function KQ(n,...e){return{ngModule:qQ,providers:[{provide:MN,useFactory:$Q(n),multi:!0,deps:[d.R0b,d.zs3,bn.HU,FI,[new d.FiY,_P],[new d.FiY,ay],...e]}]}}const ZQ=(0,bn.u3)(w5,!0);let YQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[lb,o_]}),n})(),QQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[jF]}),n.\u0275inj=d.cJS({imports:[No,a9,oK,Pt,BG(()=>VG(pP_firebase)),fK(()=>mK()),UQ(()=>jQ()),KQ(()=>ZQ()),Zo.hO.initializeApp(pP_firebase),fm,YQ]}),n})();jf().bootstrapModule(QQ).catch(n=>console.error(n))},9751:(wt,Me,V)=>{V.d(Me,{y:()=>ve});var d=V(930),$=V(727),O=V(8822),re=V(9635),de=V(2416),oe=V(576),xe=V(2806);let ve=(()=>{class ee{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const qe=new ee;return qe.source=this,qe.operator=Se,qe}subscribe(Se,qe,at){const be=function W(ee){return ee&&ee instanceof d.Lv||function q(ee){return ee&&(0,oe.m)(ee.next)&&(0,oe.m)(ee.error)&&(0,oe.m)(ee.complete)}(ee)&&(0,$.Nn)(ee)}(Se)?Se:new d.Hp(Se,qe,at);return(0,xe.x)(()=>{const{operator:Re,source:Oe}=this;be.add(Re?Re.call(be,Oe):Oe?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Se){try{return this._subscribe(Se)}catch(qe){Se.error(qe)}}forEach(Se,qe){return new(qe=we(qe))((at,be)=>{const Re=new d.Hp({next:Oe=>{try{Se(Oe)}catch(je){be(je),Re.unsubscribe()}},error:be,complete:at});this.subscribe(Re)})}_subscribe(Se){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Se)}[O.L](){return this}pipe(...Se){return(0,re.U)(Se)(this)}toPromise(Se){return new(Se=we(Se))((qe,at)=>{let be;this.subscribe(Re=>be=Re,Re=>at(Re),()=>qe(be))})}}return ee.create=He=>new ee(He),ee})();function we(ee){var He;return null!==(He=ee??de.v.Promise)&&void 0!==He?He:Promise}},7579:(wt,Me,V)=>{V.d(Me,{x:()=>xe});var d=V(9751),$=V(727);const re=(0,V(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=V(8737),oe=V(2806);let xe=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const ee=new ve(this,this);return ee.operator=W,ee}_throwIfClosed(){if(this.closed)throw new re}next(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(W)}})}error(W){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:ee}=this;for(;ee.length;)ee.shift().error(W)}})}complete(){(0,oe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:ee,isStopped:He,observers:Se}=this;return ee||He?$.Lc:(this.currentObservers=null,Se.push(W),new $.w0(()=>{this.currentObservers=null,(0,de.P)(Se,W)}))}_checkFinalizedStatuses(W){const{hasError:ee,thrownError:He,isStopped:Se}=this;ee?W.error(He):Se&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return we.create=(q,W)=>new ve(q,W),we})();class ve extends xe{constructor(q,W){super(),this.destination=q,this.source=W}next(q){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===ee||ee.call(W,q)}error(q){var W,ee;null===(ee=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===ee||ee.call(W,q)}complete(){var q,W;null===(W=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===W||W.call(q)}_subscribe(q){var W,ee;return null!==(ee=null===(W=this.source)||void 0===W?void 0:W.subscribe(q))&&void 0!==ee?ee:$.Lc}}},930:(wt,Me,V)=>{V.d(Me,{Hp:()=>at,Lv:()=>ee});var d=V(576),$=V(727),O=V(2416),re=V(7849),de=V(5032);const oe=we("C",void 0,void 0);function we(De,Te,Pe){return{kind:De,value:Te,error:Pe}}var q=V(3410),W=V(2806);class ee extends $.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,$.Nn)(Te)&&Te.add(this)):this.destination=je}static create(Te,Pe,ze){return new at(Te,Pe,ze)}next(Te){this.isStopped?Oe(function ve(De){return we("N",De,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?Oe(function xe(De){return we("E",void 0,De)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?Oe(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Se(De,Te){return He.call(De,Te)}class qe{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Pe}=this;if(Pe.next)try{Pe.next(Te)}catch(ze){be(ze)}}error(Te){const{partialObserver:Pe}=this;if(Pe.error)try{Pe.error(Te)}catch(ze){be(ze)}else be(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Pe){be(Pe)}}}class at extends ee{constructor(Te,Pe,ze){let Le;if(super(),(0,d.m)(Te)||!Te)Le={next:Te??void 0,error:Pe??void 0,complete:ze??void 0};else{let le;this&&O.v.useDeprecatedNextContext?(le=Object.create(Te),le.unsubscribe=()=>this.unsubscribe(),Le={next:Te.next&&Se(Te.next,le),error:Te.error&&Se(Te.error,le),complete:Te.complete&&Se(Te.complete,le)}):Le=Te}this.destination=new qe(Le)}}function be(De){O.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(De):(0,re.h)(De)}function Oe(De,Te){const{onStoppedNotification:Pe}=O.v;Pe&&q.z.setTimeout(()=>Pe(De,Te))}const je={closed:!0,next:de.Z,error:function Re(De){throw De},complete:de.Z}},727:(wt,Me,V)=>{V.d(Me,{Lc:()=>oe,w0:()=>de,Nn:()=>xe});var d=V(576);const O=(0,V(3888).d)(we=>function(W){we(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((ee,He)=>`${He+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var re=V(8737);class de{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Se of W)Se.remove(this);else W.remove(this);const{initialTeardown:ee}=this;if((0,d.m)(ee))try{ee()}catch(Se){q=Se instanceof O?Se.errors:[Se]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Se of He)try{ve(Se)}catch(qe){q=q??[],qe instanceof O?q=[...q,...qe.errors]:q.push(qe)}}if(q)throw new O(q)}}add(q){var W;if(q&&q!==this)if(this.closed)ve(q);else{if(q instanceof de){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(q)}}_hasParent(q){const{_parentage:W}=this;return W===q||Array.isArray(W)&&W.includes(q)}_addParent(q){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(q),W):W?[W,q]:q}_removeParent(q){const{_parentage:W}=this;W===q?this._parentage=null:Array.isArray(W)&&(0,re.P)(W,q)}remove(q){const{_finalizers:W}=this;W&&(0,re.P)(W,q),q instanceof de&&q._removeParent(this)}}de.EMPTY=(()=>{const we=new de;return we.closed=!0,we})();const oe=de.EMPTY;function xe(we){return we instanceof de||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function ve(we){(0,d.m)(we)?we():we.unsubscribe()}},2416:(wt,Me,V)=>{V.d(Me,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,Me,V)=>{V.d(Me,{E:()=>$});const $=new(V(9751).y)(de=>de.complete())},8996:(wt,Me,V)=>{V.d(Me,{D:()=>Te});var d=V(8421),$=V(5363),O=V(9468),oe=V(9751),ve=V(2202),we=V(576),q=V(9672);function ee(Pe,ze){if(!Pe)throw new Error("Iterable cannot be null");return new oe.y(Le=>{(0,q.f)(Le,ze,()=>{const le=Pe[Symbol.asyncIterator]();(0,q.f)(Le,ze,()=>{le.next().then(it=>{it.done?Le.complete():Le.next(it.value)})},0,!0)})})}var He=V(3670),Se=V(8239),qe=V(1144),at=V(6495),be=V(2206),Re=V(4532),Oe=V(3260);function Te(Pe,ze){return ze?function De(Pe,ze){if(null!=Pe){if((0,He.c)(Pe))return function re(Pe,ze){return(0,d.Xf)(Pe).pipe((0,O.R)(ze),(0,$.Q)(ze))}(Pe,ze);if((0,qe.z)(Pe))return function xe(Pe,ze){return new oe.y(Le=>{let le=0;return ze.schedule(function(){le===Pe.length?Le.complete():(Le.next(Pe[le++]),Le.closed||this.schedule())})})}(Pe,ze);if((0,Se.t)(Pe))return function de(Pe,ze){return(0,d.Xf)(Pe).pipe((0,O.R)(ze),(0,$.Q)(ze))}(Pe,ze);if((0,be.D)(Pe))return ee(Pe,ze);if((0,at.T)(Pe))return function W(Pe,ze){return new oe.y(Le=>{let le;return(0,q.f)(Le,ze,()=>{le=Pe[ve.h](),(0,q.f)(Le,ze,()=>{let it,Dt;try{({value:it,done:Dt}=le.next())}catch(ot){return void Le.error(ot)}Dt?Le.complete():Le.next(it)},0,!0)}),()=>(0,we.m)(le?.return)&&le.return()})}(Pe,ze);if((0,Oe.L)(Pe))return function je(Pe,ze){return ee((0,Oe.Q)(Pe),ze)}(Pe,ze)}throw(0,Re.z)(Pe)}(Pe,ze):(0,d.Xf)(Pe)}},8421:(wt,Me,V)=>{V.d(Me,{Xf:()=>He});var d=V(7582),$=V(1144),O=V(8239),re=V(9751),de=V(3670),oe=V(2206),xe=V(4532),ve=V(6495),we=V(3260),q=V(576),W=V(7849),ee=V(8822);function He(De){if(De instanceof re.y)return De;if(null!=De){if((0,de.c)(De))return function Se(De){return new re.y(Te=>{const Pe=De[ee.L]();if((0,q.m)(Pe.subscribe))return Pe.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,$.z)(De))return function qe(De){return new re.y(Te=>{for(let Pe=0;Pe<De.length&&!Te.closed;Pe++)Te.next(De[Pe]);Te.complete()})}(De);if((0,O.t)(De))return function at(De){return new re.y(Te=>{De.then(Pe=>{Te.closed||(Te.next(Pe),Te.complete())},Pe=>Te.error(Pe)).then(null,W.h)})}(De);if((0,oe.D)(De))return Re(De);if((0,ve.T)(De))return function be(De){return new re.y(Te=>{for(const Pe of De)if(Te.next(Pe),Te.closed)return;Te.complete()})}(De);if((0,we.L)(De))return function Oe(De){return Re((0,we.Q)(De))}(De)}throw(0,xe.z)(De)}function Re(De){return new re.y(Te=>{(function je(De,Te){var Pe,ze,Le,le;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Pe=(0,d.KL)(De);!(ze=yield Pe.next()).done;)if(Te.next(ze.value),Te.closed)return}catch(it){Le={error:it}}finally{try{ze&&!ze.done&&(le=Pe.return)&&(yield le.call(Pe))}finally{if(Le)throw Le.error}}Te.complete()})})(De,Te).catch(Pe=>Te.error(Pe))})}},6451:(wt,Me,V)=>{V.d(Me,{T:()=>oe});var d=V(8189),$=V(8421),O=V(515),re=V(7669),de=V(8996);function oe(...xe){const ve=(0,re.yG)(xe),we=(0,re._6)(xe,1/0),q=xe;return q.length?1===q.length?(0,$.Xf)(q[0]):(0,d.J)(we)((0,de.D)(q,ve)):O.E}},5403:(wt,Me,V)=>{V.d(Me,{x:()=>$});var d=V(930);function $(re,de,oe,xe,ve){return new O(re,de,oe,xe,ve)}class O extends d.Lv{constructor(de,oe,xe,ve,we,q){super(de),this.onFinalize=we,this.shouldUnsubscribe=q,this._next=oe?function(W){try{oe(W)}catch(ee){de.error(ee)}}:super._next,this._error=ve?function(W){try{ve(W)}catch(ee){de.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch(W){de.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(wt,Me,V)=>{V.d(Me,{U:()=>O});var d=V(4482),$=V(5403);function O(re,de){return(0,d.e)((oe,xe)=>{let ve=0;oe.subscribe((0,$.x)(xe,we=>{xe.next(re.call(de,we,ve++))}))})}},8189:(wt,Me,V)=>{V.d(Me,{J:()=>O});var d=V(5577),$=V(4671);function O(re=1/0){return(0,d.z)($.y,re)}},5577:(wt,Me,V)=>{V.d(Me,{z:()=>ve});var d=V(4004),$=V(8421),O=V(4482),re=V(9672),de=V(5403),xe=V(576);function ve(we,q,W=1/0){return(0,xe.m)(q)?ve((ee,He)=>(0,d.U)((Se,qe)=>q(ee,Se,He,qe))((0,$.Xf)(we(ee,He))),W):("number"==typeof q&&(W=q),(0,O.e)((ee,He)=>function oe(we,q,W,ee,He,Se,qe,at){const be=[];let Re=0,Oe=0,je=!1;const De=()=>{je&&!be.length&&!Re&&q.complete()},Te=ze=>Re<ee?Pe(ze):be.push(ze),Pe=ze=>{Se&&q.next(ze),Re++;let Le=!1;(0,$.Xf)(W(ze,Oe++)).subscribe((0,de.x)(q,le=>{He?.(le),Se?Te(le):q.next(le)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Re--;be.length&&Re<ee;){const le=be.shift();qe?(0,re.f)(q,qe,()=>Pe(le)):Pe(le)}De()}catch(le){q.error(le)}}))};return we.subscribe((0,de.x)(q,Te,()=>{je=!0,De()})),()=>{at?.()}}(ee,He,we,W)))}},5363:(wt,Me,V)=>{V.d(Me,{Q:()=>re});var d=V(9672),$=V(4482),O=V(5403);function re(de,oe=0){return(0,$.e)((xe,ve)=>{xe.subscribe((0,O.x)(ve,we=>(0,d.f)(ve,de,()=>ve.next(we),oe),()=>(0,d.f)(ve,de,()=>ve.complete(),oe),we=>(0,d.f)(ve,de,()=>ve.error(we),oe)))})}},3099:(wt,Me,V)=>{V.d(Me,{B:()=>de});var d=V(8421),$=V(7579),O=V(930),re=V(4482);function de(xe={}){const{connector:ve=(()=>new $.x),resetOnError:we=!0,resetOnComplete:q=!0,resetOnRefCountZero:W=!0}=xe;return ee=>{let He,Se,qe,at=0,be=!1,Re=!1;const Oe=()=>{Se?.unsubscribe(),Se=void 0},je=()=>{Oe(),He=qe=void 0,be=Re=!1},De=()=>{const Te=He;je(),Te?.unsubscribe()};return(0,re.e)((Te,Pe)=>{at++,!Re&&!be&&Oe();const ze=qe=qe??ve();Pe.add(()=>{at--,0===at&&!Re&&!be&&(Se=oe(De,W))}),ze.subscribe(Pe),!He&&at>0&&(He=new O.Hp({next:Le=>ze.next(Le),error:Le=>{Re=!0,Oe(),Se=oe(je,we,Le),ze.error(Le)},complete:()=>{be=!0,Oe(),Se=oe(je,q),ze.complete()}}),(0,d.Xf)(Te).subscribe(He))})(ee)}}function oe(xe,ve,...we){if(!0===ve)return void xe();if(!1===ve)return;const q=new O.Hp({next:()=>{q.unsubscribe(),xe()}});return(0,d.Xf)(ve(...we)).subscribe(q)}},9468:(wt,Me,V)=>{V.d(Me,{R:()=>$});var d=V(4482);function $(O,re=0){return(0,d.e)((de,oe)=>{oe.add(O.schedule(()=>de.subscribe(oe),re))})}},8505:(wt,Me,V)=>{V.d(Me,{b:()=>de});var d=V(576),$=V(4482),O=V(5403),re=V(4671);function de(oe,xe,ve){const we=(0,d.m)(oe)||xe||ve?{next:oe,error:xe,complete:ve}:oe;return we?(0,$.e)((q,W)=>{var ee;null===(ee=we.subscribe)||void 0===ee||ee.call(we);let He=!0;q.subscribe((0,O.x)(W,Se=>{var qe;null===(qe=we.next)||void 0===qe||qe.call(we,Se),W.next(Se)},()=>{var Se;He=!1,null===(Se=we.complete)||void 0===Se||Se.call(we),W.complete()},Se=>{var qe;He=!1,null===(qe=we.error)||void 0===qe||qe.call(we,Se),W.error(Se)},()=>{var Se,qe;He&&(null===(Se=we.unsubscribe)||void 0===Se||Se.call(we)),null===(qe=we.finalize)||void 0===qe||qe.call(we)}))}):re.y}},4408:(wt,Me,V)=>{V.d(Me,{o:()=>de});var d=V(727);class $ extends d.w0{constructor(xe,ve){super()}schedule(xe,ve=0){return this}}const O={setInterval(oe,xe,...ve){const{delegate:we}=O;return we?.setInterval?we.setInterval(oe,xe,...ve):setInterval(oe,xe,...ve)},clearInterval(oe){const{delegate:xe}=O;return(xe?.clearInterval||clearInterval)(oe)},delegate:void 0};var re=V(8737);class de extends ${constructor(xe,ve){super(xe,ve),this.scheduler=xe,this.work=ve,this.pending=!1}schedule(xe,ve=0){var we;if(this.closed)return this;this.state=xe;const q=this.id,W=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(W,q,ve)),this.pending=!0,this.delay=ve,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(W,this.id,ve),this}requestAsyncId(xe,ve,we=0){return O.setInterval(xe.flush.bind(xe,this),we)}recycleAsyncId(xe,ve,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(xe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(xe,ve);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(xe,ve){let q,we=!1;try{this.work(xe)}catch(W){we=!0,q=W||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:xe,scheduler:ve}=this,{actions:we}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(we,this),null!=xe&&(this.id=this.recycleAsyncId(ve,xe,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Me,V)=>{V.d(Me,{v:()=>O});var d=V(6063);class ${constructor(de,oe=$.now){this.schedulerActionCtor=de,this.now=oe}schedule(de,oe=0,xe){return new this.schedulerActionCtor(this,de).schedule(xe,oe)}}$.now=d.l.now;class O extends ${constructor(de,oe=$.now){super(de,oe),this.actions=[],this._active=!1}flush(de){const{actions:oe}=this;if(this._active)return void oe.push(de);let xe;this._active=!0;do{if(xe=de.execute(de.state,de.delay))break}while(de=oe.shift());if(this._active=!1,xe){for(;de=oe.shift();)de.unsubscribe();throw xe}}}},4986:(wt,Me,V)=>{V.d(Me,{z:()=>O});var d=V(4408);const O=new(V(7565).v)(d.o)},6063:(wt,Me,V)=>{V.d(Me,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(wt,Me,V)=>{V.d(Me,{z:()=>d});const d={setTimeout($,O,...re){const{delegate:de}=d;return de?.setTimeout?de.setTimeout($,O,...re):setTimeout($,O,...re)},clearTimeout($){const{delegate:O}=d;return(O?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(wt,Me,V)=>{V.d(Me,{h:()=>$});const $=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Me,V)=>{V.d(Me,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,Me,V)=>{V.d(Me,{_6:()=>oe,jO:()=>re,yG:()=>de});var d=V(576);function O(xe){return xe[xe.length-1]}function re(xe){return(0,d.m)(O(xe))?xe.pop():void 0}function de(xe){return function $(xe){return xe&&(0,d.m)(xe.schedule)}(O(xe))?xe.pop():void 0}function oe(xe,ve){return"number"==typeof O(xe)?xe.pop():ve}},8737:(wt,Me,V)=>{function d($,O){if($){const re=$.indexOf(O);0<=re&&$.splice(re,1)}}V.d(Me,{P:()=>d})},3888:(wt,Me,V)=>{function d($){const re=$(de=>{Error.call(de),de.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}V.d(Me,{d:()=>d})},2806:(wt,Me,V)=>{V.d(Me,{O:()=>re,x:()=>O});var d=V(2416);let $=null;function O(de){if(d.v.useDeprecatedSynchronousErrorHandling){const oe=!$;if(oe&&($={errorThrown:!1,error:null}),de(),oe){const{errorThrown:xe,error:ve}=$;if($=null,xe)throw ve}}else de()}function re(de){d.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=de)}},9672:(wt,Me,V)=>{function d($,O,re,de=0,oe=!1){const xe=O.schedule(function(){re(),oe?$.add(this.schedule(null,de)):this.unsubscribe()},de);if($.add(xe),!oe)return xe}V.d(Me,{f:()=>d})},4671:(wt,Me,V)=>{function d($){return $}V.d(Me,{y:()=>d})},1144:(wt,Me,V)=>{V.d(Me,{z:()=>d});const d=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(wt,Me,V)=>{V.d(Me,{D:()=>$});var d=V(576);function $(O){return Symbol.asyncIterator&&(0,d.m)(O?.[Symbol.asyncIterator])}},576:(wt,Me,V)=>{function d($){return"function"==typeof $}V.d(Me,{m:()=>d})},3670:(wt,Me,V)=>{V.d(Me,{c:()=>O});var d=V(8822),$=V(576);function O(re){return(0,$.m)(re[d.L])}},6495:(wt,Me,V)=>{V.d(Me,{T:()=>O});var d=V(2202),$=V(576);function O(re){return(0,$.m)(re?.[d.h])}},8239:(wt,Me,V)=>{V.d(Me,{t:()=>$});var d=V(576);function $(O){return(0,d.m)(O?.then)}},3260:(wt,Me,V)=>{V.d(Me,{L:()=>re,Q:()=>O});var d=V(7582),$=V(576);function O(de){return(0,d.FC)(this,arguments,function*(){const xe=de.getReader();try{for(;;){const{value:ve,done:we}=yield(0,d.qq)(xe.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ve)}}finally{xe.releaseLock()}})}function re(de){return(0,$.m)(de?.getReader)}},4482:(wt,Me,V)=>{V.d(Me,{A:()=>$,e:()=>O});var d=V(576);function $(re){return(0,d.m)(re?.lift)}function O(re){return de=>{if($(de))return de.lift(function(oe){try{return re(oe,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,Me,V)=>{function d(){}V.d(Me,{Z:()=>d})},9635:(wt,Me,V)=>{V.d(Me,{U:()=>O,z:()=>$});var d=V(4671);function $(...re){return O(re)}function O(re){return 0===re.length?d.y:1===re.length?re[0]:function(oe){return re.reduce((xe,ve)=>ve(xe),oe)}}},7849:(wt,Me,V)=>{V.d(Me,{h:()=>O});var d=V(2416),$=V(3410);function O(re){$.z.setTimeout(()=>{const{onUnhandledError:de}=d.v;if(!de)throw re;de(re)})}},4532:(wt,Me,V)=>{function d($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Me,{z:()=>d})},4650:(wt,Me,V)=>{V.d(Me,{$8M:()=>ll,$WT:()=>$i,$Z:()=>iv,AFp:()=>KA,ALo:()=>EE,AaK:()=>ve,BQk:()=>Qg,CHM:()=>Jc,CRH:()=>BE,CZH:()=>sb,CqO:()=>qd,D6c:()=>uC,EJc:()=>PF,EpF:()=>gx,F$t:()=>xx,F4k:()=>Lm,FYo:()=>Eg,FiY:()=>or,G48:()=>uM,Gf:()=>FE,GfV:()=>yc,Gpc:()=>W,Hsn:()=>Ev,Ikx:()=>Uv,JOm:()=>ns,KtG:()=>Ja,LFG:()=>jt,Lbi:()=>MF,Lck:()=>GO,MAs:()=>px,MMx:()=>gE,MR2:()=>LN,NdJ:()=>xv,O4$:()=>id,OlP:()=>cn,Oqu:()=>Pv,P3R:()=>yh,PXZ:()=>cb,Q6J:()=>bv,QGY:()=>Fm,QbO:()=>QA,Qsj:()=>wD,R0b:()=>Ko,RDi:()=>qT,Rgc:()=>Km,SBq:()=>dm,Sil:()=>JA,Suo:()=>LE,TTD:()=>Tu,TgZ:()=>Kg,Udp:()=>Sv,W1O:()=>DA,X6Q:()=>dM,XFs:()=>pt,Xpm:()=>Ht,Xts:()=>ss,Y36:()=>Sh,YKP:()=>aA,YNc:()=>Gd,Yjl:()=>en,Yz7:()=>ut,Z0I:()=>Mn,ZZ4:()=>C_,_Bn:()=>oA,_UZ:()=>wv,_Vd:()=>cm,_c5:()=>xM,_uU:()=>$x,aQg:()=>rp,c2e:()=>kF,cJS:()=>Et,cg1:()=>a_,dDg:()=>UF,dqk:()=>fn,eFA:()=>$r,eJc:()=>p_,ekj:()=>Av,eoX:()=>XE,f3M:()=>Bn,g9A:()=>YA,h0i:()=>qm,hGG:()=>dC,iGM:()=>OE,ifc:()=>L,ip1:()=>qA,jDz:()=>cA,kL8:()=>SS,kcU:()=>Wl,lG2:()=>At,lcZ:()=>Dl,lqb:()=>gc,lri:()=>rM,n5z:()=>ud,n_E:()=>m_,oAB:()=>se,oxw:()=>wx,q4F:()=>Aw,qLn:()=>um,qOj:()=>Cc,qZA:()=>Zg,rWj:()=>sM,sBO:()=>Pc,s_b:()=>$v,soG:()=>Mc,tb:()=>JE,tp0:()=>xa,uIk:()=>_v,vHH:()=>be,vpe:()=>os,wAp:()=>Nt,xp6:()=>Eh,ynx:()=>Yg,z2F:()=>Rc,zSh:()=>Iw,zs3:()=>ka});var d=V(7579),$=V(727),O=V(9751),re=V(6451),de=V(3099);function oe(o){for(let a in o)if(o[a]===oe)return a;throw Error("Could not find renamed property on target object.")}function xe(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function ve(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ve).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function we(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const q=oe({__forward_ref__:oe});function W(o){return o.__forward_ref__=W,o.toString=function(){return ve(this())},o}function ee(o){return He(o)?o():o}function He(o){return"function"==typeof o&&o.hasOwnProperty(q)&&o.__forward_ref__===W}function Se(o){return o&&!!o.\u0275providers}const at="https://g.co/ng/security#xss";class be extends Error{constructor(a,c){super(Re(a,c)),this.code=a}}function Re(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function Oe(o){return"string"==typeof o?o:null==o?"":String(o)}function ze(o,a){throw new be(-201,!1)}function ye(o,a){null==o&&function ne(o,a,c,u){throw new Error(`ASSERTION ERROR: ${o}`+(null==u?"":` [Expected=> ${c} ${u} ${a} <=Actual]`))}(a,o,null,"!=")}function ut(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Et(o){return{providers:o.providers||[],imports:o.imports||[]}}function sn(o){return gn(o,Ln)||gn(o,xr)}function Mn(o){return null!==sn(o)}function gn(o,a){return o.hasOwnProperty(a)?o[a]:null}function kn(o){return o&&(o.hasOwnProperty(oi)||o.hasOwnProperty($n))?o[oi]:null}const Ln=oe({\u0275prov:oe}),oi=oe({\u0275inj:oe}),xr=oe({ngInjectableDef:oe}),$n=oe({ngInjectorDef:oe});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Gn;function Qn(o){const a=Gn;return Gn=o,a}function Hi(o,a,c){const u=sn(o);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&pt.Optional?null:void 0!==a?a:void ze(ve(o))}const fn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Xn={},Pi="__NG_DI_FLAG__",Wn="ngTempTokenPath",Xi="ngTokenPath",qn=/\n/gm,Ci="\u0275",Xt="__source";let Er;function Jt(o){const a=Er;return Er=o,a}function mr(o,a=pt.Default){if(void 0===Er)throw new be(-203,!1);return null===Er?Hi(o,void 0,a):Er.get(o,a&pt.Optional?null:void 0,a)}function jt(o,a=pt.Default){return(function gs(){return Gn}()||mr)(ee(o),a)}function Bn(o,a=pt.Default){return jt(o,Ni(a))}function Ni(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function ei(o){const a=[];for(let c=0;c<o.length;c++){const u=ee(o[c]);if(Array.isArray(u)){if(0===u.length)throw new be(900,!1);let f,g=pt.Default;for(let v=0;v<u.length;v++){const E=u[v],T=zi(E);"number"==typeof T?-1===T?f=E.token:g|=T:f=E}a.push(jt(f,g))}else a.push(jt(u))}return a}function Ji(o,a){return o[Pi]=a,o.prototype[Pi]=a,o}function zi(o){return o[Pi]}function z(o){return{toString:o}.toString()}var F=(()=>((F=F||{})[F.OnPush=0]="OnPush",F[F.Default=1]="Default",F))(),L=(()=>{return(o=L||(L={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",L;var o})();const R={},Z=[],Ee=oe({\u0275cmp:oe}),rt=oe({\u0275dir:oe}),St=oe({\u0275pipe:oe}),It=oe({\u0275mod:oe}),Zt=oe({\u0275fac:oe}),Mt=oe({__NG_ELEMENT_ID__:oe});let Dn=0;function Ht(o){return z(()=>{const a=Nl(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===F.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||L.Emulated,id:"c"+Dn++,styles:o.styles||Z,_:null,schemas:o.schemas||null,tView:null};Mf(c);const u=o.dependencies;return c.directiveDefs=Zs(u,!1),c.pipeDefs=Zs(u,!0),c})}function Ss(o){return bt(o)||yn(o)}function ge(o){return null!==o}function se(o){return z(()=>({type:o.type,bootstrap:o.bootstrap||Z,declarations:o.declarations||Z,imports:o.imports||Z,exports:o.exports||Z,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function yt(o,a){if(null==o)return R;const c={};for(const u in o)if(o.hasOwnProperty(u)){let f=o[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),c[f]=u,a&&(a[f]=g)}return c}function At(o){return z(()=>{const a=Nl(o);return Mf(a),a})}function en(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function bt(o){return o[Ee]||null}function yn(o){return o[rt]||null}function an(o){return o[St]||null}function $i(o){const a=bt(o)||yn(o)||an(o);return null!==a&&a.standalone}function Ti(o,a){const c=o[It]||null;if(!c&&!0===a)throw new Error(`Type ${ve(o)} does not have '\u0275mod' property.`);return c}function Nl(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||Z,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:yt(o.inputs,a),outputs:yt(o.outputs)}}function Mf(o){o.features?.forEach(a=>a(o))}function Zs(o,a){if(!o)return null;const c=a?an:Ss;return()=>("function"==typeof o?o():o).map(u=>c(u)).filter(ge)}const Di=0,Je=1,Yt=2,Rn=3,vn=4,Ys=5,Si=6,wo=7,Kn=8,Wa=9,Xr=10,$t=11,Ol=12,Pr=13,sa=14,As=15,fi=16,xo=17,Eo=18,Cr=19,Co=20,mi=21,In=22,Kc=1,qa=2,oa=7,Qs=8,Ms=9,Oi=10;function tr(o){return Array.isArray(o)&&"object"==typeof o[Kc]}function Jr(o){return Array.isArray(o)&&!0===o[Kc]}function Io(o){return 0!=(4&o.flags)}function Fl(o){return o.componentOffset>-1}function Ka(o){return 1==(1&o.flags)}function pr(o){return!!o.template}function Xs(o){return 0!=(256&o[Yt])}function ks(o,a){return o.hasOwnProperty(Zt)?o[Zt]:null}class Iu{constructor(a,c,u){this.previousValue=a,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function Tu(){return Ll}function Ll(o){return o.type.prototype.ngOnChanges&&(o.setInput=to),Of}function Of(){const o=Bl(this),a=o?.current;if(a){const c=o.previous;if(c===R)o.previous=a;else for(let u in a)c[u]=a[u];o.current=null,this.ngOnChanges(a)}}function to(o,a,c,u){const f=this.declaredInputs[c],g=Bl(o)||function Du(o,a){return o[Zc]=a}(o,{previous:R,current:null}),v=g.current||(g.current={}),E=g.previous,T=E[f];v[f]=new Iu(T&&T.currentValue,a,E===R),o[u]=a}Tu.ngInherit=!0;const Zc="__ngSimpleChanges__";function Bl(o){return o[Zc]||null}const Vn=function(o,a,c){},Ya="svg";function pi(o){for(;Array.isArray(o);)o=o[Di];return o}function So(o,a){return pi(a[o])}function Fi(o,a){return pi(a[o.index])}function Ul(o,a){return o.data[a]}function nr(o,a){return o[a]}function Ai(o,a){const c=a[o];return tr(c)?c:c[Di]}function no(o){return 64==(64&o[Yt])}function Rs(o,a){return null==a?null:o[a]}function Xa(o){o[Eo]=0}function da(o,a){o[Ys]+=a;let c=o,u=o[Rn];for(;null!==u&&(1===a&&1===c[Ys]||-1===a&&0===c[Ys]);)u[Ys]+=a,c=u,u=u[Rn]}const Rt={lFrame:tl(null),bindingsEnabled:!0};function Au(){return Rt.bindingsEnabled}function _e(){return Rt.lFrame.lView}function Bt(){return Rt.lFrame.tView}function Jc(o){return Rt.lFrame.contextLView=o,o[Kn]}function Ja(o){return Rt.lFrame.contextLView=null,o}function ti(){let o=ku();for(;null!==o&&64===o.type;)o=o.parent;return o}function ku(){return Rt.lFrame.currentTNode}function Fr(o,a){const c=Rt.lFrame;c.currentTNode=o,c.isParent=a}function Hl(){return Rt.lFrame.isParent}function Ru(){Rt.lFrame.isParent=!1}function Ps(){return Rt.lFrame.bindingIndex++}function Ou(o,a){const c=Rt.lFrame;c.bindingIndex=c.bindingRootIndex=o,ni(a)}function ni(o){Rt.lFrame.currentDirectiveIndex=o}function el(){return Rt.lFrame.currentQueryIndex}function Fu(o){Rt.lFrame.currentQueryIndex=o}function $l(o){const a=o[Je];return 2===a.type?a.declTNode:1===a.type?o[Si]:null}function Lu(o,a,c){if(c&pt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||c&pt.Host||(f=$l(g),null===f||(g=g[As],10&f.type))););if(null===f)return!1;a=f,o=g}const u=Rt.lFrame=ed();return u.currentTNode=a,u.lView=o,!0}function fa(o){const a=ed(),c=o[Je];Rt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function ed(){const o=Rt.lFrame,a=null===o?null:o.child;return null===a?tl(o):a}function tl(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function td(){const o=Rt.lFrame;return Rt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Gl=td;function Bu(){const o=td();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Gi(){return Rt.lFrame.selectedIndex}function ys(o){Rt.lFrame.selectedIndex=o}function Pn(){const o=Rt.lFrame;return Ul(o.tView,o.selectedIndex)}function id(){Rt.lFrame.currentNamespace=Ya}function Wl(){!function Xp(){Rt.lFrame.currentNamespace=null}()}function ql(o,a){for(let c=a.directiveStart,u=a.directiveEnd;c<u;c++){const g=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:P}=g;v&&(o.contentHooks??(o.contentHooks=[])).push(-c,v),E&&((o.contentHooks??(o.contentHooks=[])).push(c,E),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(c,E)),T&&(o.viewHooks??(o.viewHooks=[])).push(-c,T),S&&((o.viewHooks??(o.viewHooks=[])).push(c,S),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(c,S)),null!=P&&(o.destroyHooks??(o.destroyHooks=[])).push(c,P)}}function rd(o,a,c){Kl(o,a,3,c)}function ju(o,a,c,u){(3&o[Yt])===c&&Kl(o,a,c,u)}function Hu(o,a){let c=o[Yt];(3&c)===a&&(c&=2047,c+=1,o[Yt]=c)}function Kl(o,a,c,u){const g=u??-1,v=a.length-1;let E=0;for(let T=void 0!==u?65535&o[Eo]:0;T<v;T++)if("number"==typeof a[T+1]){if(E=a[T],null!=u&&E>=u)break}else a[T]<0&&(o[Eo]+=65536),(E<g||-1==g)&&(pa(o,c,a,T),o[Eo]=(4294901760&o[Eo])+T+2),T++}function pa(o,a,c,u){const f=c[u]<0,g=c[u+1],E=o[f?-c[u]:c[u]];if(f){if(o[Yt]>>11<o[Eo]>>16&&(3&o[Yt])===a){o[Yt]+=2048,Vn(4,E,g);try{g.call(E)}finally{Vn(5,E,g)}}}else{Vn(4,E,g);try{g.call(E)}finally{Vn(5,E,g)}}}const nl=-1;class Ns{constructor(a,c,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function ga(o,a,c){let u=0;for(;u<c.length;){const f=c[u];if("number"==typeof f){if(0!==f)break;u++;const g=c[u++],v=c[u++],E=c[u++];o.setAttribute(a,v,E,g)}else{const g=f,v=c[++u];so(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),u++}}return u}function $u(o){return 3===o||4===o||6===o}function so(o){return 64===o.charCodeAt(0)}function Mo(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?c=f:0===c||_a(o,c,f,null,-1===c||2===c?a[++u]:null)}}return o}function _a(o,a,c,u,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===c){if(null===u)return void(null!==f&&(o[g+1]=f));if(u===o[g+1])return void(o[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,c),null!==u&&o.splice(g++,0,u),null!==f&&o.splice(g++,0,f)}function ko(o){return o!==nl}function ya(o){return 32767&o}function sl(o,a){let c=function rl(o){return o>>16}(o),u=a;for(;c>0;)u=u[As],c--;return u}let od=!0;function ol(o){const a=od;return od=o,a}const ad=255,Ql=5;let ld=0;const ir={};function cd(o,a){const c=Wu(o,a);if(-1!==c)return c;const u=a[Je];u.firstCreatePass&&(o.injectorIndex=a.length,vs(u.data,o),vs(a,null),vs(u.blueprint,null));const f=ii(o,a),g=o.injectorIndex;if(ko(f)){const v=ya(f),E=sl(f,a),T=E[Je].data;for(let S=0;S<8;S++)a[g+S]=E[v+S]|T[v+S]}return a[g+8]=f,g}function vs(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Wu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function ii(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,u=null,f=a;for(;null!==f;){if(u=Ro(f),null===u)return nl;if(c++,f=f[As],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return nl}function oo(o,a,c){!function Gu(o,a,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(Mt)&&(u=c[Mt]),null==u&&(u=c[Mt]=ld++);const f=u&ad;a.data[o+(f>>Ql)]|=1<<f}(o,a,c)}function qu(o,a,c){if(c&pt.Optional||void 0!==o)return o;ze()}function al(o,a,c,u){if(c&pt.Optional&&void 0===u&&(u=null),!(c&(pt.Self|pt.Host))){const f=o[Wa],g=Qn(void 0);try{return f?f.get(a,u,c&pt.Optional):Hi(a,u,c&pt.Optional)}finally{Qn(g)}}return qu(u,0,c)}function Ku(o,a,c,u=pt.Default,f){if(null!==o){if(1024&a[Yt]){const v=function jf(o,a,c,u,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[Yt]&&!(256&v[Yt]);){const E=Jl(g,v,c,u|pt.Self,ir);if(E!==ir)return E;let T=g.parent;if(!T){const S=v[mi];if(S){const P=S.get(c,ir,u);if(P!==ir)return P}T=Ro(v),v=v[As]}g=T}return f}(o,a,c,u,ir);if(v!==ir)return v}const g=Jl(o,a,c,u,ir);if(g!==ir)return g}return al(a,c,u,f)}function Jl(o,a,c,u,f){const g=function Uf(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Mt)?o[Mt]:void 0;return"number"==typeof a?a>=0?a&ad:dd:a}(c);if("function"==typeof g){if(!Lu(a,o,u))return u&pt.Host?qu(f,0,u):al(a,c,u,f);try{const v=g(u);if(null!=v||u&pt.Optional)return v;ze()}finally{Gl()}}else if("number"==typeof g){let v=null,E=Wu(o,a),T=nl,S=u&pt.Host?a[fi][Si]:null;for((-1===E||u&pt.SkipSelf)&&(T=-1===E?ii(o,a):a[E+8],T!==nl&&ec(u,!1)?(v=a[Je],E=ya(T),a=sl(T,a)):E=-1);-1!==E;){const P=a[Je];if(ao(g,E,P.data)){const j=gi(E,a,c,v,u,S);if(j!==ir)return j}T=a[E+8],T!==nl&&ec(u,a[Je].data[E+8]===S)&&ao(g,E,a)?(v=P,E=ya(T),a=sl(T,a)):E=-1}}return f}function gi(o,a,c,u,f,g){const v=a[Je],E=v.data[o+8],P=va(E,v,c,null==u?Fl(E)&&od:u!=v&&0!=(3&E.type),f&pt.Host&&g===E);return null!==P?Un(a,v,P,E):ir}function va(o,a,c,u,f){const g=o.providerIndexes,v=a.data,E=1048575&g,T=o.directiveStart,P=g>>20,Y=f?E+P:o.directiveEnd;for(let ie=u?E:E+P;ie<Y;ie++){const Ie=v[ie];if(ie<T&&c===Ie||ie>=T&&Ie.type===c)return ie}if(f){const ie=v[T];if(ie&&pr(ie)&&ie.type===c)return T}return null}function Un(o,a,c,u){let f=o[c];const g=a.data;if(function eg(o){return o instanceof Ns}(f)){const v=f;v.resolving&&function De(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new be(-200,`Circular dependency in DI detected for ${o}${c}`)}(function je(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Oe(o)}(g[c]));const E=ol(v.canSeeViewProviders);v.resolving=!0;const T=v.injectImpl?Qn(v.injectImpl):null;Lu(o,u,pt.Default);try{f=o[c]=v.factory(void 0,g,o,u),a.firstCreatePass&&c>=u.directiveStart&&function Jp(o,a,c){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const v=Ll(a);(c.preOrderHooks??(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,v)}f&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-o,f),g&&((c.preOrderHooks??(c.preOrderHooks=[])).push(o,g),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,g))}(c,g[c],a)}finally{null!==T&&Qn(T),ol(E),v.resolving=!1,Gl()}}return f}function ao(o,a,c){return!!(c[a+(o>>Ql)]&1<<o)}function ec(o,a){return!(o&pt.Self||o&pt.Host&&a)}class ba{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,u){return Ku(this._tNode,this._lView,a,Ni(u),c)}}function dd(){return new ba(ti(),_e())}function ud(o){return z(()=>{const a=o.prototype.constructor,c=a[Zt]||lo(a),u=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==u;){const g=f[Zt]||lo(f);if(g&&g!==c)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function lo(o){return He(o)?()=>{const a=lo(ee(o));return a&&a()}:ks(o)}function Ro(o){const a=o[Je],c=a.type;return 2===c?a.declTNode:1===c?o[Si]:null}function ll(o){return function Xl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const u=c.length;let f=0;for(;f<u;){const g=c[f];if($u(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof c[f];)f++;else{if(g===a)return c[f+1];f+=2}}}return null}(ti(),o)}const No="__parameters__";function Oo(o,a,c){return z(()=>{const u=function Zu(o){return function(...c){if(o){const u=o(...c);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(T,S,P){const j=T.hasOwnProperty(No)?T[No]:Object.defineProperty(T,No,{value:[]})[No];for(;j.length<=P;)j.push(null);return(j[P]=j[P]||[]).push(v),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class cn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ut({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function co(o,a){o.forEach(c=>Array.isArray(c)?co(c,a):a(c))}function _d(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function cl(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function wa(o,a){const c=[];for(let u=0;u<o;u++)c.push(a);return c}function Lr(o,a,c){let u=dn(o,a);return u>=0?o[1|u]=c:(u=~u,function rc(o,a,c,u){let f=o.length;if(f==a)o.push(c,u);else if(1===f)o.push(u,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=u}}(o,u,a,c)),u}function Br(o,a){const c=dn(o,a);if(c>=0)return o[1|c]}function dn(o,a){return function rr(o,a,c){let u=0,f=o.length>>c;for(;f!==u;){const g=u+(f-u>>1),v=o[g<<c];if(a===v)return g<<c;v>a?f=g:u=g+1}return~(f<<c)}(o,a,1)}const or=Ji(Oo("Optional"),8),xa=Ji(Oo("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const Ad=new Map;let Yf=0;const K="__ngContext__";function Q(o,a){tr(a)?(o[K]=a[Co],function Qf(o){Ad.set(o[Co],o)}(a)):o[K]=a}let vr;function Ur(o,a){return vr(o,a)}function dh(o){const a=o[Rn];return Jr(a)?a[Rn]:a}function pl(o){return hh(o[Pr])}function uh(o){return hh(o[vn])}function hh(o){for(;null!==o&&!Jr(o);)o=o[vn];return o}function bs(o,a,c,u,f){if(null!=u){let g,v=!1;Jr(u)?g=u:tr(u)&&(v=!0,u=u[Di]);const E=pi(u);0===o&&null!==c?null==f?br(a,c,E):Gt(a,c,E,f||null,!0):1===o&&null!==c?Gt(a,c,E,f||null,!0):2===o?function sg(o,a,c){const u=gl(o,a);u&&function kd(o,a,c,u){o.removeChild(a,c,u)}(o,u,a,c)}(a,E,v):3===o&&a.destroyNode(E),null!=g&&function cw(o,a,c,u,f){const g=c[oa];g!==pi(c)&&bs(a,o,u,g,f);for(let E=Oi;E<c.length;E++){const T=c[E];Fd(T[Je],T,o,a,u,g)}}(a,o,g,c,f)}}function tm(o,a,c){return o.createElement(a,c)}function x(o,a){const c=o[Ms],u=c.indexOf(a),f=a[Rn];512&a[Yt]&&(a[Yt]&=-513,da(f,-1)),c.splice(u,1)}function M(o,a){if(o.length<=Oi)return;const c=Oi+a,u=o[c];if(u){const f=u[xo];null!==f&&f!==o&&x(f,u),a>0&&(o[c-1][vn]=u[vn]);const g=cl(o,Oi+a);!function rg(o,a){Fd(o,a,a[$t],2,null,null),a[Di]=null,a[Si]=null}(u[Je],u);const v=g[Cr];null!==v&&v.detachView(g[Je]),u[Rn]=null,u[vn]=null,u[Yt]&=-65}return u}function N(o,a){if(!(128&a[Yt])){const c=a[$t];c.destroyNode&&Fd(o,a,c,3,null,null),function b(o){let a=o[Pr];if(!a)return J(o[Je],o);for(;a;){let c=null;if(tr(a))c=a[Pr];else{const u=a[Oi];u&&(c=u)}if(!c){for(;a&&!a[vn]&&a!==o;)tr(a)&&J(a[Je],a),a=a[Rn];null===a&&(a=o),tr(a)&&J(a[Je],a),c=a&&a[vn]}a=c}}(a)}}function J(o,a){if(!(128&a[Yt])){a[Yt]&=-65,a[Yt]|=128,function $e(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let u=0;u<c.length;u+=2){const f=a[c[u]];if(!(f instanceof Ns)){const g=c[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],T=g[v+1];Vn(4,E,T);try{T.call(E)}finally{Vn(5,E,T)}}else{Vn(4,f,g);try{g.call(f)}finally{Vn(5,f,g)}}}}}(o,a),function he(o,a){const c=o.cleanup,u=a[wo];let f=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const v=c[g+3];v>=0?u[f=v]():u[f=-v].unsubscribe(),g+=2}else{const v=u[f=c[g+1]];c[g].call(v)}if(null!==u){for(let g=f+1;g<u.length;g++)(0,u[g])();a[wo]=null}}(o,a),1===a[Je].type&&a[$t].destroy();const c=a[xo];if(null!==c&&Jr(a[Rn])){c!==a[Rn]&&x(c,a);const u=a[Cr];null!==u&&u.detachView(o)}!function jn(o){Ad.delete(o[Co])}(a)}}function Qe(o,a,c){return function vt(o,a,c){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return c[Di];{const{componentOffset:f}=u;if(f>-1){const{encapsulation:g}=o.data[u.directiveStart+f];if(g===L.None||g===L.Emulated)return null}return Fi(u,c)}}(o,a.parent,c)}function Gt(o,a,c,u,f){o.insertBefore(a,c,u,f)}function br(o,a,c){o.appendChild(a,c)}function ho(o,a,c,u,f){null!==u?Gt(o,a,c,u,f):br(o,a,c)}function gl(o,a){return o.parentNode(a)}function mh(o,a,c){return im(o,a,c)}let Pd,rm,Ry,im=function Rd(o,a,c){return 40&o.type?Fi(o,c):null};function _l(o,a,c,u){const f=Qe(o,u,a),g=a[$t],E=mh(u.parent||a[Si],u,a);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)ho(g,f,c[T],E,!1);else ho(g,f,c,E,!1);void 0!==Pd&&Pd(g,u,a,c,f)}function Od(o,a){if(null!==a){const c=a.type;if(3&c)return Fi(a,o);if(4&c)return ph(-1,o[a.index]);if(8&c){const u=a.child;if(null!==u)return Od(o,u);{const f=o[a.index];return Jr(f)?ph(-1,f):pi(f)}}if(32&c)return Ur(a,o)()||pi(o[a.index]);{const u=fc(o,a);return null!==u?Array.isArray(u)?u[0]:Od(dh(o[fi]),u):Od(o,a.next)}}return null}function fc(o,a){return null!==a?o[fi][Si].projection[a.projection]:null}function ph(o,a){const c=Oi+o+1;if(c<a.length){const u=a[c],f=u[Je].firstChild;if(null!==f)return Od(u,f)}return a[oa]}function og(o,a,c,u,f,g,v){for(;null!=c;){const E=u[c.index],T=c.type;if(v&&0===a&&(E&&Q(pi(E),u),c.flags|=2),32!=(32&c.flags))if(8&T)og(o,a,c.child,u,f,g,!1),bs(a,o,f,E,g);else if(32&T){const S=Ur(c,u);let P;for(;P=S();)bs(a,o,f,P,g);bs(a,o,f,E,g)}else 16&T?Dy(o,a,u,c,f,g):bs(a,o,f,E,g);c=v?c.projectionNext:c.next}}function Fd(o,a,c,u,f,g){og(c,u,o.firstChild,a,f,g,!1)}function Dy(o,a,c,u,f,g){const v=c[fi],T=v[Si].projection[u.projection];if(Array.isArray(T))for(let S=0;S<T.length;S++)bs(a,o,f,T[S],g);else og(o,a,T,v[Rn],f,g,!0)}function Ta(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Sy(o,a,c){const{mergedAttrs:u,classes:f,styles:g}=c;null!==u&&ga(o,a,u),null!==f&&Ta(o,a,f),null!==g&&function rs(o,a,c){o.setAttribute(a,"style",c)}(o,a,g)}function qT(o){rm=o}function QT(o){return function hw(){if(void 0===Ry&&(Ry=null,fn.trustedTypes))try{Ry=fn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Ry}()?.createScriptURL(o)||o}class XT{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${at})`}}function Da(o){return o instanceof XT?o.changingThisBreaksApplicationSecurity:o}function vl(o,a){const c=function cg(o){return o instanceof XT&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${at})`)}return c===a}const hg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ar=(()=>((ar=ar||{})[ar.NONE=0]="NONE",ar[ar.HTML=1]="HTML",ar[ar.STYLE=2]="STYLE",ar[ar.SCRIPT=3]="SCRIPT",ar[ar.URL=4]="URL",ar[ar.RESOURCE_URL=5]="RESOURCE_URL",ar))();function ww(o){const a=vh();return a?a.sanitize(ar.URL,o)||"":vl(o,"URL")?Da(o):function Sa(o){return(o=String(o)).match(hg)?o:"unsafe:"+o}(Oe(o))}function Uy(o){const a=vh();if(a)return QT(a.sanitize(ar.RESOURCE_URL,o)||"");if(vl(o,"ResourceURL"))return QT(Da(o));throw new be(904,!1)}function yh(o,a,c){return function lD(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Uy:ww}(a,c)(o)}function vh(){const o=_e();return o&&o[Ol]}const ss=new cn("ENVIRONMENT_INITIALIZER"),dD=new cn("INJECTOR",-1),xw=new cn("INJECTOR_DEF_TYPES");class zy{get(a,c=Xn){if(c===Xn){const u=new Error(`NullInjectorError: No provider for ${ve(a)}!`);throw u.name="NullInjectorError",u}return c}}function LN(o){return{\u0275providers:o}}function BN(...o){return{\u0275providers:uD(0,o),\u0275fromNgModule:!0}}function uD(o,...a){const c=[],u=new Set;let f;return co(a,g=>{const v=g;$y(v,c,[],u)&&(f||(f=[]),f.push(v))}),void 0!==f&&hD(f,c),c}function hD(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];Gy(f,g=>{a.push(g)})}}function $y(o,a,c,u){if(!(o=ee(o)))return!1;let f=null,g=kn(o);const v=!g&&bt(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const T=o.ngModule;if(g=kn(T),!g)return!1;f=T}const E=u.has(f);if(v){if(E)return!1;if(u.add(f),v.dependencies){const T="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of T)$y(S,a,c,u)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let S;u.add(f);try{co(g.imports,P=>{$y(P,a,c,u)&&(S||(S=[]),S.push(P))})}finally{}void 0!==S&&hD(S,a)}if(!E){const S=ks(f)||(()=>new f);a.push({provide:f,useFactory:S,deps:Z},{provide:xw,useValue:f,multi:!0},{provide:ss,useValue:()=>jt(f),multi:!0})}const T=g.providers;null==T||E||Gy(T,P=>{a.push(P)})}}return f!==o&&void 0!==o.providers}function Gy(o,a){for(let c of o)Se(c)&&(c=c.\u0275providers),Array.isArray(c)?Gy(c,a):a(c)}const Ew=oe({provide:String,useValue:oe});function gg(o){return null!==o&&"object"==typeof o&&Ew in o}function pc(o){return"function"==typeof o}const Iw=new cn("Set Injector scope."),lm={},pD={};let _g;function yg(){return void 0===_g&&(_g=new zy),_g}class gc{}class vg extends gc{get destroyed(){return this._destroyed}constructor(a,c,u,f){super(),this.parent=c,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xg(a,v=>this.processProvider(v)),this.records.set(dD,bh(void 0,this)),f.has("environment")&&this.records.set(gc,bh(void 0,this));const g=this.records.get(Iw);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(xw.multi,Z,pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Jt(this),u=Qn(void 0);try{return a()}finally{Jt(c),Qn(u)}}get(a,c=Xn,u=pt.Default){this.assertNotDestroyed(),u=Ni(u);const f=Jt(this),g=Qn(void 0);try{if(!(u&pt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const T=function wg(o){return"function"==typeof o||"object"==typeof o&&o instanceof cn}(a)&&sn(a);E=T&&this.injectableDefInScope(T)?bh(Wy(a),lm):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(u&pt.Self?yg():this.parent).get(a,c=u&pt.Optional&&c===Xn?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[Wn]=v[Wn]||[]).unshift(ve(a)),f)throw v;return function er(o,a,c,u){const f=o[Wn];throw a[Xt]&&f.unshift(a[Xt]),o.message=function G(o,a,c,u=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==Ci?o.slice(2):o;let f=ve(a);if(Array.isArray(a))f=a.map(ve).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):ve(E)))}f=`{${g.join(", ")}}`}return`${c}${u?"("+u+")":""}[${f}]: ${o.replace(qn,"\n  ")}`}("\n"+o.message,f,c,u),o[Xi]=f,o[Wn]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Qn(g),Jt(f)}}resolveInjectorInitializers(){const a=Jt(this),c=Qn(void 0);try{const u=this.get(ss.multi,Z,pt.Self);for(const f of u)f()}finally{Jt(a),Qn(c)}}toString(){const a=[],c=this.records;for(const u of c.keys())a.push(ve(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(a){let c=pc(a=ee(a))?a:ee(a&&a.provide);const u=function gD(o){return gg(o)?bh(void 0,o.useValue):bh(_c(o),lm)}(a);if(pc(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=bh(void 0,lm,!0),f.factory=()=>ei(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,u)}hydrate(a,c){return c.value===lm&&(c.value=pD,c.value=c.factory()),"object"==typeof c.value&&c.value&&function _D(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ee(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function Wy(o){const a=sn(o),c=null!==a?a.factory:ks(o);if(null!==c)return c;if(o instanceof cn)throw new be(204,!1);if(o instanceof Function)return function Tw(o){const a=o.length;if(a>0)throw wa(a,"?"),new be(204,!1);const c=function si(o){return o&&(o[Ln]||o[xr])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new be(204,!1)}function _c(o,a,c){let u;if(pc(o)){const f=ee(o);return ks(f)||Wy(f)}if(gg(o))u=()=>ee(o.useValue);else if(function Cw(o){return!(!o||!o.useFactory)}(o))u=()=>o.useFactory(...ei(o.deps||[]));else if(function am(o){return!(!o||!o.useExisting)}(o))u=()=>jt(ee(o.useExisting));else{const f=ee(o&&(o.useClass||o.provide));if(!function bg(o){return!!o.deps}(o))return ks(f)||Wy(f);u=()=>new f(...ei(o.deps))}return u}function bh(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function xg(o,a){for(const c of o)Array.isArray(c)?xg(c,a):c&&Se(c)?xg(c.\u0275providers,a):a(c)}class yD{}class wh{}class Ky{resolveComponentFactory(a){throw function vD(o){const a=Error(`No component factory found for ${ve(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let cm=(()=>{class o{}return o.NULL=new Ky,o})();function bD(){return Bd(ti(),_e())}function Bd(o,a){return new dm(Fi(o,a))}let dm=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=bD,o})();function UN(o){return o instanceof dm?o.nativeElement:o}class Eg{}let wD=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Dw(){const o=_e(),c=Ai(ti().index,o);return(tr(c)?c:o)[$t]}(),o})(),Sw=(()=>{class o{}return o.\u0275prov=ut({token:o,providedIn:"root",factory:()=>null}),o})();class yc{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Aw=new yc("15.2.9"),Cg={},Zy="ngOriginalError";function Yy(o){return o[Zy]}class um{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Yy(a);for(;c&&Yy(c);)c=Yy(c);return c||null}}function bl(o){return o instanceof Function?o():o}function ID(o,a,c){let u=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||o.charCodeAt(f+g)<=32)return f}c=f+1}}const TD="ng-template";function Lw(o,a,c){let u=0,f=!0;for(;u<o.length;){let g=o[u++];if("string"==typeof g&&f){const v=o[u++];if(c&&"class"===g&&-1!==ID(v.toLowerCase(),a,0))return!0}else{if(1===g){for(;u<o.length&&"string"==typeof(g=o[u++]);)if(g.toLowerCase()===a)return!0;return!1}"number"==typeof g&&(f=!1)}}return!1}function Bw(o){return 4===o.type&&o.value!==TD}function HN(o,a,c){return a===(4!==o.type||c?o.value:TD)}function zN(o,a,c){let u=4;const f=o.attrs||[],g=function Bs(o){for(let a=0;a<o.length;a++)if($u(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const T=a[E];if("number"!=typeof T){if(!v)if(4&u){if(u=2|1&u,""!==T&&!HN(o,T,c)||""===T&&1===a.length){if(Aa(u))return!1;v=!0}}else{const S=8&u?T:a[++E];if(8&u&&null!==o.attrs){if(!Lw(o.attrs,S,c)){if(Aa(u))return!1;v=!0}continue}const j=$N(8&u?"class":T,f,Bw(o),c);if(-1===j){if(Aa(u))return!1;v=!0;continue}if(""!==S){let Y;Y=j>g?"":f[j+1].toLowerCase();const ie=8&u?Y:null;if(ie&&-1!==ID(ie,S,0)||2&u&&S!==Y){if(Aa(u))return!1;v=!0}}}}else{if(!v&&!Aa(u)&&!Aa(T))return!1;if(v&&Aa(T))continue;v=!1,u=T|1&u}}return Aa(u)||v}function Aa(o){return 0==(1&o)}function $N(o,a,c,u){if(null===a)return-1;let f=0;if(u||!c){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function DD(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const u=o[c];if("number"==typeof u)return-1;if(u===a)return c;c++}return-1}(a,o)}function fm(o,a,c=!1){for(let u=0;u<a.length;u++)if(zN(o,a[u],c))return!0;return!1}function Ig(o,a){e:for(let c=0;c<a.length;c++){const u=a[c];if(o.length===u.length){for(let f=0;f<o.length;f++)if(o[f]!==u[f])continue e;return!0}}return!1}function xh(o,a){return o?":not("+a.trim()+")":a}function SD(o){let a=o[0],c=1,u=2,f="",g=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&u){const E=o[++c];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&u?f+="."+v:4&u&&(f+=" "+v);else""!==f&&!Aa(v)&&(a+=xh(g,f),f=""),u=v,g=g||!Aa(u);c++}return""!==f&&(a+=xh(g,f)),a}const Qt={};function Eh(o){Vw(Bt(),_e(),Gi()+o,!1)}function Vw(o,a,c,u){if(!u)if(3==(3&a[Yt])){const g=o.preOrderCheckHooks;null!==g&&rd(a,g,c)}else{const g=o.preOrderHooks;null!==g&&ju(a,g,0,c)}ys(c)}function Ma(o,a=null,c=null,u){const f=Ih(o,a,c,u);return f.resolveInjectorInitializers(),f}function Ih(o,a=null,c=null,u,f=new Set){const g=[c||Z,BN(o)];return u=u||("object"==typeof o?void 0:ve(o)),new vg(g,a||yg(),u||null,f)}let ka=(()=>{class o{static create(c,u){if(Array.isArray(c))return Ma({name:""},u,c,"");{const f=c.name??"";return Ma({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=Xn,o.NULL=new zy,o.\u0275prov=ut({token:o,providedIn:"any",factory:()=>jt(dD)}),o.__NG_ELEMENT_ID__=-1,o})();function Sh(o,a=pt.Default){const c=_e();return null===c?jt(o,a):Ku(ti(),c,ee(o),a)}function iv(){throw new Error("invalid")}function _m(o,a){const c=o.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const g=c[u+1];if(-1!==g){const v=o.data[g];Fu(c[u]),v.contentQueries(2,a[g],g)}}}function wc(o,a,c,u,f,g,v,E,T,S,P){const j=a.blueprint.slice();return j[Di]=f,j[Yt]=76|u,(null!==P||o&&1024&o[Yt])&&(j[Yt]|=1024),Xa(j),j[Rn]=j[As]=o,j[Kn]=c,j[Xr]=v||o&&o[Xr],j[$t]=E||o&&o[$t],j[Ol]=T||o&&o[Ol]||null,j[Wa]=S||o&&o[Wa]||null,j[Si]=g,j[Co]=function ch(){return Yf++}(),j[mi]=P,j[fi]=2==a.type?o[fi]:j,j}function Ah(o,a,c,u,f){let g=o.data[a];if(null===g)g=function El(o,a,c,u,f){const g=ku(),v=Hl(),T=o.data[a]=function Zw(o,a,c,u,f,g){return{type:c,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,c,a,u,f);return null===o.firstChild&&(o.firstChild=T),null!==g&&(v?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T,T.prev=g)),T}(o,a,c,u,f),function Nu(){return Rt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=c,g.value=u,g.attrs=f;const v=function ua(){const o=Rt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Fr(g,!0),g}function ym(o,a,c,u){if(0===c)return-1;const f=a.length;for(let g=0;g<c;g++)a.push(u),o.blueprint.push(u),o.data.push(null);return f}function jd(o,a,c){fa(a);try{const u=o.viewQuery;null!==u&&fo(1,u,c);const f=o.template;null!==f&&Kw(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&_m(o,a),o.staticViewQueries&&fo(2,o.viewQuery,c);const g=o.components;null!==g&&function un(o,a){for(let c=0;c<a.length;c++)$D(o,a[c])}(a,g)}catch(u){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),u}finally{a[Yt]&=-5,Bu()}}function Mh(o,a,c,u){const f=a[Yt];if(128!=(128&f)){fa(a);try{Xa(a),function ro(o){return Rt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Kw(o,a,c,2,u);const v=3==(3&f);if(v){const S=o.preOrderCheckHooks;null!==S&&rd(a,S,null)}else{const S=o.preOrderHooks;null!==S&&ju(a,S,0,null),Hu(a,0)}if(function zD(o){for(let a=pl(o);null!==a;a=uh(a)){if(!a[qa])continue;const c=a[Ms];for(let u=0;u<c.length;u++){const f=c[u];512&f[Yt]||da(f[Rn],1),f[Yt]|=512}}}(a),function tx(o){for(let a=pl(o);null!==a;a=uh(a))for(let c=Oi;c<a.length;c++){const u=a[c],f=u[Je];no(u)&&Mh(f,u,f.template,u[Kn])}}(a),null!==o.contentQueries&&_m(o,a),v){const S=o.contentCheckHooks;null!==S&&rd(a,S)}else{const S=o.contentHooks;null!==S&&ju(a,S,1),Hu(a,1)}!function qw(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let u=0;u<c.length;u++){const f=c[u];if(f<0)ys(~f);else{const g=f,v=c[++u],E=c[++u];Ou(v,g),E(2,a[g])}}}finally{ys(-1)}}(o,a);const E=o.components;null!==E&&function bc(o,a){for(let c=0;c<a.length;c++)lv(o,a[c])}(a,E);const T=o.viewQuery;if(null!==T&&fo(2,T,u),v){const S=o.viewCheckHooks;null!==S&&rd(a,S)}else{const S=o.viewHooks;null!==S&&ju(a,S,2),Hu(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[Yt]&=-41,512&a[Yt]&&(a[Yt]&=-513,da(a[Rn],-1))}finally{Bu()}}}function Kw(o,a,c,u,f){const g=Gi(),v=2&u;try{ys(-1),v&&a.length>In&&Vw(o,a,In,!1),Vn(v?2:0,f),c(u,f)}finally{ys(g),Vn(v?3:1,f)}}function kh(o,a,c){if(Io(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,c[g],g)}}}function Hd(o,a,c){Au()&&(function zd(o,a,c,u){const f=c.directiveStart,g=c.directiveEnd;Fl(c)&&function Jw(o,a,c){const u=Fi(a,o),f=vm(c),g=o[Xr],v=Lg(o,wc(o,f,null,c.onPush?32:16,u,a,g,g.createRenderer(u,c),null,null,null));o[a.index]=v}(a,c,o.data[f+c.componentOffset]),o.firstCreatePass||cd(c,a),Q(u,a);const v=c.initialInputs;for(let E=f;E<g;E++){const T=o.data[E],S=Un(a,o,E,c);Q(S,a),null!==v&&Ph(0,E-f,S,T,0,v),pr(T)&&(Ai(c.index,a)[Kn]=Un(a,o,E,c))}}(o,a,c,Fi(c,a)),64==(64&c.flags)&&Ng(o,a,c))}function Ag(o,a,c=Fi){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],E=-1===v?c(a,o):o[v];o[f++]=E}}}function vm(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=rv(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function rv(o,a,c,u,f,g,v,E,T,S){const P=In+u,j=P+f,Y=function sv(o,a){const c=[];for(let u=0;u<a;u++)c.push(u<o?null:Qt);return c}(P,j),ie="function"==typeof S?S():S;return Y[Je]={type:o,blueprint:Y,template:c,queries:null,viewQuery:E,declTNode:a,data:Y.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:j,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:T,consts:ie,incompleteFirstPass:!1}}function ov(o,a,c,u){const f=Ec(a);null===c?f.push(u):(f.push(c),o.firstCreatePass&&Cm(o).push(u,f.length-1))}function Yw(o,a,c,u){for(let f in o)if(o.hasOwnProperty(f)){c=null===c?{}:c;const g=o[f];null===u?Qw(c,a,f,g):u.hasOwnProperty(f)&&Qw(c,a,u[f],g)}return c}function Qw(o,a,c,u){o.hasOwnProperty(c)?o[c].push(a,u):o[c]=[a,u]}function Vs(o,a,c,u,f,g,v,E){const T=Fi(a,c);let P,S=a.inputs;!E&&null!=S&&(P=S[u])?(dv(o,c,P,u,f),Fl(a)&&function BD(o,a){const c=Ai(a,o);16&c[Yt]||(c[Yt]|=32)}(c,a.index)):3&a.type&&(u=function kg(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(u),f=null!=v?v(f,a.value||"",u):f,g.setProperty(T,u,f))}function av(o,a,c,u){if(Au()){const f=null===u?null:{"":-1},g=function Xw(o,a){const c=o.directiveRegistry;let u=null,f=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];if(fm(a,v.selectors,!1))if(u||(u=[]),pr(v))if(null!==v.findHostDirectiveDefs){const E=[];f=f||new Map,v.findHostDirectiveDefs(v,E,f),u.unshift(...E,v),Og(o,a,E.length)}else u.unshift(v),Og(o,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,u,f),u.push(v)}return null===u?null:[u,f]}(o,c);let v,E;null===g?v=E=null:[v,E]=g,null!==v&&Rg(o,a,c,v,f,E),f&&function jD(o,a,c){if(a){const u=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=c[a[f+1]];if(null==g)throw new be(-301,!1);u.push(a[f],g)}}}(c,u,f)}c.mergedAttrs=Mo(c.mergedAttrs,c.attrs)}function Rg(o,a,c,u,f,g){for(let S=0;S<u.length;S++)oo(cd(c,a),o,u[S].type);!function wm(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,u.length);for(let S=0;S<u.length;S++){const P=u[S];P.providersResolver&&P.providersResolver(P)}let v=!1,E=!1,T=ym(o,a,u.length,null);for(let S=0;S<u.length;S++){const P=u[S];c.mergedAttrs=Mo(c.mergedAttrs,P.hostAttrs),Rh(o,c,a,T,P),bm(T,P,f),null!==P.contentQueries&&(c.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(c.flags|=64);const j=P.type.prototype;!v&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(c.index),v=!0),!E&&(j.ngOnChanges||j.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(c.index),E=!0),T++}!function LD(o,a,c){const f=a.directiveEnd,g=o.data,v=a.attrs,E=[];let T=null,S=null;for(let P=a.directiveStart;P<f;P++){const j=g[P],Y=c?c.get(j):null,Ie=Y?Y.outputs:null;T=Yw(j.inputs,P,T,Y?Y.inputs:null),S=Yw(j.outputs,P,S,Ie);const Ge=null===T||null===v||Bw(a)?null:HD(T,P,v);E.push(Ge)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=E,a.inputs=T,a.outputs=S}(o,c,g)}function Ng(o,a,c){const u=c.directiveStart,f=c.directiveEnd,g=c.index,v=function Qp(){return Rt.lFrame.currentDirectiveIndex}();try{ys(g);for(let E=u;E<f;E++){const T=o.data[E],S=a[E];ni(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&KN(T,S)}}finally{ys(-1),ni(v)}}function KN(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Og(o,a,c){a.componentOffset=c,(o.components??(o.components=[])).push(a.index)}function bm(o,a,c){if(c){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)c[a.exportAs[u]]=o;pr(a)&&(c[""]=o)}}function Rh(o,a,c,u,f){o.data[u]=f;const g=f.factory||(f.factory=ks(f.type)),v=new Ns(g,pr(f),Sh);o.blueprint[u]=v,c[u]=v,function Pg(o,a,c,u,f){const g=f.hostBindings;if(g){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const E=~a.index;(function UD(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=E&&v.push(E),v.push(c,u,g)}}(o,a,u,ym(o,c,f.hostVars,Qt),f)}function zo(o,a,c,u,f,g){const v=Fi(o,a);!function Fg(o,a,c,u,f,g,v){if(null==g)o.removeAttribute(a,f,c);else{const E=null==v?Oe(g):v(g,u||"",f);o.setAttribute(a,f,E,c)}}(a[$t],v,g,o.value,c,u,f)}function Ph(o,a,c,u,f,g){const v=g[a];if(null!==v){const E=u.setInput;for(let T=0;T<v.length;){const S=v[T++],P=v[T++],j=v[T++];null!==E?u.setInput(c,j,S,P):c[P]=j}}}function HD(o,a,c){let u=null,f=0;for(;f<c.length;){const g=c[f];if(0!==g)if(5!==g){if("number"==typeof g)break;if(o.hasOwnProperty(g)){null===u&&(u=[]);const v=o[g];for(let E=0;E<v.length;E+=2)if(v[E]===a){u.push(g,v[E+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return u}function ex(o,a,c,u){return[o,!0,!1,a,null,0,u,c,null,null]}function lv(o,a){const c=Ai(a,o);if(no(c)){const u=c[Je];48&c[Yt]?Mh(u,c,u.template,c[Kn]):c[Ys]>0&&xc(c)}}function xc(o){for(let u=pl(o);null!==u;u=uh(u))for(let f=Oi;f<u.length;f++){const g=u[f];if(no(g))if(512&g[Yt]){const v=g[Je];Mh(v,g,v.template,g[Kn])}else g[Ys]>0&&xc(g)}const c=o[Je].components;if(null!==c)for(let u=0;u<c.length;u++){const f=Ai(c[u],o);no(f)&&f[Ys]>0&&xc(f)}}function $D(o,a){const c=Ai(a,o),u=c[Je];(function cv(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(u,c),jd(u,c,c[Kn])}function Lg(o,a){return o[Pr]?o[sa][vn]=a:o[Pr]=a,o[sa]=a,a}function xm(o){for(;o;){o[Yt]|=32;const a=dh(o);if(Xs(o)&&!a)return o;o=a}return null}function Em(o,a,c,u=!0){const f=a[Xr];f.begin&&f.begin();try{Mh(o,a,o.template,c)}catch(v){throw u&&Vg(a,v),v}finally{f.end&&f.end()}}function fo(o,a,c){Fu(0),a(o,c)}function Ec(o){return o[wo]||(o[wo]=[])}function Cm(o){return o.cleanup||(o.cleanup=[])}function Vg(o,a){const c=o[Wa],u=c?c.get(um,null):null;u&&u.handleError(a)}function dv(o,a,c,u,f){for(let g=0;g<c.length;){const v=c[g++],E=c[g++],T=a[v],S=o.data[v];null!==S.setInput?S.setInput(T,f,u,E):T[E]=f}}function Ug(o,a,c){let u=c?o.styles:null,f=c?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=we(f,E):2==g&&(u=we(u,E+": "+a[++v]+";"))}c?o.styles=u:o.stylesWithoutHost=u,c?o.classes=f:o.classesWithoutHost=f}function jg(o,a,c,u,f=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&u.push(pi(g)),Jr(g))for(let E=Oi;E<g.length;E++){const T=g[E],S=T[Je].firstChild;null!==S&&jg(T[Je],T,S,u)}const v=c.type;if(8&v)jg(o,a,c.child,u);else if(32&v){const E=Ur(c,a);let T;for(;T=E();)u.push(T)}else if(16&v){const E=fc(a,c);if(Array.isArray(E))u.push(...E);else{const T=dh(a[fi]);jg(T[Je],T,E,u,!0)}}c=f?c.projectionNext:c.next}return u}class Tm{get rootNodes(){const a=this._lView,c=a[Je];return jg(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(a){this._lView[Kn]=a}get destroyed(){return 128==(128&this._lView[Yt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Rn];if(Jr(a)){const c=a[Qs],u=c?c.indexOf(this):-1;u>-1&&(M(a,u),cl(c,u))}this._attachedToViewContainer=!1}N(this._lView[Je],this._lView)}onDestroy(a){ov(this._lView[Je],this._lView,null,a)}markForCheck(){xm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Yt]&=-65}reattach(){this._lView[Yt]|=64}detectChanges(){Em(this._lView[Je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hc(o,a){Fd(o,a,a[$t],2,null,null)}(this._lView[Je],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=a}}class GD extends Tm{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Em(a[Je],a,a[Kn],!1)}checkNoChanges(){}get context(){return null}}class ix extends cm{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=bt(a);return new Dm(c,this.ngModule)}}function rx(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class qD{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,u){u=Ni(u);const f=this.injector.get(a,Cg,u);return f!==Cg||c===Cg?f:this.parentInjector.get(a,c,u)}}class Dm extends wh{get inputs(){return rx(this.componentDef.inputs)}get outputs(){return rx(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Qy(o){return o.map(SD).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,u,f){let g=(f=f||this.ngModule)instanceof gc?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new qD(a,g):a,E=v.get(Eg,null);if(null===E)throw new be(407,!1);const T=v.get(Sw,null),S=E.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",j=u?function Mg(o,a,c){return o.selectRootElement(a,c===L.ShadowDom)}(S,u,this.componentDef.encapsulation):tm(S,P,function WD(o){const a=o.toLowerCase();return"svg"===a?Ya:"math"===a?"math":null}(P)),Y=this.componentDef.onPush?288:272,ie=rv(0,null,null,1,0,null,null,null,null,null),Ie=wc(null,ie,null,Y,null,null,E,S,T,v,null);let Ge,Ye;fa(Ie);try{const gt=this.componentDef;let kt,Fe=null;gt.findHostDirectiveDefs?(kt=[],Fe=new Map,gt.findHostDirectiveDefs(gt,kt,Fe),kt.push(gt)):kt=[gt];const Vt=function KD(o,a){const c=o[Je],u=In;return o[u]=a,Ah(c,u,2,"#host",null)}(Ie,j),ci=function ZD(o,a,c,u,f,g,v,E){const T=f[Je];!function YD(o,a,c,u){for(const f of o)a.mergedAttrs=Mo(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(Ug(a,a.mergedAttrs,!0),null!==c&&Sy(u,c,a))}(u,o,a,v);const S=g.createRenderer(a,c),P=wc(f,vm(c),null,c.onPush?32:16,f[o.index],o,g,S,E||null,null,null);return T.firstCreatePass&&Og(T,o,u.length-1),Lg(f,P),f[o.index]=P}(Vt,j,gt,kt,Ie,E,S);Ye=Ul(ie,In),j&&function ox(o,a,c,u){if(u)ga(o,c,["ng-version",Aw.full]);else{const{attrs:f,classes:g}=function AD(o){const a=[],c=[];let u=1,f=2;for(;u<o.length;){let g=o[u];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++u]):8===f&&c.push(g);else{if(!Aa(f))break;f=g}u++}return{attrs:a,classes:c}}(a.selectors[0]);f&&ga(o,c,f),g&&g.length>0&&Ta(o,c,g.join(" "))}}(S,gt,j,u),void 0!==c&&function uv(o,a,c){const u=o.projection=[];for(let f=0;f<a.length;f++){const g=c[f];u.push(null!=g?Array.from(g):null)}}(Ye,this.ngContentSelectors,c),Ge=function QD(o,a,c,u,f,g){const v=ti(),E=f[Je],T=Fi(v,f);Rg(E,f,v,c,null,u);for(let P=0;P<c.length;P++)Q(Un(f,E,v.directiveStart+P,v),f);Ng(E,f,v),T&&Q(T,f);const S=Un(f,E,v.directiveStart+v.componentOffset,v);if(o[Kn]=f[Kn]=S,null!==g)for(const P of g)P(S,a);return kh(E,v,o),S}(ci,gt,kt,Fe,Ie,[hv]),jd(ie,Ie,null)}finally{Bu()}return new sx(this.componentType,Ge,Bd(Ye,Ie),Ie,Ye)}}class sx extends yD{constructor(a,c,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new GD(f),this.componentType=a}setInput(a,c){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[a])){const g=this._rootLView;dv(g[Je],g,f,a,c),xm(Ai(this._tNode.index,g))}}get injector(){return new ba(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function hv(){const o=ti();ql(_e()[Je],o)}function Cc(o){let a=function Pa(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const u=[o];for(;a;){let f;if(pr(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new be(903,!1);f=a.\u0275dir}if(f){if(c){u.push(f);const v=o;v.inputs=Hg(o.inputs),v.declaredInputs=Hg(o.declaredInputs),v.outputs=Hg(o.outputs);const E=f.hostBindings;E&&lx(o,E);const T=f.viewQuery,S=f.contentQueries;if(T&&XD(o,T),S&&Nh(o,S),xe(o.inputs,f.inputs),xe(o.declaredInputs,f.declaredInputs),xe(o.outputs,f.outputs),pr(f)&&f.data.animation){const P=o.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===Cc&&(c=!1)}}a=Object.getPrototypeOf(a)}!function ax(o){let a=0,c=null;for(let u=o.length-1;u>=0;u--){const f=o[u];f.hostVars=a+=f.hostVars,f.hostAttrs=Mo(f.hostAttrs,c=Mo(c,f.hostAttrs))}}(u)}function Hg(o){return o===R?{}:o===Z?[]:o}function XD(o,a){const c=o.viewQuery;o.viewQuery=c?(u,f)=>{a(u,f),c(u,f)}:a}function Nh(o,a){const c=o.contentQueries;o.contentQueries=c?(u,f,g)=>{a(u,f,g),c(u,f,g)}:a}function lx(o,a){const c=o.hostBindings;o.hostBindings=c?(u,f)=>{a(u,f),c(u,f)}:a}function Gg(o){return!!Wg(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function Wg(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Wi(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function _v(o,a,c,u){const f=_e();return Wi(f,Ps(),a)&&(Bt(),zo(Pn(),f,o,a,c,u)),_v}function Gd(o,a,c,u,f,g,v,E){const T=_e(),S=Bt(),P=o+In,j=S.firstCreatePass?function tS(o,a,c,u,f,g,v,E,T){const S=a.consts,P=Ah(a,o,4,v||null,Rs(S,E));av(a,c,P,Rs(S,T)),ql(a,P);const j=P.tView=rv(2,P,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,S);return null!==a.queries&&(a.queries.template(a,P),j.queries=a.queries.embeddedTView(P)),P}(P,S,T,a,c,u,f,g,v):S.data[P];Fr(j,!1);const Y=T[$t].createComment("");_l(S,T,Y,j),Q(Y,T),Lg(T,T[P]=ex(Y,T,Y,j)),Ka(j)&&Hd(S,T,j),null!=v&&Ag(T,j,E)}function px(o){return nr(function Pu(){return Rt.lFrame.contextLView}(),In+o)}function bv(o,a,c){const u=_e();return Wi(u,Ps(),a)&&Vs(Bt(),Pn(),u,o,a,u[$t],c,!1),bv}function Wd(o,a,c,u,f){const v=f?"class":"style";dv(o,c,a.inputs[v],v,u)}function Kg(o,a,c,u){const f=_e(),g=Bt(),v=In+o,E=f[$t],T=g.firstCreatePass?function Om(o,a,c,u,f,g){const v=a.consts,T=Ah(a,o,2,u,Rs(v,f));return av(a,c,T,Rs(v,g)),null!==T.attrs&&Ug(T,T.attrs,!1),null!==T.mergedAttrs&&Ug(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(v,g,f,a,c,u):g.data[v],S=f[v]=tm(E,a,function Uu(){return Rt.lFrame.currentNamespace}()),P=Ka(T);return Fr(T,!0),Sy(E,S,T),32!=(32&T.flags)&&_l(g,f,S,T),0===function Yc(){return Rt.lFrame.elementDepthCount}()&&Q(S,f),function Qc(){Rt.lFrame.elementDepthCount++}(),P&&(Hd(g,f,T),kh(g,T,f)),null!==u&&Ag(f,T),Kg}function Zg(){let o=ti();Hl()?Ru():(o=o.parent,Fr(o,!1));const a=o;!function Xc(){Rt.lFrame.elementDepthCount--}();const c=Bt();return c.firstCreatePass&&(ql(c,o),Io(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Os(o){return 0!=(8&o.flags)}(a)&&Wd(c,a,_e(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function sd(o){return 0!=(16&o.flags)}(a)&&Wd(c,a,_e(),a.stylesWithoutHost,!1),Zg}function wv(o,a,c,u){return Kg(o,a,c,u),Zg(),wv}function Yg(o,a,c){const u=_e(),f=Bt(),g=o+In,v=f.firstCreatePass?function nS(o,a,c,u,f){const g=a.consts,v=Rs(g,u),E=Ah(a,o,8,"ng-container",v);return null!==v&&Ug(E,v,!0),av(a,c,E,Rs(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,u,a,c):f.data[g];Fr(v,!0);const E=u[g]=u[$t].createComment("");return _l(f,u,E,v),Q(E,u),Ka(v)&&(Hd(f,u,v),kh(f,v,u)),null!=c&&Ag(u,v),Yg}function Qg(){let o=ti();const a=Bt();return Hl()?Ru():(o=o.parent,Fr(o,!1)),a.firstCreatePass&&(ql(a,o),Io(o)&&a.queries.elementEnd(o)),Qg}function gx(){return _e()}function Fm(o){return!!o&&"function"==typeof o.then}function Lm(o){return!!o&&"function"==typeof o.subscribe}const qd=Lm;function xv(o,a,c,u){const f=_e(),g=Bt(),v=ti();return function yx(o,a,c,u,f,g,v){const E=Ka(u),S=o.firstCreatePass&&Cm(o),P=a[Kn],j=Ec(a);let Y=!0;if(3&u.type||v){const Ge=Fi(u,a),Ye=v?v(Ge):Ge,gt=j.length,kt=v?Vt=>v(pi(Vt[u.index])):u.index;let Fe=null;if(!v&&E&&(Fe=function rS(o,a,c,u){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===c&&f[g+1]===u){const E=a[wo],T=f[g+2];return E.length>T?E[T]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,u.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=g,Fe.__ngLastListenerFn__=g,Y=!1;else{g=bx(u,a,P,g,!1);const Vt=c.listen(Ye,f,g);j.push(g,Vt),S&&S.push(f,kt,gt,gt+1)}}else g=bx(u,a,P,g,!1);const ie=u.outputs;let Ie;if(Y&&null!==ie&&(Ie=ie[f])){const Ge=Ie.length;if(Ge)for(let Ye=0;Ye<Ge;Ye+=2){const ci=a[Ie[Ye]][Ie[Ye+1]].subscribe(g),Vi=j.length;j.push(g,ci),S&&S.push(f,u.index,Vi,-(Vi+1))}}}(g,f,f[$t],v,o,a,u),xv}function vx(o,a,c,u){try{return Vn(6,a,c),!1!==c(u)}catch(f){return Vg(o,f),!1}finally{Vn(7,a,c)}}function bx(o,a,c,u,f){return function g(v){if(v===Function)return u;xm(o.componentOffset>-1?Ai(o.index,a):a);let T=vx(a,c,u,v),S=g.__ngNextListenerFn__;for(;S;)T=vx(a,c,S,v)&&T,S=S.__ngNextListenerFn__;return f&&!1===T&&(v.preventDefault(),v.returnValue=!1),T}}function wx(o=1){return function nd(o){return(Rt.lFrame.contextLView=function Vu(o,a){for(;o>0;)a=a[As],o--;return a}(o,Rt.lFrame.contextLView))[Kn]}(o)}function sS(o,a){let c=null;const u=function li(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?fm(o,g,!0):Ig(u,g))return f}else c=f}return c}function xx(o){const a=_e()[fi][Si];if(!a.projection){const u=a.projection=wa(o?o.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const v=o?sS(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:u[v]=g,f[v]=g),g=g.next}}}function Ev(o,a=0,c){const u=_e(),f=Bt(),g=Ah(f,In+o,16,null,c||null);null===g.projection&&(g.projection=a),Ru(),32!=(32&g.flags)&&function ag(o,a,c){Dy(a[$t],0,a,c,Qe(o,c,a),mh(c.parent||a[Si],c,a))}(f,u,g)}function jm(o,a){return o<<17|a<<2}function Il(o){return o>>17&32767}function t_(o){return 2|o}function Go(o){return(131068&o)>>2}function n_(o,a){return-131069&o|a<<2}function Iv(o){return 1|o}function Ax(o,a,c,u,f){const g=o[c+1],v=null===a;let E=u?Il(g):Go(g),T=!1;for(;0!==E&&(!1===T||v);){const P=o[E+1];lS(o[E],a)&&(T=!0,o[E+1]=u?Iv(P):t_(P)),E=u?Il(P):Go(P)}T&&(o[c+1]=u?t_(g):Iv(g))}function lS(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&dn(o,a)>=0}function Sv(o,a,c){return jr(o,a,c,!1),Sv}function Av(o,a){return jr(o,a,null,!0),Av}function jr(o,a,c,u){const f=_e(),g=Bt(),v=function _s(o){const a=Rt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}(2);g.firstUpdatePass&&function kv(o,a,c,u){const f=o.data;if(null===f[c+1]){const g=f[Gi()],v=function Lx(o,a){return a>=o.expandoStartIndex}(o,c);(function zx(o,a){return 0!=(o.flags&(a?8:16))})(g,u)&&null===a&&!v&&(a=!1),a=function i_(o,a,c,u){const f=function zl(o){const a=Rt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(c=Hm(c=Rv(null,o,a,c,u),a.attrs,u),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(c=Rv(f,o,a,c,u),null===g){let T=function r_(o,a,c){const u=c?a.classBindings:a.styleBindings;if(0!==Go(u))return o[Il(u)]}(o,a,u);void 0!==T&&Array.isArray(T)&&(T=Rv(null,o,a,T[1],u),T=Hm(T,a.attrs,u),function Bx(o,a,c,u){o[Il(c?a.classBindings:a.styleBindings)]=u}(o,a,u,T))}else g=function Vx(o,a,c){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=Hm(u,o[g].hostAttrs,c);return Hm(u,a.attrs,c)}(o,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),c}(f,g,a,u),function aS(o,a,c,u,f,g){let v=g?a.classBindings:a.styleBindings,E=Il(v),T=Go(v);o[u]=c;let P,S=!1;if(Array.isArray(c)?(P=c[1],(null===P||dn(c,P)>0)&&(S=!0)):P=c,f)if(0!==T){const Y=Il(o[E+1]);o[u+1]=jm(Y,E),0!==Y&&(o[Y+1]=n_(o[Y+1],u)),o[E+1]=function e_(o,a){return 131071&o|a<<17}(o[E+1],u)}else o[u+1]=jm(E,0),0!==E&&(o[E+1]=n_(o[E+1],u)),E=u;else o[u+1]=jm(T,0),0===E?E=u:o[T+1]=n_(o[T+1],u),T=u;S&&(o[u+1]=t_(o[u+1])),Ax(o,P,u,!0),Ax(o,P,u,!1),function Sx(o,a,c,u,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&dn(g,a)>=0&&(c[u+1]=Iv(c[u+1]))}(a,P,o,u,g),v=jm(E,T),g?a.classBindings=v:a.styleBindings=v}(f,g,a,c,v,u)}}(g,o,v,u),a!==Qt&&Wi(f,v,a)&&function jx(o,a,c,u,f,g,v,E){if(!(3&a.type))return;const T=o.data,S=T[E+1],P=function oS(o){return 1==(1&o)}(S)?Hx(T,a,c,f,Go(S),v):void 0;Uh(P)||(Uh(g)||function Jg(o){return 2==(2&o)}(S)&&(g=Hx(T,null,c,f,E,v)),function dw(o,a,c,u,f){if(a)f?o.addClass(c,u):o.removeClass(c,u);else{let g=-1===u.indexOf("-")?void 0:ns.DashCase;null==f?o.removeStyle(c,u,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=ns.Important),o.setStyle(c,u,f,g))}}(u,v,So(Gi(),c),f,g))}(g,g.data[Gi()],f,f[$t],o,f[v+1]=function mS(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ve(Da(o)))),o}(a,c),u,v)}function Rv(o,a,c,u,f){let g=null;const v=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<v&&(g=a[E],u=Hm(u,g.hostAttrs,f),g!==o);)E++;return null!==o&&(c.directiveStylingLast=E),u}function Hm(o,a,c){const u=c?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===u&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Lr(o,v,!!c||a[++g]))}return void 0===o?null:o}function Hx(o,a,c,u,f,g){const v=null===a;let E;for(;f>0;){const T=o[f],S=Array.isArray(T),P=S?T[1]:T,j=null===P;let Y=c[f+1];Y===Qt&&(Y=j?Z:void 0);let ie=j?Br(Y,u):P===u?Y:void 0;if(S&&!Uh(ie)&&(ie=Br(T,u)),Uh(ie)&&(E=ie,v))return E;const Ie=o[f+1];f=v?Il(Ie):Go(Ie)}if(null!==a){let T=g?a.residualClasses:a.residualStyles;null!=T&&(E=Br(T,u))}return E}function Uh(o){return void 0!==o}function $x(o,a=""){const c=_e(),u=Bt(),f=o+In,g=u.firstCreatePass?Ah(u,f,1,a,null):u.data[f],v=c[f]=function is(o,a){return o.createText(a)}(c[$t],a);_l(u,c,v,g),Fr(g,!1)}function Pv(o){return Hr("",o,""),Pv}function Hr(o,a,c){const u=_e(),f=function $d(o,a,c,u){return Wi(o,Ps(),c)?a+Oe(c)+u:Qt}(u,o,a,c);return f!==Qt&&function Cl(o,a,c){const u=So(a,o);!function ng(o,a,c){o.setValue(a,c)}(o[$t],u,c)}(u,Gi(),f),Hr}function Uv(o,a,c){const u=_e();return Wi(u,Ps(),a)&&Vs(Bt(),Pn(),u,o,a,u[$t],c,!0),Uv}const Zd=void 0;var DS=["en",[["a","p"],["AM","PM"],Zd],[["AM","PM"],Zd,Zd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zd,"{1} 'at' {0}",Zd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function TS(o){const c=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===u?1:5}];let zh={};function a_(o){const a=function $h(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=l_(a);if(c)return c;const u=a.split("-")[0];if(c=l_(u),c)return c;if("en"===u)return DS;throw new be(701,!1)}function SS(o){return a_(o)[Nt.PluralCase]}function l_(o){return o in zh||(zh[o]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[o]),zh[o]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const Fa="en-US";let MS=Fa;function uE(o,a,c,u,f){if(o=ee(o),Array.isArray(o))for(let g=0;g<o.length;g++)uE(o[g],a,c,u,f);else{const g=Bt(),v=_e();let E=pc(o)?o:ee(o.provide),T=_c(o);const S=ti(),P=1048575&S.providerIndexes,j=S.directiveStart,Y=S.providerIndexes>>20;if(pc(o)||!o.multi){const ie=new Ns(T,f,Sh),Ie=fE(E,a,f?P:P+Y,j);-1===Ie?(oo(cd(S,v),g,E),hE(g,o,a.length),a.push(E),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),c.push(ie),v.push(ie)):(c[Ie]=ie,v[Ie]=ie)}else{const ie=fE(E,a,P+Y,j),Ie=fE(E,a,P,P+Y),Ye=Ie>=0&&c[Ie];if(f&&!Ye||!f&&!(ie>=0&&c[ie])){oo(cd(S,v),g,E);const gt=function $O(o,a,c,u,f){const g=new Ns(o,c,Sh);return g.multi=[],g.index=a,g.componentProviders=0,sA(g,f,u&&!c),g}(f?zO:HO,c.length,f,u,T);!f&&Ye&&(c[Ie].providerFactory=gt),hE(g,o,a.length,0),a.push(E),S.directiveStart++,S.directiveEnd++,f&&(S.providerIndexes+=1048576),c.push(gt),v.push(gt)}else hE(g,o,ie>-1?ie:Ie,sA(c[f?Ie:ie],T,!f&&u));!f&&u&&Ye&&c[Ie].componentProviders++}}}function hE(o,a,c,u){const f=pc(a),g=function mD(o){return!!o.useClass}(a);if(f||g){const T=(g?ee(a.useClass):a).prototype.ngOnDestroy;if(T){const S=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const P=S.indexOf(c);-1===P?S.push(c,[u,T]):S[P+1].push(u,T)}else S.push(c,T)}}}function sA(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function fE(o,a,c,u){for(let f=c;f<u;f++)if(a[f]===o)return f;return-1}function HO(o,a,c,u){return mE(this.multi,[])}function zO(o,a,c,u){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Un(c,c[Je],this.providerFactory.index,u);g=E.slice(0,v),mE(f,g);for(let T=v;T<E.length;T++)g.push(E[T])}else g=[],mE(f,g);return g}function mE(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function oA(o,a=[]){return c=>{c.providersResolver=(u,f)=>function jO(o,a,c){const u=Bt();if(u.firstCreatePass){const f=pr(o);uE(c,u.data,u.blueprint,f,!0),uE(a,u.data,u.blueprint,f,!1)}}(u,f?f(o):o,a)}}class qm{}class aA{}function GO(o,a){return new lA(o,a??null)}class lA extends qm{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ix(this);const u=Ti(a);this._bootstrapComponents=bl(u.bootstrap),this._r3Injector=Ih(a,c,[{provide:qm,useValue:this},{provide:cm,useValue:this.componentFactoryResolver}],ve(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class pE extends aA{constructor(a){super(),this.moduleType=a}create(a){return new lA(this.moduleType,a)}}class WO extends qm{constructor(a,c,u){super(),this.componentFactoryResolver=new ix(this),this.instance=null;const f=new vg([...a,{provide:qm,useValue:this},{provide:cm,useValue:this.componentFactoryResolver}],c||yg(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function gE(o,a,c=null){return new WO(o,a,c).injector}let qO=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const u=uD(0,c.type),f=u.length>0?gE([u],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=ut({token:o,providedIn:"environment",factory:()=>new o(jt(gc))}),o})();function cA(o){o.getStandaloneInjector=a=>a.get(qO).getOrCreateStandaloneInjector(o)}function wE(o,a,c,u,f,g){const v=a+c;return Wi(o,v,f)?function $o(o,a,c){return o[a]=c}(o,v+1,g?u.call(g,f):u(f)):function Gh(o,a){const c=o[a];return c===Qt?void 0:c}(o,v+1)}function EE(o,a){const c=Bt();let u;const f=o+In;c.firstCreatePass?(u=function CE(o,a){if(a)for(let c=a.length-1;c>=0;c--){const u=a[c];if(o===u.name)return u}}(a,c.pipeRegistry),c.data[f]=u,u.onDestroy&&(c.destroyHooks??(c.destroyHooks=[])).push(f,u.onDestroy)):u=c.data[f];const g=u.factory||(u.factory=ks(u.type)),v=Qn(Sh);try{const E=ol(!1),T=g();return ol(E),function Nm(o,a,c,u){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),a[c]=u}(c,_e(),f,T),T}finally{Qn(v)}}function Dl(o,a,c){const u=o+In,f=_e(),g=nr(f,u);return function Ac(o,a){return o[Je].data[a].pure}(f,u)?wE(f,function Li(){const o=Rt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),a,g.transform,c,g):g.transform(c)}function f_(o){return a=>{setTimeout(o,void 0,a)}}const os=class lF extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,u){let f=a,g=c||(()=>null),v=u;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),g=T.error?.bind(T),v=T.complete?.bind(T)}this.__isAsync&&(g=f_(g),f&&(f=f_(f)),v&&(v=f_(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof $.w0&&a.add(E),E}};function yA(){return this._results[Symbol.iterator]()}class m_{get changes(){return this._changes||(this._changes=new os)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=m_.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=yA)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const u=this;u.dirty=!1;const f=function Ir(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function gd(o,a,c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++){let f=o[u],g=a[u];if(c&&(f=c(f),g=c(g)),g!==f)return!1}return!0}(u._results,f,c))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Km=(()=>{class o{}return o.__NG_ELEMENT_ID__=cF,o})();const vA=Km,DE=class extends vA{constructor(a,c,u){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=u}createEmbeddedView(a,c){const u=this._declarationTContainer.tView,f=wc(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null,c||null);f[xo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Cr];return null!==v&&(f[Cr]=v.createEmbeddedView(u)),jd(u,f,a),new Tm(f)}};function cF(){return Zm(ti(),_e())}function Zm(o,a){return 4&o.type?new DE(a,o,Bd(o,a)):null}let $v=(()=>{class o{}return o.__NG_ELEMENT_ID__=dF,o})();function dF(){return kE(ti(),_e())}const SE=$v,bA=class extends SE{constructor(a,c,u){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=u}get element(){return Bd(this._hostTNode,this._hostLView)}get injector(){return new ba(this._hostTNode,this._hostLView)}get parentInjector(){const a=ii(this._hostTNode,this._hostLView);if(ko(a)){const c=sl(a,this._hostLView),u=ya(a);return new ba(c[Je].data[u+8],c)}return new ba(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=AE(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Oi}createEmbeddedView(a,c,u){let f,g;"number"==typeof u?f=u:null!=u&&(f=u.index,g=u.injector);const v=a.createEmbeddedView(c||{},g);return this.insert(v,f),v}createComponent(a,c,u,f,g){const v=a&&!function ic(o){return"function"==typeof o}(a);let E;if(v)E=c;else{const j=c||{};E=j.index,u=j.injector,f=j.projectableNodes,g=j.environmentInjector||j.ngModuleRef}const T=v?a:new Dm(bt(a)),S=u||this.parentInjector;if(!g&&null==T.ngModule){const Y=(v?S:this.parentInjector).get(gc,null);Y&&(g=Y)}const P=T.create(S,f,void 0,g);return this.insert(P.hostView,E),P}insert(a,c){const u=a._lView,f=u[Je];if(function Su(o){return Jr(o[Rn])}(u)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const j=u[Rn],Y=new bA(j,j[Si],j[Rn]);Y.detach(Y.indexOf(a))}}const g=this._adjustIndex(c),v=this._lContainer;!function p(o,a,c,u){const f=Oi+u,g=c.length;u>0&&(c[f-1][vn]=a),u<g-Oi?(a[vn]=c[f],_d(c,Oi+u,a)):(c.push(a),a[vn]=null),a[Rn]=c;const v=a[xo];null!==v&&c!==v&&function _(o,a){const c=o[Ms];a[fi]!==a[Rn][Rn][fi]&&(o[qa]=!0),null===c?o[Ms]=[a]:c.push(a)}(v,a);const E=a[Cr];null!==E&&E.insertView(o),a[Yt]|=64}(f,u,v,g);const E=ph(g,v),T=u[$t],S=gl(T,v[oa]);return null!==S&&function Ty(o,a,c,u,f,g){u[Di]=f,u[Si]=a,Fd(o,u,c,1,f,g)}(f,v[Si],T,u,S,E),a.attachToViewContainerRef(),_d(ME(v),g,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=AE(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),u=M(this._lContainer,c);u&&(cl(ME(this._lContainer),c),N(u[Je],u))}detach(a){const c=this._adjustIndex(a,-1),u=M(this._lContainer,c);return u&&null!=cl(ME(this._lContainer),c)?new Tm(u):null}_adjustIndex(a,c=0){return a??this.length+c}};function AE(o){return o[Qs]}function ME(o){return o[Qs]||(o[Qs]=[])}function kE(o,a){let c;const u=a[o.index];if(Jr(u))c=u;else{let f;if(8&o.type)f=pi(u);else{const g=a[$t];f=g.createComment("");const v=Fi(o,a);Gt(g,gl(g,v),f,function nm(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=c=ex(u,a,f,o),Lg(a,c)}return new bA(c,o,a)}class RE{constructor(a){this.queryList=a,this.matches=null}clone(){return new RE(this.queryList)}setDirty(){this.queryList.setDirty()}}class PE{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const u=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let g=0;g<u;g++){const v=c.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new PE(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==TA(a,c).matches&&this.queries[c].setDirty()}}class wA{constructor(a,c,u=null){this.predicate=a,this.flags=c,this.read=u}}class Gv{constructor(a=[]){this.queries=a}elementStart(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let u=0;u<this.length;u++){const f=null!==c?c.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==c?c.push(g):c=[g])}return null!==c?new Gv(c):null}template(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class NE{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new NE(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,c,xA(c,g)),this.matchTNodeWithReadOption(a,c,va(c,a,g,!1,!1))}else u===Km?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,va(c,a,u,!1,!1))}matchTNodeWithReadOption(a,c,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===dm||f===$v||f===Km&&4&c.type)this.addMatch(c.index,-2);else{const g=va(c,a,f,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,u)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function xA(o,a){const c=o.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===a)return c[u+1];return null}function hF(o,a,c,u){return-1===c?function uF(o,a){return 11&o.type?Bd(o,a):4&o.type?Zm(o,a):null}(a,o):-2===c?function fF(o,a,c){return c===dm?Bd(a,o):c===Km?Zm(a,o):c===$v?kE(a,o):void 0}(o,a,u):Un(o,o[Je],c,a)}function EA(o,a,c,u){const f=a[Cr].queries[u];if(null===f.matches){const g=o.data,v=c.matches,E=[];for(let T=0;T<v.length;T+=2){const S=v[T];E.push(S<0?null:hF(a,g[S],v[T+1],c.metadata.read))}f.matches=E}return f.matches}function Wv(o,a,c,u){const f=o.queries.getByIndex(c),g=f.matches;if(null!==g){const v=EA(o,a,f,c);for(let E=0;E<g.length;E+=2){const T=g[E];if(T>0)u.push(v[E/2]);else{const S=g[E+1],P=a[-T];for(let j=Oi;j<P.length;j++){const Y=P[j];Y[xo]===Y[Rn]&&Wv(Y[Je],Y,S,u)}if(null!==P[Ms]){const j=P[Ms];for(let Y=0;Y<j.length;Y++){const ie=j[Y];Wv(ie[Je],ie,S,u)}}}}}return u}function OE(o){const a=_e(),c=Bt(),u=el();Fu(u+1);const f=TA(c,u);if(o.dirty&&function Qa(o){return 4==(4&o[Yt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?Wv(c,a,u,[]):EA(c,a,f,u);o.reset(g,UN),o.notifyOnChanges()}return!0}return!1}function FE(o,a,c){const u=Bt();u.firstCreatePass&&(IA(u,new wA(o,a,c),-1),2==(2&a)&&(u.staticViewQueries=!0)),CA(u,_e(),a)}function LE(o,a,c,u){const f=Bt();if(f.firstCreatePass){const g=ti();IA(f,new wA(a,c,u),g.index),function mF(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}CA(f,_e(),c)}function BE(){return function VE(o,a){return o[Cr].queries[a].queryList}(_e(),el())}function CA(o,a,c){const u=new m_(4==(4&c));ov(o,a,u,u.destroy),null===a[Cr]&&(a[Cr]=new PE),a[Cr].queries.push(new RE(u))}function IA(o,a,c){null===o.queries&&(o.queries=new Gv),o.queries.track(new NE(a,c))}function TA(o,a){return o.queries.getByIndex(a)}function DA(o,a){return Zm(o,a)}function p_(o){return!!Ti(o)}function rb(...o){}const qA=new cn("Application Initializer");let sb=(()=>{class o{constructor(c){this.appInits=c,this.resolve=rb,this.reject=rb,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Fm(g))c.push(g);else if(qd(g)){const v=new Promise((E,T)=>{g.subscribe({complete:E,error:T})});c.push(v)}}Promise.all(c).then(()=>{u()}).catch(f=>{this.reject(f)}),0===c.length&&u(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(jt(qA,8))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const KA=new cn("AppId",{providedIn:"root",factory:function ZA(){return`${zE()}${zE()}${zE()}`}});function zE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const YA=new cn("Platform Initializer"),MF=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QA=new cn("AnimationModuleType");let kF=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Mc=new cn("LocaleId",{providedIn:"root",factory:()=>Bn(Mc,pt.Optional|pt.SkipSelf)||function RF(){return typeof $localize<"u"&&$localize.locale||Fa}()}),PF=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $E{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let JA=(()=>{class o{compileModuleSync(c){return new pE(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const u=this.compileModuleSync(c),g=bl(Ti(c).declarations).reduce((v,E)=>{const T=bt(E);return T&&v.push(new Dm(T)),v},[]);return new $E(u,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ob=(()=>Promise.resolve(0))();function ZE(o){typeof Zone>"u"?ob.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Ko{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new os(!1),this.onMicrotaskEmpty=new os(!1),this.onStable=new os(!1),this.onError=new os(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&c,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function tM(){let o=fn.requestAnimationFrame,a=fn.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function BF(o){const a=()=>{!function LF(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(fn,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,QE(o),o.isCheckStableRunning=!0,YE(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),QE(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,f,g,v,E)=>{try{return nM(o),c.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),iM(o)}},onInvoke:(c,u,f,g,v,E,T)=>{try{return nM(o),c.invoke(f,g,v,E,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),iM(o)}},onHasTask:(c,u,f,g)=>{c.hasTask(f,g),u===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,QE(o),YE(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,u,f,g)=>(c.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ko.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Ko.isInAngularZone())throw new be(909,!1)}run(a,c,u){return this._inner.run(a,c,u)}runTask(a,c,u,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,FF,rb,rb);try{return g.runTask(v,c,u)}finally{g.cancelTask(v)}}runGuarded(a,c,u){return this._inner.runGuarded(a,c,u)}runOutsideAngular(a){return this._outer.run(a)}}const FF={};function YE(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function QE(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function nM(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function iM(o){o._nesting--,YE(o)}class VF{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new os,this.onMicrotaskEmpty=new os,this.onStable=new os,this.onError=new os}run(a,c,u){return a.apply(c,u)}runGuarded(a,c,u){return a.apply(c,u)}runOutsideAngular(a){return a()}runTask(a,c,u,f){return a.apply(c,u)}}const rM=new cn(""),sM=new cn("");let ab,UF=(()=>{class o{constructor(c,u,f){this._ngZone=c,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ab||(function oM(o){ab=o}(f),f.addToWindow(u)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ko.assertNotInAngularZone(),ZE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ZE(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:f})}whenStable(c,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,u,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(jt(Ko),jt(XE),jt(sM))},o.\u0275prov=ut({token:o,factory:o.\u0275fac}),o})(),XE=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return ab?.findTestabilityInTree(this,c,u)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Sl=!1;let kc=null;const aM=new cn("AllowMultipleToken"),lb=new cn("PlatformDestroyListeners"),JE=new cn("appBootstrapListener");class cb{constructor(a,c){this.name=a,this.token=c}}function $r(o,a,c=[]){const u=`Platform: ${a}`,f=new cn(u);return(g=[])=>{let v=db();if(!v||v.injector.get(aM,!1)){const E=[...c,...g,{provide:f,useValue:!0}];o?o(E):function Zo(o){if(kc&&!kc.get(aM,!1))throw new be(400,!1);kc=o;const a=o.get(go);(function eC(o){const a=o.get(YA,null);a&&a.forEach(c=>c())})(o)}(function Yo(o=[],a){return ka.create({name:a,providers:[{provide:Iw,useValue:"platform"},{provide:lb,useValue:new Set([()=>kc=null])},...o]})}(E,u))}return function Qm(o){const a=db();if(!a)throw new be(401,!1);return a}()}}function db(){return kc?.get(go)??null}let go=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const f=function g_(o,a){let c;return c="noop"===o?new VF:("zone.js"===o?void 0:o)||new Ko(a),c}(u?.ngZone,function nt(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:Ko,useValue:f}];return f.run(()=>{const v=ka.create({providers:g,parent:this.injector,name:c.moduleType.name}),E=c.create(v),T=E.injector.get(um,null);if(!T)throw new be(402,!1);return f.runOutsideAngular(()=>{const S=f.onError.subscribe({next:P=>{T.handleError(P)}});E.onDestroy(()=>{__(this._modules,E),S.unsubscribe()})}),function Wt(o,a,c){try{const u=c();return Fm(u)?u.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>o.handleError(u)),u}}(T,f,()=>{const S=E.injector.get(sb);return S.runInitializers(),S.donePromise.then(()=>(function c_(o){ye(o,"Expected localeId to be defined"),"string"==typeof o&&(MS=o.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Mc,Fa)||Fa),this._moduleDoBootstrap(E),E))})})}bootstrapModule(c,u=[]){const f=Xm({},u);return function lM(o,a,c){const u=new pE(c);return Promise.resolve(u)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(c){const u=c.injector.get(Rc);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new be(-403,!1);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const c=this._injector.get(lb,null);c&&(c.forEach(u=>u()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(jt(ka))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Xm(o,a){return Array.isArray(a)?a.reduce(Xm,o):{...o,...a}}let Rc=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,u,f){this._zone=c,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Ko.assertNotInAngularZone(),ZE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Ko.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,re.T)(g,v.pipe((0,de.B)()))}bootstrap(c,u){const f=c instanceof wh;if(!this._injector.get(sb).done){!f&&$i(c);throw new be(405,Sl)}let v;v=f?c:this._injector.get(cm).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const E=function bn(o){return o.isBoundToModule}(v)?void 0:this._injector.get(qm),S=v.create(ka.NULL,[],u||v.selector,E),P=S.location.nativeElement,j=S.injector.get(rM,null);return j?.registerApplication(P),S.onDestroy(()=>{this.detachView(S.hostView),__(this.components,S),j?.unregisterApplication(P)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;__(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const u=this._injector.get(JE,[]);u.push(...this._bootstrapListeners),u.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>__(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new be(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(jt(Ko),jt(gc),jt(um))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function __(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}function dM(){return!1}function uM(){}let Pc=(()=>{class o{}return o.__NG_ELEMENT_ID__=hM,o})();function hM(o){return function tC(o,a,c){if(Fl(o)&&!c){const u=Ai(o.index,a);return new Tm(u,u)}return 47&o.type?new Tm(a[fi],a):null}(ti(),_e(),16==(16&o))}class aC{constructor(){}supports(a){return Gg(a)}create(a){return new _M(a)}}const tp=(o,a)=>a;class _M{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||tp}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,u=this._removalsHead,f=0,g=null;for(;c||u;){const v=!u||c&&c.currentIndex<ip(u,f,g)?c:u,E=ip(v,f,g),T=v.currentIndex;if(v===u)f--,u=u._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{g||(g=[]);const S=E-f,P=T-f;if(S!=P){for(let Y=0;Y<S;Y++){const ie=Y<g.length?g[Y]:g[Y]=0,Ie=ie+Y;P<=Ie&&Ie<S&&(g[Y]=ie+1)}g[v.previousIndex]=P-S}}E!==T&&a(v,E,T)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Gg(a))throw new be(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,c=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,g,v,E)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,v,E),u=!0),c=c._next}else f=0,function dx(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let u;for(;!(u=c.next()).done;)a(u.value)}}(a,E=>{v=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,E,v,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,v,f),u=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,f)):a=this._addAfter(new np(c,u),g,f),a}_verifyReinsertion(a,c,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,c,u),this._addToMoves(a,u),a}_moveAfter(a,c,u){return this._unlink(a),this._insertAfter(a,c,u),this._addToMoves(a,u),a}_addAfter(a,c,u){return this._insertAfter(a,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,u){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new lC),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,u=a._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lC),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class np{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const c=a._prevDup,u=a._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class lC{constructor(){this.map=new Map}put(a){const c=a.trackById;let u=this.map.get(c);u||(u=new yM,this.map.set(c,u)),u.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ip(o,a,c){const u=o.previousIndex;if(null===u)return u;let f=0;return c&&u<c.length&&(f=c[u]),u+a+f}class E_{constructor(){}supports(a){return a instanceof Map||Wg(a)}create(){return new vM}}class vM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Wg(a)))throw new be(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(f,u);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const u=a._prev;return c._next=a,c._prev=u,a._prev=c,u&&(u._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const u=new cC(a);return this._records.set(a,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(u=>c(a[u],u))}}class cC{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function mb(){return new C_([new aC])}let C_=(()=>{class o{constructor(c){this.factories=c}static create(c,u){if(null!=u){const f=u.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:u=>o.create(c,u||mb()),deps:[[o,new xa,new or]]}}find(c){const u=this.factories.find(f=>f.supports(c));if(null!=u)return u;throw new be(901,!1)}}return o.\u0275prov=ut({token:o,providedIn:"root",factory:mb}),o})();function I_(){return new rp([new E_])}let rp=(()=>{class o{constructor(c){this.factories=c}static create(c,u){if(u){const f=u.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:u=>o.create(c,u||I_()),deps:[[o,new xa,new or]]}}find(c){const u=this.factories.find(f=>f.supports(c));if(u)return u;throw new be(901,!1)}}return o.\u0275prov=ut({token:o,providedIn:"root",factory:I_}),o})();const xM=$r(null,"core",[]);let dC=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(jt(Rc))},o.\u0275mod=se({type:o}),o.\u0275inj=Et({}),o})();function uC(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(wt,Me,V)=>{V.d(Me,{Z:()=>qe});var d=V(2090),$=V(4859),O=V(6881),re=V(1877);class de{constructor(be,Re){this._delegate=be,this.firebase=Re,(0,O._addComponent)(be,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(be,Re=O._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(be);return!je.isInitialized()&&"EXPLICIT"===(null===(Oe=je.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&je.initialize(),je.getImmediate({identifier:Re})}_removeServiceInstance(be,Re=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(Re)}_addComponent(be){(0,O._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,O._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function we(){const at=function ve(at){const be={},Re={__esModule:!0,initializeApp:function De(Le,le={}){const it=O.initializeApp(Le,le);if((0,d.r3)(be,it.name))return be[it.name];const Dt=new at(it,Re);return be[it.name]=Dt,Dt},app:je,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Pe(Le){const le=Le.name,it=le.replace("-compat","");if(O._registerComponent(Le)&&"PUBLIC"===Le.type){const Dt=(ot=je())=>{if("function"!=typeof ot[it])throw xe.create("invalid-app-argument",{appName:le});return ot[it]()};void 0!==Le.serviceProps&&(0,d.ZB)(Dt,Le.serviceProps),Re[it]=Dt,at.prototype[it]=function(...ot){return this._getService.bind(this,le).apply(this,Le.multipleInstances?ot:[])}}return"PUBLIC"===Le.type?Re[it]:null},removeApp:function Oe(Le){delete be[Le]},useAsService:function ze(Le,le){return"serverAuth"===le?null:le},modularAPIs:O}};function je(Le){if(!(0,d.r3)(be,Le=Le||O._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:Le});return be[Le]}return Re.default=Re,Object.defineProperty(Re,"apps",{get:function Te(){return Object.keys(be).map(Le=>be[Le])}}),je.App=at,Re}(de);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function be(Re){(0,d.ZB)(at,Re)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),at}(),W=new re.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=q;!function Se(at){(0,O.registerVersion)("@firebase/app-compat","0.2.13",at)}()},6881:(wt,Me,V)=>{V.r(Me),V.d(Me,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Er,_DEFAULT_ENTRY_NAME:()=>Hi,_addComponent:()=>ft,_addOrOverwriteComponent:()=>Ft,_apps:()=>fn,_clearComponents:()=>Xi,_components:()=>Kt,_getProvider:()=>Pi,_registerComponent:()=>Xn,_removeServiceInstance:()=>Wn,deleteApp:()=>Jn,getApp:()=>mr,getApps:()=>jt,initializeApp:()=>Jt,onLog:()=>ei,registerVersion:()=>Ni,setLogLevel:()=>Ji});var d=V(5861),$=V(4859),O=V(1877),re=V(2090);const de=(ge,se)=>se.some(Be=>ge instanceof Be);let oe,xe;const q=new WeakMap,W=new WeakMap,ee=new WeakMap,He=new WeakMap,Se=new WeakMap;let be={get(ge,se,Be){if(ge instanceof IDBTransaction){if("done"===se)return W.get(ge);if("objectStoreNames"===se)return ge.objectStoreNames||ee.get(ge);if("store"===se)return Be.objectStoreNames[1]?void 0:Be.objectStore(Be.objectStoreNames[0])}return De(ge[se])},set:(ge,se,Be)=>(ge[se]=Be,!0),has:(ge,se)=>ge instanceof IDBTransaction&&("done"===se||"store"===se)||se in ge};function je(ge){return"function"==typeof ge?function Oe(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...se){return ge.apply(Te(this),se),De(q.get(this))}:function(...se){return De(ge.apply(Te(this),se))}:function(se,...Be){const yt=ge.call(Te(this),se,...Be);return ee.set(yt,se.sort?se.sort():[se]),De(yt)}}(ge):(ge instanceof IDBTransaction&&function at(ge){if(W.has(ge))return;const se=new Promise((Be,yt)=>{const At=()=>{ge.removeEventListener("complete",en),ge.removeEventListener("error",bt),ge.removeEventListener("abort",bt)},en=()=>{Be(),At()},bt=()=>{yt(ge.error||new DOMException("AbortError","AbortError")),At()};ge.addEventListener("complete",en),ge.addEventListener("error",bt),ge.addEventListener("abort",bt)});W.set(ge,se)}(ge),de(ge,function ve(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,be):ge)}function De(ge){if(ge instanceof IDBRequest)return function qe(ge){const se=new Promise((Be,yt)=>{const At=()=>{ge.removeEventListener("success",en),ge.removeEventListener("error",bt)},en=()=>{Be(De(ge.result)),At()},bt=()=>{yt(ge.error),At()};ge.addEventListener("success",en),ge.addEventListener("error",bt)});return se.then(Be=>{Be instanceof IDBCursor&&q.set(Be,ge)}).catch(()=>{}),Se.set(se,ge),se}(ge);if(He.has(ge))return He.get(ge);const se=je(ge);return se!==ge&&(He.set(ge,se),Se.set(se,ge)),se}const Te=ge=>Se.get(ge),Le=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],it=new Map;function Dt(ge,se){if(!(ge instanceof IDBDatabase)||se in ge||"string"!=typeof se)return;if(it.get(se))return it.get(se);const Be=se.replace(/FromIndex$/,""),yt=se!==Be,At=le.includes(Be);if(!(Be in(yt?IDBIndex:IDBObjectStore).prototype)||!At&&!Le.includes(Be))return;const en=function(){var bt=(0,d.Z)(function*(yn,...an){const $i=this.transaction(yn,At?"readwrite":"readonly");let Ti=$i.store;return yt&&(Ti=Ti.index(an.shift())),(yield Promise.all([Ti[Be](...an),At&&$i.done]))[0]});return function(an){return bt.apply(this,arguments)}}();return it.set(se,en),en}!function Re(ge){be=ge(be)}(ge=>({...ge,get:(se,Be,yt)=>Dt(se,Be)||ge.get(se,Be,yt),has:(se,Be)=>!!Dt(se,Be)||ge.has(se,Be)}));class ot{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Be=>{if(function qt(ge){return"VERSION"===ge.getComponent()?.type}(Be)){const yt=Be.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Be=>Be).join(" ")}}const ht="@firebase/app",Ei=new O.Yd("@firebase/app"),Hi="[DEFAULT]",Qi={[ht]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},fn=new Map,Kt=new Map;function ft(ge,se){try{ge.container.addComponent(se)}catch(Be){Ei.debug(`Component ${se.name} failed to register with FirebaseApp ${ge.name}`,Be)}}function Ft(ge,se){ge.container.addOrOverwriteComponent(se)}function Xn(ge){const se=ge.name;if(Kt.has(se))return Ei.debug(`There were multiple attempts to register component ${se}.`),!1;Kt.set(se,ge);for(const Be of fn.values())ft(Be,ge);return!0}function Pi(ge,se){const Be=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Be&&Be.triggerHeartbeat(),ge.container.getProvider(se)}function Wn(ge,se,Be=Hi){Pi(ge,se).clearInstance(Be)}function Xi(){Kt.clear()}const Ci=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xt{constructor(se,Be,yt){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Be),this._name=Be.name,this._automaticDataCollectionEnabled=Be.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Ci.create("app-deleted",{appName:this._name})}}const Er="9.23.0";function Jt(ge,se={}){let Be=ge;"object"!=typeof se&&(se={name:se});const yt=Object.assign({name:Hi,automaticDataCollectionEnabled:!1},se),At=yt.name;if("string"!=typeof At||!At)throw Ci.create("bad-app-name",{appName:String(At)});if(Be||(Be=(0,re.aH)()),!Be)throw Ci.create("no-options");const en=fn.get(At);if(en){if((0,re.vZ)(Be,en.options)&&(0,re.vZ)(yt,en.config))return en;throw Ci.create("duplicate-app",{appName:At})}const bt=new $.H0(At);for(const an of Kt.values())bt.addComponent(an);const yn=new Xt(Be,yt,bt);return fn.set(At,yn),yn}function mr(ge=Hi){const se=fn.get(ge);if(!se&&ge===Hi&&(0,re.aH)())return Jt();if(!se)throw Ci.create("no-app",{appName:ge});return se}function jt(){return Array.from(fn.values())}function Jn(ge){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(ge){const se=ge.name;fn.has(se)&&(fn.delete(se),yield Promise.all(ge.container.getProviders().map(Be=>Be.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function Ni(ge,se,Be){var yt;let At=null!==(yt=Qi[ge])&&void 0!==yt?yt:ge;Be&&(At+=`-${Be}`);const en=At.match(/\s|\//),bt=se.match(/\s|\//);if(en||bt){const yn=[`Unable to register library "${At}" with version "${se}":`];return en&&yn.push(`library name "${At}" contains illegal characters (whitespace or "/")`),en&&bt&&yn.push("and"),bt&&yn.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void Ei.warn(yn.join(" "))}Xn(new $.wA(`${At}-version`,()=>({library:At,version:se}),"VERSION"))}function ei(ge,se){if(null!==ge&&"function"!=typeof ge)throw Ci.create("invalid-log-argument");(0,O.Am)(ge,se)}function Ji(ge){(0,O.Ub)(ge)}const zi="firebase-heartbeat-database",er=1,G="firebase-heartbeat-store";let z=null;function F(){return z||(z=function Pe(ge,se,{blocked:Be,upgrade:yt,blocking:At,terminated:en}={}){const bt=indexedDB.open(ge,se),yn=De(bt);return yt&&bt.addEventListener("upgradeneeded",an=>{yt(De(bt.result),an.oldVersion,an.newVersion,De(bt.transaction),an)}),Be&&bt.addEventListener("blocked",an=>Be(an.oldVersion,an.newVersion,an)),yn.then(an=>{en&&an.addEventListener("close",()=>en()),At&&an.addEventListener("versionchange",$i=>At($i.oldVersion,$i.newVersion,$i))}).catch(()=>{}),yn}(zi,er,{upgrade:(ge,se)=>{0===se&&ge.createObjectStore(G)}}).catch(ge=>{throw Ci.create("idb-open",{originalErrorMessage:ge.message})})),z}function R(){return(R=(0,d.Z)(function*(ge){try{return yield(yield F()).transaction(G).objectStore(G).get(rt(ge))}catch(se){if(se instanceof re.ZR)Ei.warn(se.message);else{const Be=Ci.create("idb-get",{originalErrorMessage:se?.message});Ei.warn(Be.message)}}})).apply(this,arguments)}function Z(ge,se){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,d.Z)(function*(ge,se){try{const yt=(yield F()).transaction(G,"readwrite");yield yt.objectStore(G).put(se,rt(ge)),yield yt.done}catch(Be){if(Be instanceof re.ZR)Ei.warn(Be.message);else{const yt=Ci.create("idb-set",{originalErrorMessage:Be?.message});Ei.warn(yt.message)}}})).apply(this,arguments)}function rt(ge){return`${ge.name}!${ge.options.appId}`}class Zt{constructor(se){this.container=se,this._heartbeatsCache=null;const Be=this.container.getProvider("app").getImmediate();this._storage=new Ht(Be),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var se=this;return(0,d.Z)(function*(){const yt=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Mt();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==At&&!se._heartbeatsCache.heartbeats.some(en=>en.date===At))return se._heartbeatsCache.heartbeats.push({date:At,agent:yt}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(en=>{const bt=new Date(en.date).valueOf();return Date.now()-bt<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,d.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const Be=Mt(),{heartbeatsToSend:yt,unsentEntries:At}=function Dn(ge,se=1024){const Be=[];let yt=ge.slice();for(const At of ge){const en=Be.find(bt=>bt.agent===At.agent);if(en){if(en.dates.push(At.date),Ii(Be)>se){en.dates.pop();break}}else if(Be.push({agent:At.agent,dates:[At.date]}),Ii(Be)>se){Be.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Be,unsentEntries:yt}}(se._heartbeatsCache.heartbeats),en=(0,re.L)(JSON.stringify({version:2,heartbeats:yt}));return se._heartbeatsCache.lastSentHeartbeatDate=Be,At.length>0?(se._heartbeatsCache.heartbeats=At,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),en})()}}function Mt(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,d.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function L(ge){return R.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var Be=this;return(0,d.Z)(function*(){var yt;if(yield Be._canUseIndexedDBPromise){const en=yield Be.read();return Z(Be.app,{lastSentHeartbeatDate:null!==(yt=se.lastSentHeartbeatDate)&&void 0!==yt?yt:en.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Be=this;return(0,d.Z)(function*(){var yt;if(yield Be._canUseIndexedDBPromise){const en=yield Be.read();return Z(Be.app,{lastSentHeartbeatDate:null!==(yt=se.lastSentHeartbeatDate)&&void 0!==yt?yt:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...se.heartbeats]})}})()}}function Ii(ge){return(0,re.L)(JSON.stringify({version:2,heartbeats:ge})).length}!function Ss(ge){Xn(new $.wA("platform-logger",se=>new ot(se),"PRIVATE")),Xn(new $.wA("heartbeat",se=>new Zt(se),"PRIVATE")),Ni(ht,"0.9.13",ge),Ni(ht,"0.9.13","esm2017"),Ni("fire-js","")}("")},4859:(wt,Me,V)=>{V.d(Me,{H0:()=>ve,wA:()=>O});var d=V(5861),$=V(2090);class O{constructor(q,W,ee){this.name=q,this.instanceFactory=W,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const re="[DEFAULT]";class de{constructor(q,W){this.name=q,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const W=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(W)){const ee=new $.BH;if(this.instancesDeferred.set(W,ee),this.isInitialized(W)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:W});He&&ee.resolve(He)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(q){var W;const ee=this.normalizeInstanceIdentifier(q?.identifier),He=null!==(W=q?.optional)&&void 0!==W&&W;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(Se){if(He)return null;throw Se}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function xe(we){return"EAGER"===we.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[W,ee]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(W);try{const Se=this.getOrInitializeService({instanceIdentifier:He});ee.resolve(Se)}catch{}}}}clearInstance(q=re){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,d.Z)(function*(){const W=Array.from(q.instances.values());yield Promise.all([...W.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...W.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=re){return this.instances.has(q)}getOptions(q=re){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:W={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ee,options:W});for(const[Se,qe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(Se)&&qe.resolve(He);return He}onInit(q,W){var ee;const He=this.normalizeInstanceIdentifier(W),Se=null!==(ee=this.onInitCallbacks.get(He))&&void 0!==ee?ee:new Set;Se.add(q),this.onInitCallbacks.set(He,Se);const qe=this.instances.get(He);return qe&&q(qe,He),()=>{Se.delete(q)}}invokeOnInitCallbacks(q,W){const ee=this.onInitCallbacks.get(W);if(ee)for(const He of ee)try{He(q,W)}catch{}}getOrInitializeService({instanceIdentifier:q,options:W={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(we=q,we===re?void 0:we),options:W}),this.instances.set(q,ee),this.instancesOptions.set(q,W),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch{}var we;return ee||null}normalizeInstanceIdentifier(q=re){return this.component?this.component.multipleInstances?q:re:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const W=this.getProvider(q.name);if(W.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);W.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const W=new de(q,this);return this.providers.set(q,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Me,V)=>{V.d(Me,{Am:()=>we,Ub:()=>ve,Yd:()=>xe,in:()=>$});const d=[];var $=(()=>{return(q=$||($={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",$;var q})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},re=$.INFO,de={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},oe=(q,W,...ee)=>{if(W<q.logLevel)return;const He=(new Date).toISOString(),Se=de[W];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Se](`[${He}]  ${q.name}:`,...ee)};class xe{constructor(W){this.name=W,this._logLevel=re,this._logHandler=oe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in $))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?O[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...W),this._logHandler(this,$.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...W),this._logHandler(this,$.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,$.INFO,...W),this._logHandler(this,$.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,$.WARN,...W),this._logHandler(this,$.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...W),this._logHandler(this,$.ERROR,...W)}}function ve(q){d.forEach(W=>{W.setLogLevel(q)})}function we(q,W){for(const ee of d){let He=null;W&&W.level&&(He=O[W.level]),ee.userLogHandler=null===q?null:(Se,qe,...at)=>{const be=at.map(Re=>{if(null==Re)return null;if("string"==typeof Re)return Re;if("number"==typeof Re||"boolean"==typeof Re)return Re.toString();if(Re instanceof Error)return Re.message;try{return JSON.stringify(Re)}catch{return null}}).filter(Re=>Re).join(" ");qe>=(He??Se.logLevel)&&q({level:$[qe].toLowerCase(),message:be,args:at,type:Se.name})}}}},259:(wt,Me,V)=>{V.d(Me,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=V(6881);(0,d.registerVersion)("firebase","9.23.0","app")},9260:(wt,Me,V)=>{V.d(Me,{Z:()=>d.Z});var d=V(3942);d.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(wt,Me,V)=>{V.r(Me);var d=V(5861),$=V(3942),O=V(1389),re=V(2090),xe=(V(6881),V(1877),V(4859));function ve(){return window}const we=2e3;function W(){return W=(0,d.Z)(function*(F,L,R){var Z;const{BuildInfo:Ee}=ve();(0,O.as)(L.sessionId,"AuthEvent did not contain a session ID");const rt=yield function Re(F){return Oe.apply(this,arguments)}(L.sessionId),St={};return(0,O.at)()?St.ibi=Ee.packageName:(0,O.au)()?St.apn=Ee.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),Ee.displayName&&(St.appDisplayName=Ee.displayName),St.sessionId=rt,(0,O.aw)(F,R,L.type,void 0,null!==(Z=L.eventId)&&void 0!==Z?Z:void 0,St)}),W.apply(this,arguments)}function He(){return(He=(0,d.Z)(function*(F){const{BuildInfo:L}=ve(),R={};(0,O.at)()?R.iosBundleId=L.packageName:(0,O.au)()?R.androidPackageName=L.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,R)})).apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(F,L,R){const{cordova:Z}=ve();let Ee=()=>{};try{yield new Promise((rt,St)=>{let It=null;function Zt(){var Ht;rt();const Ii=null===(Ht=Z.plugins.browsertab)||void 0===Ht?void 0:Ht.close;"function"==typeof Ii&&Ii(),"function"==typeof R?.close&&R.close()}function Mt(){It||(It=window.setTimeout(()=>{St((0,O.az)(F,"redirect-cancelled-by-user"))},we))}function Dn(){"visible"===document?.visibilityState&&Mt()}L.addPassiveListener(Zt),document.addEventListener("resume",Mt,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Dn,!1),Ee=()=>{L.removePassiveListener(Zt),document.removeEventListener("resume",Mt,!1),document.removeEventListener("visibilitychange",Dn,!1),It&&window.clearTimeout(It)}})}finally{Ee()}})).apply(this,arguments)}function Oe(){return(Oe=(0,d.Z)(function*(F){const L=function je(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const L=new ArrayBuffer(F.length),R=new Uint8Array(L);for(let Z=0;Z<F.length;Z++)R[Z]=F.charCodeAt(Z);return R}(F),R=yield crypto.subtle.digest("SHA-256",L);return Array.from(new Uint8Array(R)).map(Ee=>Ee.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const De=20;class Te extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(L=>{this.resolveInialized=L})}addPassiveListener(L){this.passiveListeners.add(L)}removePassiveListener(L){this.passiveListeners.delete(L)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(L){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(L)),super.onEvent(L)}initialized(){var L=this;return(0,d.Z)(function*(){yield L.initPromise})()}}function Le(F){return le.apply(this,arguments)}function le(){return(le=(0,d.Z)(function*(F){const L=yield ot()._get(qt(F));return L&&(yield ot()._remove(qt(F))),L})).apply(this,arguments)}function Dt(){const F=[],L="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<De;R++){const Z=Math.floor(Math.random()*L.length);F.push(L.charAt(Z))}return F.join("")}function ot(){return(0,O.aC)(O.b)}function qt(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function Ei(F){if(!F?.includes("?"))return{};const[L,...R]=F.split("?");return(0,re.zd)(R.join("?"))}const ue=class ps{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var R=this;return(0,d.Z)(function*(){const Z=L._key();let Ee=R.eventManagers.get(Z);return Ee||(Ee=new Te(L),R.eventManagers.set(Z,Ee),R.attachCallbackListeners(L,Ee)),Ee})()}_openPopup(L){(0,O.av)(L,"operation-not-supported-in-this-environment")}_openRedirect(L,R,Z,Ee){var rt=this;return(0,d.Z)(function*(){!function be(F){var L,R,Z,Ee,rt,St,It,Zt,Mt,Dn;const Ht=ve();(0,O.aA)("function"==typeof(null===(L=Ht?.universalLinks)||void 0===L?void 0:L.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(R=Ht?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(rt=null===(Ee=null===(Z=Ht?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===rt?void 0:rt.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Zt=null===(It=null===(St=Ht?.cordova)||void 0===St?void 0:St.plugins)||void 0===It?void 0:It.browsertab)||void 0===Zt?void 0:Zt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Dn=null===(Mt=Ht?.cordova)||void 0===Mt?void 0:Mt.InAppBrowser)||void 0===Dn?void 0:Dn.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(L);const St=yield rt._initialize(L);yield St.initialized(),St.resetRedirect(),(0,O.aG)(),yield rt._originValidation(L);const It=function Pe(F,L,R=null){return{type:L,eventId:R,urlResponse:null,sessionId:Dt(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(L,Z,Ee);yield function ze(F,L){return ot()._set(qt(F),L)}(L,It);const Zt=yield function q(F,L,R){return W.apply(this,arguments)}(L,It,R),Mt=yield function Se(F){const{cordova:L}=ve();return new Promise(R=>{L.plugins.browsertab.isAvailable(Z=>{let Ee=null;Z?L.plugins.browsertab.openUrl(F):Ee=L.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),R(Ee)})})}(Zt);return function qe(F,L,R){return at.apply(this,arguments)}(L,St,Mt)})()}_isIframeWebStorageSupported(L,R){throw new Error("Method not implemented.")}_originValidation(L){const R=L._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function ee(F){return He.apply(this,arguments)}(L)),this.originValidationPromises[R]}attachCallbackListeners(L,R){const{universalLinks:Z,handleOpenURL:Ee,BuildInfo:rt}=ve(),St=setTimeout((0,d.Z)(function*(){yield Le(L),R.onEvent(pe())}),500),It=function(){var Dn=(0,d.Z)(function*(Ht){clearTimeout(St);const Ii=yield Le(L);let Ss=null;Ii&&Ht?.url&&(Ss=function it(F,L){var R,Z;const Ee=function Ds(F){const L=Ei(F),R=L.link?decodeURIComponent(L.link):void 0,Z=Ei(R).link,Ee=L.deep_link_id?decodeURIComponent(L.deep_link_id):void 0;return Ei(Ee).link||Ee||Z||R||F}(L);if(Ee.includes("/__/auth/callback")){const rt=Ei(Ee),St=rt.firebaseError?function ht(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,It=null===(Z=null===(R=St?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Z?void 0:Z[1],Zt=It?(0,O.az)(It):null;return Zt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:Zt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:Ee,postBody:null}}return null}(Ii,Ht.url)),R.onEvent(Ss||pe())});return function(Ii){return Dn.apply(this,arguments)}}();typeof Z<"u"&&"function"==typeof Z.subscribe&&Z.subscribe(null,It);const Zt=Ee,Mt=`${rt.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var Dn=(0,d.Z)(function*(Ht){if(Ht.toLowerCase().startsWith(Mt)&&It({url:Ht}),"function"==typeof Zt)try{Zt(Ht)}catch(Ii){console.error(Ii)}});return function(Ht){return Dn.apply(this,arguments)}}()}};function pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}const Ve=1e3;function lt(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function hn(F=(0,re.z$)()){return!("file:"!==lt()&&"ionic:"!==lt()&&"capacitor:"!==lt()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function si(){try{const F=self.localStorage,L=O.aL();if(F)return F.setItem(L,"1"),F.removeItem(L),!function gn(F=(0,re.z$)()){return function sn(){return(0,re.w1)()&&11===document?.documentMode}()||function Mn(F=(0,re.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,re.hl)()}catch{return kn()&&(0,re.hl)()}return!1}function kn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function ut(){return"http:"===lt()||"https:"===lt()}()||(0,re.ru)()||hn())&&!function Et(){return(0,re.b$)()||(0,re.UG)()}()&&si()&&!kn()}function oi(){return hn()&&typeof document<"u"}function $n(){return($n=(0,d.Z)(function*(){return!!oi()&&new Promise(F=>{const L=setTimeout(()=>{F(!1)},Ve);document.addEventListener("deviceready",()=>{clearTimeout(L),F(!0)})})})).apply(this,arguments)}const Gn={LOCAL:"local",NONE:"none",SESSION:"session"},gs=O.aA,Qn="persistence";function Qi(F){return fn.apply(this,arguments)}function fn(){return(fn=(0,d.Z)(function*(F){yield F._initializationPromise;const L=ft(),R=O.aD(Qn,F.config.apiKey,F.name);L&&L.setItem(R,F._getPersistence())})).apply(this,arguments)}function ft(){var F;try{return(null===(F=function pt(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const Ft=O.aA;class Xn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(ue),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(L){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(L)})()}_openPopup(L,R,Z,Ee){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(L,R,Z,Ee)})()}_openRedirect(L,R,Z,Ee){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(L,R,Z,Ee)})()}_isIframeWebStorageSupported(L,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(L,R)}_originValidation(L){return this.assertedUnderlyingResolver._originValidation(L)}get _shouldInitProactively(){return oi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var L=this;return(0,d.Z)(function*(){if(L.underlyingResolver)return;const R=yield function xr(){return $n.apply(this,arguments)}();L.underlyingResolver=R?L.cordovaResolver:L.browserResolver})()}}function Pi(F){return F.unwrap()}function Xi(F){return Ci(F)}function Ci(F){const{_tokenResponse:L}=F instanceof re.ZR?F.customData:F;if(!L)return null;if(!(F instanceof re.ZR)&&"temporaryProof"in L&&"phoneNumber"in L)return O.P.credentialFromResult(F);const R=L.providerId;if(!R||R===O.p.PASSWORD)return null;let Z;switch(R){case O.p.GOOGLE:Z=O.V;break;case O.p.FACEBOOK:Z=O.U;break;case O.p.GITHUB:Z=O.W;break;case O.p.TWITTER:Z=O.Z;break;default:const{oauthIdToken:Ee,oauthAccessToken:rt,oauthTokenSecret:St,pendingToken:It,nonce:Zt}=L;return rt||St||Ee||It?It?R.startsWith("saml.")?O.aO._create(R,It):O.L._fromParams({providerId:R,signInMethod:R,pendingToken:It,idToken:Ee,accessToken:rt}):new O.X(R).credential({idToken:Ee,accessToken:rt,rawNonce:Zt}):null}return F instanceof re.ZR?Z.credentialFromError(F):Z.credentialFromResult(F)}function Xt(F,L){return L.catch(R=>{throw R instanceof re.ZR&&function qn(F,L){var R;const Z=null===(R=L.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===L?.code)L.resolver=new mr(F,O.aq(F,L));else if(Z){const Ee=Ci(L),rt=L;Ee&&(rt.credential=Ee,rt.tenantId=Z.tenantId||void 0,rt.email=Z.email||void 0,rt.phoneNumber=Z.phoneNumber||void 0)}}(F,R),R}).then(R=>{const Ee=R.user;return{operationType:R.operationType,credential:Xi(R),additionalUserInfo:O.ao(R),user:jt.getOrCreate(Ee)}})}function Er(F,L){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(F,L){const R=yield L;return{verificationId:R.verificationId,confirm:Z=>Xt(F,R.confirm(Z))}})).apply(this,arguments)}class mr{constructor(L,R){this.resolver=R,this.auth=function Wn(F){return F.wrapped()}(L)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(L){return Xt(Pi(this.auth),this.resolver.resolveSignIn(L))}}class jt{constructor(L){this._delegate=L,this.multiFactor=O.ar(L)}static getOrCreate(L){return jt.USER_MAP.has(L)||jt.USER_MAP.set(L,new jt(L)),jt.USER_MAP.get(L)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(L){return this._delegate.getIdTokenResult(L)}getIdToken(L){return this._delegate.getIdToken(L)}linkAndRetrieveDataWithCredential(L){return this.linkWithCredential(L)}linkWithCredential(L){var R=this;return(0,d.Z)(function*(){return Xt(R.auth,O.a0(R._delegate,L))})()}linkWithPhoneNumber(L,R){var Z=this;return(0,d.Z)(function*(){return Er(Z.auth,O.l(Z._delegate,L,R))})()}linkWithPopup(L){var R=this;return(0,d.Z)(function*(){return Xt(R.auth,O.d(R._delegate,L,Xn))})()}linkWithRedirect(L){var R=this;return(0,d.Z)(function*(){return yield Qi(O.aH(R.auth)),O.g(R._delegate,L,Xn)})()}reauthenticateAndRetrieveDataWithCredential(L){return this.reauthenticateWithCredential(L)}reauthenticateWithCredential(L){var R=this;return(0,d.Z)(function*(){return Xt(R.auth,O.a1(R._delegate,L))})()}reauthenticateWithPhoneNumber(L,R){return Er(this.auth,O.r(this._delegate,L,R))}reauthenticateWithPopup(L){return Xt(this.auth,O.e(this._delegate,L,Xn))}reauthenticateWithRedirect(L){var R=this;return(0,d.Z)(function*(){return yield Qi(O.aH(R.auth)),O.h(R._delegate,L,Xn)})()}sendEmailVerification(L){return O.ae(this._delegate,L)}unlink(L){var R=this;return(0,d.Z)(function*(){return yield O.an(R._delegate,L),R})()}updateEmail(L){return O.aj(this._delegate,L)}updatePassword(L){return O.ak(this._delegate,L)}updatePhoneNumber(L){return O.u(this._delegate,L)}updateProfile(L){return O.ai(this._delegate,L)}verifyBeforeUpdateEmail(L,R){return O.af(this._delegate,L,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jt.USER_MAP=new WeakMap;const Jn=O.aA;let Bn=(()=>{class F{constructor(R,Z){if(this.app=R,Z.isInitialized())return this._delegate=Z.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ee}=R.options;Jn(Ee,"invalid-api-key",{appName:R.name}),Jn(Ee,"invalid-api-key",{appName:R.name});const rt=typeof window<"u"?Xn:void 0;this._delegate=Z.initialize({options:{persistence:ei(Ee,R.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Z){O.I(this._delegate,R,Z)}applyActionCode(R){return O.a5(this._delegate,R)}checkActionCode(R){return O.a6(this._delegate,R)}confirmPasswordReset(R,Z){return O.a4(this._delegate,R,Z)}createUserWithEmailAndPassword(R,Z){var Ee=this;return(0,d.Z)(function*(){return Xt(Ee._delegate,O.a8(Ee._delegate,R,Z))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return O.ad(this._delegate,R)}isSignInWithEmailLink(R){return O.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,d.Z)(function*(){Jn(Ln(),R._delegate,"operation-not-supported-in-this-environment");const Z=yield O.j(R._delegate,Xn);return Z?Xt(R._delegate,Promise.resolve(Z)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function ye(F,L){(0,O.aH)(F)._logFramework(L)}(this._delegate,R)}onAuthStateChanged(R,Z,Ee){const{next:rt,error:St,complete:It}=Ni(R,Z,Ee);return this._delegate.onAuthStateChanged(rt,St,It)}onIdTokenChanged(R,Z,Ee){const{next:rt,error:St,complete:It}=Ni(R,Z,Ee);return this._delegate.onIdTokenChanged(rt,St,It)}sendSignInLinkToEmail(R,Z){return O.aa(this._delegate,R,Z)}sendPasswordResetEmail(R,Z){return O.a3(this._delegate,R,Z||void 0)}setPersistence(R){var Z=this;return(0,d.Z)(function*(){let Ee;switch(function Hi(F,L){gs(Object.values(Gn).includes(L),F,"invalid-persistence-type"),(0,re.b$)()?gs(L!==Gn.SESSION,F,"unsupported-persistence-type"):(0,re.UG)()?gs(L===Gn.NONE,F,"unsupported-persistence-type"):kn()?gs(L===Gn.NONE||L===Gn.LOCAL&&(0,re.hl)(),F,"unsupported-persistence-type"):gs(L===Gn.NONE||si(),F,"unsupported-persistence-type")}(Z._delegate,R),R){case Gn.SESSION:Ee=O.a;break;case Gn.LOCAL:Ee=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Gn.NONE:Ee=O.N;break;default:return O.av("argument-error",{appName:Z._delegate.name})}return Z._delegate.setPersistence(Ee)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Xt(this._delegate,O._(this._delegate))}signInWithCredential(R){return Xt(this._delegate,O.$(this._delegate,R))}signInWithCustomToken(R){return Xt(this._delegate,O.a2(this._delegate,R))}signInWithEmailAndPassword(R,Z){return Xt(this._delegate,O.a9(this._delegate,R,Z))}signInWithEmailLink(R,Z){return Xt(this._delegate,O.ac(this._delegate,R,Z))}signInWithPhoneNumber(R,Z){return Er(this._delegate,O.s(this._delegate,R,Z))}signInWithPopup(R){var Z=this;return(0,d.Z)(function*(){return Jn(Ln(),Z._delegate,"operation-not-supported-in-this-environment"),Xt(Z._delegate,O.c(Z._delegate,R,Xn))})()}signInWithRedirect(R){var Z=this;return(0,d.Z)(function*(){return Jn(Ln(),Z._delegate,"operation-not-supported-in-this-environment"),yield Qi(Z._delegate),O.f(Z._delegate,R,Xn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return O.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Gn,F})();function Ni(F,L,R){let Z=F;"function"!=typeof F&&({next:Z,error:L,complete:R}=F);const Ee=Z;return{next:St=>Ee(St&&jt.getOrCreate(St)),error:L,complete:R}}function ei(F,L){const R=function Kt(F,L){const R=ft();if(!R)return[];const Z=O.aD(Qn,F,L);switch(R.getItem(Z)){case Gn.NONE:return[O.N];case Gn.LOCAL:return[O.i,O.a];case Gn.SESSION:return[O.a];default:return[]}}(F,L);if(typeof self<"u"&&!R.includes(O.i)&&R.push(O.i),typeof window<"u")for(const Z of[O.b,O.a])R.includes(Z)||R.push(Z);return R.includes(O.N)||R.push(O.N),R}class Ji{constructor(){this.providerId="phone",this._delegate=new O.P(Pi($.Z.auth()))}static credential(L,R){return O.P.credential(L,R)}verifyPhoneNumber(L,R){return this._delegate.verifyPhoneNumber(L,R)}unwrap(){return this._delegate}}Ji.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ji.PROVIDER_ID=O.P.PROVIDER_ID;const zi=O.aA;class er{constructor(L,R,Z=$.Z.app()){var Ee;zi(null===(Ee=Z.options)||void 0===Ee?void 0:Ee.apiKey,"invalid-api-key",{appName:Z.name}),this._delegate=new O.R(L,R,Z.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function z(F){F.INTERNAL.registerComponent(new xe.wA("auth-compat",L=>{const R=L.getProvider("app-compat").getImmediate(),Z=L.getProvider("auth");return new Bn(R,Z)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Ji,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:er,TwitterAuthProvider:O.Z,Auth:Bn,AuthCredential:O.J,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(wt,Me,V)=>{function d(O,re,de,oe,xe,ve,we){try{var q=O[ve](we),W=q.value}catch(ee){return void de(ee)}q.done?re(W):Promise.resolve(W).then(oe,xe)}function $(O){return function(){var re=this,de=arguments;return new Promise(function(oe,xe){var ve=O.apply(re,de);function we(W){d(ve,oe,xe,we,q,"next",W)}function q(W){d(ve,oe,xe,we,q,"throw",W)}we(void 0)})}}V.d(Me,{Z:()=>$})},7582:(wt,Me,V)=>{function re(ue,pe){var ye={};for(var ne in ue)Object.prototype.hasOwnProperty.call(ue,ne)&&pe.indexOf(ne)<0&&(ye[ne]=ue[ne]);if(null!=ue&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(ne=Object.getOwnPropertySymbols(ue);Ae<ne.length;Ae++)pe.indexOf(ne[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ue,ne[Ae])&&(ye[ne[Ae]]=ue[ne[Ae]])}return ye}function ee(ue,pe,ye,ne){return new(ye||(ye=Promise))(function(Ve,lt){function ut(sn){try{Et(ne.next(sn))}catch(Mn){lt(Mn)}}function hn(sn){try{Et(ne.throw(sn))}catch(Mn){lt(Mn)}}function Et(sn){sn.done?Ve(sn.value):function Ae(Ve){return Ve instanceof ye?Ve:new ye(function(lt){lt(Ve)})}(sn.value).then(ut,hn)}Et((ne=ne.apply(ue,pe||[])).next())})}function De(ue){return this instanceof De?(this.v=ue,this):new De(ue)}function Te(ue,pe,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ne=ye.apply(ue,pe||[]),Ve=[];return Ae={},lt("next"),lt("throw"),lt("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function lt(gn){ne[gn]&&(Ae[gn]=function(si){return new Promise(function(kn,Ln){Ve.push([gn,si,kn,Ln])>1||ut(gn,si)})})}function ut(gn,si){try{!function hn(gn){gn.value instanceof De?Promise.resolve(gn.value.v).then(Et,sn):Mn(Ve[0][2],gn)}(ne[gn](si))}catch(kn){Mn(Ve[0][3],kn)}}function Et(gn){ut("next",gn)}function sn(gn){ut("throw",gn)}function Mn(gn,si){gn(si),Ve.shift(),Ve.length&&ut(Ve[0][0],Ve[0][1])}}function ze(ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,pe=ue[Symbol.asyncIterator];return pe?pe.call(ue):(ue=function at(ue){var pe="function"==typeof Symbol&&Symbol.iterator,ye=pe&&ue[pe],ne=0;if(ye)return ye.call(ue);if(ue&&"number"==typeof ue.length)return{next:function(){return ue&&ne>=ue.length&&(ue=void 0),{value:ue&&ue[ne++],done:!ue}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ue),ye={},ne("next"),ne("throw"),ne("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function ne(Ve){ye[Ve]=ue[Ve]&&function(lt){return new Promise(function(ut,hn){!function Ae(Ve,lt,ut,hn){Promise.resolve(hn).then(function(Et){Ve({value:Et,done:ut})},lt)}(ut,hn,(lt=ue[Ve](lt)).done,lt.value)})}}}V.d(Me,{FC:()=>Te,KL:()=>ze,_T:()=>re,mG:()=>ee,qq:()=>De}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=9483)}]);